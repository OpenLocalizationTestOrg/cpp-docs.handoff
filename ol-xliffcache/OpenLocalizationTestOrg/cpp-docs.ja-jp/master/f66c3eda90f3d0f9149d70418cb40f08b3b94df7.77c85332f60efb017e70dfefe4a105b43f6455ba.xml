{"nodes":[{"pos":[12,55],"content":"Linker Tools Error LNK2004 | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Linker Tools Error LNK2004 | Microsoft Docs","pos":[0,43]}]},{"content":"Linker Tools Error LNK2004","pos":[607,633]},{"content":"gp relative fixup overflow to 'target'; short section 'section' is too large or out of range.","pos":[634,727]},{"content":"The section was too large.","pos":[734,760]},{"content":"To resolve this error, reduce the size of the short section, either by explicitly putting data in the long sections via #pragma section(\".sectionname\", read, write, long) and using <ph id=\"ph1\">`__declspec(allocate(\".sectionname\"))`</ph> on data definitions and declarations.","pos":[767,1024],"source":"To resolve this error, reduce the size of the short section, either by explicitly putting data in the long sections via #pragma section(\".sectionname\", read, write, long) and using `__declspec(allocate(\".sectionname\"))` on data definitions and declarations."},{"content":"For example,","pos":[1026,1038]},{"content":"You can also move logically-grouped data into its own structure that will be a collection of data greater than 8 bytes, which the compiler will allocate in a long data section.","pos":[1310,1486]},{"content":"For example,","pos":[1488,1500]},{"pos":[1763,1811],"content":"This error is followed by fatal error <ph id=\"ph1\">`LNK1165`</ph>.","source":"This error is followed by fatal error `LNK1165`."}],"content":"---\ntitle: \"Linker Tools Error LNK2004 | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"error-reference\"\nf1_keywords: \n  - \"LNK2004\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"LNK2004\"\nms.assetid: 07645371-e67b-4a2c-b0e0-dde24c94ef7e\ncaps.latest.revision: 7\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Linker Tools Error LNK2004\ngp relative fixup overflow to 'target'; short section 'section' is too large or out of range.  \n  \n The section was too large.  \n  \n To resolve this error, reduce the size of the short section, either by explicitly putting data in the long sections via #pragma section(\".sectionname\", read, write, long) and using `__declspec(allocate(\".sectionname\"))` on data definitions and declarations.  For example,  \n  \n```  \n#pragma section(\".data$mylong\", read, write, long)  \n__declspec(allocate(\".data$mylong\"))  \nchar    rg0[1] = { 1 };  \nchar    rg1[2] = { 1 };  \nchar    rg2[4] = { 1 };  \nchar    rg3[8] = { 1 };  \nchar    rg4[16] = { 1 };  \nchar    rg5[32] = { 1 };  \n```  \n  \n You can also move logically-grouped data into its own structure that will be a collection of data greater than 8 bytes, which the compiler will allocate in a long data section.  For example,  \n  \n```  \n// from this...  \nint     w1  = 23;  \nint     w2 = 46;  \nint     w3 = 23*3;  \nint     w4 = 23*4;  \n  \n// to this...  \nstruct X {  \n    int     w1;  \n    int     w2;  \n    int     w3;  \n    int     w4;  \n} x  = { 23, 23*2, 23*3, 23*4 };  \n  \n```  \n  \n This error is followed by fatal error `LNK1165`."}