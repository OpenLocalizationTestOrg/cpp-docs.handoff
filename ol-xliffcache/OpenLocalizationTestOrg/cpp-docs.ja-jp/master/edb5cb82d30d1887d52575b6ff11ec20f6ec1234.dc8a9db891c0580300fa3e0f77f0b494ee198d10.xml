{"nodes":[{"pos":[12,63],"content":"-Gs (Control Stack Checking Calls) | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"-Gs (Control Stack Checking Calls) | Microsoft Docs","pos":[0,51]}]},{"content":"/Gs (Control Stack Checking Calls)","pos":[786,820]},{"content":"Controls stack probes.","pos":[821,843]},{"content":"Syntax","pos":[852,858]},{"content":"Arguments","pos":[894,903]},{"content":"(Optional) The number of bytes that local variables can occupy before a stack probe is initiated.","pos":[917,1014]},{"content":"If the <bpt id=\"p1\">**</bpt>/Gs<ept id=\"p1\">**</ept> option is specified without a <ph id=\"ph1\">`size`</ph> argument, it is the same as specifying <bpt id=\"p2\">**</bpt>/Gs0<ept id=\"p2\">**</ept>,","pos":[1015,1115],"source":" If the **/Gs** option is specified without a `size` argument, it is the same as specifying **/Gs0**,"},{"content":"Remarks","pos":[1124,1131]},{"content":"A stack probe is a sequence of code that the compiler inserts into every function call.","pos":[1135,1222]},{"content":"When initiated, a stack probe reaches benignly into memory by the amount of space that is required to store the function's local variables.","pos":[1223,1362]},{"content":"If a function requires more than <ph id=\"ph1\">`size`</ph> bytes of stack space for local variables, its stack probe is initiated.","pos":[1369,1480],"source":"If a function requires more than `size` bytes of stack space for local variables, its stack probe is initiated."},{"content":"By default, the compiler generates code that initiates a stack probe when a function requires more than one page of stack space.","pos":[1481,1609]},{"content":"This is equivalent to a compiler option of <bpt id=\"p1\">**</bpt>/Gs4096<ept id=\"p1\">**</ept> for x86, <ph id=\"ph1\">[!INCLUDE[vcprx64](../../assembler/inline/includes/vcprx64_md.md)]</ph>, and ARM platforms.","pos":[1610,1760],"source":" This is equivalent to a compiler option of **/Gs4096** for x86, [!INCLUDE[vcprx64](../../assembler/inline/includes/vcprx64_md.md)], and ARM platforms."},{"content":"This value allows an application and the Windows memory manager to increase the amount of memory committed to the program stack dynamically at run time.","pos":[1761,1913]},{"pos":[1921,2153],"content":"[!NOTE]\n The default value of **/Gs4096** allows the program stack of applications for Windows to grow correctly at run time. We recommend that you do not change the default value unless you know exactly why you have to change it.","leadings":["","> "],"nodes":[{"content":" The default value of **/Gs4096** allows the program stack of applications for Windows to grow correctly at run time. We recommend that you do not change the default value unless you know exactly why you have to change it.","pos":[8,230],"nodes":[{"content":"The default value of <bpt id=\"p1\">**</bpt>/Gs4096<ept id=\"p1\">**</ept> allows the program stack of applications for Windows to grow correctly at run time.","pos":[1,117],"source":" The default value of **/Gs4096** allows the program stack of applications for Windows to grow correctly at run time."},{"content":"We recommend that you do not change the default value unless you know exactly why you have to change it.","pos":[118,222]}]}]},{"content":"Some programs—for example, virtual device drivers—do not require this default stack-growth mechanism.","pos":[2160,2261]},{"content":"In such cases, the stack probes are not necessary and you can stop the compiler from generating them by setting <ph id=\"ph1\">`size`</ph> to a value that is larger than any function will require for local variable storage.","pos":[2262,2465],"source":" In such cases, the stack probes are not necessary and you can stop the compiler from generating them by setting `size` to a value that is larger than any function will require for local variable storage."},{"content":"No space is allowed between <bpt id=\"p1\">**</bpt>/Gs<ept id=\"p1\">**</ept> and <ph id=\"ph1\">`size`</ph>.","pos":[2466,2513],"source":" No space is allowed between **/Gs** and `size`."},{"content":"<bpt id=\"p1\">**</bpt>/Gs0<ept id=\"p1\">**</ept> activates stack probes for every function call that requires storage for local variables.","pos":[2520,2618],"source":"**/Gs0** activates stack probes for every function call that requires storage for local variables."},{"content":"This can have a negative impact on performance.","pos":[2619,2666]},{"content":"You can turn stack probes on or off by using <bpt id=\"p1\">[</bpt>check_stack<ept id=\"p1\">](../../preprocessor/check-stack.md)</ept>.","pos":[2673,2767],"source":"You can turn stack probes on or off by using [check_stack](../../preprocessor/check-stack.md)."},{"content":"<bpt id=\"p1\">**</bpt>/Gs<ept id=\"p1\">**</ept> and the <ph id=\"ph1\">`check_stack`</ph> pragma have no effect on standard C library routines; they affect only the functions you compile.","pos":[2768,2895],"source":"**/Gs** and the `check_stack` pragma have no effect on standard C library routines; they affect only the functions you compile."},{"content":"To set this compiler option in the Visual Studio development environment","pos":[2905,2977]},{"content":"Open the project's <bpt id=\"p1\">**</bpt>Property Pages<ept id=\"p1\">**</ept> dialog box.","pos":[2987,3036],"source":"Open the project's **Property Pages** dialog box."},{"content":"For details, see <bpt id=\"p1\">[</bpt>Working with Project Properties<ept id=\"p1\">](../../ide/working-with-project-properties.md)</ept>.","pos":[3037,3134],"source":" For details, see [Working with Project Properties](../../ide/working-with-project-properties.md)."},{"pos":[3144,3172],"content":"Select the <bpt id=\"p1\">**</bpt>C/C++<ept id=\"p1\">**</ept> folder.","source":"Select the **C/C++** folder."},{"pos":[3182,3224],"content":"Select the <bpt id=\"p1\">**</bpt>Command Line<ept id=\"p1\">**</ept> property page.","source":"Select the **Command Line** property page."},{"pos":[3234,3293],"content":"Type the compiler option in the <bpt id=\"p1\">**</bpt>Additional Options<ept id=\"p1\">**</ept> box.","source":"Type the compiler option in the **Additional Options** box."},{"content":"To set this compiler option programmatically","pos":[3303,3347]},{"content":"See &lt;xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.AdditionalOptions%2A&gt;.","pos":[3357,3445],"source":"See <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.AdditionalOptions%2A>."},{"content":"See Also","pos":[3454,3462]},{"content":"Compiler Options","pos":[3467,3483]},{"content":"Setting Compiler Options","pos":[3533,3557]}],"content":"---\ntitle: \"-Gs (Control Stack Checking Calls) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"/GS\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"disabling stack probes\"\n  - \"GS compiler option [C++]\"\n  - \"/GS compiler option [C++]\"\n  - \"stack, stack probes\"\n  - \"stack probes\"\n  - \"-GS compiler option [C++]\"\n  - \"stack checking calls\"\nms.assetid: 40daed7c-f942-4085-b872-01e12b37729e\ncaps.latest.revision: 17\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# /Gs (Control Stack Checking Calls)\nControls stack probes.  \n  \n## Syntax  \n  \n```  \n/Gs[size]  \n```  \n  \n## Arguments  \n `size`  \n (Optional) The number of bytes that local variables can occupy before a stack probe is initiated. If the **/Gs** option is specified without a `size` argument, it is the same as specifying **/Gs0**,  \n  \n## Remarks  \n A stack probe is a sequence of code that the compiler inserts into every function call. When initiated, a stack probe reaches benignly into memory by the amount of space that is required to store the function's local variables.  \n  \n If a function requires more than `size` bytes of stack space for local variables, its stack probe is initiated. By default, the compiler generates code that initiates a stack probe when a function requires more than one page of stack space. This is equivalent to a compiler option of **/Gs4096** for x86, [!INCLUDE[vcprx64](../../assembler/inline/includes/vcprx64_md.md)], and ARM platforms. This value allows an application and the Windows memory manager to increase the amount of memory committed to the program stack dynamically at run time.  \n  \n> [!NOTE]\n>  The default value of **/Gs4096** allows the program stack of applications for Windows to grow correctly at run time. We recommend that you do not change the default value unless you know exactly why you have to change it.  \n  \n Some programs—for example, virtual device drivers—do not require this default stack-growth mechanism. In such cases, the stack probes are not necessary and you can stop the compiler from generating them by setting `size` to a value that is larger than any function will require for local variable storage. No space is allowed between **/Gs** and `size`.  \n  \n **/Gs0** activates stack probes for every function call that requires storage for local variables. This can have a negative impact on performance.  \n  \n You can turn stack probes on or off by using [check_stack](../../preprocessor/check-stack.md). **/Gs** and the `check_stack` pragma have no effect on standard C library routines; they affect only the functions you compile.  \n  \n### To set this compiler option in the Visual Studio development environment  \n  \n1.  Open the project's **Property Pages** dialog box. For details, see [Working with Project Properties](../../ide/working-with-project-properties.md).  \n  \n2.  Select the **C/C++** folder.  \n  \n3.  Select the **Command Line** property page.  \n  \n4.  Type the compiler option in the **Additional Options** box.  \n  \n### To set this compiler option programmatically  \n  \n-   See <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.AdditionalOptions%2A>.  \n  \n## See Also  \n [Compiler Options](../../build/reference/compiler-options.md)   \n [Setting Compiler Options](../../build/reference/setting-compiler-options.md)"}