{"nodes":[{"pos":[12,55],"content":"Function Inlining Problems | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Function Inlining Problems | Microsoft Docs","pos":[0,43]}]},{"content":"Function Inlining Problems","pos":[756,782]},{"content":"If you are using function inlining, you must:","pos":[783,828]},{"content":"Have the inline functions implemented in the header file you include.","pos":[838,907]},{"content":"Have inlining turned ON in the header file.","pos":[917,960]},{"content":"And then,","pos":[1273,1282]},{"content":"If you are using the <ph id=\"ph1\">`#pragma inline_depth`</ph> compiler directive, make sure you have a value of 2 or greater set.","pos":[1549,1660],"source":"If you are using the `#pragma inline_depth` compiler directive, make sure you have a value of 2 or greater set."},{"content":"A value of zero will turn off inlining.","pos":[1661,1700]},{"content":"Also make sure you are using the <bpt id=\"p1\">**</bpt>/Ob1<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>/Ob2<ept id=\"p2\">**</ept> compiler options.","pos":[1701,1772],"source":" Also make sure you are using the **/Ob1** or **/Ob2** compiler options."},{"content":"Mixing inline and non-inline compile options on different modules can sometimes cause problems.","pos":[1779,1874]},{"content":"If a C++ library is created with function inlining turned on (<bpt id=\"p1\">[</bpt>/Ob1<ept id=\"p1\">](../../build/reference/ob-inline-function-expansion.md)</ept> or <bpt id=\"p2\">[</bpt>/Ob2<ept id=\"p2\">](../../build/reference/ob-inline-function-expansion.md)</ept>) but the corresponding header file describing the functions has inlining turned off (no option), you will get error LNK2001.","pos":[1875,2188],"source":" If a C++ library is created with function inlining turned on ([/Ob1](../../build/reference/ob-inline-function-expansion.md) or [/Ob2](../../build/reference/ob-inline-function-expansion.md)) but the corresponding header file describing the functions has inlining turned off (no option), you will get error LNK2001."},{"content":"The functions do not get inlined into the code from the header file, but since they are not in the library file there is no address to resolve the reference.","pos":[2189,2346]},{"content":"Similarly, a project that uses function inlining yet defines the functions in a .cpp file rather than in the header file will also get LNK2019.","pos":[2353,2496]},{"content":"The header file is included everywhere deemed appropriate, but the functions are only inlined when the .cpp file passes through the compiler; therefore, the linker sees the functions as unresolved externals when used in other modules.","pos":[2497,2731]},{"content":"and then,","pos":[2834,2843]},{"content":"and then,","pos":[2988,2997]},{"content":"See Also","pos":[3288,3296]},{"content":"Linker Tools Error LNK2019","pos":[3301,3327]}],"content":"---\ntitle: \"Function Inlining Problems | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"error-reference\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"/Ob1 C++ compiler option\"\n  - \"inline functions, problems\"\n  - \"-Ob1 C++ compiler option\"\n  - \"/Ob2 C++ compiler option\"\n  - \"-Ob2 C++ compiler option\"\n  - \"function inlining problems\"\nms.assetid: 65d59943-4b3c-4a43-aeb6-dccbf7686740\ncaps.latest.revision: 12\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Function Inlining Problems\nIf you are using function inlining, you must:  \n  \n-   Have the inline functions implemented in the header file you include.  \n  \n-   Have inlining turned ON in the header file.  \n  \n```  \n// LNK2019_function_inline.cpp  \n// compile with: /c   \n// post-build command: lib LNK2019_function_inline.obj  \n#include <stdio.h>  \nstruct _load_config_used {  \n   void Test();  \n   void Test2() { printf(\"in Test2\\n\"); }  \n};  \n  \nvoid _load_config_used::Test() { printf(\"in Test\\n\"); }  \n```  \n  \n And then,  \n  \n```  \n// LNK2019_function_inline_2.cpp  \n// compile with: LNK2019_function_inline.lib  \nstruct _load_config_used {  \n   void Test();  \n   void Test2();  \n};  \n  \nint main() {  \n   _load_config_used x;  \n   x.Test();  \n   x.Test2();   // LNK2019  \n}  \n```  \n  \n If you are using the `#pragma inline_depth` compiler directive, make sure you have a value of 2 or greater set. A value of zero will turn off inlining. Also make sure you are using the **/Ob1** or **/Ob2** compiler options.  \n  \n Mixing inline and non-inline compile options on different modules can sometimes cause problems. If a C++ library is created with function inlining turned on ([/Ob1](../../build/reference/ob-inline-function-expansion.md) or [/Ob2](../../build/reference/ob-inline-function-expansion.md)) but the corresponding header file describing the functions has inlining turned off (no option), you will get error LNK2001. The functions do not get inlined into the code from the header file, but since they are not in the library file there is no address to resolve the reference.  \n  \n Similarly, a project that uses function inlining yet defines the functions in a .cpp file rather than in the header file will also get LNK2019. The header file is included everywhere deemed appropriate, but the functions are only inlined when the .cpp file passes through the compiler; therefore, the linker sees the functions as unresolved externals when used in other modules.  \n  \n```  \n// LNK2019_FIP.h  \nstruct testclass {  \n   void PublicStatMemFunc1(void);  \n};  \n```  \n  \n and then,  \n  \n```  \n// LNK2019_FIP.cpp  \n// compile with: /c  \n#include \"LNK2019_FIP.h\"  \ninline void testclass::PublicStatMemFunc1(void) {}  \n```  \n  \n and then,  \n  \n```  \n// LNK2019_FIP_2.cpp  \n// compile with: LNK2019_FIP.cpp  \n// LNK2019 expected  \n#include \"LNK2019_FIP.h\"  \nint main() {  \n   testclass testclsObject;  \n  \n   // module cannot see the implementation of PublicStatMemFunc1  \n   testclsObject.PublicStatMemFunc1();  \n}  \n```  \n  \n## See Also  \n [Linker Tools Error LNK2019](../../error-messages/tool-errors/linker-tools-error-lnk2019.md)"}