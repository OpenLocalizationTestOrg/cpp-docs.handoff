{"nodes":[{"pos":[12,67],"content":"Handlers for Standard Windows Messages | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Handlers for Standard Windows Messages | Microsoft Docs","pos":[0,55]}]},{"content":"Handlers for Standard Windows Messages","pos":[804,842]},{"content":"Default handlers for standard Windows messages (<bpt id=\"p1\">**</bpt>WM_<ept id=\"p1\">**</ept>) are predefined in class <ph id=\"ph1\">`CWnd`</ph>.","pos":[843,931],"source":"Default handlers for standard Windows messages (**WM_**) are predefined in class `CWnd`."},{"content":"The class library bases names for these handlers on the message name.","pos":[932,1001]},{"content":"For example, the handler for the <ph id=\"ph1\">`WM_PAINT`</ph> message is declared in <ph id=\"ph2\">`CWnd`</ph> as:","pos":[1002,1079],"source":" For example, the handler for the `WM_PAINT` message is declared in `CWnd` as:"},{"content":"The <bpt id=\"p1\">**</bpt>afx_msg<ept id=\"p1\">**</ept> keyword suggests the effect of the C++ <bpt id=\"p2\">**</bpt>virtual<ept id=\"p2\">**</ept> keyword by distinguishing the handlers from other <ph id=\"ph1\">`CWnd`</ph> member functions.","pos":[1118,1259],"source":"The **afx_msg** keyword suggests the effect of the C++ **virtual** keyword by distinguishing the handlers from other `CWnd` member functions."},{"content":"Note, however, that these functions are not actually virtual; they are instead implemented through message maps.","pos":[1260,1372]},{"content":"Message maps depend solely on standard preprocessor macros, not on any extensions to the C++ language.","pos":[1373,1475]},{"content":"The <bpt id=\"p1\">**</bpt>afx_msg<ept id=\"p1\">**</ept> keyword resolves to white space after preprocessing.","pos":[1476,1544],"source":" The **afx_msg** keyword resolves to white space after preprocessing."},{"content":"To override a handler defined in a base class, simply define a function with the same prototype in your derived class and to make a message-map entry for the handler.","pos":[1551,1717]},{"content":"Your handler \"overrides\" any handler of the same name in any of your class's base classes.","pos":[1718,1808]},{"content":"In some cases, your handler should call the overridden handler in the base class so the base class(es) and Windows can operate on the message.","pos":[1815,1957]},{"content":"Where you call the base-class handler in your override depends on the circumstances.","pos":[1958,2042]},{"content":"Sometimes you must call the base-class handler first and sometimes last.","pos":[2043,2115]},{"content":"Sometimes you call the base-class handler conditionally, if you choose not to handle the message yourself.","pos":[2116,2222]},{"content":"Sometimes you should call the base-class handler, then conditionally execute your own handler code, depending on the value or state returned by the base-class handler.","pos":[2223,2390]},{"pos":[2398,2785],"content":"[!CAUTION]\n It is not safe to modify the arguments passed into a handler if you intend to pass them to a base-class handler. For example, you might be tempted to modify the `nChar` argument of the `OnChar` handler (to convert to uppercase, for example). This behavior is fairly obscure, but if you need to accomplish this effect, use the `CWnd` member function **SendMessage** instead.","leadings":["","> "],"nodes":[{"content":" It is not safe to modify the arguments passed into a handler if you intend to pass them to a base-class handler. For example, you might be tempted to modify the `nChar` argument of the `OnChar` handler (to convert to uppercase, for example). This behavior is fairly obscure, but if you need to accomplish this effect, use the `CWnd` member function **SendMessage** instead.","pos":[11,385],"nodes":[{"content":"It is not safe to modify the arguments passed into a handler if you intend to pass them to a base-class handler.","pos":[1,113]},{"content":"For example, you might be tempted to modify the <ph id=\"ph1\">`nChar`</ph> argument of the <ph id=\"ph2\">`OnChar`</ph> handler (to convert to uppercase, for example).","pos":[114,242],"source":" For example, you might be tempted to modify the `nChar` argument of the `OnChar` handler (to convert to uppercase, for example)."},{"content":"This behavior is fairly obscure, but if you need to accomplish this effect, use the <ph id=\"ph1\">`CWnd`</ph> member function <bpt id=\"p1\">**</bpt>SendMessage<ept id=\"p1\">**</ept> instead.","pos":[243,374],"source":" This behavior is fairly obscure, but if you need to accomplish this effect, use the `CWnd` member function **SendMessage** instead."}]}]},{"content":"How do you determine the proper way to override a given message When the Properties window writes the skeleton of the handler function for a given message — an <ph id=\"ph1\">`OnCreate`</ph> handler for <ph id=\"ph2\">`WM_CREATE`</ph>, for example — it sketches in the form of the recommended overridden member function.","pos":[2792,3072],"source":"How do you determine the proper way to override a given message When the Properties window writes the skeleton of the handler function for a given message — an `OnCreate` handler for `WM_CREATE`, for example — it sketches in the form of the recommended overridden member function."},{"content":"The following example recommends that the handler first call the base-class handler and proceed only on condition that it does not return –1.","pos":[3073,3214]},{"pos":[3232,3256],"content":"NVC_MFCMessageHandling#3"},{"content":"By convention, the names of these handlers begin with the prefix \"On.\"","pos":[3334,3404]},{"content":"Some of these handlers take no arguments, while others take several.","pos":[3405,3473]},{"content":"Some also have a return type other than <ph id=\"ph1\">`void`</ph>.","pos":[3474,3521],"source":" Some also have a return type other than `void`."},{"content":"The default handlers for all <bpt id=\"p1\">**</bpt>WM_<ept id=\"p1\">**</ept> messages are documented in the <bpt id=\"p2\">*</bpt>MFC Reference<ept id=\"p2\">*</ept> as member functions of class <ph id=\"ph1\">`CWnd`</ph> whose names begin with \"On.\"","pos":[3522,3670],"source":" The default handlers for all **WM_** messages are documented in the *MFC Reference* as member functions of class `CWnd` whose names begin with \"On.\""},{"content":"The member function declarations in <ph id=\"ph1\">`CWnd`</ph> are prefixed with <bpt id=\"p1\">**</bpt>afx_msg<ept id=\"p1\">**</ept>.","pos":[3671,3744],"source":" The member function declarations in `CWnd` are prefixed with **afx_msg**."},{"content":"See Also","pos":[3753,3761]},{"content":"Declaring Message Handler Functions","pos":[3766,3801]}],"content":"---\ntitle: \"Handlers for Standard Windows Messages | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"afx_msg\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"Windows messages [C++], handlers\"\n  - \"message handling [C++], Windows message handlers\"\n  - \"handler functions, standard Windows messages\"\n  - \"functions [C++], handler\"\n  - \"messages [C++], Windows\"\nms.assetid: 19412a8b-2c38-4502-81da-13c823c7e36c\ncaps.latest.revision: 10\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Handlers for Standard Windows Messages\nDefault handlers for standard Windows messages (**WM_**) are predefined in class `CWnd`. The class library bases names for these handlers on the message name. For example, the handler for the `WM_PAINT` message is declared in `CWnd` as:  \n  \n `afx_msg void OnPaint();`  \n  \n The **afx_msg** keyword suggests the effect of the C++ **virtual** keyword by distinguishing the handlers from other `CWnd` member functions. Note, however, that these functions are not actually virtual; they are instead implemented through message maps. Message maps depend solely on standard preprocessor macros, not on any extensions to the C++ language. The **afx_msg** keyword resolves to white space after preprocessing.  \n  \n To override a handler defined in a base class, simply define a function with the same prototype in your derived class and to make a message-map entry for the handler. Your handler \"overrides\" any handler of the same name in any of your class's base classes.  \n  \n In some cases, your handler should call the overridden handler in the base class so the base class(es) and Windows can operate on the message. Where you call the base-class handler in your override depends on the circumstances. Sometimes you must call the base-class handler first and sometimes last. Sometimes you call the base-class handler conditionally, if you choose not to handle the message yourself. Sometimes you should call the base-class handler, then conditionally execute your own handler code, depending on the value or state returned by the base-class handler.  \n  \n> [!CAUTION]\n>  It is not safe to modify the arguments passed into a handler if you intend to pass them to a base-class handler. For example, you might be tempted to modify the `nChar` argument of the `OnChar` handler (to convert to uppercase, for example). This behavior is fairly obscure, but if you need to accomplish this effect, use the `CWnd` member function **SendMessage** instead.  \n  \n How do you determine the proper way to override a given message When the Properties window writes the skeleton of the handler function for a given message — an `OnCreate` handler for `WM_CREATE`, for example — it sketches in the form of the recommended overridden member function. The following example recommends that the handler first call the base-class handler and proceed only on condition that it does not return –1.  \n  \n [!code-cpp[NVC_MFCMessageHandling#3](../mfc/codesnippet/cpp/handlers-for-standard-windows-messages_1.cpp)]  \n  \n By convention, the names of these handlers begin with the prefix \"On.\" Some of these handlers take no arguments, while others take several. Some also have a return type other than `void`. The default handlers for all **WM_** messages are documented in the *MFC Reference* as member functions of class `CWnd` whose names begin with \"On.\" The member function declarations in `CWnd` are prefixed with **afx_msg**.  \n  \n## See Also  \n [Declaring Message Handler Functions](../mfc/declaring-message-handler-functions.md)\n"}