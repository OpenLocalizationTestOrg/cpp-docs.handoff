{"nodes":[{"pos":[12,38],"content":"bsearch_s | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"bsearch_s | Microsoft Docs","pos":[0,26]}]},{"content":"bsearch_s","pos":[975,984]},{"content":"Performs a binary search of a sorted array.","pos":[985,1028]},{"content":"This is version of <bpt id=\"p1\">[</bpt>bsearch<ept id=\"p1\">](../../c-runtime-library/reference/bsearch.md)</ept> with security enhancements as described in <bpt id=\"p2\">[</bpt>Security Features in the CRT<ept id=\"p2\">](../../c-runtime-library/security-features-in-the-crt.md)</ept>.","pos":[1029,1235],"source":" This is version of [bsearch](../../c-runtime-library/reference/bsearch.md) with security enhancements as described in [Security Features in the CRT](../../c-runtime-library/security-features-in-the-crt.md)."},{"content":"Syntax","pos":[1244,1250]},{"content":"Parameters","pos":[1479,1489]},{"content":"Object to search for.","pos":[1502,1523]},{"content":"Pointer to base of search data.","pos":[1540,1571]},{"content":"Number of elements.","pos":[1587,1606]},{"content":"Width of elements.","pos":[1624,1642]},{"content":"Callback function that compares two elements.","pos":[1662,1707]},{"content":"The first argument is the <ph id=\"ph1\">`context`</ph> pointer.","pos":[1708,1752],"source":" The first argument is the `context` pointer."},{"content":"The second argument is a pointer to the <ph id=\"ph1\">`key`</ph> for the search.","pos":[1753,1814],"source":" The second argument is a pointer to the `key` for the search."},{"content":"The third argument is a pointer to the array element to be compared with <ph id=\"ph1\">`key`</ph>.","pos":[1815,1894],"source":" The third argument is a pointer to the array element to be compared with `key`."},{"content":"A pointer to an object that can be accessed in the comparison function.","pos":[1914,1985]},{"content":"Return Value","pos":[1994,2006]},{"content":"returns a pointer to an occurrence of<ph id=\"ph1\">`key`</ph> in the array pointed to by <ph id=\"ph2\">`base`</ph>.","pos":[2022,2099],"source":" returns a pointer to an occurrence of`key` in the array pointed to by `base`."},{"content":"If <ph id=\"ph1\">`key`</ph> is not found, the function returns <ph id=\"ph2\">`NULL`</ph>.","pos":[2100,2151],"source":" If `key` is not found, the function returns `NULL`."},{"content":"If the array is not in ascending sort order or contains duplicate records with identical keys, the result is unpredictable.","pos":[2152,2275]},{"content":"If invalid parameters are passed to the function, the invalid parameter handler is invoked as described in <bpt id=\"p1\">[</bpt>Parameter Validation<ept id=\"p1\">](../../c-runtime-library/parameter-validation.md)</ept>.","pos":[2282,2461],"source":"If invalid parameters are passed to the function, the invalid parameter handler is invoked as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md)."},{"content":"If execution is allowed to continue, <ph id=\"ph1\">`errno`</ph>is set to <ph id=\"ph2\">`EINVAL`</ph> and the function returns <ph id=\"ph3\">`NULL`</ph>.","pos":[2462,2557],"source":" If execution is allowed to continue, `errno`is set to `EINVAL` and the function returns `NULL`."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>errno, _doserrno, _sys_errlist, and _sys_nerr<ept id=\"p1\">](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md)</ept>.","pos":[2558,2700],"source":" For more information, see [errno, _doserrno, _sys_errlist, and _sys_nerr](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md)."},{"content":"Error Conditions","pos":[2710,2726]},{"content":"any","pos":[2815,2818]},{"content":"any","pos":[2819,2822]},{"content":"any","pos":[2823,2826]},{"content":"any","pos":[2827,2830]},{"content":"any","pos":[2844,2847]},{"content":"any","pos":[2855,2858]},{"content":"!= 0","pos":[2859,2863]},{"content":"any","pos":[2864,2867]},{"content":"any","pos":[2881,2884]},{"content":"any","pos":[2885,2888]},{"content":"any","pos":[2889,2892]},{"content":"any","pos":[2893,2896]},{"content":"= 0","pos":[2897,2900]},{"content":"any","pos":[2914,2917]},{"content":"any","pos":[2918,2921]},{"content":"an","pos":[2929,2931]},{"content":"any","pos":[2932,2935]},{"content":"Remarks","pos":[2954,2961]},{"content":"The <ph id=\"ph1\">`bsearch_s`</ph> function performs a binary search of a sorted array of <ph id=\"ph2\">`num`</ph> elements, each of <ph id=\"ph3\">`width`</ph> bytes in size.","pos":[2965,3082],"source":"The `bsearch_s` function performs a binary search of a sorted array of `num` elements, each of `width` bytes in size."},{"content":"The <ph id=\"ph1\">`base`</ph> value is a pointer to the base of the array to be searched, and <ph id=\"ph2\">`key`</ph> is the value being sought.","pos":[3083,3190],"source":" The `base` value is a pointer to the base of the array to be searched, and `key` is the value being sought."},{"content":"The <ph id=\"ph1\">`compare`</ph> parameter is a pointer to a user-supplied routine that compares the requested key to an array element and returns one of the following values specifying their relationship:","pos":[3191,3377],"source":" The `compare` parameter is a pointer to a user-supplied routine that compares the requested key to an array element and returns one of the following values specifying their relationship:"},{"pos":[3384,3419],"content":"Value returned by <ph id=\"ph1\">`compare`</ph> routine","source":"Value returned by `compare` routine"},{"content":"Description","pos":[3420,3431]},{"content":"0","pos":[3503,3504]},{"content":"Key is less than array element.","pos":[3505,3536]},{"content":"0","pos":[3541,3542]},{"content":"Key is equal to array element.","pos":[3543,3573]},{"content":"&gt; 0","pos":[3578,3581],"source":"> 0"},{"content":"Key is greater than array element.","pos":[3582,3616]},{"content":"The <ph id=\"ph1\">`context`</ph> pointer may be useful if the searched data structure is part of an object, and the compare function needs to access members of the object.","pos":[3624,3776],"source":"The `context` pointer may be useful if the searched data structure is part of an object, and the compare function needs to access members of the object."},{"content":"The <ph id=\"ph1\">`compare`</ph> function may cast the void pointer into the appropriate object type and access members of that object.","pos":[3777,3893],"source":" The `compare` function may cast the void pointer into the appropriate object type and access members of that object."},{"content":"The addition of the <ph id=\"ph1\">`context`</ph> parameter makes <ph id=\"ph2\">`bsearch_s`</ph> more secure since additional context may be used to avoid reentrancy bugs associated with using static variables to make data available to the <ph id=\"ph3\">`compare`</ph> function.","pos":[3894,4114],"source":" The addition of the `context` parameter makes `bsearch_s` more secure since additional context may be used to avoid reentrancy bugs associated with using static variables to make data available to the `compare` function."},{"content":"Requirements","pos":[4123,4135]},{"content":"Routine","pos":[4142,4149]},{"content":"Required header","pos":[4150,4165]},{"content":"stdlib.h&gt; and <ph id=\"ph1\">\\&lt;</ph>search.h&gt;","pos":[4224,4249],"source":"stdlib.h> and \\<search.h>"},{"pos":[4257,4381],"content":"For additional compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept> in the Introduction.","source":"For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md) in the Introduction."},{"content":"Example","pos":[4390,4397]},{"pos":[4401,4544],"content":"This program sorts a string array with <bpt id=\"p1\">[</bpt>qsort_s<ept id=\"p1\">](../../c-runtime-library/reference/qsort-s.md)</ept>, and then uses bsearch_s to find the word \"cat\".","source":"This program sorts a string array with [qsort_s](../../c-runtime-library/reference/qsort-s.md), and then uses bsearch_s to find the word \"cat\"."},{"content":".NET Framework Equivalent","pos":[6987,7012]},{"content":"&lt;xref:System.Collections.ArrayList.BinarySearch%2A&gt;","pos":[7016,7067],"source":"<xref:System.Collections.ArrayList.BinarySearch%2A>"},{"content":"See Also","pos":[7076,7084]},{"content":"Searching and Sorting","pos":[7089,7110]},{"content":"_lfind","pos":[7167,7173]},{"content":"_lsearch","pos":[7224,7232]},{"content":"qsort","pos":[7285,7290]}],"content":"---\ntitle: \"bsearch_s | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"bsearch_s\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\n  - \"api-ms-win-crt-utility-l1-1-0.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"bsearch_s\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"arrays [CRT], binary search\"\n  - \"bsearch_s function\"\nms.assetid: d5690d5e-6be3-4f1d-aa0b-5ca6dbded276\ncaps.latest.revision: 27\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"ru-ru\"\n  - \"zh-cn\"\n  - \"zh-tw\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"tr-tr\"\n---\n# bsearch_s\nPerforms a binary search of a sorted array. This is version of [bsearch](../../c-runtime-library/reference/bsearch.md) with security enhancements as described in [Security Features in the CRT](../../c-runtime-library/security-features-in-the-crt.md).  \n  \n## Syntax  \n  \n```  \nvoid *bsearch_s(   \n   const void *key,  \n   const void *base,  \n   size_t num,  \n   size_t width,  \n   int ( __cdecl *compare ) ( void *, const void *key, const void *datum),  \n   void * context  \n);  \n```  \n  \n#### Parameters  \n `key`  \n Object to search for.  \n  \n `base`  \n Pointer to base of search data.  \n  \n `num`  \n Number of elements.  \n  \n `width`  \n Width of elements.  \n  \n `compare`  \n Callback function that compares two elements. The first argument is the `context` pointer. The second argument is a pointer to the `key` for the search. The third argument is a pointer to the array element to be compared with `key`.  \n  \n `context`  \n A pointer to an object that can be accessed in the comparison function.  \n  \n## Return Value  \n `bsearch_s` returns a pointer to an occurrence of`key` in the array pointed to by `base`. If `key` is not found, the function returns `NULL`. If the array is not in ascending sort order or contains duplicate records with identical keys, the result is unpredictable.  \n  \n If invalid parameters are passed to the function, the invalid parameter handler is invoked as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md). If execution is allowed to continue, `errno`is set to `EINVAL` and the function returns `NULL`. For more information, see [errno, _doserrno, _sys_errlist, and _sys_nerr](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md).  \n  \n### Error Conditions  \n  \n|||||||  \n|-|-|-|-|-|-|  \n|`key`|`base`|`compare`|`num`|`width`|`errno`|  \n|`NULL`|any|any|any|any|`EINVAL`|  \n|any|`NULL`|any|!= 0|any|`EINVAL`|  \n|any|any|any|any|= 0|`EINVAL`|  \n|any|any|`NULL`|an|any|`EINVAL`|  \n  \n## Remarks  \n The `bsearch_s` function performs a binary search of a sorted array of `num` elements, each of `width` bytes in size. The `base` value is a pointer to the base of the array to be searched, and `key` is the value being sought. The `compare` parameter is a pointer to a user-supplied routine that compares the requested key to an array element and returns one of the following values specifying their relationship:  \n  \n|Value returned by `compare` routine|Description|  \n|-----------------------------------------|-----------------|  \n|\\< 0|Key is less than array element.|  \n|0|Key is equal to array element.|  \n|> 0|Key is greater than array element.|  \n  \n The `context` pointer may be useful if the searched data structure is part of an object, and the compare function needs to access members of the object. The `compare` function may cast the void pointer into the appropriate object type and access members of that object. The addition of the `context` parameter makes `bsearch_s` more secure since additional context may be used to avoid reentrancy bugs associated with using static variables to make data available to the `compare` function.  \n  \n## Requirements  \n  \n|Routine|Required header|  \n|-------------|---------------------|  \n|`bsearch_s`|\\<stdlib.h> and \\<search.h>|  \n  \n For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md) in the Introduction.  \n  \n## Example  \n This program sorts a string array with [qsort_s](../../c-runtime-library/reference/qsort-s.md), and then uses bsearch_s to find the word \"cat\".  \n  \n```  \n// crt_bsearch_s.cpp  \n// This program uses bsearch_s to search a string array,  \n// passing a locale as the context.  \n// compile with: /EHsc  \n#include <stdlib.h>  \n#include <stdio.h>  \n#include <search.h>  \n#include <process.h>  \n#include <locale.h>  \n#include <locale>  \n#include <windows.h>  \nusing namespace std;  \n  \n// The sort order is dependent on the code page.  Use 'chcp' at the  \n// command line to change the codepage.  When executing this application,  \n// the command prompt codepage must match the codepage used here:  \n  \n#define CODEPAGE_850  \n  \n#ifdef CODEPAGE_850  \n#define ENGLISH_LOCALE \"English_US.850\"  \n#endif  \n  \n#ifdef CODEPAGE_1252  \n#define ENGLISH_LOCALE \"English_US.1252\"  \n#endif  \n  \n// The context parameter lets you create a more generic compare.  \n// Without this parameter, you would have stored the locale in a  \n// static variable, thus making it vulnerable to thread conflicts  \n// (if this were a multithreaded program).  \n  \nint compare( void *pvlocale, char **str1, char **str2)  \n{  \n    char *s1 = *str1;  \n    char *s2 = *str2;  \n  \n    locale& loc = *( reinterpret_cast< locale * > ( pvlocale));  \n  \n    return use_facet< collate<char> >(loc).compare(  \n       s1, s1+strlen(s1),  \n       s2, s2+strlen(s2) );  \n}  \n  \nint main( void )  \n{  \n   char *arr[] = {\"dog\", \"pig\", \"horse\", \"cat\", \"human\", \"rat\", \"cow\", \"goat\"};  \n  \n   char *key = \"cat\";  \n   char **result;  \n   int i;  \n  \n   /* Sort using Quicksort algorithm: */  \n   qsort_s( arr,  \n            sizeof(arr)/sizeof(arr[0]),  \n            sizeof( char * ),  \n            (int (*)(void*, const void*, const void*))compare,  \n            &locale(ENGLISH_LOCALE) );  \n  \n   for( i = 0; i < sizeof(arr)/sizeof(arr[0]); ++i )    /* Output sorted list */  \n      printf( \"%s \", arr[i] );  \n  \n   /* Find the word \"cat\" using a binary search algorithm: */  \n   result = (char **)bsearch_s( &key,  \n                                arr,  \n                                sizeof(arr)/sizeof(arr[0]),  \n                                sizeof( char * ),  \n                                (int (*)(void*, const void*, const void*))compare,  \n                                &locale(ENGLISH_LOCALE) );  \n   if( result )  \n      printf( \"\\n%s found at %Fp\\n\", *result, result );  \n   else  \n      printf( \"\\nCat not found!\\n\" );  \n}  \n```  \n  \n```Output  \ncat cow dog goat horse human pig rat  \ncat found at 002F0F04  \n```  \n  \n## .NET Framework Equivalent  \n <xref:System.Collections.ArrayList.BinarySearch%2A>  \n  \n## See Also  \n [Searching and Sorting](../../c-runtime-library/searching-and-sorting.md)   \n [_lfind](../../c-runtime-library/reference/lfind.md)   \n [_lsearch](../../c-runtime-library/reference/lsearch.md)   \n [qsort](../../c-runtime-library/reference/qsort.md)"}