{"nodes":[{"pos":[12,35],"content":"fflush | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"fflush | Microsoft Docs","pos":[0,23]}]},{"pos":[940,946],"content":"fflush","linkify":"fflush","nodes":[{"content":"fflush","pos":[0,6]}]},{"content":"Flushes a stream.","pos":[947,964]},{"pos":[973,979],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1044,1054],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"Pointer to <ph id=\"ph1\">`FILE`</ph> structure.","pos":[1070,1098],"source":" Pointer to `FILE` structure."},{"pos":[1107,1119],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"<ph id=\"ph1\">`fflush`</ph> returns 0 if the buffer was successfully flushed.","pos":[1123,1181],"source":"`fflush` returns 0 if the buffer was successfully flushed."},{"content":"The value 0 is also returned in cases in which the specified stream has no buffer or is open for reading only.","pos":[1182,1292]},{"content":"A return value of <ph id=\"ph1\">`EOF`</ph> indicates an error.","pos":[1293,1336],"source":" A return value of `EOF` indicates an error."},{"pos":[1344,1644],"content":"[!NOTE]\n If `fflush` returns `EOF`, data may have been lost due to a write failure. When setting up a critical error handler, it is safest to turn buffering off with the `setvbuf` function or to use low-level I/O routines such as `_open`, `_close`, and `_write` instead of the stream I/O functions.","leadings":["","> "],"nodes":[{"content":" If `fflush` returns `EOF`, data may have been lost due to a write failure. When setting up a critical error handler, it is safest to turn buffering off with the `setvbuf` function or to use low-level I/O routines such as `_open`, `_close`, and `_write` instead of the stream I/O functions.","pos":[8,298],"nodes":[{"content":"If <ph id=\"ph1\">`fflush`</ph> returns <ph id=\"ph2\">`EOF`</ph>, data may have been lost due to a write failure.","pos":[1,75],"source":" If `fflush` returns `EOF`, data may have been lost due to a write failure."},{"content":"When setting up a critical error handler, it is safest to turn buffering off with the <ph id=\"ph1\">`setvbuf`</ph> function or to use low-level I/O routines such as <ph id=\"ph2\">`_open`</ph>, <ph id=\"ph3\">`_close`</ph>, and <ph id=\"ph4\">`_write`</ph> instead of the stream I/O functions.","pos":[76,290],"source":" When setting up a critical error handler, it is safest to turn buffering off with the `setvbuf` function or to use low-level I/O routines such as `_open`, `_close`, and `_write` instead of the stream I/O functions."}]}]},{"pos":[1653,1660],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">`fflush`</ph> function flushes the stream <ph id=\"ph2\">`stream`</ph>.","pos":[1664,1714],"source":"The `fflush` function flushes the stream `stream`."},{"content":"If the stream was opened in write mode, or it was opened in update mode and the last operation was a write, the contents of the stream buffer are written to the underlying file or device and the buffer is discarded.","pos":[1715,1930]},{"content":"If the stream was opened in read mode, or if the stream has no buffer, the call to <ph id=\"ph1\">`fflush`</ph> has no effect, and any buffer is retained.","pos":[1931,2065],"source":" If the stream was opened in read mode, or if the stream has no buffer, the call to `fflush` has no effect, and any buffer is retained."},{"content":"A call to <ph id=\"ph1\">`fflush`</ph> negates the effect of any prior call to <ph id=\"ph2\">`ungetc`</ph> for the stream.","pos":[2066,2149],"source":" A call to `fflush` negates the effect of any prior call to `ungetc` for the stream."},{"content":"The stream remains open after the call.","pos":[2150,2189]},{"content":"If <ph id=\"ph1\">`stream`</ph> is <ph id=\"ph2\">`NULL`</ph>, the behavior is the same as a call to <ph id=\"ph3\">`fflush`</ph> on each open stream.","pos":[2196,2286],"source":"If `stream` is `NULL`, the behavior is the same as a call to `fflush` on each open stream."},{"content":"All streams opened in write mode and all streams opened in update mode where the last operation was a write are flushed.","pos":[2287,2407]},{"content":"The call has no effect on other streams.","pos":[2408,2448]},{"content":"Buffers are normally maintained by the operating system, which determines the optimal time to write the data automatically to disk: when a buffer is full, when a stream is closed, or when a program terminates normally without closing the stream.","pos":[2455,2700]},{"content":"The commit-to-disk feature of the run-time library lets you ensure that critical data is written directly to disk rather than to the operating-system buffers.","pos":[2701,2859]},{"content":"Without rewriting an existing program, you can enable this feature by linking the program's object files with COMMODE.OBJ.","pos":[2860,2982]},{"content":"In the resulting executable file, calls to <ph id=\"ph1\">`_flushall`</ph> write the contents of all buffers to disk.","pos":[2983,3080],"source":" In the resulting executable file, calls to `_flushall` write the contents of all buffers to disk."},{"content":"Only <ph id=\"ph1\">`_flushall`</ph> and <ph id=\"ph2\">`fflush`</ph> are affected by COMMODE.OBJ.","pos":[3081,3139],"source":" Only `_flushall` and `fflush` are affected by COMMODE.OBJ."},{"pos":[3146,3392],"content":"For information about controlling the commit-to-disk feature, see <bpt id=\"p1\">[</bpt>Stream I/O<ept id=\"p1\">](../../c-runtime-library/stream-i-o.md)</ept>, <bpt id=\"p2\">[</bpt>fopen<ept id=\"p2\">](../../c-runtime-library/reference/fopen-wfopen.md)</ept>, and <bpt id=\"p3\">[</bpt>_fdopen<ept id=\"p3\">](../../c-runtime-library/reference/fdopen-wfdopen.md)</ept>.","source":"For information about controlling the commit-to-disk feature, see [Stream I/O](../../c-runtime-library/stream-i-o.md), [fopen](../../c-runtime-library/reference/fopen-wfopen.md), and [_fdopen](../../c-runtime-library/reference/fdopen-wfdopen.md)."},{"content":"This function locks the calling thread and is therefore thread-safe.","pos":[3399,3467]},{"content":"For a non-locking version, see <ph id=\"ph1\">`_fflush_nolock`</ph>.","pos":[3468,3516],"source":" For a non-locking version, see `_fflush_nolock`."},{"pos":[3525,3537],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"content":"Function","pos":[3544,3552]},{"content":"Required header","pos":[3553,3568]},{"content":"<ph id=\"ph1\">\\&lt;</ph>stdio.h&gt;","pos":[3623,3633],"source":"\\<stdio.h>"},{"pos":[3641,3765],"content":"For additional compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept> in the Introduction.","source":"For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md) in the Introduction."},{"pos":[3774,3781],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[4745,4770],"content":".NET Framework Equivalent","linkify":".NET Framework Equivalent","nodes":[{"content":".NET Framework Equivalent","pos":[0,25]}]},{"pos":[4774,4861],"content":"<bpt id=\"p1\">[</bpt>System::IO::FileStream::Flush<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/2bw4h516.aspx)</ept>","source":"[System::IO::FileStream::Flush](https://msdn.microsoft.com/en-us/library/2bw4h516.aspx)"},{"pos":[4870,4878],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Stream I/O<ept id=\"p1\">](../../c-runtime-library/stream-i-o.md)</ept><ph id=\"ph1\"> </ph>","pos":[4882,4934],"source":"[Stream I/O](../../c-runtime-library/stream-i-o.md) "},{"content":"<bpt id=\"p1\"> [</bpt>fclose, _fcloseall<ept id=\"p1\">](../../c-runtime-library/reference/fclose-fcloseall.md)</ept><ph id=\"ph1\"> </ph>","pos":[4937,5014],"source":" [fclose, _fcloseall](../../c-runtime-library/reference/fclose-fcloseall.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_flushall<ept id=\"p1\">](../../c-runtime-library/reference/flushall.md)</ept><ph id=\"ph1\"> </ph>","pos":[5017,5077],"source":" [_flushall](../../c-runtime-library/reference/flushall.md) "},{"content":"<bpt id=\"p1\"> [</bpt>setvbuf<ept id=\"p1\">](../../c-runtime-library/reference/setvbuf.md)</ept>","pos":[5080,5136],"source":" [setvbuf](../../c-runtime-library/reference/setvbuf.md)"}],"content":"---\ntitle: \"fflush | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"fflush\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\n  - \"api-ms-win-crt-stdio-l1-1-0.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"fflush\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"streams, flushing\"\n  - \"flushing\"\n  - \"fflush function\"\nms.assetid: 8bbc753f-dc74-4e77-b563-74da2835e92b\ncaps.latest.revision: 18\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# fflush\nFlushes a stream.  \n  \n## Syntax  \n  \n```  \nint fflush(   \n   FILE *stream   \n);  \n```  \n  \n#### Parameters  \n `stream`  \n Pointer to `FILE` structure.  \n  \n## Return Value  \n `fflush` returns 0 if the buffer was successfully flushed. The value 0 is also returned in cases in which the specified stream has no buffer or is open for reading only. A return value of `EOF` indicates an error.  \n  \n> [!NOTE]\n>  If `fflush` returns `EOF`, data may have been lost due to a write failure. When setting up a critical error handler, it is safest to turn buffering off with the `setvbuf` function or to use low-level I/O routines such as `_open`, `_close`, and `_write` instead of the stream I/O functions.  \n  \n## Remarks  \n The `fflush` function flushes the stream `stream`. If the stream was opened in write mode, or it was opened in update mode and the last operation was a write, the contents of the stream buffer are written to the underlying file or device and the buffer is discarded. If the stream was opened in read mode, or if the stream has no buffer, the call to `fflush` has no effect, and any buffer is retained. A call to `fflush` negates the effect of any prior call to `ungetc` for the stream. The stream remains open after the call.  \n  \n If `stream` is `NULL`, the behavior is the same as a call to `fflush` on each open stream. All streams opened in write mode and all streams opened in update mode where the last operation was a write are flushed. The call has no effect on other streams.  \n  \n Buffers are normally maintained by the operating system, which determines the optimal time to write the data automatically to disk: when a buffer is full, when a stream is closed, or when a program terminates normally without closing the stream. The commit-to-disk feature of the run-time library lets you ensure that critical data is written directly to disk rather than to the operating-system buffers. Without rewriting an existing program, you can enable this feature by linking the program's object files with COMMODE.OBJ. In the resulting executable file, calls to `_flushall` write the contents of all buffers to disk. Only `_flushall` and `fflush` are affected by COMMODE.OBJ.  \n  \n For information about controlling the commit-to-disk feature, see [Stream I/O](../../c-runtime-library/stream-i-o.md), [fopen](../../c-runtime-library/reference/fopen-wfopen.md), and [_fdopen](../../c-runtime-library/reference/fdopen-wfdopen.md).  \n  \n This function locks the calling thread and is therefore thread-safe. For a non-locking version, see `_fflush_nolock`.  \n  \n## Requirements  \n  \n|Function|Required header|  \n|--------------|---------------------|  \n|`fflush`|\\<stdio.h>|  \n  \n For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md) in the Introduction.  \n  \n## Example  \n  \n```  \n// crt_fflush.c  \n#include <stdio.h>  \n#include <conio.h>  \n  \nint main( void )  \n{  \n   int integer;  \n   char string[81];  \n  \n   // Read each word as a string.  \n   printf( \"Enter a sentence of four words with scanf: \" );  \n   for( integer = 0; integer < 4; integer++ )  \n   {  \n      scanf_s( \"%s\", string, sizeof(string) );        \n      printf( \"%s\\n\", string );  \n   }  \n  \n   // You must flush the input buffer before using gets.   \n   // fflush on input stream is an extension to the C standard   \n   fflush( stdin );     \n   printf( \"Enter the same sentence with gets: \" );  \n   gets_s( string, sizeof(string) );  \n   printf( \"%s\\n\", string );  \n}  \n```  \n  \n```Output  \n  \n      This is a test  \nThis is a test  \n  \n```  \n  \n```Output  \n  \n      This is a test  \nThis is a testEnter a sentence of four words with scanf: This is a test  \nThis  \nis  \na  \ntest  \nEnter the same sentence with gets: This is a test  \nThis is a test  \n```  \n  \n## .NET Framework Equivalent  \n [System::IO::FileStream::Flush](https://msdn.microsoft.com/en-us/library/2bw4h516.aspx)  \n  \n## See Also  \n [Stream I/O](../../c-runtime-library/stream-i-o.md)   \n [fclose, _fcloseall](../../c-runtime-library/reference/fclose-fcloseall.md)   \n [_flushall](../../c-runtime-library/reference/flushall.md)   \n [setvbuf](../../c-runtime-library/reference/setvbuf.md)"}