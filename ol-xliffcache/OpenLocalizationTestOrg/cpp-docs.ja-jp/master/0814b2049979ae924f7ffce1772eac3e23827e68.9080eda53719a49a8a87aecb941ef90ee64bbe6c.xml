{"nodes":[{"pos":[12,57],"content":"-GUARD (Enable Guard Checks) | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"-GUARD (Enable Guard Checks) | Microsoft Docs","pos":[0,45]}]},{"content":"/GUARD (Enable Guard Checks)","pos":[537,565]},{"content":"Specifies support for Control Flow Guard checks in the executable image.","pos":[566,638]},{"content":"Syntax","pos":[647,653]},{"content":"Remarks","pos":[694,701]},{"content":"When /GUARD:CF is specified, the linker modifies the header of a .dll or .exe to indicate support for Control Flow Guard (CFG) runtime checks.","pos":[705,847]},{"content":"The linker also adds the required control flow target address data to the header.","pos":[848,929]},{"content":"By default, /GUARD:CF is disabled.","pos":[930,964]},{"content":"It can be explicitly disabled by using /GUARD:NO.","pos":[965,1014]},{"content":"To be effective, /GUARD:CF also requires the <bpt id=\"p1\">[</bpt>/DYNAMICBASE (Use address space layout randomization)<ept id=\"p1\">](../../build/reference/dynamicbase-use-address-space-layout-randomization.md)</ept> linker option, which is on by default.","pos":[1015,1231],"source":" To be effective, /GUARD:CF also requires the [/DYNAMICBASE (Use address space layout randomization)](../../build/reference/dynamicbase-use-address-space-layout-randomization.md) linker option, which is on by default."},{"content":"When source code is compiled by using the <bpt id=\"p1\">[</bpt>/guard:cf<ept id=\"p1\">](../../build/reference/guard-enable-control-flow-guard.md)</ept> option, the compiler analyzes the control flow by examining all indirect calls for possible target addresses.","pos":[1238,1459],"source":"When source code is compiled by using the [/guard:cf](../../build/reference/guard-enable-control-flow-guard.md) option, the compiler analyzes the control flow by examining all indirect calls for possible target addresses."},{"content":"The compiler inserts code to verify the target address of an indirect call instruction is in the list of known target addresses at runtime.","pos":[1460,1599]},{"content":"Operating systems that support CFG stop a program that fails a CFG runtime check.","pos":[1600,1681]},{"content":"This makes it more difficult for an attacker to execute malicious code by using data corruption to change a call target.","pos":[1682,1802]},{"content":"The /GUARD:CF option must be specified to both the compiler and linker to create CFG-enabled executable images.","pos":[1809,1920]},{"content":"Code compiled but not linked by using /GUARD:CF incurs the cost of runtime checks, but does not enable CFG protection.","pos":[1921,2039]},{"content":"When the /GUARD:CF option is specified to the <ph id=\"ph1\">`cl`</ph> command to compile and link in one step, the compiler passes the flag to the linker.","pos":[2040,2175],"source":" When the /GUARD:CF option is specified to the `cl` command to compile and link in one step, the compiler passes the flag to the linker."},{"content":"When the <bpt id=\"p1\">**</bpt>Control Flow Guard<ept id=\"p1\">**</ept> property is set in Visual Studio, the /GUARD:CF option is passed to both the compiler and linker.","pos":[2176,2305],"source":" When the **Control Flow Guard** property is set in Visual Studio, the /GUARD:CF option is passed to both the compiler and linker."},{"content":"When object files or libraries have been compiled separately, the option must be explicitly specified in the <ph id=\"ph1\">`link`</ph> command.","pos":[2306,2430],"source":" When object files or libraries have been compiled separately, the option must be explicitly specified in the `link` command."},{"content":"To set this linker option in Visual Studio","pos":[2440,2482]},{"content":"Open the project <bpt id=\"p1\">**</bpt>Property Pages<ept id=\"p1\">**</ept> dialog box.","pos":[2492,2539],"source":"Open the project **Property Pages** dialog box."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Working with Project Properties<ept id=\"p1\">](../../ide/working-with-project-properties.md)</ept>.","pos":[2540,2646],"source":" For more information, see [Working with Project Properties](../../ide/working-with-project-properties.md)."},{"pos":[2656,2722],"content":"Expand <bpt id=\"p1\">**</bpt>Configuration Properties<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Linker<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>Command Line<ept id=\"p3\">**</ept>.","source":"Expand **Configuration Properties**, **Linker**, **Command Line**."},{"pos":[2732,2777],"content":"In <bpt id=\"p1\">**</bpt>Additional Options<ept id=\"p1\">**</ept>, enter <ph id=\"ph1\">`/GUARD:CF`</ph>.","source":"In **Additional Options**, enter `/GUARD:CF`."},{"content":"See Also","pos":[2786,2794]},{"content":"/guard (Enable Control Flow Guard)","pos":[2799,2833]},{"content":"Setting Linker Options","pos":[2898,2920]},{"content":"Linker Options","pos":[2976,2990]}],"content":"---\ntitle: \"-GUARD (Enable Guard Checks) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nms.assetid: 72758e23-70ac-4616-94d7-d767477406d1\ncaps.latest.revision: 5\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# /GUARD (Enable Guard Checks)\nSpecifies support for Control Flow Guard checks in the executable image.  \n  \n## Syntax  \n  \n```  \n/GUARD:{CF|NO}  \n```  \n  \n## Remarks  \n When /GUARD:CF is specified, the linker modifies the header of a .dll or .exe to indicate support for Control Flow Guard (CFG) runtime checks. The linker also adds the required control flow target address data to the header. By default, /GUARD:CF is disabled. It can be explicitly disabled by using /GUARD:NO. To be effective, /GUARD:CF also requires the [/DYNAMICBASE (Use address space layout randomization)](../../build/reference/dynamicbase-use-address-space-layout-randomization.md) linker option, which is on by default.  \n  \n When source code is compiled by using the [/guard:cf](../../build/reference/guard-enable-control-flow-guard.md) option, the compiler analyzes the control flow by examining all indirect calls for possible target addresses. The compiler inserts code to verify the target address of an indirect call instruction is in the list of known target addresses at runtime. Operating systems that support CFG stop a program that fails a CFG runtime check. This makes it more difficult for an attacker to execute malicious code by using data corruption to change a call target.  \n  \n The /GUARD:CF option must be specified to both the compiler and linker to create CFG-enabled executable images. Code compiled but not linked by using /GUARD:CF incurs the cost of runtime checks, but does not enable CFG protection. When the /GUARD:CF option is specified to the `cl` command to compile and link in one step, the compiler passes the flag to the linker. When the **Control Flow Guard** property is set in Visual Studio, the /GUARD:CF option is passed to both the compiler and linker. When object files or libraries have been compiled separately, the option must be explicitly specified in the `link` command.  \n  \n### To set this linker option in Visual Studio  \n  \n1.  Open the project **Property Pages** dialog box. For more information, see [Working with Project Properties](../../ide/working-with-project-properties.md).  \n  \n2.  Expand **Configuration Properties**, **Linker**, **Command Line**.  \n  \n3.  In **Additional Options**, enter `/GUARD:CF`.  \n  \n## See Also  \n [/guard (Enable Control Flow Guard)](../../build/reference/guard-enable-control-flow-guard.md)   \n [Setting Linker Options](../../build/reference/setting-linker-options.md)   \n [Linker Options](../../build/reference/linker-options.md)"}