{"nodes":[{"pos":[12,61],"content":"Compiler Warning (level 1) C4838 | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Compiler Warning (level 1) C4838 | Microsoft Docs","pos":[0,49]}]},{"content":"Compiler Warning (level 1) C4838","pos":[393,425]},{"content":"conversion from 'type_1' to 'type_2' requires a narrowing conversion","pos":[426,494]},{"content":"An implicit narrowing conversion was found when using aggregate or list initialization.","pos":[501,588]},{"content":"The C language allows implicit narrowing conversions in assignments and initialization, and C++ follows suit, even though unexpected narrowing is a cause of many code errors.","pos":[595,769]},{"content":"To make code safer, the C++ standard requires a diagnostic message when a narrowing conversion occurs in an initialization list.","pos":[770,898]},{"content":"In Visual C++, the diagnostic is <bpt id=\"p1\">[</bpt>Compiler Error C2397<ept id=\"p1\">](../../error-messages/compiler-errors-1/compiler-error-c2397.md)</ept> when using the uniform initialization syntax supported beginning in Visual Studio 2015.","pos":[899,1106],"source":" In Visual C++, the diagnostic is [Compiler Error C2397](../../error-messages/compiler-errors-1/compiler-error-c2397.md) when using the uniform initialization syntax supported beginning in Visual Studio 2015."},{"content":"The compiler generates  warning C4838 when using the list or aggregate initialization syntax supported by Visual Studio 2013.","pos":[1107,1232]},{"content":"A narrowing conversion can be okay when you know the possible range of converted values can fit in the target.","pos":[1239,1349]},{"content":"In this case, you know more than the compiler does.","pos":[1350,1401]},{"content":"If you make a narrowing conversion intentionally, make your intentions explicit by using a static cast.","pos":[1402,1505]},{"content":"Otherwise, this warning message almost always indicates that you have a bug in your code.","pos":[1506,1595]},{"content":"You can fix it by making sure the objects you initialize have types that are large enough to handle the inputs.","pos":[1596,1707]},{"content":"The following sample generates C4838 and shows one way to fix it:","pos":[1714,1779]}],"content":"---\ntitle: \"Compiler Warning (level 1) C4838 | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"error-reference\"\nf1_keywords: \n  - \"C4838\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"C4838\"\nms.assetid: fea07924-5feb-4ed4-99b5-1a8c41d28db6\ncaps.latest.revision: 4\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\n---\n# Compiler Warning (level 1) C4838\nconversion from 'type_1' to 'type_2' requires a narrowing conversion  \n  \n An implicit narrowing conversion was found when using aggregate or list initialization.  \n  \n The C language allows implicit narrowing conversions in assignments and initialization, and C++ follows suit, even though unexpected narrowing is a cause of many code errors. To make code safer, the C++ standard requires a diagnostic message when a narrowing conversion occurs in an initialization list. In Visual C++, the diagnostic is [Compiler Error C2397](../../error-messages/compiler-errors-1/compiler-error-c2397.md) when using the uniform initialization syntax supported beginning in Visual Studio 2015. The compiler generates  warning C4838 when using the list or aggregate initialization syntax supported by Visual Studio 2013.  \n  \n A narrowing conversion can be okay when you know the possible range of converted values can fit in the target. In this case, you know more than the compiler does. If you make a narrowing conversion intentionally, make your intentions explicit by using a static cast. Otherwise, this warning message almost always indicates that you have a bug in your code. You can fix it by making sure the objects you initialize have types that are large enough to handle the inputs.  \n  \n The following sample generates C4838 and shows one way to fix it:  \n  \n```  \n// C4838.cpp -- C++ narrowing conversion diagnostics  \n// Compile by using: cl /EHsc C4838.cpp  \n  \nstruct S1 {  \n    int m1;  \n    double m2, m3;  \n};  \n  \nvoid function_C4838(double d1) {  \n    double ad[] = { 1, d1 }; // OK  \n    int ai[] = { 1, d1 };    // warning C4838  \n    S1 s11 = { 1, 2, d1 };   // OK  \n    S1 s12 { d1, 2, 3 };     // warning C4838  \n    S1 s13 { static_cast<int>(d1), 2, 3 }; // possible fix for C4838  \n}  \n```"}