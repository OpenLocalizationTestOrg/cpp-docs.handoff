{"nodes":[{"pos":[12,65],"content":"CAtlServiceModuleT::Handler Function | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"CAtlServiceModuleT::Handler Function | Microsoft Docs","pos":[0,53]}]},{"content":"CAtlServiceModuleT::Handler Function","pos":[676,712]},{"content":"is the routine that the service control manager (SCM) calls to retrieve the status of the service and give it various instructions (such as stopping or pausing).","pos":[743,904]},{"content":"The SCM passes an operation code to <ph id=\"ph1\">`Handler`</ph> to indicate what the service should do.","pos":[905,990],"source":" The SCM passes an operation code to `Handler` to indicate what the service should do."},{"content":"A default ATL-generated service only handles the stop instruction.","pos":[991,1057]},{"content":"If the SCM passes the stop instruction, the service tells the SCM that the program is about to stop.","pos":[1058,1158]},{"content":"The service then calls <ph id=\"ph1\">`PostThreadMessage`</ph> to post a quit message to itself.","pos":[1159,1235],"source":" The service then calls `PostThreadMessage` to post a quit message to itself."},{"content":"This terminates the message loop and the service will ultimately close.","pos":[1236,1307]},{"content":"To handle more instructions, you need to change the <ph id=\"ph1\">`m_status`</ph> data member initialized in the <ph id=\"ph2\">`CAtlServiceModuleT`</ph> constructor.","pos":[1314,1441],"source":"To handle more instructions, you need to change the `m_status` data member initialized in the `CAtlServiceModuleT` constructor."},{"content":"This data member tells the SCM which buttons to enable when the service is selected in the Services Control Panel application.","pos":[1442,1568]},{"content":"See Also","pos":[1577,1585]},{"content":"Services","pos":[1590,1598]},{"content":"CAtlServiceModuleT::Handler","pos":[1629,1656]}],"content":"---\ntitle: \"CAtlServiceModuleT::Handler Function | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"CServiceModule::Handler\"\n  - \"CServiceModule.Handler\"\n  - \"Handler\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"Handler method\"\nms.assetid: 14db5f2a-be87-4774-a296-445cb6fc7b2e\ncaps.latest.revision: 10\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# CAtlServiceModuleT::Handler Function\n`CAtlServiceModuleT::Handler` is the routine that the service control manager (SCM) calls to retrieve the status of the service and give it various instructions (such as stopping or pausing). The SCM passes an operation code to `Handler` to indicate what the service should do. A default ATL-generated service only handles the stop instruction. If the SCM passes the stop instruction, the service tells the SCM that the program is about to stop. The service then calls `PostThreadMessage` to post a quit message to itself. This terminates the message loop and the service will ultimately close.  \n  \n To handle more instructions, you need to change the `m_status` data member initialized in the `CAtlServiceModuleT` constructor. This data member tells the SCM which buttons to enable when the service is selected in the Services Control Panel application.  \n  \n## See Also  \n [Services](../atl/atl-services.md)   \n [CAtlServiceModuleT::Handler](../atl/reference/catlservicemodulet-class.md#catlservicemodulet__handler)\n\n"}