{"nodes":[{"pos":[12,48],"content":"Return Values (C++) | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Return Values (C++) | Microsoft Docs","pos":[0,36]}]},{"content":"Return Values (C++)","pos":[529,548]},{"content":"A scalar return value that can fit into 64 bits is returned through RAX—this includes __m64 types.","pos":[549,647]},{"content":"Non-scalar types including floats, doubles, and vector types such as <bpt id=\"p1\">[</bpt>__m128<ept id=\"p1\">](../cpp/m128.md)</ept>, <bpt id=\"p2\">[</bpt>__m128i<ept id=\"p2\">](../cpp/m128i.md)</ept>, <bpt id=\"p3\">[</bpt>__m128d<ept id=\"p3\">](../cpp/m128d.md)</ept> are returned in XMM0.","pos":[648,819],"source":" Non-scalar types including floats, doubles, and vector types such as [__m128](../cpp/m128.md), [__m128i](../cpp/m128i.md), [__m128d](../cpp/m128d.md) are returned in XMM0."},{"content":"The state of unused bits in the value returned in RAX or XMM0 is undefined.","pos":[820,895]},{"content":"User-defined types can be returned by value from global functions and static member functions.","pos":[902,996]},{"content":"To be returned by value in RAX, user-defined types must have a length of 1, 2, 4, 8, 16, 32, or 64 bits; no user-defined constructor, destructor, or copy assignment operator; no private or protected non-static data members; no non-static data members of reference type; no base classes; no virtual functions; and no data members that do not also meet these requirements.","pos":[997,1367]},{"content":"(This is essentially the definition of a C++03 POD type.","pos":[1368,1424]},{"content":"Because the definition has changed in the C++11 standard, we do not recommend using <ph id=\"ph1\">`std::is_pod`</ph> for this test.) Otherwise, the caller assumes the responsibility of allocating memory and passing a pointer for the return value as the first argument.","pos":[1425,1674],"source":" Because the definition has changed in the C++11 standard, we do not recommend using `std::is_pod` for this test.) Otherwise, the caller assumes the responsibility of allocating memory and passing a pointer for the return value as the first argument."},{"content":"Subsequent arguments are then shifted one argument to the right.","pos":[1675,1739]},{"content":"The same pointer must be returned by the callee in RAX.","pos":[1740,1795]},{"content":"These examples show how parameters and return values are passed for functions with the specified declarations:","pos":[1802,1912]},{"content":"Example of return value 1 – 64 bit result","pos":[1921,1962]},{"content":"Example of return value 2 – 128 bit result","pos":[2166,2208]},{"content":"Example of return value 3 – user type result by pointer","pos":[2393,2448]},{"content":"Example of return value 4 – user type result by value","pos":[2794,2847]},{"content":"See Also","pos":[3159,3167]},{"content":"Calling Convention","pos":[3172,3190]}],"content":"---\ntitle: \"Return Values (C++) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nms.assetid: 53583524-b337-4228-a9c6-c9bf516babe8\ncaps.latest.revision: 17\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Return Values (C++)\nA scalar return value that can fit into 64 bits is returned through RAX—this includes __m64 types. Non-scalar types including floats, doubles, and vector types such as [__m128](../cpp/m128.md), [__m128i](../cpp/m128i.md), [__m128d](../cpp/m128d.md) are returned in XMM0. The state of unused bits in the value returned in RAX or XMM0 is undefined.  \n  \n User-defined types can be returned by value from global functions and static member functions. To be returned by value in RAX, user-defined types must have a length of 1, 2, 4, 8, 16, 32, or 64 bits; no user-defined constructor, destructor, or copy assignment operator; no private or protected non-static data members; no non-static data members of reference type; no base classes; no virtual functions; and no data members that do not also meet these requirements. (This is essentially the definition of a C++03 POD type. Because the definition has changed in the C++11 standard, we do not recommend using `std::is_pod` for this test.) Otherwise, the caller assumes the responsibility of allocating memory and passing a pointer for the return value as the first argument. Subsequent arguments are then shifted one argument to the right. The same pointer must be returned by the callee in RAX.  \n  \n These examples show how parameters and return values are passed for functions with the specified declarations:  \n  \n## Example of return value 1 – 64 bit result  \n  \n```Output  \n__int64 func1(int a, float b, int c, int d, int e);  \n// Caller passes a in RCX, b in XMM1, c in R8, d in R9, e pushed on stack,  \n// callee returns __int64 result in RAX.  \n```  \n  \n## Example of return value 2 – 128 bit result  \n  \n```Output  \n__m128 func2(float a, double b, int c, __m64 d);   \n// Caller passes a in XMM0, b in XMM1, c in R8, d in R9,   \n// callee returns __m128 result in XMM0.  \n```  \n  \n## Example of return value 3 – user type result by pointer  \n  \n```Output  \nstruct Struct1 {  \n   int j, k, l;    // Struct1 exceeds 64 bits.   \n};  \nStruct1 func3(int a, double b, int c, float d);   \n// Caller allocates memory for Struct1 returned and passes pointer in RCX,   \n// a in RDX, b in XMM2, c in R9, d pushed on the stack;   \n// callee returns pointer to Struct1 result in RAX.  \n```  \n  \n## Example of return value 4 – user type result by value  \n  \n```Output  \nstruct Struct2 {  \n   int j, k;    // Struct2 fits in 64 bits, and meets requirements for return by value.  \n};  \nStruct2 func4(int a, double b, int c, float d);   \n// Caller passes a in RCX, b in XMM1, c in R8, and d in XMM3;   \n// callee returns Struct2 result by value in RAX.  \n```  \n  \n## See Also  \n [Calling Convention](../build/calling-convention.md)"}