{"nodes":[{"pos":[12,63],"content":"Serializing Data to and from Files | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Serializing Data to and from Files | Microsoft Docs","pos":[0,51]}]},{"content":"Serializing Data to and from Files","pos":[840,874]},{"content":"The basic idea of persistence is that an object should be able to write its current state, indicated by the values of its member variables, to persistent storage.","pos":[875,1037]},{"content":"Later, the object can be re-created by reading, or \"deserializing,\" the object's state from persistent storage.","pos":[1038,1149]},{"content":"A key point here is that the object itself is responsible for reading and writing its own state.","pos":[1150,1246]},{"content":"Thus, for a class to be persistent, it must implement the basic serialization operations.","pos":[1247,1336]},{"content":"The framework provides a default implementation for saving documents to disk files in response to the Save and Save As commands on the File menu and for loading documents from disk files in response to the Open command.","pos":[1343,1562]},{"content":"With very little work, you can implement a document's ability to write and read its data to and from a file.","pos":[1563,1671]},{"content":"The main thing you must do is override the <bpt id=\"p1\">[</bpt>Serialize<ept id=\"p1\">](../mfc/reference/cobject-class.md#cobject__serialize)</ept> member function in your document class.","pos":[1672,1820],"source":" The main thing you must do is override the [Serialize](../mfc/reference/cobject-class.md#cobject__serialize) member function in your document class."},{"content":"The MFC Application Wizard places a skeletal override of the <bpt id=\"p1\">**</bpt>CDocument<ept id=\"p1\">**</ept> member function <ph id=\"ph1\">`Serialize`</ph> in the document class it creates for you.","pos":[1827,1971],"source":"The MFC Application Wizard places a skeletal override of the **CDocument** member function `Serialize` in the document class it creates for you."},{"content":"After you have implemented your application's member variables, you can fill in your <ph id=\"ph1\">`Serialize`</ph> override with code that sends the data to an \"archive object\" connected to a file.","pos":[1972,2151],"source":" After you have implemented your application's member variables, you can fill in your `Serialize` override with code that sends the data to an \"archive object\" connected to a file."},{"content":"A <bpt id=\"p1\">[</bpt>CArchive<ept id=\"p1\">](../mfc/reference/carchive-class.md)</ept> object is similar to the <ph id=\"ph1\">`cin`</ph> and <ph id=\"ph2\">`cout`</ph> input/output objects from the C++ iostream library.","pos":[2152,2294],"source":" A [CArchive](../mfc/reference/carchive-class.md) object is similar to the `cin` and `cout` input/output objects from the C++ iostream library."},{"content":"However, <ph id=\"ph1\">`CArchive`</ph> writes and reads binary format, not formatted text.","pos":[2295,2366],"source":" However, `CArchive` writes and reads binary format, not formatted text."},{"content":"What do you want to know more about","pos":[2375,2410]},{"content":"Serialization","pos":[2421,2434]},{"content":"The document's role in serialization","pos":[2478,2514]},{"content":"The data's role in serialization","pos":[2574,2606]},{"content":"Bypassing the serialization mechanism","pos":[2662,2699]},{"pos":[2820,2856],"content":"The Document's Role in Serialization"},{"content":"The framework responds automatically to the File menu's Open, Save, and Save As commands by calling the document's <ph id=\"ph1\">`Serialize`</ph> member function if it is implemented.","pos":[2860,3024],"source":"The framework responds automatically to the File menu's Open, Save, and Save As commands by calling the document's `Serialize` member function if it is implemented."},{"content":"An <ph id=\"ph1\">`ID_FILE_OPEN`</ph> command, for example, calls a handler function in the application object.","pos":[3025,3116],"source":" An `ID_FILE_OPEN` command, for example, calls a handler function in the application object."},{"content":"During this process, the user sees and responds to the File Open dialog box and the framework obtains the filename the user chooses.","pos":[3117,3249]},{"content":"The framework creates a <ph id=\"ph1\">`CArchive`</ph> object set up for loading data into the document and passes the archive to <ph id=\"ph2\">`Serialize`</ph>.","pos":[3250,3372],"source":" The framework creates a `CArchive` object set up for loading data into the document and passes the archive to `Serialize`."},{"content":"The framework has already opened the file.","pos":[3373,3415]},{"content":"The code in your document's <ph id=\"ph1\">`Serialize`</ph> member function reads the data in through the archive, reconstructing data objects as needed.","pos":[3416,3549],"source":" The code in your document's `Serialize` member function reads the data in through the archive, reconstructing data objects as needed."},{"content":"For more information about serialization, see the article <bpt id=\"p1\">[</bpt>Serialization<ept id=\"p1\">](../mfc/serialization-in-mfc.md)</ept>.","pos":[3550,3656],"source":" For more information about serialization, see the article [Serialization](../mfc/serialization-in-mfc.md)."},{"pos":[3723,3755],"content":"The Data's Role in Serialization"},{"content":"In general, class-type data should be able to serialize itself.","pos":[3759,3822]},{"content":"That is, when you pass an object to an archive, the object should know how to write itself to the archive and how to read itself from the archive.","pos":[3823,3969]},{"content":"MFC provides support for making classes serializable in this way.","pos":[3970,4035]},{"content":"If you design a class to define a data type and you intend to serialize data of that type, design for serialization.","pos":[4036,4152]},{"content":"See Also","pos":[4161,4169]},{"content":"Using Documents","pos":[4174,4189]}],"content":"---\ntitle: \"Serializing Data to and from Files | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"documents [C++], serialization\"\n  - \"documents [C++], saving\"\n  - \"saving documents\"\n  - \"deserialization [C++]\"\n  - \"serialization [C++], role of document\"\n  - \"serialization [C++], role of data\"\n  - \"data [MFC]\"\n  - \"data [MFC], serializing\"\n  - \"document data [C++]\"\nms.assetid: b42a0c68-4bc4-4012-9938-5433a26d2c24\ncaps.latest.revision: 9\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Serializing Data to and from Files\nThe basic idea of persistence is that an object should be able to write its current state, indicated by the values of its member variables, to persistent storage. Later, the object can be re-created by reading, or \"deserializing,\" the object's state from persistent storage. A key point here is that the object itself is responsible for reading and writing its own state. Thus, for a class to be persistent, it must implement the basic serialization operations.  \n  \n The framework provides a default implementation for saving documents to disk files in response to the Save and Save As commands on the File menu and for loading documents from disk files in response to the Open command. With very little work, you can implement a document's ability to write and read its data to and from a file. The main thing you must do is override the [Serialize](../mfc/reference/cobject-class.md#cobject__serialize) member function in your document class.  \n  \n The MFC Application Wizard places a skeletal override of the **CDocument** member function `Serialize` in the document class it creates for you. After you have implemented your application's member variables, you can fill in your `Serialize` override with code that sends the data to an \"archive object\" connected to a file. A [CArchive](../mfc/reference/carchive-class.md) object is similar to the `cin` and `cout` input/output objects from the C++ iostream library. However, `CArchive` writes and reads binary format, not formatted text.  \n  \n## What do you want to know more about  \n  \n-   [Serialization](../mfc/serialization-in-mfc.md)  \n  \n-   [The document's role in serialization](#_core_the_document.92.s_role_in_serialization)  \n  \n-   [The data's role in serialization](#_core_the_data.92.s_role_in_serialization)  \n  \n-   [Bypassing the serialization mechanism](../mfc/bypassing-the-serialization-mechanism.md)  \n  \n##  <a name=\"_core_the_document.92.s_role_in_serialization\"></a> The Document's Role in Serialization  \n The framework responds automatically to the File menu's Open, Save, and Save As commands by calling the document's `Serialize` member function if it is implemented. An `ID_FILE_OPEN` command, for example, calls a handler function in the application object. During this process, the user sees and responds to the File Open dialog box and the framework obtains the filename the user chooses. The framework creates a `CArchive` object set up for loading data into the document and passes the archive to `Serialize`. The framework has already opened the file. The code in your document's `Serialize` member function reads the data in through the archive, reconstructing data objects as needed. For more information about serialization, see the article [Serialization](../mfc/serialization-in-mfc.md).  \n  \n##  <a name=\"_core_the_data.92.s_role_in_serialization\"></a> The Data's Role in Serialization  \n In general, class-type data should be able to serialize itself. That is, when you pass an object to an archive, the object should know how to write itself to the archive and how to read itself from the archive. MFC provides support for making classes serializable in this way. If you design a class to define a data type and you intend to serialize data of that type, design for serialization.  \n  \n## See Also  \n [Using Documents](../mfc/using-documents.md)\n\n"}