{"nodes":[{"pos":[12,87],"content":"How to: Use parallel_invoke to Execute Parallel Operations | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"How to: Use parallel_invoke to Execute Parallel Operations | Microsoft Docs","pos":[0,75]}]},{"content":"How to: Use parallel_invoke to Execute Parallel Operations","pos":[723,781]},{"content":"This example shows how to use the <bpt id=\"p1\">[</bpt>concurrency::parallel_invoke<ept id=\"p1\">](reference/concurrency-namespace-functions.md#parallel_invoke)</ept> algorithm to improve the performance of a program that performs multiple operations on a shared data source.","pos":[782,1017],"source":"This example shows how to use the [concurrency::parallel_invoke](reference/concurrency-namespace-functions.md#parallel_invoke) algorithm to improve the performance of a program that performs multiple operations on a shared data source."},{"content":"Because no operations modify the source, they can be executed in parallel in a straightforward manner.","pos":[1018,1120]},{"content":"Example","pos":[1130,1137]},{"pos":[1141,1328],"content":"Consider the following code example that creates a variable of type <ph id=\"ph1\">`MyDataType`</ph>, calls a function to initialize that variable, and then performs multiple lengthy operations on that data.","source":"Consider the following code example that creates a variable of type `MyDataType`, calls a function to initialize that variable, and then performs multiple lengthy operations on that data."},{"pos":[1346,1375],"content":"concrt-parallel-word-mining#1"},{"pos":[1487,1691],"content":"If the <ph id=\"ph1\">`lengthy_operation1`</ph>, <ph id=\"ph2\">`lengthy_operation2`</ph>, and <ph id=\"ph3\">`lengthy_operation3`</ph> functions do not modify the <ph id=\"ph4\">`MyDataType`</ph> variable, these functions can be executed in parallel without additional modifications.","source":"If the `lengthy_operation1`, `lengthy_operation2`, and `lengthy_operation3` functions do not modify the `MyDataType` variable, these functions can be executed in parallel without additional modifications."},{"content":"Example","pos":[1700,1707]},{"content":"The following example modifies the previous example to run in parallel.","pos":[1711,1782]},{"content":"The <ph id=\"ph1\">`parallel_invoke`</ph> algorithm executes each task in parallel and returns after all tasks are finished.","pos":[1783,1887],"source":" The `parallel_invoke` algorithm executes each task in parallel and returns after all tasks are finished."},{"pos":[1905,1934],"content":"concrt-parallel-word-mining#2"},{"content":"Example","pos":[2048,2055]},{"content":"The following example downloads <bpt id=\"p1\">*</bpt>The Iliad<ept id=\"p1\">*</ept> by Homer from gutenberg.org and performs multiple operations on that file.","pos":[2059,2177],"source":"The following example downloads *The Iliad* by Homer from gutenberg.org and performs multiple operations on that file."},{"content":"The example first performs these operations serially and then performs the same operations in parallel.","pos":[2178,2281]},{"pos":[2299,2328],"content":"concrt-parallel-word-mining#3"},{"content":"This example produces the following sample output.","pos":[2440,2490]},{"content":"This example uses the <ph id=\"ph1\">`parallel_invoke`</ph> algorithm to call multiple functions that act on the same data source.","pos":[3073,3183],"source":"This example uses the `parallel_invoke` algorithm to call multiple functions that act on the same data source."},{"content":"You can use the <ph id=\"ph1\">`parallel_invoke`</ph> algorithm to call any set of functions in parallel, not only those that act on the same data.","pos":[3184,3311],"source":" You can use the `parallel_invoke` algorithm to call any set of functions in parallel, not only those that act on the same data."},{"content":"Because the <ph id=\"ph1\">`parallel_invoke`</ph> algorithm calls each work function in parallel, its performance is bounded by the function that takes the longest time to finish (that is, if the runtime processes each function on a separate processor).","pos":[3318,3551],"source":"Because the `parallel_invoke` algorithm calls each work function in parallel, its performance is bounded by the function that takes the longest time to finish (that is, if the runtime processes each function on a separate processor)."},{"content":"If this example performs more tasks in parallel than the number of available processors, multiple tasks can run on each processor.","pos":[3552,3682]},{"content":"In this case, performance is bounded by the group of tasks that takes the longest time to finish.","pos":[3683,3780]},{"content":"Because this example performs three tasks in parallel, you should not expect performance to scale on computers that have more than three processors.","pos":[3787,3935]},{"content":"To improve performance more, you can break the longest-running tasks into smaller tasks and run those tasks in parallel.","pos":[3936,4056]},{"content":"You can use the <ph id=\"ph1\">`parallel_invoke`</ph> algorithm instead of the <bpt id=\"p1\">[</bpt>concurrency::task_group<ept id=\"p1\">](reference/task-group-class.md)</ept> and <bpt id=\"p2\">[</bpt>concurrency::structured_task_group<ept id=\"p2\">](../../parallel/concrt/reference/structured-task-group-class.md)</ept> classes if you do not require support for cancellation.","pos":[4063,4339],"source":"You can use the `parallel_invoke` algorithm instead of the [concurrency::task_group](reference/task-group-class.md) and [concurrency::structured_task_group](../../parallel/concrt/reference/structured-task-group-class.md) classes if you do not require support for cancellation."},{"content":"For an example that compares the usage of the <ph id=\"ph1\">`parallel_invoke`</ph> algorithm versus task groups, see <bpt id=\"p1\">[</bpt>How to: Use parallel_invoke to Write a Parallel Sort Routine<ept id=\"p1\">](../../parallel/concrt/how-to-use-parallel-invoke-to-write-a-parallel-sort-routine.md)</ept>.","pos":[4340,4587],"source":" For an example that compares the usage of the `parallel_invoke` algorithm versus task groups, see [How to: Use parallel_invoke to Write a Parallel Sort Routine](../../parallel/concrt/how-to-use-parallel-invoke-to-write-a-parallel-sort-routine.md)."},{"content":"Compiling the Code","pos":[4596,4614]},{"pos":[4618,4832],"content":"To compile the code, copy it and then paste it in a Visual Studio project, or paste it in a file that is named <ph id=\"ph1\">`parallel-word-mining.cpp`</ph> and then run the following command in a Visual Studio Command Prompt window.","source":"To compile the code, copy it and then paste it in a Visual Studio project, or paste it in a file that is named `parallel-word-mining.cpp` and then run the following command in a Visual Studio Command Prompt window."},{"content":"cl.exe /EHsc /MD /DUNICODE /D_AFXDLL parallel-word-mining.cpp","pos":[4841,4902]},{"content":"See Also","pos":[4913,4921]},{"content":"Parallel Algorithms","pos":[4926,4945]},{"content":"parallel_invoke Function","pos":[4998,5022]}],"content":"---\ntitle: \"How to: Use parallel_invoke to Execute Parallel Operations | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"parallel_invoke function, example\"\n  - \"calling multiple functions in parallel [Concurrency Runtime]\"\nms.assetid: a6aea69b-d647-4b7e-bf3b-e6a6a9880072\ncaps.latest.revision: 18\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"ru-ru\"\n  - \"zh-cn\"\n  - \"zh-tw\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"tr-tr\"\n---\n# How to: Use parallel_invoke to Execute Parallel Operations\nThis example shows how to use the [concurrency::parallel_invoke](reference/concurrency-namespace-functions.md#parallel_invoke) algorithm to improve the performance of a program that performs multiple operations on a shared data source. Because no operations modify the source, they can be executed in parallel in a straightforward manner.  \n\n  \n## Example  \n Consider the following code example that creates a variable of type `MyDataType`, calls a function to initialize that variable, and then performs multiple lengthy operations on that data.  \n  \n [!code-cpp[concrt-parallel-word-mining#1](../../parallel/concrt/codesnippet/cpp/how-to-use-parallel-invoke-to-execute-parallel-operations_1.cpp)]  \n  \n If the `lengthy_operation1`, `lengthy_operation2`, and `lengthy_operation3` functions do not modify the `MyDataType` variable, these functions can be executed in parallel without additional modifications.  \n  \n## Example  \n The following example modifies the previous example to run in parallel. The `parallel_invoke` algorithm executes each task in parallel and returns after all tasks are finished.  \n  \n [!code-cpp[concrt-parallel-word-mining#2](../../parallel/concrt/codesnippet/cpp/how-to-use-parallel-invoke-to-execute-parallel-operations_2.cpp)]  \n  \n## Example  \n The following example downloads *The Iliad* by Homer from gutenberg.org and performs multiple operations on that file. The example first performs these operations serially and then performs the same operations in parallel.  \n  \n [!code-cpp[concrt-parallel-word-mining#3](../../parallel/concrt/codesnippet/cpp/how-to-use-parallel-invoke-to-execute-parallel-operations_3.cpp)]  \n  \n This example produces the following sample output.  \n  \n```Output  \nDownloading 'The Iliad'...  \n \nRunning serial version... took 953 ms.  \nRunning parallel version... took 656 ms.  \n \nThe most common words that have five or more letters are:  \n    their (953)  \n    shall (444)  \n    which (431)  \n    great (398)  \n    Hector (349)  \n    Achilles (309)  \n    through (301)  \n    these (268)  \n    chief (259)  \nThe longest sequence of words that have the same first letter is:  \n    through the tempest to the tented  \nThe following palindromes appear in the text:  \n    spots stops  \n    speed deeps  \n    keels sleek  \n```  \n  \n This example uses the `parallel_invoke` algorithm to call multiple functions that act on the same data source. You can use the `parallel_invoke` algorithm to call any set of functions in parallel, not only those that act on the same data.  \n  \n Because the `parallel_invoke` algorithm calls each work function in parallel, its performance is bounded by the function that takes the longest time to finish (that is, if the runtime processes each function on a separate processor). If this example performs more tasks in parallel than the number of available processors, multiple tasks can run on each processor. In this case, performance is bounded by the group of tasks that takes the longest time to finish.  \n  \n Because this example performs three tasks in parallel, you should not expect performance to scale on computers that have more than three processors. To improve performance more, you can break the longest-running tasks into smaller tasks and run those tasks in parallel.  \n  \n You can use the `parallel_invoke` algorithm instead of the [concurrency::task_group](reference/task-group-class.md) and [concurrency::structured_task_group](../../parallel/concrt/reference/structured-task-group-class.md) classes if you do not require support for cancellation. For an example that compares the usage of the `parallel_invoke` algorithm versus task groups, see [How to: Use parallel_invoke to Write a Parallel Sort Routine](../../parallel/concrt/how-to-use-parallel-invoke-to-write-a-parallel-sort-routine.md).  \n  \n## Compiling the Code  \n To compile the code, copy it and then paste it in a Visual Studio project, or paste it in a file that is named `parallel-word-mining.cpp` and then run the following command in a Visual Studio Command Prompt window.  \n  \n **cl.exe /EHsc /MD /DUNICODE /D_AFXDLL parallel-word-mining.cpp**  \n  \n## See Also  \n [Parallel Algorithms](../../parallel/concrt/parallel-algorithms.md)   \n [parallel_invoke Function](reference/concurrency-namespace-functions.md#parallel_invoke)\n\n\n"}