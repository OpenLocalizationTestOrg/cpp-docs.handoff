{"nodes":[{"pos":[12,52],"content":"IUMSScheduler Structure | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"IUMSScheduler Structure | Microsoft Docs","pos":[0,40]}]},{"content":"IUMSScheduler Structure","pos":[641,664]},{"content":"An interface to an abstraction of a work scheduler that wants the Concurrency Runtime's Resource Manager to hand it user-mode schedulable (UMS) threads.","pos":[665,817]},{"content":"The Resource Manager uses this interface to communicate with UMS thread schedulers.","pos":[818,901]},{"content":"The <ph id=\"ph1\">`IUMSScheduler`</ph> interface inherits from the <ph id=\"ph2\">`IScheduler`</ph> interface.","pos":[902,973],"source":" The `IUMSScheduler` interface inherits from the `IScheduler` interface."},{"content":"Syntax","pos":[982,988]},{"content":"Members","pos":[1052,1059]},{"content":"Public Methods","pos":[1069,1083]},{"content":"Name","pos":[1090,1094]},{"content":"Description","pos":[1095,1106]},{"content":"IUMSScheduler::SetCompletionList Method","pos":[1145,1184]},{"pos":[1206,1274],"content":"Assigns an <ph id=\"ph1\">`IUMSCompletionList`</ph> interface to a UMS thread scheduler.","source":"Assigns an `IUMSCompletionList` interface to a UMS thread scheduler."},{"content":"Remarks","pos":[1284,1291]},{"content":"If you are implementing a custom scheduler that communicates with the Resource Manager, and you want UMS threads to be handed to your scheduler instead of ordinary Win32 threads, you should provide an implementation of the <ph id=\"ph1\">`IUMSScheduler`</ph> interface.","pos":[1295,1544],"source":"If you are implementing a custom scheduler that communicates with the Resource Manager, and you want UMS threads to be handed to your scheduler instead of ordinary Win32 threads, you should provide an implementation of the `IUMSScheduler` interface."},{"content":"In addition, you should set the policy value for the scheduler policy key <ph id=\"ph1\">`SchedulerKind`</ph> to be <ph id=\"ph2\">`UmsThreadDefault`</ph>.","pos":[1545,1660],"source":" In addition, you should set the policy value for the scheduler policy key `SchedulerKind` to be `UmsThreadDefault`."},{"content":"If the policy specifies UMS thread, the <ph id=\"ph1\">`IScheduler`</ph> interface that is passed as a parameter to the <bpt id=\"p1\">[</bpt>IResourceManager::RegisterScheduler<ept id=\"p1\">](iresourcemanager-structure.md#registerscheduler)</ept> method must be an <ph id=\"ph2\">`IUMSScheduler`</ph> interface.","pos":[1661,1892],"source":" If the policy specifies UMS thread, the `IScheduler` interface that is passed as a parameter to the [IResourceManager::RegisterScheduler](iresourcemanager-structure.md#registerscheduler) method must be an `IUMSScheduler` interface."},{"content":"The Resource Manager is able to hand you UMS threads only on operating systems that have the UMS feature.","pos":[1899,2004]},{"content":"64-bit operating systems with version Windows 7 and higher support UMS threads.","pos":[2005,2084]},{"content":"If you create a scheduler policy with the <ph id=\"ph1\">`SchedulerKind`</ph> key set to the value <ph id=\"ph2\">`UmsThreadDefault`</ph> and the underlying platform does not support UMS, the value of the <ph id=\"ph3\">`SchedulerKind`</ph> key on that policy will be changed to the value <ph id=\"ph4\">`ThreadScheduler`</ph>.","pos":[2085,2332],"source":" If you create a scheduler policy with the `SchedulerKind` key set to the value `UmsThreadDefault` and the underlying platform does not support UMS, the value of the `SchedulerKind` key on that policy will be changed to the value `ThreadScheduler`."},{"content":"You should always read back this policy value before expecting to receive UMS threads.","pos":[2333,2419]},{"content":"The <ph id=\"ph1\">`IUMSScheduler`</ph> interface is one end of a two-way channel of communication between a scheduler and the Resource Manager.","pos":[2426,2550],"source":"The `IUMSScheduler` interface is one end of a two-way channel of communication between a scheduler and the Resource Manager."},{"content":"The other end is represented by the <ph id=\"ph1\">`IResourceManager`</ph> and <ph id=\"ph2\">`ISchedulerProxy`</ph> interfaces, which are implemented by the Resource Manager.","pos":[2551,2686],"source":" The other end is represented by the `IResourceManager` and `ISchedulerProxy` interfaces, which are implemented by the Resource Manager."},{"content":"Inheritance Hierarchy","pos":[2695,2716]},{"content":"IScheduler","pos":[2721,2731]},{"content":"Requirements","pos":[2788,2800]},{"pos":[2804,2826],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> concrtrm.h","source":"**Header:** concrtrm.h"},{"pos":[2833,2859],"content":"<bpt id=\"p1\">**</bpt>Namespace:<ept id=\"p1\">**</ept> concurrency","source":"**Namespace:** concurrency"},{"pos":[2903,2942],"content":"IUMSScheduler::SetCompletionList Method"},{"pos":[2946,3014],"content":"Assigns an <ph id=\"ph1\">`IUMSCompletionList`</ph> interface to a UMS thread scheduler.","source":"Assigns an `IUMSCompletionList` interface to a UMS thread scheduler."},{"content":"Parameters","pos":[3118,3128]},{"content":"The completion list interface for the scheduler.","pos":[3153,3201]},{"content":"There is a single list per scheduler.","pos":[3202,3239]},{"content":"Remarks","pos":[3249,3256]},{"content":"The Resource Manager will invoke this method on a scheduler that specifies it wants UMS threads, after the scheduler has requested an initial allocation of resources.","pos":[3260,3426]},{"content":"The scheduler can use the <ph id=\"ph1\">`IUMSCompletionList`</ph> interface to determine when UMS thread proxies have unblocked.","pos":[3427,3536],"source":" The scheduler can use the `IUMSCompletionList` interface to determine when UMS thread proxies have unblocked."},{"content":"It is only valid to access this interface from a thread proxy running on a virtual processor root assigned to the UMS scheduler.","pos":[3537,3665]},{"content":"See Also","pos":[3674,3682]},{"content":"concurrency Namespace","pos":[3687,3708]},{"content":"PolicyElementKey Enumeration","pos":[3741,3769]},{"content":"IScheduler Structure","pos":[3808,3828]},{"content":"IUMSCompletionList Structure","pos":[3860,3888]},{"content":"IResourceManager Structure","pos":[3928,3954]}],"content":"---\ntitle: \"IUMSScheduler Structure | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"concrtrm/concurrency::IUMSScheduler\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"IUMSScheduler structure\"\nms.assetid: 3a500225-4e02-4849-bb56-d744865f5870\ncaps.latest.revision: 18\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# IUMSScheduler Structure\nAn interface to an abstraction of a work scheduler that wants the Concurrency Runtime's Resource Manager to hand it user-mode schedulable (UMS) threads. The Resource Manager uses this interface to communicate with UMS thread schedulers. The `IUMSScheduler` interface inherits from the `IScheduler` interface.  \n  \n## Syntax  \n  \n```\nstruct IUMSScheduler : public IScheduler;\n```  \n  \n## Members  \n  \n### Public Methods  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[IUMSScheduler::SetCompletionList Method](#setcompletionlist)|Assigns an `IUMSCompletionList` interface to a UMS thread scheduler.|  \n  \n## Remarks  \n If you are implementing a custom scheduler that communicates with the Resource Manager, and you want UMS threads to be handed to your scheduler instead of ordinary Win32 threads, you should provide an implementation of the `IUMSScheduler` interface. In addition, you should set the policy value for the scheduler policy key `SchedulerKind` to be `UmsThreadDefault`. If the policy specifies UMS thread, the `IScheduler` interface that is passed as a parameter to the [IResourceManager::RegisterScheduler](iresourcemanager-structure.md#registerscheduler) method must be an `IUMSScheduler` interface.  \n  \n The Resource Manager is able to hand you UMS threads only on operating systems that have the UMS feature. 64-bit operating systems with version Windows 7 and higher support UMS threads. If you create a scheduler policy with the `SchedulerKind` key set to the value `UmsThreadDefault` and the underlying platform does not support UMS, the value of the `SchedulerKind` key on that policy will be changed to the value `ThreadScheduler`. You should always read back this policy value before expecting to receive UMS threads.  \n  \n The `IUMSScheduler` interface is one end of a two-way channel of communication between a scheduler and the Resource Manager. The other end is represented by the `IResourceManager` and `ISchedulerProxy` interfaces, which are implemented by the Resource Manager.  \n  \n## Inheritance Hierarchy  \n [IScheduler](ischeduler-structure.md)  \n  \n `IUMSScheduler`  \n  \n## Requirements  \n **Header:** concrtrm.h  \n  \n **Namespace:** concurrency  \n  \n##  <a name=\"setcompletionlist\"></a>  IUMSScheduler::SetCompletionList Method  \n Assigns an `IUMSCompletionList` interface to a UMS thread scheduler.  \n  \n```\nvirtual void SetCompletionList(_Inout_ IUMSCompletionList* pCompletionList) = 0;\n```  \n  \n### Parameters  \n `pCompletionList`  \n The completion list interface for the scheduler. There is a single list per scheduler.  \n  \n### Remarks  \n The Resource Manager will invoke this method on a scheduler that specifies it wants UMS threads, after the scheduler has requested an initial allocation of resources. The scheduler can use the `IUMSCompletionList` interface to determine when UMS thread proxies have unblocked. It is only valid to access this interface from a thread proxy running on a virtual processor root assigned to the UMS scheduler.  \n  \n## See Also  \n [concurrency Namespace](concurrency-namespace.md)   \n [PolicyElementKey Enumeration](concurrency-namespace-enums.md)   \n [IScheduler Structure](ischeduler-structure.md)   \n [IUMSCompletionList Structure](iumscompletionlist-structure.md)   \n [IResourceManager Structure](iresourcemanager-structure.md)\n"}