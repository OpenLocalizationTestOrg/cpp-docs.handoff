{"nodes":[{"pos":[12,42],"content":"Stream States | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Stream States | Microsoft Docs","pos":[0,30]}]},{"content":"Stream States","pos":[574,587]},{"content":"The valid states, and state transitions, for a stream are shown in the following figure.","pos":[588,676]},{"content":"Stream","pos":[685,691]},{"content":"Each of the circles denotes a stable state.","pos":[747,790]},{"content":"Each of the lines denotes a transition that can occur as the result of a function call that operates on the stream.","pos":[791,906]},{"content":"Five groups of functions can cause state transitions.","pos":[907,960]},{"content":"Functions in the first three groups are declared in <ph id=\"ph1\">\\&lt;</ph>stdio.h&gt;:","pos":[967,1030],"source":"Functions in the first three groups are declared in \\<stdio.h>:"},{"pos":[1040,1600],"content":"The byte read functions — <bpt id=\"p1\">[</bpt>fgetc<ept id=\"p1\">](../c-runtime-library/reference/fgetc-fgetwc.md)</ept>, <bpt id=\"p2\">[</bpt>fgets<ept id=\"p2\">](../c-runtime-library/reference/fgets-fgetws.md)</ept>, <bpt id=\"p3\">[</bpt>fread<ept id=\"p3\">](../c-runtime-library/reference/fread.md)</ept>, <bpt id=\"p4\">[</bpt>fscanf<ept id=\"p4\">](../c-runtime-library/reference/fscanf-fscanf-l-fwscanf-fwscanf-l.md)</ept>, <bpt id=\"p5\">[</bpt>getc<ept id=\"p5\">](../c-runtime-library/reference/getc-getwc.md)</ept>, <bpt id=\"p6\">[</bpt>getchar<ept id=\"p6\">](../c-runtime-library/reference/getc-getwc.md)</ept>, <bpt id=\"p7\">[</bpt>gets<ept id=\"p7\">](../c-runtime-library/gets-getws.md)</ept>, <bpt id=\"p8\">[</bpt>scanf<ept id=\"p8\">](../c-runtime-library/reference/scanf-scanf-l-wscanf-wscanf-l.md)</ept>, and <bpt id=\"p9\">[</bpt>ungetc<ept id=\"p9\">](../c-runtime-library/reference/ungetc-ungetwc.md)</ept>","source":"The byte read functions — [fgetc](../c-runtime-library/reference/fgetc-fgetwc.md), [fgets](../c-runtime-library/reference/fgets-fgetws.md), [fread](../c-runtime-library/reference/fread.md), [fscanf](../c-runtime-library/reference/fscanf-fscanf-l-fwscanf-fwscanf-l.md), [getc](../c-runtime-library/reference/getc-getwc.md), [getchar](../c-runtime-library/reference/getc-getwc.md), [gets](../c-runtime-library/gets-getws.md), [scanf](../c-runtime-library/reference/scanf-scanf-l-wscanf-wscanf-l.md), and [ungetc](../c-runtime-library/reference/ungetc-ungetwc.md)"},{"pos":[1610,2306],"content":"The byte write functions — <bpt id=\"p1\">[</bpt>fprintf<ept id=\"p1\">](../c-runtime-library/reference/fprintf-fprintf-l-fwprintf-fwprintf-l.md)</ept>, <bpt id=\"p2\">[</bpt>fputc<ept id=\"p2\">](../c-runtime-library/reference/fputc-fputwc.md)</ept>, <bpt id=\"p3\">[</bpt>fputs<ept id=\"p3\">](../c-runtime-library/reference/fputs-fputws.md)</ept>, <bpt id=\"p4\">[</bpt>fwrite<ept id=\"p4\">](../c-runtime-library/reference/fwrite.md)</ept>, <bpt id=\"p5\">[</bpt>printf<ept id=\"p5\">](../c-runtime-library/reference/printf-printf-l-wprintf-wprintf-l.md)</ept>, <bpt id=\"p6\">[</bpt>putc<ept id=\"p6\">](../c-runtime-library/reference/putc-putwc.md)</ept>, <bpt id=\"p7\">[</bpt>putchar<ept id=\"p7\">](../c-runtime-library/reference/putc-putwc.md)</ept>, <bpt id=\"p8\">[</bpt>puts<ept id=\"p8\">](../c-runtime-library/reference/puts-putws.md)</ept>, <bpt id=\"p9\">[</bpt>vfprintf<ept id=\"p9\">](../c-runtime-library/reference/vfprintf-vfprintf-l-vfwprintf-vfwprintf-l.md)</ept>, and <bpt id=\"p10\">[</bpt>vprintf<ept id=\"p10\">](../c-runtime-library/reference/vprintf-vprintf-l-vwprintf-vwprintf-l.md)</ept>","source":"The byte write functions — [fprintf](../c-runtime-library/reference/fprintf-fprintf-l-fwprintf-fwprintf-l.md), [fputc](../c-runtime-library/reference/fputc-fputwc.md), [fputs](../c-runtime-library/reference/fputs-fputws.md), [fwrite](../c-runtime-library/reference/fwrite.md), [printf](../c-runtime-library/reference/printf-printf-l-wprintf-wprintf-l.md), [putc](../c-runtime-library/reference/putc-putwc.md), [putchar](../c-runtime-library/reference/putc-putwc.md), [puts](../c-runtime-library/reference/puts-putws.md), [vfprintf](../c-runtime-library/reference/vfprintf-vfprintf-l-vfwprintf-vfwprintf-l.md), and [vprintf](../c-runtime-library/reference/vprintf-vprintf-l-vwprintf-vwprintf-l.md)"},{"pos":[2316,2560],"content":"The position functions — <bpt id=\"p1\">[</bpt>fflush<ept id=\"p1\">](../c-runtime-library/reference/fflush.md)</ept>, <bpt id=\"p2\">[</bpt>fseek<ept id=\"p2\">](../c-runtime-library/reference/fseek-fseeki64.md)</ept>, <bpt id=\"p3\">[</bpt>fsetpos<ept id=\"p3\">](../c-runtime-library/reference/fsetpos.md)</ept>, and <bpt id=\"p4\">[</bpt>rewind<ept id=\"p4\">](../c-runtime-library/reference/rewind.md)</ept>","source":"The position functions — [fflush](../c-runtime-library/reference/fflush.md), [fseek](../c-runtime-library/reference/fseek-fseeki64.md), [fsetpos](../c-runtime-library/reference/fsetpos.md), and [rewind](../c-runtime-library/reference/rewind.md)"},{"content":"Functions in the remaining two groups are declared in <ph id=\"ph1\">\\&lt;</ph>wchar.h&gt;:","pos":[2567,2632],"source":"Functions in the remaining two groups are declared in \\<wchar.h>:"},{"pos":[2642,3116],"content":"The wide read functions — <bpt id=\"p1\">[</bpt>fgetwc<ept id=\"p1\">](../c-runtime-library/reference/fgetc-fgetwc.md)</ept>, <bpt id=\"p2\">[</bpt>fgetws<ept id=\"p2\">](../c-runtime-library/reference/fgets-fgetws.md)</ept>, <bpt id=\"p3\">[</bpt>fwscanf<ept id=\"p3\">](../c-runtime-library/reference/fscanf-fscanf-l-fwscanf-fwscanf-l.md)</ept>, <bpt id=\"p4\">[</bpt>getwc<ept id=\"p4\">](../c-runtime-library/reference/getc-getwc.md)</ept>, <bpt id=\"p5\">[</bpt>getwchar<ept id=\"p5\">](../c-runtime-library/reference/getc-getwc.md)</ept>, <bpt id=\"p6\">[</bpt>ungetwc<ept id=\"p6\">](../c-runtime-library/reference/ungetc-ungetwc.md)</ept>, and <bpt id=\"p7\">[</bpt>wscanf<ept id=\"p7\">](../c-runtime-library/reference/scanf-scanf-l-wscanf-wscanf-l.md)</ept>,","source":"The wide read functions — [fgetwc](../c-runtime-library/reference/fgetc-fgetwc.md), [fgetws](../c-runtime-library/reference/fgets-fgetws.md), [fwscanf](../c-runtime-library/reference/fscanf-fscanf-l-fwscanf-fwscanf-l.md), [getwc](../c-runtime-library/reference/getc-getwc.md), [getwchar](../c-runtime-library/reference/getc-getwc.md), [ungetwc](../c-runtime-library/reference/ungetc-ungetwc.md), and [wscanf](../c-runtime-library/reference/scanf-scanf-l-wscanf-wscanf-l.md),"},{"pos":[3126,3727],"content":"The wide write functions — <bpt id=\"p1\">[</bpt>fwprintf<ept id=\"p1\">](../c-runtime-library/reference/fprintf-fprintf-l-fwprintf-fwprintf-l.md)</ept>, <bpt id=\"p2\">[</bpt>fputwc<ept id=\"p2\">](../c-runtime-library/reference/fputc-fputwc.md)</ept>, <bpt id=\"p3\">[</bpt>fputws<ept id=\"p3\">](../c-runtime-library/reference/fputs-fputws.md)</ept>, <bpt id=\"p4\">[</bpt>putwc<ept id=\"p4\">](../c-runtime-library/reference/putc-putwc.md)</ept>, <bpt id=\"p5\">[</bpt>putwchar<ept id=\"p5\">](../c-runtime-library/reference/fputc-fputwc.md)</ept>, <bpt id=\"p6\">[</bpt>vfwprintf<ept id=\"p6\">](../c-runtime-library/reference/vfprintf-vfprintf-l-vfwprintf-vfwprintf-l.md)</ept>, <bpt id=\"p7\">[</bpt>vwprintf<ept id=\"p7\">](../c-runtime-library/reference/vprintf-vprintf-l-vwprintf-vwprintf-l.md)</ept>, and <bpt id=\"p8\">[</bpt>wprintf<ept id=\"p8\">](../c-runtime-library/reference/printf-printf-l-wprintf-wprintf-l.md)</ept>,","source":"The wide write functions — [fwprintf](../c-runtime-library/reference/fprintf-fprintf-l-fwprintf-fwprintf-l.md), [fputwc](../c-runtime-library/reference/fputc-fputwc.md), [fputws](../c-runtime-library/reference/fputs-fputws.md), [putwc](../c-runtime-library/reference/putc-putwc.md), [putwchar](../c-runtime-library/reference/fputc-fputwc.md), [vfwprintf](../c-runtime-library/reference/vfprintf-vfprintf-l-vfwprintf-vfwprintf-l.md), [vwprintf](../c-runtime-library/reference/vprintf-vprintf-l-vwprintf-vwprintf-l.md), and [wprintf](../c-runtime-library/reference/printf-printf-l-wprintf-wprintf-l.md),"},{"content":"The state diagram shows that you must call one of the position functions between most write and read operations:","pos":[3734,3846]},{"content":"You cannot call a read function if the last operation on the stream was a write.","pos":[3856,3936]},{"content":"You cannot call a write function if the last operation on the stream was a read, unless that read operation set the end-of-file indicator.","pos":[3946,4084]},{"content":"Finally, the state diagram shows that a position operation never decreases the number of valid function calls that can follow.","pos":[4091,4217]},{"content":"See Also","pos":[4226,4234]},{"content":"Files and Streams","pos":[4239,4256]}],"content":"---\ntitle: \"Stream States | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"streams, states\"\nms.assetid: 5f28c968-f132-403f-968c-8417ff315e52\ncaps.latest.revision: 8\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Stream States\nThe valid states, and state transitions, for a stream are shown in the following figure.  \n  \n ![Stream](../c-runtime-library/media/stream.gif \"stream\")  \n  \n Each of the circles denotes a stable state. Each of the lines denotes a transition that can occur as the result of a function call that operates on the stream. Five groups of functions can cause state transitions.  \n  \n Functions in the first three groups are declared in \\<stdio.h>:  \n  \n-   The byte read functions — [fgetc](../c-runtime-library/reference/fgetc-fgetwc.md), [fgets](../c-runtime-library/reference/fgets-fgetws.md), [fread](../c-runtime-library/reference/fread.md), [fscanf](../c-runtime-library/reference/fscanf-fscanf-l-fwscanf-fwscanf-l.md), [getc](../c-runtime-library/reference/getc-getwc.md), [getchar](../c-runtime-library/reference/getc-getwc.md), [gets](../c-runtime-library/gets-getws.md), [scanf](../c-runtime-library/reference/scanf-scanf-l-wscanf-wscanf-l.md), and [ungetc](../c-runtime-library/reference/ungetc-ungetwc.md)  \n  \n-   The byte write functions — [fprintf](../c-runtime-library/reference/fprintf-fprintf-l-fwprintf-fwprintf-l.md), [fputc](../c-runtime-library/reference/fputc-fputwc.md), [fputs](../c-runtime-library/reference/fputs-fputws.md), [fwrite](../c-runtime-library/reference/fwrite.md), [printf](../c-runtime-library/reference/printf-printf-l-wprintf-wprintf-l.md), [putc](../c-runtime-library/reference/putc-putwc.md), [putchar](../c-runtime-library/reference/putc-putwc.md), [puts](../c-runtime-library/reference/puts-putws.md), [vfprintf](../c-runtime-library/reference/vfprintf-vfprintf-l-vfwprintf-vfwprintf-l.md), and [vprintf](../c-runtime-library/reference/vprintf-vprintf-l-vwprintf-vwprintf-l.md)  \n  \n-   The position functions — [fflush](../c-runtime-library/reference/fflush.md), [fseek](../c-runtime-library/reference/fseek-fseeki64.md), [fsetpos](../c-runtime-library/reference/fsetpos.md), and [rewind](../c-runtime-library/reference/rewind.md)  \n  \n Functions in the remaining two groups are declared in \\<wchar.h>:  \n  \n-   The wide read functions — [fgetwc](../c-runtime-library/reference/fgetc-fgetwc.md), [fgetws](../c-runtime-library/reference/fgets-fgetws.md), [fwscanf](../c-runtime-library/reference/fscanf-fscanf-l-fwscanf-fwscanf-l.md), [getwc](../c-runtime-library/reference/getc-getwc.md), [getwchar](../c-runtime-library/reference/getc-getwc.md), [ungetwc](../c-runtime-library/reference/ungetc-ungetwc.md), and [wscanf](../c-runtime-library/reference/scanf-scanf-l-wscanf-wscanf-l.md),  \n  \n-   The wide write functions — [fwprintf](../c-runtime-library/reference/fprintf-fprintf-l-fwprintf-fwprintf-l.md), [fputwc](../c-runtime-library/reference/fputc-fputwc.md), [fputws](../c-runtime-library/reference/fputs-fputws.md), [putwc](../c-runtime-library/reference/putc-putwc.md), [putwchar](../c-runtime-library/reference/fputc-fputwc.md), [vfwprintf](../c-runtime-library/reference/vfprintf-vfprintf-l-vfwprintf-vfwprintf-l.md), [vwprintf](../c-runtime-library/reference/vprintf-vprintf-l-vwprintf-vwprintf-l.md), and [wprintf](../c-runtime-library/reference/printf-printf-l-wprintf-wprintf-l.md),  \n  \n The state diagram shows that you must call one of the position functions between most write and read operations:  \n  \n-   You cannot call a read function if the last operation on the stream was a write.  \n  \n-   You cannot call a write function if the last operation on the stream was a read, unless that read operation set the end-of-file indicator.  \n  \n Finally, the state diagram shows that a position operation never decreases the number of valid function calls that can follow.  \n  \n## See Also  \n [Files and Streams](../c-runtime-library/files-and-streams.md)"}