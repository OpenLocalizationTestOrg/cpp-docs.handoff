{"nodes":[{"pos":[12,72],"content":"_InterlockedExchangeAdd Intrinsic Functions | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"_InterlockedExchangeAdd Intrinsic Functions | Microsoft Docs","pos":[0,60]}]},{"content":"_InterlockedExchangeAdd Intrinsic Functions","pos":[2657,2700]},{"content":"Microsoft Specific","pos":[2703,2721]},{"pos":[2730,2975],"content":"Provide compiler intrinsic support for the Win32 <ph id=\"ph1\">[!INCLUDE[winsdkshort](../atl-mfc-shared/reference/includes/winsdkshort_md.md)]</ph> <bpt id=\"p1\">[</bpt>_InterlockedExchangeAdd Intrinsic Functions<ept id=\"p1\">](../intrinsics/interlockedexchangeadd-intrinsic-functions.md)</ept> function.","source":"Provide compiler intrinsic support for the Win32 [!INCLUDE[winsdkshort](../atl-mfc-shared/reference/includes/winsdkshort_md.md)] [_InterlockedExchangeAdd Intrinsic Functions](../intrinsics/interlockedexchangeadd-intrinsic-functions.md) function."},{"content":"Syntax","pos":[2984,2990]},{"content":"Parameters","pos":[4837,4847]},{"content":"[in, out]","pos":[4851,4860]},{"content":"The value to be added to; replaced by the result of the addition.","pos":[4873,4938]},{"content":"[in]","pos":[4945,4949]},{"content":"The value to add.","pos":[4961,4978]},{"content":"Return Value","pos":[4987,4999]},{"pos":[5003,5094],"content":"The return value is the initial value of the variable pointed to by the <ph id=\"ph1\">`Addend`</ph> parameter.","source":"The return value is the initial value of the variable pointed to by the `Addend` parameter."},{"content":"Requirements","pos":[5103,5115]},{"content":"Intrinsic","pos":[5122,5131]},{"content":"Architecture","pos":[5132,5144]},{"content":"Header","pos":[5145,5151]},{"pos":[5233,5291],"content":", <ph id=\"ph1\">`_InterlockedExchangeAdd8`</ph>, <ph id=\"ph2\">`_InterlockedExchangeAdd16`</ph>,","source":", `_InterlockedExchangeAdd8`, `_InterlockedExchangeAdd16`, "},{"pos":[5320,5329],"content":"x86, ARM,"},{"content":"intrin.h&gt;","pos":[5396,5405],"source":"intrin.h>"},{"pos":[5439,5759],"content":", <ph id=\"ph1\">`_InterlockedExchangeAdd_rel`</ph>, <ph id=\"ph2\">`_InterlockedExchangeAdd_nf`</ph>, <ph id=\"ph3\">`_InterlockedExchangeAdd8_acq`</ph>, <ph id=\"ph4\">`_InterlockedExchangeAdd8_rel`</ph>, <ph id=\"ph5\">`_InterlockedExchangeAdd8_nf`</ph>,<ph id=\"ph6\">`_InterlockedExchangeAdd16_acq`</ph>, <ph id=\"ph7\">`_InterlockedExchangeAdd16_rel`</ph>, <ph id=\"ph8\">`_InterlockedExchangeAdd16_nf`</ph>, <ph id=\"ph9\">`_InterlockedExchangeAdd64_acq`</ph>, <ph id=\"ph10\">`_InterlockedExchangeAdd64_rel`</ph>,","source":", `_InterlockedExchangeAdd_rel`, `_InterlockedExchangeAdd_nf`, `_InterlockedExchangeAdd8_acq`, `_InterlockedExchangeAdd8_rel`, `_InterlockedExchangeAdd8_nf`,`_InterlockedExchangeAdd16_acq`, `_InterlockedExchangeAdd16_rel`, `_InterlockedExchangeAdd16_nf`, `_InterlockedExchangeAdd64_acq`, `_InterlockedExchangeAdd64_rel`, "},{"content":"ARM","pos":[5791,5794]},{"content":"intrin.h&gt;","pos":[5797,5806],"source":"intrin.h>"},{"pos":[5847,5926],"content":", <ph id=\"ph1\">`_InterlockedExchangeAdd_HLERelease`</ph>, <ph id=\"ph2\">`_InterlockedExchangeAdd64_HLEAcquire`</ph>,","source":", `_InterlockedExchangeAdd_HLERelease`, `_InterlockedExchangeAdd64_HLEAcquire`, "},{"pos":[5966,5970],"content":"x86,"},{"content":"immintrin.h&gt;","pos":[6037,6049],"source":"immintrin.h>"},{"content":"Remarks","pos":[6059,6066]},{"pos":[6070,6243],"content":"There are several variations on <ph id=\"ph1\">`_InterlockedExchangeAdd`</ph> that vary based on the data types they involve and whether processor-specific acquire or release semantics is used.","source":"There are several variations on `_InterlockedExchangeAdd` that vary based on the data types they involve and whether processor-specific acquire or release semantics is used."},{"pos":[6250,6520],"content":"While the <ph id=\"ph1\">`_InterlockedExchangeAdd`</ph> function operates on 32-bit integer values, <ph id=\"ph2\">`_InterlockedExchangeAdd8`</ph> operates on 8-bit integer values, <ph id=\"ph3\">`_InterlockedExchangeAdd16`</ph> operates on 16-bit integer values, and <ph id=\"ph4\">`_InterlockedExchangeAdd64`</ph> operates on 64-bit integer values.","source":"While the `_InterlockedExchangeAdd` function operates on 32-bit integer values, `_InterlockedExchangeAdd8` operates on 8-bit integer values, `_InterlockedExchangeAdd16` operates on 16-bit integer values, and `_InterlockedExchangeAdd64` operates on 64-bit integer values."},{"content":"On ARM platforms, use the intrinsics with <ph id=\"ph1\">`_acq`</ph> and <ph id=\"ph2\">`_rel`</ph> suffixes if you need acquire and release semantics, such as at the beginning and end of a critical section.","pos":[6527,6694],"source":"On ARM platforms, use the intrinsics with `_acq` and `_rel` suffixes if you need acquire and release semantics, such as at the beginning and end of a critical section."},{"content":"The intrinsics with an <ph id=\"ph1\">`_nf`</ph> (\"no fence\") suffix do not act as a memory barrier.","pos":[6695,6775],"source":" The intrinsics with an `_nf` (\"no fence\") suffix do not act as a memory barrier."},{"content":"On Intel platforms that support Hardware Lock Elision (HLE) instructions, the intrinsics with <ph id=\"ph1\">`_HLEAcquire`</ph> and <ph id=\"ph2\">`_HLERelease`</ph> suffixes include a hint to the processor that can accelerate performance by eliminating a lock write step in hardware.","pos":[6782,7026],"source":"On Intel platforms that support Hardware Lock Elision (HLE) instructions, the intrinsics with `_HLEAcquire` and `_HLERelease` suffixes include a hint to the processor that can accelerate performance by eliminating a lock write step in hardware."},{"content":"If these intrinsics are called on platforms that do not support HLE, the hint is ignored.","pos":[7027,7116]},{"content":"These routines are only available as intrinsics.","pos":[7123,7171]},{"content":"Thus, they are intrinsic whether or not <bpt id=\"p1\">[</bpt>/Oi<ept id=\"p1\">](../build/reference/oi-generate-intrinsic-functions.md)</ept> or <bpt id=\"p2\">[</bpt>#pragma intrinsic<ept id=\"p2\">](../preprocessor/intrinsic.md)</ept> is used.","pos":[7172,7334],"source":" Thus, they are intrinsic whether or not [/Oi](../build/reference/oi-generate-intrinsic-functions.md) or [#pragma intrinsic](../preprocessor/intrinsic.md) is used."},{"content":"It is not possible to use <bpt id=\"p1\">[</bpt>#pragma function<ept id=\"p1\">](../preprocessor/function-c-cpp.md)</ept> on these intrinsics.","pos":[7335,7435],"source":" It is not possible to use [#pragma function](../preprocessor/function-c-cpp.md) on these intrinsics."},{"content":"Example","pos":[7444,7451]},{"pos":[7455,7596],"content":"For a sample of how to use <ph id=\"ph1\">`_InterlockedExchangeAdd`</ph>, see <bpt id=\"p1\">[</bpt>_InterlockedDecrement<ept id=\"p1\">](../intrinsics/interlockeddecrement-intrinsic-functions.md)</ept>.","source":"For a sample of how to use `_InterlockedExchangeAdd`, see [_InterlockedDecrement](../intrinsics/interlockeddecrement-intrinsic-functions.md)."},{"content":"END Microsoft Specific","pos":[7605,7627]},{"content":"See Also","pos":[7636,7644]},{"content":"Compiler Intrinsics","pos":[7649,7668]},{"content":"Keywords","pos":[7713,7721]},{"content":"Conflicts with the x86 Compiler","pos":[7752,7783]}],"content":"---\ntitle: \"_InterlockedExchangeAdd Intrinsic Functions | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"_InterlockedExchangeAdd64_nf\"\n  - \"_InterlockedExchangeAdd64_rel\"\n  - \"_InterlockedExchangeAdd16_rel\"\n  - \"_InterlockedExchangeAdd_acq\"\n  - \"_InterlockedExchangeAdd_nf\"\n  - \"_InterlockedExchangeAdd_rel\"\n  - \"_InterlockedExchangeAdd8_acq\"\n  - \"_InterlockedExchangeAdd16_nf\"\n  - \"_InterlockedExchangeAdd_acq_cpp\"\n  - \"_InterlockedExchangeAdd64_acq_cpp\"\n  - \"_InterlockedExchangeAdd16_acq\"\n  - \"_InterlockedExchangeAdd_HLERelease\"\n  - \"_InterlockedExchangeAdd64_cpp\"\n  - \"_InterlockedExchangeAdd64_HLERelease\"\n  - \"_InterlockedExchangeAdd64_acq\"\n  - \"_InterlockedExchangeAdd8\"\n  - \"_InterlockedExchangeAdd64\"\n  - \"_InterlockedExchangeAdd8_nf\"\n  - \"_InterlockedExchangeAdd16\"\n  - \"_InterlockedExchangeAdd64_rel_cpp\"\n  - \"_InterlockedExchangeAdd_cpp\"\n  - \"_InterlockedExchangeAdd8_rel\"\n  - \"_InterlockedExchangeAdd_HLEAcquire\"\n  - \"_InterlockedExchangeAdd64_HLEAcquire\"\n  - \"_InterlockedExchangeAdd\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"_InterlockedExchangeAdd8_nf intrinsic\"\n  - \"InterlockedExchangeAdd64_acq intrinsic\"\n  - \"_InterlockedExchangeAdd8_acq intrinsic\"\n  - \"_InterlockedExchangeAdd64 intrinsic\"\n  - \"_InterlockedExchangeAdd intrinsic\"\n  - \"_InterlockedExchangeAdd8_rel intrinsic\"\n  - \"_InterlockedExchangeAdd_acq intrinsic\"\n  - \"_InterlockedExchangeAdd_HLEAcquire intrinsic\"\n  - \"_InterlockedExchangeAdd8 intrinsic\"\n  - \"_InterlockedExchangeAdd_rel intrinsic\"\n  - \"_InterlockedExchangeAdd64_HLERelease intrinsic\"\n  - \"_InterlockedExchangeAdd64_nf intrinsic\"\n  - \"InterlockedExchangeAdd_rel intrinsic\"\n  - \"InterlockedExchangeAdd intrinsic\"\n  - \"_InterlockedExchangeAdd_nf intrinsic\"\n  - \"_InterlockedExchangeAdd16_rel intrinsic\"\n  - \"InterlockedExchangeAdd_acq intrinsic\"\n  - \"_InterlockedExchangeAdd64_HLEAcquire intrinsic\"\n  - \"_InterlockedExchangeAdd16 intrinsic\"\n  - \"_InterlockedExchangeAdd64_acq intrinsic\"\n  - \"InterlockedExchangeAdd64_rel intrinsic\"\n  - \"_InterlockedExchangeAdd16_acq intrinsic\"\n  - \"InterlockedExchangeAdd64 intrinsic\"\n  - \"_InterlockedExchangeAdd_HLERelease intrinsic\"\n  - \"_InterlockedExchangeAdd16_nf intrinsic\"\n  - \"_InterlockedExchangeAdd64_rel intrinsic\"\nms.assetid: 25809e1f-9c60-4492-9f7c-0fb59c8d13d2\ncaps.latest.revision: 19\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# _InterlockedExchangeAdd Intrinsic Functions\n**Microsoft Specific**  \n  \n Provide compiler intrinsic support for the Win32 [!INCLUDE[winsdkshort](../atl-mfc-shared/reference/includes/winsdkshort_md.md)] [_InterlockedExchangeAdd Intrinsic Functions](../intrinsics/interlockedexchangeadd-intrinsic-functions.md) function.  \n  \n## Syntax  \n  \n```  \nlong _InterlockedExchangeAdd(  \n   long volatile * Addend,  \n   long Value  \n);  \nlong _InterlockedExchangeAdd_acq(  \n   long volatile * Addend,  \n   long Value  \n);  \nlong _InterlockedExchangeAdd_rel(  \n   long volatile * Addend,  \n   long Value  \n);  \nlong _InterlockedExchangeAdd_nf(  \n   long volatile * Addend,  \n   long Value  \n);  \nlong _InterlockedExchangeAdd_HLEAcquire(  \n   long volatile * Addend,  \n   long Value  \n);  \nlong _InterlockedExchangeAdd_HLERelease(  \n   long volatile * Addend,  \n   long Value  \n);  \nchar _InterlockedExchangeAdd8(  \n   char volatile * Addend,  \n   char Value  \n);  \nchar _InterlockedExchangeAdd8_acq(  \n   char volatile * Addend,  \n   char Value  \n);  \nchar _InterlockedExchangeAdd8_rel(  \n   char volatile * Addend,  \n   char Value  \n);  \nchar _InterlockedExchangeAdd8_nf(  \n   char volatile * Addend,  \n   char Value  \n);  \nshort _InterlockedExchangeAdd16(  \n   short volatile * Addend,  \n   short Value  \n);  \nshort _InterlockedExchangeAdd16_acq(  \n   short volatile * Addend,  \n   short Value  \n);  \nshort _InterlockedExchangeAdd16_rel(  \n   short volatile * Addend,  \n   short Value  \n);  \nshort _InterlockedExchangeAdd16_nf(  \n   short volatile * Addend,  \n   short Value  \n);  \n__int64 _InterlockedExchangeAdd64(  \n   __int64 volatile * Addend,  \n   __int64 Value  \n);  \n__int64 _InterlockedExchangeAdd64_acq(  \n   __int64 volatile * Addend,  \n   __int64 Value  \n);  \n__int64 _InterlockedExchangeAdd64_rel(  \n   __int64 volatile * Addend,  \n   __int64 Value  \n);  \n__int64 _InterlockedExchangeAdd64_nf(  \n   __int64 volatile * Addend,  \n   __int64 Value  \n);  \n__int64 _InterlockedExchangeAdd64_HLEAcquire(  \n   __int64 volatile * Addend,  \n   __int64 Value  \n);  \n__int64 _InterlockedExchangeAdd64_HLERelease(  \n   __int64 volatile * Addend,  \n   __int64 Value  \n);  \n  \n```  \n  \n#### Parameters  \n [in, out] `Addend`  \n The value to be added to; replaced by the result of the addition.  \n  \n [in] `Value`  \n The value to add.  \n  \n## Return Value  \n The return value is the initial value of the variable pointed to by the `Addend` parameter.  \n  \n## Requirements  \n  \n|Intrinsic|Architecture|Header|  \n|---------------|------------------|------------|  \n|`_InterlockedExchangeAdd`, `_InterlockedExchangeAdd8`, `_InterlockedExchangeAdd16`, `_InterlockedExchangeAdd64`|x86, ARM, [!INCLUDE[vcprx64](../assembler/inline/includes/vcprx64_md.md)]|\\<intrin.h>|  \n|`_InterlockedExchangeAdd_acq`, `_InterlockedExchangeAdd_rel`, `_InterlockedExchangeAdd_nf`, `_InterlockedExchangeAdd8_acq`, `_InterlockedExchangeAdd8_rel`, `_InterlockedExchangeAdd8_nf`,`_InterlockedExchangeAdd16_acq`, `_InterlockedExchangeAdd16_rel`, `_InterlockedExchangeAdd16_nf`, `_InterlockedExchangeAdd64_acq`, `_InterlockedExchangeAdd64_rel`, `_InterlockedExchangeAdd64_nf`|ARM|\\<intrin.h>|  \n|`_InterlockedExchangeAdd_HLEAcquire`, `_InterlockedExchangeAdd_HLERelease`, `_InterlockedExchangeAdd64_HLEAcquire`, `_InterlockedExchangeAdd64_HLErelease`|x86, [!INCLUDE[vcprx64](../assembler/inline/includes/vcprx64_md.md)]|\\<immintrin.h>|  \n  \n## Remarks  \n There are several variations on `_InterlockedExchangeAdd` that vary based on the data types they involve and whether processor-specific acquire or release semantics is used.  \n  \n While the `_InterlockedExchangeAdd` function operates on 32-bit integer values, `_InterlockedExchangeAdd8` operates on 8-bit integer values, `_InterlockedExchangeAdd16` operates on 16-bit integer values, and `_InterlockedExchangeAdd64` operates on 64-bit integer values.  \n  \n On ARM platforms, use the intrinsics with `_acq` and `_rel` suffixes if you need acquire and release semantics, such as at the beginning and end of a critical section. The intrinsics with an `_nf` (\"no fence\") suffix do not act as a memory barrier.  \n  \n On Intel platforms that support Hardware Lock Elision (HLE) instructions, the intrinsics with `_HLEAcquire` and `_HLERelease` suffixes include a hint to the processor that can accelerate performance by eliminating a lock write step in hardware. If these intrinsics are called on platforms that do not support HLE, the hint is ignored.  \n  \n These routines are only available as intrinsics. Thus, they are intrinsic whether or not [/Oi](../build/reference/oi-generate-intrinsic-functions.md) or [#pragma intrinsic](../preprocessor/intrinsic.md) is used. It is not possible to use [#pragma function](../preprocessor/function-c-cpp.md) on these intrinsics.  \n  \n## Example  \n For a sample of how to use `_InterlockedExchangeAdd`, see [_InterlockedDecrement](../intrinsics/interlockeddecrement-intrinsic-functions.md).  \n  \n## END Microsoft Specific  \n  \n## See Also  \n [Compiler Intrinsics](../intrinsics/compiler-intrinsics.md)   \n [Keywords](../cpp/keywords-cpp.md)   \n [Conflicts with the x86 Compiler](../build/conflicts-with-the-x86-compiler.md)"}