{"nodes":[{"pos":[12,45],"content":"CStdioFile Class | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"CStdioFile Class | Microsoft Docs","pos":[0,33]}]},{"pos":[645,661],"content":"CStdioFile Class","linkify":"CStdioFile Class","nodes":[{"content":"CStdioFile Class","pos":[0,16]}]},{"pos":[662,792],"content":"Represents a C run-time stream file as opened by the run-time function <bpt id=\"p1\">[</bpt>fopen<ept id=\"p1\">](../../c-runtime-library/reference/fopen-wfopen.md)</ept>.","source":"Represents a C run-time stream file as opened by the run-time function [fopen](../../c-runtime-library/reference/fopen-wfopen.md)."},{"pos":[801,807],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[865,872],"content":"Members","linkify":"Members","nodes":[{"content":"Members","pos":[0,7]}]},{"pos":[882,901],"content":"Public Constructors","linkify":"Public Constructors","nodes":[{"content":"Public Constructors","pos":[0,19]}]},{"content":"Name","pos":[908,912]},{"content":"Description","pos":[913,924]},{"pos":[962,1011],"content":"<bpt id=\"p1\">[</bpt>CStdioFile::CStdioFile<ept id=\"p1\">](#cstdiofile__cstdiofile)</ept>","source":"[CStdioFile::CStdioFile](#cstdiofile__cstdiofile)"},{"pos":[1012,1073],"content":"Constructs a <ph id=\"ph1\">`CStdioFile`</ph> object from a path or file pointer.","source":"Constructs a `CStdioFile` object from a path or file pointer."},{"pos":[1084,1098],"content":"Public Methods","linkify":"Public Methods","nodes":[{"content":"Public Methods","pos":[0,14]}]},{"content":"Name","pos":[1105,1109]},{"content":"Description","pos":[1110,1121]},{"pos":[1159,1196],"content":"<bpt id=\"p1\">[</bpt>CStdioFile::Open<ept id=\"p1\">](#cstdiofile__open)</ept>","source":"[CStdioFile::Open](#cstdiofile__open)"},{"content":"Overloaded.","pos":[1197,1208]},{"content":"Open is designed for use with the default <ph id=\"ph1\">`CStdioFile`</ph> constructor (Overrides <bpt id=\"p1\">[</bpt>CFile::Open<ept id=\"p1\">](../../mfc/reference/cfile-class.md#cfile__open)</ept>).","pos":[1209,1350],"source":" Open is designed for use with the default `CStdioFile` constructor (Overrides [CFile::Open](../../mfc/reference/cfile-class.md#cfile__open))."},{"pos":[1355,1404],"content":"<bpt id=\"p1\">[</bpt>CStdioFile::ReadString<ept id=\"p1\">](#cstdiofile__readstring)</ept>","source":"[CStdioFile::ReadString](#cstdiofile__readstring)"},{"content":"Reads a single line of text.","pos":[1405,1433]},{"pos":[1438,1475],"content":"<bpt id=\"p1\">[</bpt>CStdioFile::Seek<ept id=\"p1\">](#cstdiofile__seek)</ept>","source":"[CStdioFile::Seek](#cstdiofile__seek)"},{"content":"Positions the current file pointer.","pos":[1476,1511]},{"pos":[1516,1567],"content":"<bpt id=\"p1\">[</bpt>CStdioFile::WriteString<ept id=\"p1\">](#cstdiofile__writestring)</ept>","source":"[CStdioFile::WriteString](#cstdiofile__writestring)"},{"content":"Writes a single line of text.","pos":[1568,1597]},{"pos":[1608,1627],"content":"Public Data Members","linkify":"Public Data Members","nodes":[{"content":"Public Data Members","pos":[0,19]}]},{"content":"Name","pos":[1634,1638]},{"content":"Description","pos":[1639,1650]},{"pos":[1688,1735],"content":"<bpt id=\"p1\">[</bpt>CStdioFile::m_pStream<ept id=\"p1\">](#cstdiofile__m_pstream)</ept>","source":"[CStdioFile::m_pStream](#cstdiofile__m_pstream)"},{"content":"Contains a pointer to an open file.","pos":[1736,1771]},{"pos":[1781,1788],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"Stream files are buffered and can be opened in either text mode (the default) or binary mode.","pos":[1792,1885]},{"content":"Text mode provides special processing for carriage return–linefeed pairs.","pos":[1892,1965]},{"content":"When you write a newline character (0x0A) to a text-mode <ph id=\"ph1\">`CStdioFile`</ph> object, the byte pair (0x0D, 0x0A) is sent to the file.","pos":[1966,2091],"source":" When you write a newline character (0x0A) to a text-mode `CStdioFile` object, the byte pair (0x0D, 0x0A) is sent to the file."},{"content":"When you read, the byte pair (0x0D, 0x0A) is translated to a single 0x0A byte.","pos":[2092,2170]},{"pos":[2177,2475],"content":"The <bpt id=\"p1\">[</bpt>CFile<ept id=\"p1\">](../../mfc/reference/cfile-class.md)</ept> functions <bpt id=\"p2\">[</bpt>Duplicate<ept id=\"p2\">](../../mfc/reference/cfile-class.md#cfile__duplicate)</ept>, <bpt id=\"p3\">[</bpt>LockRange<ept id=\"p3\">](../../mfc/reference/cfile-class.md#cfile__lockrange)</ept>, and <bpt id=\"p4\">[</bpt>UnlockRange<ept id=\"p4\">](../../mfc/reference/cfile-class.md#cfile__unlockrange)</ept> are not supported for <ph id=\"ph1\">`CStdioFile`</ph>.","source":"The [CFile](../../mfc/reference/cfile-class.md) functions [Duplicate](../../mfc/reference/cfile-class.md#cfile__duplicate), [LockRange](../../mfc/reference/cfile-class.md#cfile__lockrange), and [UnlockRange](../../mfc/reference/cfile-class.md#cfile__unlockrange) are not supported for `CStdioFile`."},{"pos":[2482,2622],"content":"If you call these functions on a <ph id=\"ph1\">`CStdioFile`</ph>, you will get a <bpt id=\"p1\">[</bpt>CNotSupportedException<ept id=\"p1\">](../../mfc/reference/cnotsupportedexception-class.md)</ept>.","source":"If you call these functions on a `CStdioFile`, you will get a [CNotSupportedException](../../mfc/reference/cnotsupportedexception-class.md)."},{"pos":[2629,2830],"content":"For more information on using <ph id=\"ph1\">`CStdioFile`</ph>, see the articles <bpt id=\"p1\">[</bpt>Files in MFC<ept id=\"p1\">](../../mfc/files-in-mfc.md)</ept> and <bpt id=\"p2\">[</bpt>File Handling<ept id=\"p2\">](../../c-runtime-library/file-handling.md)</ept> in the <bpt id=\"p3\">*</bpt>Run-Time Library Reference<ept id=\"p3\">*</ept>.","source":"For more information on using `CStdioFile`, see the articles [Files in MFC](../../mfc/files-in-mfc.md) and [File Handling](../../c-runtime-library/file-handling.md) in the *Run-Time Library Reference*."},{"pos":[2839,2860],"content":"Inheritance Hierarchy","linkify":"Inheritance Hierarchy","nodes":[{"content":"Inheritance Hierarchy","pos":[0,21]}]},{"pos":[2864,2911],"content":"<bpt id=\"p1\">[</bpt>CObject<ept id=\"p1\">](../../mfc/reference/cobject-class.md)</ept>","source":"[CObject](../../mfc/reference/cobject-class.md)"},{"pos":[2918,2961],"content":"<bpt id=\"p1\">[</bpt>CFile<ept id=\"p1\">](../../mfc/reference/cfile-class.md)</ept>","source":"[CFile](../../mfc/reference/cfile-class.md)"},{"pos":[2989,3001],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"pos":[3005,3022],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> afx.h","source":"**Header:** afx.h"},{"pos":[3032,3093],"content":"<bpt id=\"p1\">&lt;a name=\"cstdiofile__cstdiofile\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CStdioFile::CStdioFile","linkify":"<a name=\"cstdiofile__cstdiofile\"></a>  CStdioFile::CStdioFile","source":"<a name=\"cstdiofile__cstdiofile\"></a>  CStdioFile::CStdioFile"},{"pos":[3097,3146],"content":"Constructs and initializes a <ph id=\"ph1\">`CStdioFile`</ph> object.","source":"Constructs and initializes a `CStdioFile` object."},{"pos":[3434,3444],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"Specifies the file pointer returned by a call to the C run-time function <bpt id=\"p1\">[</bpt>fopen<ept id=\"p1\">](../../c-runtime-library/reference/fopen-wfopen.md)</ept>.","pos":[3465,3597],"source":" Specifies the file pointer returned by a call to the C run-time function [fopen](../../c-runtime-library/reference/fopen-wfopen.md)."},{"content":"Specifies a string that is the path to the desired file.","pos":[3622,3678]},{"content":"The path can be relative or absolute.","pos":[3679,3716]},{"content":"Specifies options for file creation, file sharing, and file access modes.","pos":[3739,3812]},{"content":"You can specify multiple options by using the bitwise OR ( <ph id=\"ph1\">`|`</ph>) operator.","pos":[3813,3886],"source":" You can specify multiple options by using the bitwise OR ( `|`) operator."},{"content":"One file access mode option is required; other modes are optional.","pos":[3893,3959]},{"content":"See <bpt id=\"p1\">[</bpt>CFile::CFile<ept id=\"p1\">](../../mfc/reference/cfile-class.md#cfile__cfile)</ept> for a list of mode options and other flags.","pos":[3960,4071],"source":" See [CFile::CFile](../../mfc/reference/cfile-class.md#cfile__cfile) for a list of mode options and other flags."},{"content":"In MFC version 3.0 and later, share flags are allowed.","pos":[4072,4126]},{"content":"Pointer to CAtlTransactionManager object.","pos":[4142,4183]},{"pos":[4193,4200],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The default constructor does not attach a file to the <ph id=\"ph1\">`CStdioFile`</ph> object.","pos":[4204,4278],"source":"The default constructor does not attach a file to the `CStdioFile` object."},{"content":"When using this constructor, you must use the <ph id=\"ph1\">`CStdioFile::Open`</ph> method to open a file and attach it to the <ph id=\"ph2\">`CStdioFile`</ph> object.","pos":[4279,4407],"source":" When using this constructor, you must use the `CStdioFile::Open` method to open a file and attach it to the `CStdioFile` object."},{"content":"The single-parameter constructor attaches an open file stream to the <ph id=\"ph1\">`CStdioFile`</ph> object.","pos":[4414,4503],"source":"The single-parameter constructor attaches an open file stream to the `CStdioFile` object."},{"content":"Allowed pointer values include the predefined input/output file pointers <ph id=\"ph1\">`stdin`</ph>, <ph id=\"ph2\">`stdout`</ph>, or <ph id=\"ph3\">`stderr`</ph>.","pos":[4504,4608],"source":" Allowed pointer values include the predefined input/output file pointers `stdin`, `stdout`, or `stderr`."},{"pos":[4615,4728],"content":"The two-parameter constructor creates a <ph id=\"ph1\">`CStdioFile`</ph> object and opens the corresponding file with the given path.","source":"The two-parameter constructor creates a `CStdioFile` object and opens the corresponding file with the given path."},{"pos":[4735,4847],"content":"If you pass <ph id=\"ph1\">`NULL`</ph> for either <ph id=\"ph2\">`pOpenStream`</ph> or <ph id=\"ph3\">`lpszFileName`</ph>, the constructor throws a <ph id=\"ph4\">`CInvalidArgException*`</ph>.","source":"If you pass `NULL` for either `pOpenStream` or `lpszFileName`, the constructor throws a `CInvalidArgException*`."},{"pos":[4854,4938],"content":"If the file cannot be opened or created, the constructor throws a <ph id=\"ph1\">`CFileException*`</ph>.","source":"If the file cannot be opened or created, the constructor throws a `CFileException*`."},{"pos":[4948,4955],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[4959,5058],"content":"<bpt id=\"p1\">[!code-cpp</bpt><bpt id=\"p2\">[</bpt>NVC_MFCFiles#37<ept id=\"p2\">](../../atl-mfc-shared/reference/codesnippet/cpp/cstdiofile-class_1.cpp)</ept><ept id=\"p1\">]</ept>","source":"[!code-cpp[NVC_MFCFiles#37](../../atl-mfc-shared/reference/codesnippet/cpp/cstdiofile-class_1.cpp)]"},{"pos":[5068,5127],"content":"<bpt id=\"p1\">&lt;a name=\"cstdiofile__m_pstream\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CStdioFile::m_pStream","linkify":"<a name=\"cstdiofile__m_pstream\"></a>  CStdioFile::m_pStream","source":"<a name=\"cstdiofile__m_pstream\"></a>  CStdioFile::m_pStream"},{"pos":[5131,5237],"content":"The <ph id=\"ph1\">`m_pStream`</ph> data member is the pointer to an open file as returned by the C run-time function <ph id=\"ph2\">`fopen`</ph>.","source":"The `m_pStream` data member is the pointer to an open file as returned by the C run-time function `fopen`."},{"pos":[5281,5288],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[5292,5360],"content":"It is <bpt id=\"p1\">**</bpt>NULL<ept id=\"p1\">**</ept> if the file has never been opened or has been closed.","source":"It is **NULL** if the file has never been opened or has been closed."},{"pos":[5370,5419],"content":"<bpt id=\"p1\">&lt;a name=\"cstdiofile__open\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CStdioFile::Open","linkify":"<a name=\"cstdiofile__open\"></a>  CStdioFile::Open","source":"<a name=\"cstdiofile__open\"></a>  CStdioFile::Open"},{"content":"Overloaded.","pos":[5423,5434]},{"content":"Open is designed for use with the default <ph id=\"ph1\">`CStdioFile`</ph> constructor.","pos":[5435,5502],"source":" Open is designed for use with the default `CStdioFile` constructor."},{"pos":[5777,5787],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"A string that is the path to the desired file.","pos":[5809,5855]},{"content":"The path can be relative or absolute.","pos":[5856,5893]},{"content":"Sharing and access mode.","pos":[5916,5940]},{"content":"Specifies the action to take when opening the file.","pos":[5941,5992]},{"content":"You can combine options by using the bitwise-OR (&amp;#124;) operator.","pos":[5993,6059],"source":" You can combine options by using the bitwise-OR (&#124;) operator."},{"content":"One access permission and one share option are required; the modeCreate and modeNoInherit modes are optional.","pos":[6060,6169]},{"content":"A pointer to an existing file-exception object that will receive the status of a failed operation.","pos":[6188,6286]},{"content":"Pointer to a <ph id=\"ph1\">`CAtlTransactionManager`</ph> object.","pos":[6302,6347],"source":" Pointer to a `CAtlTransactionManager` object."},{"pos":[6357,6369],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"pos":[6373,6413],"content":"<ph id=\"ph1\">`TRUE`</ph> if successful; otherwise <ph id=\"ph2\">`FALSE`</ph>.","source":"`TRUE` if successful; otherwise `FALSE`."},{"pos":[6423,6430],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[6440,6501],"content":"<bpt id=\"p1\">&lt;a name=\"cstdiofile__readstring\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CStdioFile::ReadString","linkify":"<a name=\"cstdiofile__readstring\"></a>  CStdioFile::ReadString","source":"<a name=\"cstdiofile__readstring\"></a>  CStdioFile::ReadString"},{"pos":[6505,6628],"content":"Reads text data into a buffer, up to a limit of <ph id=\"ph1\">`nMax`</ph>–1 characters, from the file associated with the <ph id=\"ph2\">`CStdioFile`</ph> object.","source":"Reads text data into a buffer, up to a limit of `nMax`–1 characters, from the file associated with the `CStdioFile` object."},{"pos":[6766,6776],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"Specifies a pointer to a user-supplied buffer that will receive a null-terminated text string.","pos":[6790,6884]},{"content":"Specifies the maximum number of characters to read, not counting the terminating null character.","pos":[6901,6997]},{"content":"A reference to a <ph id=\"ph1\">`CString`</ph> object that will contain the string when the function returns.","pos":[7017,7106],"source":" A reference to a `CString` object that will contain the string when the function returns."},{"pos":[7116,7128],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"A pointer to the buffer containing the text data.","pos":[7132,7181]},{"content":"<bpt id=\"p1\">**</bpt>NULL<ept id=\"p1\">**</ept> if end-of-file was reached without reading any data; or if boolean, <bpt id=\"p2\">**</bpt>FALSE<ept id=\"p2\">**</ept> if end-of-file was reached without reading any data.","pos":[7182,7321],"source":"**NULL** if end-of-file was reached without reading any data; or if boolean, **FALSE** if end-of-file was reached without reading any data."},{"pos":[7331,7338],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"Reading is stopped by the first newline character.","pos":[7342,7392]},{"content":"If, in that case, fewer than <ph id=\"ph1\">`nMax`</ph>–1 characters have been read, a newline character is stored in the buffer.","pos":[7393,7502],"source":" If, in that case, fewer than `nMax`–1 characters have been read, a newline character is stored in the buffer."},{"content":"A null character ('\\0') is appended in either case.","pos":[7503,7554]},{"pos":[7561,7723],"content":"<bpt id=\"p1\">[</bpt>CFile::Read<ept id=\"p1\">](../../mfc/reference/cfile-class.md#cfile__read)</ept> is also available for text-mode input, but it does not terminate on a carriage return–linefeed pair.","source":"[CFile::Read](../../mfc/reference/cfile-class.md#cfile__read) is also available for text-mode input, but it does not terminate on a carriage return–linefeed pair."},{"pos":[7731,7842],"content":"[!NOTE]\n The `CString` version of this function removes the `'\\n'` if present; the `LPTSTR` version does not.","leadings":["","> "],"nodes":[{"content":"The <ph id=\"ph1\">`CString`</ph> version of this function removes the <ph id=\"ph2\">`'\\n'`</ph> if present; the <ph id=\"ph3\">`LPTSTR`</ph> version does not.","pos":[9,109],"source":" The `CString` version of this function removes the `'\\n'` if present; the `LPTSTR` version does not."}]},{"pos":[7852,7859],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[7863,7962],"content":"<bpt id=\"p1\">[!code-cpp</bpt><bpt id=\"p2\">[</bpt>NVC_MFCFiles#38<ept id=\"p2\">](../../atl-mfc-shared/reference/codesnippet/cpp/cstdiofile-class_2.cpp)</ept><ept id=\"p1\">]</ept>","source":"[!code-cpp[NVC_MFCFiles#38](../../atl-mfc-shared/reference/codesnippet/cpp/cstdiofile-class_2.cpp)]"},{"pos":[7972,8021],"content":"<bpt id=\"p1\">&lt;a name=\"cstdiofile__seek\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CStdioFile::Seek","linkify":"<a name=\"cstdiofile__seek\"></a>  CStdioFile::Seek","source":"<a name=\"cstdiofile__seek\"></a>  CStdioFile::Seek"},{"content":"Repositions the pointer in a previously opened file.","pos":[8025,8077]},{"pos":[8164,8174],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"Number of bytes to move the pointer.","pos":[8188,8224]},{"content":"Pointer movement mode.","pos":[8242,8264]},{"content":"Must be one of the following values:","pos":[8265,8301]},{"pos":[8309,8399],"content":"<ph id=\"ph1\">`CFile::begin`</ph>: Move the file pointer <ph id=\"ph2\">`lOff`</ph> bytes forward from the beginning of the file.","source":"`CFile::begin`: Move the file pointer `lOff` bytes forward from the beginning of the file."},{"pos":[8407,8498],"content":"<ph id=\"ph1\">`CFile::current`</ph>: Move the file pointer <ph id=\"ph2\">`lOff`</ph> bytes from the current position in the file.","source":"`CFile::current`: Move the file pointer `lOff` bytes from the current position in the file."},{"content":"<ph id=\"ph1\">`CFile::end`</ph>: Move the file pointer <ph id=\"ph2\">`lOff`</ph> bytes from the end of the file.","pos":[8506,8580],"source":"`CFile::end`: Move the file pointer `lOff` bytes from the end of the file."},{"content":"Note that <ph id=\"ph1\">`lOff`</ph> must be negative to seek into the existing file; positive values will seek past the end of the file.","pos":[8581,8698],"source":" Note that `lOff` must be negative to seek into the existing file; positive values will seek past the end of the file."},{"pos":[8708,8720],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"If the requested position is legal, <ph id=\"ph1\">`Seek`</ph> returns the new byte offset from the beginning of the file.","pos":[8724,8826],"source":"If the requested position is legal, `Seek` returns the new byte offset from the beginning of the file."},{"content":"Otherwise, the return value is undefined and a <ph id=\"ph1\">`CFileException`</ph> object is thrown.","pos":[8827,8908],"source":" Otherwise, the return value is undefined and a `CFileException` object is thrown."},{"pos":[8918,8925],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">`Seek`</ph> function permits random access to a file's contents by moving the pointer a specified amount, absolutely or relatively.","pos":[8929,9059],"source":"The `Seek` function permits random access to a file's contents by moving the pointer a specified amount, absolutely or relatively."},{"content":"No data is actually read during the seek.","pos":[9060,9101]},{"content":"If the requested position is larger than the size of the file, the file length will be extended to that position, and no exception will be thrown.","pos":[9102,9248]},{"content":"When a file is opened, the file pointer is positioned at offset 0, the beginning of the file.","pos":[9255,9348]},{"content":"This implementation of <ph id=\"ph1\">`Seek`</ph> is based on the Run-Time Library (CRT) function <ph id=\"ph2\">`fseek`</ph>.","pos":[9355,9441],"source":"This implementation of `Seek` is based on the Run-Time Library (CRT) function `fseek`."},{"content":"There are several limits on the usage of <ph id=\"ph1\">`Seek`</ph> on streams opened in text mode.","pos":[9442,9521],"source":" There are several limits on the usage of `Seek` on streams opened in text mode."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>fseek, _fseeki64<ept id=\"p1\">](../../c-runtime-library/reference/fseek-fseeki64.md)</ept>.","pos":[9522,9620],"source":" For more information, see [fseek, _fseeki64](../../c-runtime-library/reference/fseek-fseeki64.md)."},{"pos":[9630,9637],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example shows how to use <ph id=\"ph1\">`Seek`</ph> to move the pointer 1000 bytes from the beginning of the <ph id=\"ph2\">`cfile`</ph> file.","pos":[9641,9757],"source":"The following example shows how to use `Seek` to move the pointer 1000 bytes from the beginning of the `cfile` file."},{"content":"Note that <ph id=\"ph1\">`Seek`</ph> does not read data, so you must subsequently call <bpt id=\"p1\">[</bpt>CStdioFile::ReadString<ept id=\"p1\">](#cstdiofile__readstring)</ept> to read data.","pos":[9758,9888],"source":" Note that `Seek` does not read data, so you must subsequently call [CStdioFile::ReadString](#cstdiofile__readstring) to read data."},{"pos":[9895,9994],"content":"<bpt id=\"p1\">[!code-cpp</bpt><bpt id=\"p2\">[</bpt>NVC_MFCFiles#39<ept id=\"p2\">](../../atl-mfc-shared/reference/codesnippet/cpp/cstdiofile-class_3.cpp)</ept><ept id=\"p1\">]</ept>","source":"[!code-cpp[NVC_MFCFiles#39](../../atl-mfc-shared/reference/codesnippet/cpp/cstdiofile-class_3.cpp)]"},{"pos":[10004,10067],"content":"<bpt id=\"p1\">&lt;a name=\"cstdiofile__writestring\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CStdioFile::WriteString","linkify":"<a name=\"cstdiofile__writestring\"></a>  CStdioFile::WriteString","source":"<a name=\"cstdiofile__writestring\"></a>  CStdioFile::WriteString"},{"pos":[10071,10149],"content":"Writes data from a buffer to the file associated with the <ph id=\"ph1\">`CStdioFile`</ph> object.","source":"Writes data from a buffer to the file associated with the `CStdioFile` object."},{"pos":[10214,10224],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"Specifies a pointer to a buffer that contains a null-terminated string.","pos":[10238,10309]},{"pos":[10319,10326],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The terminating null character ( <ph id=\"ph1\">`\\0`</ph>) is not written to the file.","pos":[10330,10396],"source":"The terminating null character ( `\\0`) is not written to the file."},{"content":"This method writes newline characters in <ph id=\"ph1\">`lpsz`</ph> to the file as a carriage return/linefeed pair.","pos":[10397,10492],"source":" This method writes newline characters in `lpsz` to the file as a carriage return/linefeed pair."},{"pos":[10499,10655],"content":"If you want to write data that is not null-terminated to a file, use <ph id=\"ph1\">`CStdioFile::Write`</ph> or <bpt id=\"p1\">[</bpt>CFile::Write<ept id=\"p1\">](../../mfc/reference/cfile-class.md#cfile__write)</ept>.","source":"If you want to write data that is not null-terminated to a file, use `CStdioFile::Write` or [CFile::Write](../../mfc/reference/cfile-class.md#cfile__write)."},{"pos":[10662,10754],"content":"This method throws a <ph id=\"ph1\">`CInvalidArgException*`</ph> if you specify <ph id=\"ph2\">`NULL`</ph> for the <ph id=\"ph3\">`lpsz`</ph> parameter.","source":"This method throws a `CInvalidArgException*` if you specify `NULL` for the `lpsz` parameter."},{"pos":[10761,10834],"content":"This method throws a <ph id=\"ph1\">`CFileException*`</ph> in response to file system errors.","source":"This method throws a `CFileException*` in response to file system errors."},{"pos":[10844,10851],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[10855,10954],"content":"<bpt id=\"p1\">[!code-cpp</bpt><bpt id=\"p2\">[</bpt>NVC_MFCFiles#40<ept id=\"p2\">](../../atl-mfc-shared/reference/codesnippet/cpp/cstdiofile-class_4.cpp)</ept><ept id=\"p1\">]</ept>","source":"[!code-cpp[NVC_MFCFiles#40](../../atl-mfc-shared/reference/codesnippet/cpp/cstdiofile-class_4.cpp)]"},{"pos":[10963,10971],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>CFile Class<ept id=\"p1\">](../../mfc/reference/cfile-class.md)</ept><ph id=\"ph1\"> </ph>","pos":[10975,11025],"source":"[CFile Class](../../mfc/reference/cfile-class.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Hierarchy Chart<ept id=\"p1\">](../../mfc/hierarchy-chart.md)</ept><ph id=\"ph1\"> </ph>","pos":[11028,11077],"source":" [Hierarchy Chart](../../mfc/hierarchy-chart.md) "},{"content":"<bpt id=\"p1\"> [</bpt>CFile Class<ept id=\"p1\">](../../mfc/reference/cfile-class.md)</ept><ph id=\"ph1\"> </ph>","pos":[11080,11131],"source":" [CFile Class](../../mfc/reference/cfile-class.md) "},{"content":"<bpt id=\"p1\"> [</bpt>CFile::Duplicate<ept id=\"p1\">](../../mfc/reference/cfile-class.md#cfile__duplicate)</ept><ph id=\"ph1\"> </ph>","pos":[11134,11207],"source":" [CFile::Duplicate](../../mfc/reference/cfile-class.md#cfile__duplicate) "},{"content":"<bpt id=\"p1\"> [</bpt>CFile::LockRange<ept id=\"p1\">](../../mfc/reference/cfile-class.md#cfile__lockrange)</ept><ph id=\"ph1\"> </ph>","pos":[11210,11283],"source":" [CFile::LockRange](../../mfc/reference/cfile-class.md#cfile__lockrange) "},{"content":"<bpt id=\"p1\"> [</bpt>CFile::UnlockRange<ept id=\"p1\">](../../mfc/reference/cfile-class.md#cfile__unlockrange)</ept><ph id=\"ph1\"> </ph>","pos":[11286,11363],"source":" [CFile::UnlockRange](../../mfc/reference/cfile-class.md#cfile__unlockrange) "},{"content":"<bpt id=\"p1\"> [</bpt>CNotSupportedException Class<ept id=\"p1\">](../../mfc/reference/cnotsupportedexception-class.md)</ept>","pos":[11366,11450],"source":" [CNotSupportedException Class](../../mfc/reference/cnotsupportedexception-class.md)"}],"content":"---\ntitle: \"CStdioFile Class | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"reference\"\nf1_keywords: \n  - \"CStdioFile\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"CStdioFile class\"\n  - \"I/O [MFC], stream\"\n  - \"stream I/O\"\nms.assetid: 88c2274c-4f0e-4327-882a-557ba4b3ae15\ncaps.latest.revision: 22\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# CStdioFile Class\nRepresents a C run-time stream file as opened by the run-time function [fopen](../../c-runtime-library/reference/fopen-wfopen.md).  \n  \n## Syntax  \n  \n```  \nclass CStdioFile : public CFile  \n```  \n  \n## Members  \n  \n### Public Constructors  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CStdioFile::CStdioFile](#cstdiofile__cstdiofile)|Constructs a `CStdioFile` object from a path or file pointer.|  \n  \n### Public Methods  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CStdioFile::Open](#cstdiofile__open)|Overloaded. Open is designed for use with the default `CStdioFile` constructor (Overrides [CFile::Open](../../mfc/reference/cfile-class.md#cfile__open)).|  \n|[CStdioFile::ReadString](#cstdiofile__readstring)|Reads a single line of text.|  \n|[CStdioFile::Seek](#cstdiofile__seek)|Positions the current file pointer.|  \n|[CStdioFile::WriteString](#cstdiofile__writestring)|Writes a single line of text.|  \n  \n### Public Data Members  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CStdioFile::m_pStream](#cstdiofile__m_pstream)|Contains a pointer to an open file.|  \n  \n## Remarks  \n Stream files are buffered and can be opened in either text mode (the default) or binary mode.  \n  \n Text mode provides special processing for carriage return–linefeed pairs. When you write a newline character (0x0A) to a text-mode `CStdioFile` object, the byte pair (0x0D, 0x0A) is sent to the file. When you read, the byte pair (0x0D, 0x0A) is translated to a single 0x0A byte.  \n  \n The [CFile](../../mfc/reference/cfile-class.md) functions [Duplicate](../../mfc/reference/cfile-class.md#cfile__duplicate), [LockRange](../../mfc/reference/cfile-class.md#cfile__lockrange), and [UnlockRange](../../mfc/reference/cfile-class.md#cfile__unlockrange) are not supported for `CStdioFile`.  \n  \n If you call these functions on a `CStdioFile`, you will get a [CNotSupportedException](../../mfc/reference/cnotsupportedexception-class.md).  \n  \n For more information on using `CStdioFile`, see the articles [Files in MFC](../../mfc/files-in-mfc.md) and [File Handling](../../c-runtime-library/file-handling.md) in the *Run-Time Library Reference*.  \n  \n## Inheritance Hierarchy  \n [CObject](../../mfc/reference/cobject-class.md)  \n  \n [CFile](../../mfc/reference/cfile-class.md)  \n  \n `CStdioFile`  \n  \n## Requirements  \n **Header:** afx.h  \n  \n##  <a name=\"cstdiofile__cstdiofile\"></a>  CStdioFile::CStdioFile  \n Constructs and initializes a `CStdioFile` object.  \n  \n```  \nCStdioFile();\n\n \nCStdioFile(\n    CAtlTransactionManager* pTM);\n\n \nCStdioFile(\n    FILE* pOpenStream);\n\n \nCStdioFile(\n    LPCTSTR lpszFileName,  \n    UINT nOpenFlags);\n\n \nCStdioFile(\n    LPCTSTR lpszFileName,\n    UINT nOpenFlags,\n    CAtlTransactionManager* pTM);\n```  \n  \n### Parameters  \n `pOpenStream`  \n Specifies the file pointer returned by a call to the C run-time function [fopen](../../c-runtime-library/reference/fopen-wfopen.md).  \n  \n `lpszFileName`  \n Specifies a string that is the path to the desired file. The path can be relative or absolute.  \n  \n `nOpenFlags`  \n Specifies options for file creation, file sharing, and file access modes. You can specify multiple options by using the bitwise OR ( `|`) operator.  \n  \n One file access mode option is required; other modes are optional. See [CFile::CFile](../../mfc/reference/cfile-class.md#cfile__cfile) for a list of mode options and other flags. In MFC version 3.0 and later, share flags are allowed.  \n  \n `pTM`  \n Pointer to CAtlTransactionManager object.  \n  \n### Remarks  \n The default constructor does not attach a file to the `CStdioFile` object. When using this constructor, you must use the `CStdioFile::Open` method to open a file and attach it to the `CStdioFile` object.  \n  \n The single-parameter constructor attaches an open file stream to the `CStdioFile` object. Allowed pointer values include the predefined input/output file pointers `stdin`, `stdout`, or `stderr`.  \n  \n The two-parameter constructor creates a `CStdioFile` object and opens the corresponding file with the given path.  \n  \n If you pass `NULL` for either `pOpenStream` or `lpszFileName`, the constructor throws a `CInvalidArgException*`.  \n  \n If the file cannot be opened or created, the constructor throws a `CFileException*`.  \n  \n### Example  \n [!code-cpp[NVC_MFCFiles#37](../../atl-mfc-shared/reference/codesnippet/cpp/cstdiofile-class_1.cpp)]  \n  \n##  <a name=\"cstdiofile__m_pstream\"></a>  CStdioFile::m_pStream  \n The `m_pStream` data member is the pointer to an open file as returned by the C run-time function `fopen`.  \n  \n```  \nFILE* m_pStream;  \n```  \n  \n### Remarks  \n It is **NULL** if the file has never been opened or has been closed.  \n  \n##  <a name=\"cstdiofile__open\"></a>  CStdioFile::Open  \n Overloaded. Open is designed for use with the default `CStdioFile` constructor.  \n  \n```  \nvirtual BOOL Open(\n    LPCTSTR lpszFileName,  \n    UINT nOpenFlags,  \n    CFileException* pError = NULL);\n\n \nvirtual BOOL Open(\n    LPCTSTR lpszFileName,  \n    UINT nOpenFlags,  \n    CAtlTransactionManager* pTM,  \n    CFileException* pError = NULL);\n```  \n  \n### Parameters  \n `lpszFileName`  \n A string that is the path to the desired file. The path can be relative or absolute.  \n  \n `nOpenFlags`  \n Sharing and access mode. Specifies the action to take when opening the file. You can combine options by using the bitwise-OR (&#124;) operator. One access permission and one share option are required; the modeCreate and modeNoInherit modes are optional.  \n  \n `pError`  \n A pointer to an existing file-exception object that will receive the status of a failed operation.  \n  \n `pTM`  \n Pointer to a `CAtlTransactionManager` object.  \n  \n### Return Value  \n `TRUE` if successful; otherwise `FALSE`.  \n  \n### Remarks  \n  \n##  <a name=\"cstdiofile__readstring\"></a>  CStdioFile::ReadString  \n Reads text data into a buffer, up to a limit of `nMax`–1 characters, from the file associated with the `CStdioFile` object.  \n  \n```  \nvirtual LPTSTR ReadString(\n    LPTSTR lpsz,  \n    UINT nMax);\n\n \nvirtual BOOL ReadString(\n    CString& rString);\n```  \n  \n### Parameters  \n `lpsz`  \n Specifies a pointer to a user-supplied buffer that will receive a null-terminated text string.  \n  \n `nMax`  \n Specifies the maximum number of characters to read, not counting the terminating null character.  \n  \n `rString`  \n A reference to a `CString` object that will contain the string when the function returns.  \n  \n### Return Value  \n A pointer to the buffer containing the text data. **NULL** if end-of-file was reached without reading any data; or if boolean, **FALSE** if end-of-file was reached without reading any data.  \n  \n### Remarks  \n Reading is stopped by the first newline character. If, in that case, fewer than `nMax`–1 characters have been read, a newline character is stored in the buffer. A null character ('\\0') is appended in either case.  \n  \n [CFile::Read](../../mfc/reference/cfile-class.md#cfile__read) is also available for text-mode input, but it does not terminate on a carriage return–linefeed pair.  \n  \n> [!NOTE]\n>  The `CString` version of this function removes the `'\\n'` if present; the `LPTSTR` version does not.  \n  \n### Example  \n [!code-cpp[NVC_MFCFiles#38](../../atl-mfc-shared/reference/codesnippet/cpp/cstdiofile-class_2.cpp)]  \n  \n##  <a name=\"cstdiofile__seek\"></a>  CStdioFile::Seek  \n Repositions the pointer in a previously opened file.  \n  \n```  \nvirtual ULONGLONG Seek(\n    LONGLONG lOff,  \n    UINT nFrom);\n```  \n  \n### Parameters  \n `lOff`  \n Number of bytes to move the pointer.  \n  \n `nFrom`  \n Pointer movement mode. Must be one of the following values:  \n  \n- `CFile::begin`: Move the file pointer `lOff` bytes forward from the beginning of the file.  \n  \n- `CFile::current`: Move the file pointer `lOff` bytes from the current position in the file.  \n  \n- `CFile::end`: Move the file pointer `lOff` bytes from the end of the file. Note that `lOff` must be negative to seek into the existing file; positive values will seek past the end of the file.  \n  \n### Return Value  \n If the requested position is legal, `Seek` returns the new byte offset from the beginning of the file. Otherwise, the return value is undefined and a `CFileException` object is thrown.  \n  \n### Remarks  \n The `Seek` function permits random access to a file's contents by moving the pointer a specified amount, absolutely or relatively. No data is actually read during the seek. If the requested position is larger than the size of the file, the file length will be extended to that position, and no exception will be thrown.  \n  \n When a file is opened, the file pointer is positioned at offset 0, the beginning of the file.  \n  \n This implementation of `Seek` is based on the Run-Time Library (CRT) function `fseek`. There are several limits on the usage of `Seek` on streams opened in text mode. For more information, see [fseek, _fseeki64](../../c-runtime-library/reference/fseek-fseeki64.md).  \n  \n### Example  \n The following example shows how to use `Seek` to move the pointer 1000 bytes from the beginning of the `cfile` file. Note that `Seek` does not read data, so you must subsequently call [CStdioFile::ReadString](#cstdiofile__readstring) to read data.  \n  \n [!code-cpp[NVC_MFCFiles#39](../../atl-mfc-shared/reference/codesnippet/cpp/cstdiofile-class_3.cpp)]  \n  \n##  <a name=\"cstdiofile__writestring\"></a>  CStdioFile::WriteString  \n Writes data from a buffer to the file associated with the `CStdioFile` object.  \n  \n```  \nvirtual void WriteString(LPCTSTR lpsz);\n```  \n  \n### Parameters  \n `lpsz`  \n Specifies a pointer to a buffer that contains a null-terminated string.  \n  \n### Remarks  \n The terminating null character ( `\\0`) is not written to the file. This method writes newline characters in `lpsz` to the file as a carriage return/linefeed pair.  \n  \n If you want to write data that is not null-terminated to a file, use `CStdioFile::Write` or [CFile::Write](../../mfc/reference/cfile-class.md#cfile__write).  \n  \n This method throws a `CInvalidArgException*` if you specify `NULL` for the `lpsz` parameter.  \n  \n This method throws a `CFileException*` in response to file system errors.  \n  \n### Example  \n [!code-cpp[NVC_MFCFiles#40](../../atl-mfc-shared/reference/codesnippet/cpp/cstdiofile-class_4.cpp)]  \n  \n## See Also  \n [CFile Class](../../mfc/reference/cfile-class.md)   \n [Hierarchy Chart](../../mfc/hierarchy-chart.md)   \n [CFile Class](../../mfc/reference/cfile-class.md)   \n [CFile::Duplicate](../../mfc/reference/cfile-class.md#cfile__duplicate)   \n [CFile::LockRange](../../mfc/reference/cfile-class.md#cfile__lockrange)   \n [CFile::UnlockRange](../../mfc/reference/cfile-class.md#cfile__unlockrange)   \n [CNotSupportedException Class](../../mfc/reference/cnotsupportedexception-class.md)\n"}