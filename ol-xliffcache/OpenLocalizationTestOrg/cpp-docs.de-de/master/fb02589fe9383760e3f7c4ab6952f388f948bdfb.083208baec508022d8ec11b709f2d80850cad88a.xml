{"nodes":[{"pos":[12,35],"content":"_umask | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"_umask | Microsoft Docs","pos":[0,23]}]},{"content":"_umask","pos":[1048,1054]},{"content":"Sets the default file-permission mask.","pos":[1055,1093]},{"content":"A more secure version of this function is available; see <bpt id=\"p1\">[</bpt>_umask_s<ept id=\"p1\">](../../c-runtime-library/reference/umask-s.md)</ept>.","pos":[1094,1208],"source":" A more secure version of this function is available; see [_umask_s](../../c-runtime-library/reference/umask-s.md)."},{"content":"Syntax","pos":[1217,1223]},{"content":"Parameters","pos":[1284,1294]},{"content":"Default permission setting.","pos":[1309,1336]},{"content":"Return Value","pos":[1345,1357]},{"content":"returns the previous value of <ph id=\"ph1\">`pmode`</ph>.","pos":[1370,1408],"source":" returns the previous value of `pmode`."},{"content":"There is no error return.","pos":[1409,1434]},{"content":"Remarks","pos":[1443,1450]},{"content":"The <ph id=\"ph1\">`_umask`</ph> function sets the file-permission mask of the current process to the mode specified by <ph id=\"ph2\">`pmode`</ph><bpt id=\"p1\">*</bpt>.<ept id=\"p1\">*</ept>","pos":[1454,1564],"source":"The `_umask` function sets the file-permission mask of the current process to the mode specified by `pmode`*.*"},{"content":"The file-permission mask modifies the permission setting of new files created by <ph id=\"ph1\">`_creat`</ph>, <ph id=\"ph2\">`_open`</ph>, or <ph id=\"ph3\">`_sopen`</ph>.","pos":[1565,1677],"source":" The file-permission mask modifies the permission setting of new files created by `_creat`, `_open`, or `_sopen`."},{"content":"If a bit in the mask is 1, the corresponding bit in the file's requested permission value is set to 0 (disallowed).","pos":[1678,1793]},{"content":"If a bit in the mask is 0, the corresponding bit is left unchanged.","pos":[1794,1861]},{"content":"The permission setting for a new file is not set until the file is closed for the first time.","pos":[1862,1955]},{"pos":[1962,2073],"content":"The integer expression <ph id=\"ph1\">`pmode`</ph> contains one or both of the following manifest constants, defined in SYS\\STAT.H:","source":"The integer expression `pmode` contains one or both of the following manifest constants, defined in SYS\\STAT.H:"},{"content":"Writing permitted.","pos":[2095,2113]},{"content":"Reading permitted.","pos":[2134,2152]},{"content":"Reading and writing permitted.","pos":[2185,2215]},{"content":"When both constants are given, they are joined with the bitwise-OR operator ( <ph id=\"ph1\">`|`</ph> ).","pos":[2222,2306],"source":"When both constants are given, they are joined with the bitwise-OR operator ( `|` )."},{"content":"If the <ph id=\"ph1\">`pmode`</ph> argument is <ph id=\"ph2\">`_S_IREAD`</ph>, reading is not allowed (the file is write-only).","pos":[2307,2394],"source":" If the `pmode` argument is `_S_IREAD`, reading is not allowed (the file is write-only)."},{"content":"If the <ph id=\"ph1\">`pmode`</ph> argument is <ph id=\"ph2\">`_S_IWRITE`</ph>, writing is not allowed (the file is read-only).","pos":[2395,2482],"source":" If the `pmode` argument is `_S_IWRITE`, writing is not allowed (the file is read-only)."},{"content":"For example, if the write bit is set in the mask, any new files will be read-only.","pos":[2483,2565]},{"content":"Note that with MS-DOS and the Windows operating systems, all files are readable; it is not possible to give write-only permission.","pos":[2566,2696]},{"content":"Therefore, setting the read bit with <ph id=\"ph1\">`_umask`</ph> has no effect on the file's modes.","pos":[2697,2777],"source":" Therefore, setting the read bit with `_umask` has no effect on the file's modes."},{"pos":[2784,2934],"content":"If <ph id=\"ph1\">`pmode`</ph> is not a combination of one of the manifest constants or incorporates an alternate set of constants, the function will simply ignore those.","source":"If `pmode` is not a combination of one of the manifest constants or incorporates an alternate set of constants, the function will simply ignore those."},{"content":"Requirements","pos":[2943,2955]},{"content":"Routine","pos":[2962,2969]},{"content":"Required header","pos":[2970,2985]},{"content":"io.h&gt;, <ph id=\"ph1\">\\&lt;</ph>sys/stat.h&gt;, <ph id=\"ph2\">\\&lt;</ph>sys/types.h&gt;","pos":[3041,3077],"source":"io.h>, \\<sys/stat.h>, \\<sys/types.h>"},{"pos":[3085,3209],"content":"For additional compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept> in the Introduction.","source":"For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md) in the Introduction."},{"content":"Libraries","pos":[3218,3227]},{"pos":[3231,3323],"content":"All versions of the <bpt id=\"p1\">[</bpt>C run-time libraries<ept id=\"p1\">](../../c-runtime-library/crt-library-features.md)</ept>.","source":"All versions of the [C run-time libraries](../../c-runtime-library/crt-library-features.md)."},{"content":"Example","pos":[3332,3339]},{"content":".NET Framework Equivalent","pos":[3945,3970]},{"content":"System::IO::File::SetAttributes","pos":[3975,4006]},{"content":"See Also","pos":[4092,4100]},{"content":"File Handling","pos":[4105,4118]},{"content":"Low-Level I/O","pos":[4167,4180]},{"content":"_chmod, _wchmod","pos":[4229,4244]},{"content":"_creat, _wcreat","pos":[4302,4317]},{"content":"_mkdir, _wmkdir","pos":[4375,4390]},{"content":"_open, _wopen","pos":[4448,4461]}],"content":"---\ntitle: \"_umask | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"_umask\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\n  - \"api-ms-win-crt-filesystem-l1-1-0.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"_umask\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"masks, file-permission-setting\"\n  - \"_umask function\"\n  - \"masks\"\n  - \"umask function\"\n  - \"file permissions [C++]\"\n  - \"files [C++], permission settings for\"\nms.assetid: 5e9a13ba-5321-4536-8721-6afb6f4c8483\ncaps.latest.revision: 21\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# _umask\nSets the default file-permission mask. A more secure version of this function is available; see [_umask_s](../../c-runtime-library/reference/umask-s.md).  \n  \n## Syntax  \n  \n```  \nint _umask(  \n   int pmode   \n);  \n```  \n  \n#### Parameters  \n `pmode`  \n Default permission setting.  \n  \n## Return Value  \n `_umask` returns the previous value of `pmode`. There is no error return.  \n  \n## Remarks  \n The `_umask` function sets the file-permission mask of the current process to the mode specified by `pmode`*.* The file-permission mask modifies the permission setting of new files created by `_creat`, `_open`, or `_sopen`. If a bit in the mask is 1, the corresponding bit in the file's requested permission value is set to 0 (disallowed). If a bit in the mask is 0, the corresponding bit is left unchanged. The permission setting for a new file is not set until the file is closed for the first time.  \n  \n The integer expression `pmode` contains one or both of the following manifest constants, defined in SYS\\STAT.H:  \n  \n `_S_IWRITE`  \n Writing permitted.  \n  \n `_S_IREAD`  \n Reading permitted.  \n  \n `_S_IREAD | _S_IWRITE`  \n Reading and writing permitted.  \n  \n When both constants are given, they are joined with the bitwise-OR operator ( `|` ). If the `pmode` argument is `_S_IREAD`, reading is not allowed (the file is write-only). If the `pmode` argument is `_S_IWRITE`, writing is not allowed (the file is read-only). For example, if the write bit is set in the mask, any new files will be read-only. Note that with MS-DOS and the Windows operating systems, all files are readable; it is not possible to give write-only permission. Therefore, setting the read bit with `_umask` has no effect on the file's modes.  \n  \n If `pmode` is not a combination of one of the manifest constants or incorporates an alternate set of constants, the function will simply ignore those.  \n  \n## Requirements  \n  \n|Routine|Required header|  \n|-------------|---------------------|  \n|`_umask`|\\<io.h>, \\<sys/stat.h>, \\<sys/types.h>|  \n  \n For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md) in the Introduction.  \n  \n## Libraries  \n All versions of the [C run-time libraries](../../c-runtime-library/crt-library-features.md).  \n  \n## Example  \n  \n```  \n// crt_umask.c  \n// compile with: /W3  \n// This program uses _umask to set  \n// the file-permission mask so that all future  \n// files will be created as read-only files.  \n// It also displays the old mask.  \n#include <sys/stat.h>  \n#include <sys/types.h>  \n#include <io.h>  \n#include <stdio.h>  \n  \nint main( void )  \n{  \n   int oldmask;  \n  \n   /* Create read-only files: */  \n   oldmask = _umask( _S_IWRITE ); // C4996  \n   // Note: _umask is deprecated; consider using _umask_s instead  \n   printf( \"Oldmask = 0x%.4x\\n\", oldmask );  \n}  \n```  \n  \n```Output  \nOldmask = 0x0000  \n```  \n  \n## .NET Framework Equivalent  \n [System::IO::File::SetAttributes](https://msdn.microsoft.com/en-us/library/system.io.file.setattributes.aspx)  \n  \n## See Also  \n [File Handling](../../c-runtime-library/file-handling.md)   \n [Low-Level I/O](../../c-runtime-library/low-level-i-o.md)   \n [_chmod, _wchmod](../../c-runtime-library/reference/chmod-wchmod.md)   \n [_creat, _wcreat](../../c-runtime-library/reference/creat-wcreat.md)   \n [_mkdir, _wmkdir](../../c-runtime-library/reference/mkdir-wmkdir.md)   \n [_open, _wopen](../../c-runtime-library/reference/open-wopen.md)"}