{"nodes":[{"pos":[12,47],"content":"struct UNWIND_INFO | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"struct UNWIND_INFO | Microsoft Docs","pos":[0,35]}]},{"content":"struct UNWIND_INFO","pos":[527,545]},{"content":"The unwind data info structure is used to record the effects a function has on the stack pointer and where the nonvolatile registers are saved on the stack:","pos":[546,702]},{"content":"UBYTE: 3","pos":[723,731]},{"content":"Version","pos":[732,739]},{"content":"UBYTE: 5","pos":[744,752]},{"content":"Flags","pos":[753,758]},{"content":"UBYTE","pos":[763,768]},{"content":"Size of prolog","pos":[769,783]},{"content":"UBYTE","pos":[788,793]},{"content":"Count of unwind codes","pos":[794,815]},{"content":"UBYTE: 4","pos":[820,828]},{"content":"Frame Register","pos":[829,843]},{"content":"UBYTE: 4","pos":[848,856]},{"content":"Frame Register offset (scaled)","pos":[857,887]},{"content":"USHORT * n","pos":[892,902]},{"content":"Unwind codes array","pos":[903,921]},{"content":"variable","pos":[926,934]},{"content":"Can either be of form (1) or (2) below","pos":[935,973]},{"content":"(1)  Exception Handler","pos":[981,1003]},{"content":"ULONG","pos":[1024,1029]},{"content":"Address of exception handler","pos":[1030,1058]},{"content":"variable","pos":[1063,1071]},{"content":"Language-specific handler data (optional)","pos":[1072,1113]},{"content":"(2)  Chained Unwind Info","pos":[1121,1145]},{"content":"ULONG","pos":[1166,1171]},{"content":"Function start address","pos":[1172,1194]},{"content":"ULONG","pos":[1199,1204]},{"content":"Function end address","pos":[1205,1225]},{"content":"ULONG","pos":[1230,1235]},{"content":"Unwind info address","pos":[1236,1255]},{"content":"The UNWIND_INFO structure must be DWORD aligned in memory.","pos":[1263,1321]},{"content":"The meaning of each field is as follows:","pos":[1322,1362]},{"content":"Version","pos":[1371,1378]},{"content":"Version number of the unwind data, currently 1.","pos":[1384,1431]},{"content":"Flags","pos":[1440,1445]},{"content":"Three flags are currently defined:","pos":[1451,1485]},{"content":"UNW_FLAG_EHANDLER   The function has an exception handler that should be called when looking for functions that need to examine exceptions.","pos":[1492,1631]},{"content":"UNW_FLAG_UHANDLER   The function has a termination handler that should be called when unwinding an exception.","pos":[1638,1747]},{"content":"UNW_FLAG_CHAININFO   This unwind info structure is not the primary one for the procedure.","pos":[1754,1843]},{"content":"Instead, the chained unwind info entry is the contents of a previous RUNTIME_FUNCTION entry.","pos":[1844,1936]},{"content":"See the following text for an explanation of chained unwind info structures.","pos":[1937,2013]},{"content":"If this flag is set, then the UNW_FLAG_EHANDLER and UNW_FLAG_UHANDLER flags must be cleared.","pos":[2014,2106]},{"content":"Also, the frame register and fixed-stack allocation fields must have the same values as in the primary unwind info.","pos":[2107,2222]},{"content":"Size of prolog","pos":[2231,2245]},{"content":"Length of the function prolog in bytes.","pos":[2251,2290]},{"content":"Count of unwind codes","pos":[2299,2320]},{"content":"This is the number of slots in the unwind codes array.","pos":[2326,2380]},{"content":"Note that some unwind codes (for example, UWOP_SAVE_NONVOL) require more than one slot in the array.","pos":[2381,2481]},{"content":"Frame register","pos":[2490,2504]},{"content":"If nonzero, then the function uses a frame pointer, and this field is the number of the nonvolatile register used as the frame pointer, using the same encoding for the operation info field of UNWIND_CODE nodes.","pos":[2510,2720]},{"content":"Frame register offset (scaled)","pos":[2729,2759]},{"content":"If the frame register field is nonzero, then this is the scaled offset from RSP that is applied to the FP reg when it is established.","pos":[2765,2898]},{"content":"The actual FP reg is set to RSP + 16 * this number, allowing offsets from 0 to 240.","pos":[2899,2982]},{"content":"This permits pointing the FP reg into the middle of the local stack allocation for dynamic stack frames, allowing better code density through shorter instructions (more instructions can use the 8-bit signed offset form).","pos":[2983,3203]},{"content":"Unwind codes array","pos":[3212,3230]},{"content":"This is an array of items that explains the effect of the prolog on the nonvolatile registers and RSP.","pos":[3236,3338]},{"content":"See the section on UNWIND_CODE for the meanings of individual items.","pos":[3339,3407]},{"content":"For alignment purposes, this array will always have an even number of entries, with the final entry potentially unused (in which case the array will be one longer than indicated by the count of unwind codes field).","pos":[3408,3622]},{"content":"Address of exception handler","pos":[3631,3659]},{"content":"This is an image-relative pointer to either the function's language-specific exception/termination handler (if flag UNW_FLAG_CHAININFO is clear and one of the flags UNW_FLAG_EHANDLER or UNW_FLAG_UHANDLER is set).","pos":[3665,3877]},{"content":"Language-specific handler data","pos":[3886,3916]},{"content":"This is the function's language-specific exception handler data.","pos":[3922,3986]},{"content":"The format of this data is unspecified and completely determined by the specific exception handler in use.","pos":[3987,4093]},{"content":"Chained Unwind Info","pos":[4102,4121]},{"content":"If flag UNW_FLAG_CHAININFO is set then the UNWIND_INFO structure ends with three UWORDs.","pos":[4127,4215]},{"content":"These UWORDs represent the RUNTIME_FUNCTION information for the function of the chained unwind.","pos":[4217,4312]},{"content":"See Also","pos":[4321,4329]},{"content":"Unwind Data for Exception Handling, Debugger Support","pos":[4334,4386]}],"content":"---\ntitle: \"struct UNWIND_INFO | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nms.assetid: f0aee906-a1b9-44cc-a8ad-463637bd5411\ncaps.latest.revision: 8\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# struct UNWIND_INFO\nThe unwind data info structure is used to record the effects a function has on the stack pointer and where the nonvolatile registers are saved on the stack:  \n  \n|||  \n|-|-|  \n|UBYTE: 3|Version|  \n|UBYTE: 5|Flags|  \n|UBYTE|Size of prolog|  \n|UBYTE|Count of unwind codes|  \n|UBYTE: 4|Frame Register|  \n|UBYTE: 4|Frame Register offset (scaled)|  \n|USHORT * n|Unwind codes array|  \n|variable|Can either be of form (1) or (2) below|  \n  \n (1)  Exception Handler  \n  \n|||  \n|-|-|  \n|ULONG|Address of exception handler|  \n|variable|Language-specific handler data (optional)|  \n  \n (2)  Chained Unwind Info  \n  \n|||  \n|-|-|  \n|ULONG|Function start address|  \n|ULONG|Function end address|  \n|ULONG|Unwind info address|  \n  \n The UNWIND_INFO structure must be DWORD aligned in memory. The meaning of each field is as follows:  \n  \n **Version**  \n Version number of the unwind data, currently 1.  \n  \n **Flags**  \n Three flags are currently defined:  \n  \n UNW_FLAG_EHANDLER   The function has an exception handler that should be called when looking for functions that need to examine exceptions.  \n  \n UNW_FLAG_UHANDLER   The function has a termination handler that should be called when unwinding an exception.  \n  \n UNW_FLAG_CHAININFO   This unwind info structure is not the primary one for the procedure. Instead, the chained unwind info entry is the contents of a previous RUNTIME_FUNCTION entry. See the following text for an explanation of chained unwind info structures. If this flag is set, then the UNW_FLAG_EHANDLER and UNW_FLAG_UHANDLER flags must be cleared. Also, the frame register and fixed-stack allocation fields must have the same values as in the primary unwind info.  \n  \n **Size of prolog**  \n Length of the function prolog in bytes.  \n  \n **Count of unwind codes**  \n This is the number of slots in the unwind codes array. Note that some unwind codes (for example, UWOP_SAVE_NONVOL) require more than one slot in the array.  \n  \n **Frame register**  \n If nonzero, then the function uses a frame pointer, and this field is the number of the nonvolatile register used as the frame pointer, using the same encoding for the operation info field of UNWIND_CODE nodes.  \n  \n **Frame register offset (scaled)**  \n If the frame register field is nonzero, then this is the scaled offset from RSP that is applied to the FP reg when it is established. The actual FP reg is set to RSP + 16 * this number, allowing offsets from 0 to 240. This permits pointing the FP reg into the middle of the local stack allocation for dynamic stack frames, allowing better code density through shorter instructions (more instructions can use the 8-bit signed offset form).  \n  \n **Unwind codes array**  \n This is an array of items that explains the effect of the prolog on the nonvolatile registers and RSP. See the section on UNWIND_CODE for the meanings of individual items. For alignment purposes, this array will always have an even number of entries, with the final entry potentially unused (in which case the array will be one longer than indicated by the count of unwind codes field).  \n  \n **Address of exception handler**  \n This is an image-relative pointer to either the function's language-specific exception/termination handler (if flag UNW_FLAG_CHAININFO is clear and one of the flags UNW_FLAG_EHANDLER or UNW_FLAG_UHANDLER is set).  \n  \n **Language-specific handler data**  \n This is the function's language-specific exception handler data. The format of this data is unspecified and completely determined by the specific exception handler in use.  \n  \n **Chained Unwind Info**  \n If flag UNW_FLAG_CHAININFO is set then the UNWIND_INFO structure ends with three UWORDs.  These UWORDs represent the RUNTIME_FUNCTION information for the function of the chained unwind.  \n  \n## See Also  \n [Unwind Data for Exception Handling, Debugger Support](../build/unwind-data-for-exception-handling-debugger-support.md)"}