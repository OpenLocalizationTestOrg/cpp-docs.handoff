{"nodes":[{"pos":[12,56],"content":"IExecutionContext Structure | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"IExecutionContext Structure | Microsoft Docs","pos":[0,44]}]},{"pos":[653,680],"content":"IExecutionContext Structure","linkify":"IExecutionContext Structure","nodes":[{"content":"IExecutionContext Structure","pos":[0,27]}]},{"content":"An interface to an execution context which can run on a given virtual processor and be cooperatively context switched.","pos":[681,799]},{"pos":[808,814],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[862,869],"content":"Members","linkify":"Members","nodes":[{"content":"Members","pos":[0,7]}]},{"pos":[879,893],"content":"Public Methods","linkify":"Public Methods","nodes":[{"content":"Public Methods","pos":[0,14]}]},{"content":"Name","pos":[900,904]},{"content":"Description","pos":[905,916]},{"pos":[954,1001],"content":"<bpt id=\"p1\">[</bpt>IExecutionContext::Dispatch Method<ept id=\"p1\">](#dispatch)</ept>","source":"[IExecutionContext::Dispatch Method](#dispatch)"},{"content":"The method that is called when a thread proxy starts executing a particular execution context.","pos":[1002,1096]},{"content":"This should be the main worker routine for your scheduler.","pos":[1097,1155]},{"pos":[1160,1201],"content":"<bpt id=\"p1\">[</bpt>IExecutionContext::GetId Method<ept id=\"p1\">](#getid)</ept>","source":"[IExecutionContext::GetId Method](#getid)"},{"content":"Returns a unique identifier for the execution context.","pos":[1202,1256]},{"pos":[1261,1308],"content":"<bpt id=\"p1\">[</bpt>IExecutionContext::GetProxy Method<ept id=\"p1\">](#getproxy)</ept>","source":"[IExecutionContext::GetProxy Method](#getproxy)"},{"content":"Returns an interface to the thread proxy that is executing this context.","pos":[1309,1381]},{"pos":[1386,1441],"content":"<bpt id=\"p1\">[</bpt>IExecutionContext::GetScheduler Method<ept id=\"p1\">](#getscheduler)</ept>","source":"[IExecutionContext::GetScheduler Method](#getscheduler)"},{"content":"Returns an interface to the scheduler this execution context belongs to.","pos":[1442,1514]},{"pos":[1519,1566],"content":"<bpt id=\"p1\">[</bpt>IExecutionContext::SetProxy Method<ept id=\"p1\">](#setproxy)</ept>","source":"[IExecutionContext::SetProxy Method](#setproxy)"},{"content":"Associates a thread proxy with this execution context.","pos":[1567,1621]},{"content":"The associated thread proxy invokes this method right before it starts executing the context's <ph id=\"ph1\">`Dispatch`</ph> method.","pos":[1622,1735],"source":" The associated thread proxy invokes this method right before it starts executing the context's `Dispatch` method."},{"pos":[1745,1752],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"If you are implementing a custom scheduler that interfaces with the Concurrency Runtime's Resource Manager, you will need to implement the <ph id=\"ph1\">`IExecutionContext`</ph> interface.","pos":[1756,1925],"source":"If you are implementing a custom scheduler that interfaces with the Concurrency Runtime's Resource Manager, you will need to implement the `IExecutionContext` interface."},{"content":"The threads created by the Resource Manager perform work on behalf of your scheduler by executing the <ph id=\"ph1\">`IExecutionContext::Dispatch`</ph> method.","pos":[1926,2065],"source":" The threads created by the Resource Manager perform work on behalf of your scheduler by executing the `IExecutionContext::Dispatch` method."},{"pos":[2074,2095],"content":"Inheritance Hierarchy","linkify":"Inheritance Hierarchy","nodes":[{"content":"Inheritance Hierarchy","pos":[0,21]}]},{"pos":[2127,2139],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"pos":[2143,2165],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> concrtrm.h","source":"**Header:** concrtrm.h"},{"pos":[2172,2198],"content":"<bpt id=\"p1\">**</bpt>Namespace:<ept id=\"p1\">**</ept> concurrency","source":"**Namespace:** concurrency"},{"pos":[2208,2267],"content":"<bpt id=\"p1\">&lt;a name=\"dispatch\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  IExecutionContext::Dispatch Method","linkify":"<a name=\"dispatch\"></a>  IExecutionContext::Dispatch Method","source":"<a name=\"dispatch\"></a>  IExecutionContext::Dispatch Method"},{"content":"The method that is called when a thread proxy starts executing a particular execution context.","pos":[2271,2365]},{"content":"This should be the main worker routine for your scheduler.","pos":[2366,2424]},{"pos":[2513,2523],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"A pointer to the state under which this execution context is being dispatched.","pos":[2547,2625]},{"content":"For more information on dispatch state, see <bpt id=\"p1\">[</bpt>DispatchState<ept id=\"p1\">](dispatchstate-structure.md)</ept>.","pos":[2626,2714],"source":" For more information on dispatch state, see [DispatchState](dispatchstate-structure.md)."},{"pos":[2724,2777],"content":"<bpt id=\"p1\">&lt;a name=\"getid\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  IExecutionContext::GetId Method","linkify":"<a name=\"getid\"></a>  IExecutionContext::GetId Method","source":"<a name=\"getid\"></a>  IExecutionContext::GetId Method"},{"content":"Returns a unique identifier for the execution context.","pos":[2781,2835]},{"pos":[2898,2910],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"A unique integer identifier.","pos":[2914,2942]},{"pos":[2952,2959],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"You should use the method <ph id=\"ph1\">`GetExecutionContextId`</ph> to obtain a unique identifier for the object that implements the <ph id=\"ph2\">`IExecutionContext`</ph> interface, before you use the interface as a parameter to methods supplied by the Resource Manager.","pos":[2963,3197],"source":"You should use the method `GetExecutionContextId` to obtain a unique identifier for the object that implements the `IExecutionContext` interface, before you use the interface as a parameter to methods supplied by the Resource Manager."},{"content":"You are expected to return the same identifier when the <ph id=\"ph1\">`GetId`</ph> function is invoked.","pos":[3198,3282],"source":" You are expected to return the same identifier when the `GetId` function is invoked."},{"content":"An identifier obtained from a different source could result in undefined behavior.","pos":[3289,3371]},{"pos":[3381,3440],"content":"<bpt id=\"p1\">&lt;a name=\"getproxy\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  IExecutionContext::GetProxy Method","linkify":"<a name=\"getproxy\"></a>  IExecutionContext::GetProxy Method","source":"<a name=\"getproxy\"></a>  IExecutionContext::GetProxy Method"},{"content":"Returns an interface to the thread proxy that is executing this context.","pos":[3444,3516]},{"pos":[3577,3589],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"An <ph id=\"ph1\">`IThreadProxy`</ph> interface.","pos":[3593,3621],"source":"An `IThreadProxy` interface."},{"content":"If the execution context's thread proxy has not been initialized with a call to <ph id=\"ph1\">`SetProxy`</ph>, the function must return <ph id=\"ph2\">`NULL`</ph>.","pos":[3622,3746],"source":" If the execution context's thread proxy has not been initialized with a call to `SetProxy`, the function must return `NULL`."},{"pos":[3756,3763],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The Resource Manager will invoke the <ph id=\"ph1\">`SetProxy`</ph> method on an execution context, with an <ph id=\"ph2\">`IThreadProxy`</ph> interface as a parameter, prior to entering the <ph id=\"ph3\">`Dispatch`</ph> method on the on the context.","pos":[3767,3958],"source":"The Resource Manager will invoke the `SetProxy` method on an execution context, with an `IThreadProxy` interface as a parameter, prior to entering the `Dispatch` method on the on the context."},{"content":"You are expected to store this argument and return it on calls to <ph id=\"ph1\">`GetProxy()`</ph>.","pos":[3959,4038],"source":" You are expected to store this argument and return it on calls to `GetProxy()`."},{"pos":[4048,4115],"content":"<bpt id=\"p1\">&lt;a name=\"getscheduler\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  IExecutionContext::GetScheduler Method","linkify":"<a name=\"getscheduler\"></a>  IExecutionContext::GetScheduler Method","source":"<a name=\"getscheduler\"></a>  IExecutionContext::GetScheduler Method"},{"content":"Returns an interface to the scheduler this execution context belongs to.","pos":[4119,4191]},{"pos":[4254,4266],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"pos":[4270,4296],"content":"An <ph id=\"ph1\">`IScheduler`</ph> interface.","source":"An `IScheduler` interface."},{"pos":[4306,4313],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[4317,4483],"content":"You are required to initialize the execution context with a valid <ph id=\"ph1\">`IScheduler`</ph> interface before you use it as a parameter to methods supplied by the Resource Manager.","source":"You are required to initialize the execution context with a valid `IScheduler` interface before you use it as a parameter to methods supplied by the Resource Manager."},{"pos":[4493,4552],"content":"<bpt id=\"p1\">&lt;a name=\"setproxy\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  IExecutionContext::SetProxy Method","linkify":"<a name=\"setproxy\"></a>  IExecutionContext::SetProxy Method","source":"<a name=\"setproxy\"></a>  IExecutionContext::SetProxy Method"},{"content":"Associates a thread proxy with this execution context.","pos":[4556,4610]},{"content":"The associated thread proxy invokes this method right before it starts executing the context's <ph id=\"ph1\">`Dispatch`</ph> method.","pos":[4611,4724],"source":" The associated thread proxy invokes this method right before it starts executing the context's `Dispatch` method."},{"pos":[4810,4820],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"An interface to the thread proxy that is about to enter the <ph id=\"ph1\">`Dispatch`</ph> method on this execution context.","pos":[4842,4946],"source":" An interface to the thread proxy that is about to enter the `Dispatch` method on this execution context."},{"pos":[4956,4963],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"You are expected to save the parameter <ph id=\"ph1\">`pThreadProxy`</ph> and return it on a call to the <ph id=\"ph2\">`GetProxy`</ph> method.","pos":[4967,5070],"source":"You are expected to save the parameter `pThreadProxy` and return it on a call to the `GetProxy` method."},{"content":"The Resource Manager guarantees that the thread proxy associated with the execution context will not change while the thread proxy is executing the <ph id=\"ph1\">`Dispatch`</ph> method.","pos":[5071,5237],"source":" The Resource Manager guarantees that the thread proxy associated with the execution context will not change while the thread proxy is executing the `Dispatch` method."},{"pos":[5246,5254],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>concurrency Namespace<ept id=\"p1\">](concurrency-namespace.md)</ept><ph id=\"ph1\"> </ph>","pos":[5258,5308],"source":"[concurrency Namespace](concurrency-namespace.md) "},{"content":"<bpt id=\"p1\"> [</bpt>IScheduler Structure<ept id=\"p1\">](ischeduler-structure.md)</ept><ph id=\"ph1\"> </ph>","pos":[5311,5360],"source":" [IScheduler Structure](ischeduler-structure.md) "},{"content":"<bpt id=\"p1\"> [</bpt>IThreadProxy Structure<ept id=\"p1\">](ithreadproxy-structure.md)</ept>","pos":[5363,5415],"source":" [IThreadProxy Structure](ithreadproxy-structure.md)"}],"content":"---\ntitle: \"IExecutionContext Structure | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"concrtrm/concurrency::IExecutionContext\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"IExecutionContext structure\"\nms.assetid: f3108089-ecda-4b07-86db-3efae60c31e0\ncaps.latest.revision: 18\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# IExecutionContext Structure\nAn interface to an execution context which can run on a given virtual processor and be cooperatively context switched.  \n  \n## Syntax  \n  \n```\nstruct IExecutionContext;\n```  \n  \n## Members  \n  \n### Public Methods  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[IExecutionContext::Dispatch Method](#dispatch)|The method that is called when a thread proxy starts executing a particular execution context. This should be the main worker routine for your scheduler.|  \n|[IExecutionContext::GetId Method](#getid)|Returns a unique identifier for the execution context.|  \n|[IExecutionContext::GetProxy Method](#getproxy)|Returns an interface to the thread proxy that is executing this context.|  \n|[IExecutionContext::GetScheduler Method](#getscheduler)|Returns an interface to the scheduler this execution context belongs to.|  \n|[IExecutionContext::SetProxy Method](#setproxy)|Associates a thread proxy with this execution context. The associated thread proxy invokes this method right before it starts executing the context's `Dispatch` method.|  \n  \n## Remarks  \n If you are implementing a custom scheduler that interfaces with the Concurrency Runtime's Resource Manager, you will need to implement the `IExecutionContext` interface. The threads created by the Resource Manager perform work on behalf of your scheduler by executing the `IExecutionContext::Dispatch` method.  \n  \n## Inheritance Hierarchy  \n `IExecutionContext`  \n  \n## Requirements  \n **Header:** concrtrm.h  \n  \n **Namespace:** concurrency  \n  \n##  <a name=\"dispatch\"></a>  IExecutionContext::Dispatch Method  \n The method that is called when a thread proxy starts executing a particular execution context. This should be the main worker routine for your scheduler.  \n  \n```\nvirtual void Dispatch(_Inout_ DispatchState* pDispatchState) = 0;\n```  \n  \n### Parameters  \n `pDispatchState`  \n A pointer to the state under which this execution context is being dispatched. For more information on dispatch state, see [DispatchState](dispatchstate-structure.md).  \n  \n##  <a name=\"getid\"></a>  IExecutionContext::GetId Method  \n Returns a unique identifier for the execution context.  \n  \n```\nvirtual unsigned int GetId() const = 0;\n```  \n  \n### Return Value  \n A unique integer identifier.  \n  \n### Remarks  \n You should use the method `GetExecutionContextId` to obtain a unique identifier for the object that implements the `IExecutionContext` interface, before you use the interface as a parameter to methods supplied by the Resource Manager. You are expected to return the same identifier when the `GetId` function is invoked.  \n  \n An identifier obtained from a different source could result in undefined behavior.  \n  \n##  <a name=\"getproxy\"></a>  IExecutionContext::GetProxy Method  \n Returns an interface to the thread proxy that is executing this context.  \n  \n```\nvirtual IThreadProxy* GetProxy() = 0;\n```  \n  \n### Return Value  \n An `IThreadProxy` interface. If the execution context's thread proxy has not been initialized with a call to `SetProxy`, the function must return `NULL`.  \n  \n### Remarks  \n The Resource Manager will invoke the `SetProxy` method on an execution context, with an `IThreadProxy` interface as a parameter, prior to entering the `Dispatch` method on the on the context. You are expected to store this argument and return it on calls to `GetProxy()`.  \n  \n##  <a name=\"getscheduler\"></a>  IExecutionContext::GetScheduler Method  \n Returns an interface to the scheduler this execution context belongs to.  \n  \n```\nvirtual IScheduler* GetScheduler() = 0;\n```  \n  \n### Return Value  \n An `IScheduler` interface.  \n  \n### Remarks  \n You are required to initialize the execution context with a valid `IScheduler` interface before you use it as a parameter to methods supplied by the Resource Manager.  \n  \n##  <a name=\"setproxy\"></a>  IExecutionContext::SetProxy Method  \n Associates a thread proxy with this execution context. The associated thread proxy invokes this method right before it starts executing the context's `Dispatch` method.  \n  \n```\nvirtual void SetProxy(_Inout_ IThreadProxy* pThreadProxy) = 0;\n```  \n  \n### Parameters  \n `pThreadProxy`  \n An interface to the thread proxy that is about to enter the `Dispatch` method on this execution context.  \n  \n### Remarks  \n You are expected to save the parameter `pThreadProxy` and return it on a call to the `GetProxy` method. The Resource Manager guarantees that the thread proxy associated with the execution context will not change while the thread proxy is executing the `Dispatch` method.  \n  \n## See Also  \n [concurrency Namespace](concurrency-namespace.md)   \n [IScheduler Structure](ischeduler-structure.md)   \n [IThreadProxy Structure](ithreadproxy-structure.md)\n"}