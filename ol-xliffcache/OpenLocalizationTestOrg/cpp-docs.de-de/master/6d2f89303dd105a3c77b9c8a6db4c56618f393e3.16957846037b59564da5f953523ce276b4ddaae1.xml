{"nodes":[{"pos":[12,51],"content":"CurrentScheduler Class | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"CurrentScheduler Class | Microsoft Docs","pos":[0,39]}]},{"pos":[640,662],"content":"CurrentScheduler Class","linkify":"CurrentScheduler Class","nodes":[{"content":"CurrentScheduler Class","pos":[0,22]}]},{"content":"Represents an abstraction for the current scheduler associated with the calling context.","pos":[663,751]},{"pos":[760,766],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[812,819],"content":"Members","linkify":"Members","nodes":[{"content":"Members","pos":[0,7]}]},{"pos":[829,843],"content":"Public Methods","linkify":"Public Methods","nodes":[{"content":"Public Methods","pos":[0,14]}]},{"content":"Name","pos":[850,854]},{"content":"Description","pos":[855,866]},{"pos":[904,946],"content":"<bpt id=\"p1\">[</bpt>CurrentScheduler::Create Method<ept id=\"p1\">](#create)</ept>","source":"[CurrentScheduler::Create Method](#create)"},{"content":"Creates a new scheduler whose behavior is described by the <ph id=\"ph1\">`_Policy`</ph> parameter and attaches it to the calling context.","pos":[947,1065],"source":"Creates a new scheduler whose behavior is described by the `_Policy` parameter and attaches it to the calling context."},{"content":"The newly created scheduler will become the current scheduler for the calling context.","pos":[1066,1152]},{"pos":[1157,1225],"content":"<bpt id=\"p1\">[</bpt>CurrentScheduler::CreateScheduleGroup Method<ept id=\"p1\">](#createschedulegroup)</ept>","source":"[CurrentScheduler::CreateScheduleGroup Method](#createschedulegroup)"},{"content":"Overloaded.","pos":[1226,1237]},{"content":"Creates a new schedule group within the scheduler associated with the calling context.","pos":[1238,1324]},{"content":"The version that takes the parameter <ph id=\"ph1\">`_Placement`</ph> causes tasks within the newly created schedule group to be biased towards executing at the location specified by that parameter.","pos":[1325,1503],"source":" The version that takes the parameter `_Placement` causes tasks within the newly created schedule group to be biased towards executing at the location specified by that parameter."},{"pos":[1508,1550],"content":"<bpt id=\"p1\">[</bpt>CurrentScheduler::Detach Method<ept id=\"p1\">](#detach)</ept>","source":"[CurrentScheduler::Detach Method](#detach)"},{"content":"Detaches the current scheduler from the calling context and restores the previously attached scheduler as the current scheduler, if one exists.","pos":[1551,1694]},{"content":"After this method returns, the calling context is then managed by the scheduler that was previously attached to the context using either the <ph id=\"ph1\">`CurrentScheduler::Create`</ph> or <ph id=\"ph2\">`Scheduler::Attach`</ph> method.","pos":[1695,1893],"source":" After this method returns, the calling context is then managed by the scheduler that was previously attached to the context using either the `CurrentScheduler::Create` or `Scheduler::Attach` method."},{"pos":[1898,1934],"content":"<bpt id=\"p1\">[</bpt>CurrentScheduler::Get Method<ept id=\"p1\">](#get)</ept>","source":"[CurrentScheduler::Get Method](#get)"},{"content":"Returns a pointer to the scheduler associated with the calling context, also referred to as the current scheduler.","pos":[1935,2049]},{"pos":[2054,2140],"content":"<bpt id=\"p1\">[</bpt>CurrentScheduler::GetNumberOfVirtualProcessors Method<ept id=\"p1\">](#getnumberofvirtualprocessors)</ept>","source":"[CurrentScheduler::GetNumberOfVirtualProcessors Method](#getnumberofvirtualprocessors)"},{"content":"Returns the current number of virtual processors for the scheduler associated with the calling context.","pos":[2141,2244]},{"pos":[2249,2297],"content":"<bpt id=\"p1\">[</bpt>CurrentScheduler::GetPolicy Method<ept id=\"p1\">](#getpolicy)</ept>","source":"[CurrentScheduler::GetPolicy Method](#getpolicy)"},{"content":"Returns a copy of the policy that the current scheduler was created with.","pos":[2298,2371]},{"pos":[2376,2410],"content":"<bpt id=\"p1\">[</bpt>CurrentScheduler::Id Method<ept id=\"p1\">](#id)</ept>","source":"[CurrentScheduler::Id Method](#id)"},{"content":"Returns a unique identifier for the current scheduler.","pos":[2411,2465]},{"pos":[2470,2538],"content":"<bpt id=\"p1\">[</bpt>CurrentScheduler::IsAvailableLocation Method<ept id=\"p1\">](#isavailablelocation)</ept>","source":"[CurrentScheduler::IsAvailableLocation Method](#isavailablelocation)"},{"content":"Determines whether a given location is available on the current scheduler.","pos":[2539,2613]},{"pos":[2618,2690],"content":"<bpt id=\"p1\">[</bpt>CurrentScheduler::RegisterShutdownEvent Method<ept id=\"p1\">](#registershutdownevent)</ept>","source":"[CurrentScheduler::RegisterShutdownEvent Method](#registershutdownevent)"},{"content":"Causes the Windows event handle passed in the <ph id=\"ph1\">`_ShutdownEvent`</ph> parameter to be signaled when the scheduler associated with the current context shuts down and destroys itself.","pos":[2691,2865],"source":"Causes the Windows event handle passed in the `_ShutdownEvent` parameter to be signaled when the scheduler associated with the current context shuts down and destroys itself."},{"content":"At the time the event is signaled, all work that had been scheduled to the scheduler is complete.","pos":[2866,2963]},{"content":"Multiple shutdown events can be registered through this method.","pos":[2964,3027]},{"pos":[3032,3086],"content":"<bpt id=\"p1\">[</bpt>CurrentScheduler::ScheduleTask Method<ept id=\"p1\">](#scheduletask)</ept>","source":"[CurrentScheduler::ScheduleTask Method](#scheduletask)"},{"content":"Overloaded.","pos":[3087,3098]},{"content":"Schedules a light-weight task within the scheduler associated with the calling context.","pos":[3099,3186]},{"content":"The light-weight task will be placed in a schedule group determined by the runtime.","pos":[3187,3270]},{"content":"The version that takes the parameter <ph id=\"ph1\">`_Placement`</ph> causes the task to be biased towards executing at the specified location.","pos":[3271,3394],"source":" The version that takes the parameter `_Placement` causes the task to be biased towards executing at the specified location."},{"pos":[3404,3411],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"If there is no scheduler (see <bpt id=\"p1\">[</bpt>Scheduler<ept id=\"p1\">](scheduler-class.md)</ept>) associated with the calling context, many methods within the <ph id=\"ph1\">`CurrentScheduler`</ph> class will result in attachment of the process' default scheduler.","pos":[3415,3624],"source":"If there is no scheduler (see [Scheduler](scheduler-class.md)) associated with the calling context, many methods within the `CurrentScheduler` class will result in attachment of the process' default scheduler."},{"content":"This may also imply that the process' default scheduler is created during such a call.","pos":[3625,3711]},{"pos":[3720,3741],"content":"Inheritance Hierarchy","linkify":"Inheritance Hierarchy","nodes":[{"content":"Inheritance Hierarchy","pos":[0,21]}]},{"pos":[3772,3784],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"pos":[3788,3808],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> concrt.h","source":"**Header:** concrt.h"},{"pos":[3815,3841],"content":"<bpt id=\"p1\">**</bpt>Namespace:<ept id=\"p1\">**</ept> concurrency","source":"**Namespace:** concurrency"},{"pos":[3851,3905],"content":"<bpt id=\"p1\">&lt;a name=\"create\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CurrentScheduler::Create Method","linkify":"<a name=\"create\"></a>  CurrentScheduler::Create Method","source":"<a name=\"create\"></a>  CurrentScheduler::Create Method"},{"content":"Creates a new scheduler whose behavior is described by the <ph id=\"ph1\">`_Policy`</ph> parameter and attaches it to the calling context.","pos":[3909,4027],"source":"Creates a new scheduler whose behavior is described by the `_Policy` parameter and attaches it to the calling context."},{"content":"The newly created scheduler will become the current scheduler for the calling context.","pos":[4028,4114]},{"pos":[4197,4207],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"The scheduler policy that describes the behavior of the newly created scheduler.","pos":[4224,4304]},{"pos":[4314,4321],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The attachment of the scheduler to the calling context implicitly places a reference count on the scheduler.","pos":[4325,4433]},{"pos":[4440,4629],"content":"After a scheduler is created with the <ph id=\"ph1\">`Create`</ph> method, you must call the <bpt id=\"p1\">[</bpt>CurrentScheduler::Detach<ept id=\"p1\">](#detach)</ept> method at some point in the future in order to allow the scheduler to shut down.","source":"After a scheduler is created with the `Create` method, you must call the [CurrentScheduler::Detach](#detach) method at some point in the future in order to allow the scheduler to shut down."},{"content":"If this method is called from a context that is already attached to a different scheduler, the existing scheduler is remembered as the previous scheduler, and the newly created scheduler becomes the current scheduler.","pos":[4636,4853]},{"content":"When you call the <ph id=\"ph1\">`CurrentScheduler::Detach`</ph> method at a later point, the previous scheduler is restored as the current scheduler.","pos":[4854,4984],"source":" When you call the `CurrentScheduler::Detach` method at a later point, the previous scheduler is restored as the current scheduler."},{"pos":[4991,5210],"content":"This method can throw a variety of exceptions, including <bpt id=\"p1\">[</bpt>scheduler_resource_allocation_error<ept id=\"p1\">](scheduler-resource-allocation-error-class.md)</ept> and <bpt id=\"p2\">[</bpt>invalid_scheduler_policy_value<ept id=\"p2\">](invalid-scheduler-policy-value-class.md)</ept>.","source":"This method can throw a variety of exceptions, including [scheduler_resource_allocation_error](scheduler-resource-allocation-error-class.md) and [invalid_scheduler_policy_value](invalid-scheduler-policy-value-class.md)."},{"pos":[5220,5300],"content":"<bpt id=\"p1\">&lt;a name=\"createschedulegroup\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CurrentScheduler::CreateScheduleGroup Method","linkify":"<a name=\"createschedulegroup\"></a>  CurrentScheduler::CreateScheduleGroup Method","source":"<a name=\"createschedulegroup\"></a>  CurrentScheduler::CreateScheduleGroup Method"},{"content":"Creates a new schedule group within the scheduler associated with the calling context.","pos":[5304,5390]},{"content":"The version that takes the parameter <ph id=\"ph1\">`_Placement`</ph> causes tasks within the newly created schedule group to be biased towards executing at the location specified by that parameter.","pos":[5391,5569],"source":" The version that takes the parameter `_Placement` causes tasks within the newly created schedule group to be biased towards executing at the location specified by that parameter."},{"pos":[5719,5729],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"A reference to a location where the tasks within the schedule group will be biased towards executing at.","pos":[5749,5853]},{"pos":[5863,5875],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"A pointer to the newly created schedule group.","pos":[5879,5925]},{"content":"This <ph id=\"ph1\">`ScheduleGroup`</ph> object has an initial reference count placed on it.","pos":[5926,5998],"source":" This `ScheduleGroup` object has an initial reference count placed on it."},{"pos":[6008,6015],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"This method will result in the process' default scheduler being created and/or attached to the calling context if there is no scheduler currently associated with the calling context.","pos":[6019,6201]},{"content":"You must invoke the <bpt id=\"p1\">[</bpt>Release<ept id=\"p1\">](schedulegroup-class.md#release)</ept> method on a schedule group when you are done scheduling work to it.","pos":[6208,6337],"source":"You must invoke the [Release](schedulegroup-class.md#release) method on a schedule group when you are done scheduling work to it."},{"content":"The scheduler will destroy the schedule group when all work queued to it has completed.","pos":[6338,6425]},{"content":"Note that if you explicitly created this scheduler, you must release all references to schedule groups within it, before you release your reference on the scheduler, by detaching the current context from it.","pos":[6432,6639]},{"pos":[6649,6703],"content":"<bpt id=\"p1\">&lt;a name=\"detach\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CurrentScheduler::Detach Method","linkify":"<a name=\"detach\"></a>  CurrentScheduler::Detach Method","source":"<a name=\"detach\"></a>  CurrentScheduler::Detach Method"},{"content":"Detaches the current scheduler from the calling context and restores the previously attached scheduler as the current scheduler, if one exists.","pos":[6707,6850]},{"content":"After this method returns, the calling context is then managed by the scheduler that was previously attached to the context using either the <ph id=\"ph1\">`CurrentScheduler::Create`</ph> or <ph id=\"ph2\">`Scheduler::Attach`</ph> method.","pos":[6851,7049],"source":" After this method returns, the calling context is then managed by the scheduler that was previously attached to the context using either the `CurrentScheduler::Create` or `Scheduler::Attach` method."},{"pos":[7102,7109],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[7113,7189],"content":"The <ph id=\"ph1\">`Detach`</ph> method implicitly removes a reference count from the scheduler.","source":"The `Detach` method implicitly removes a reference count from the scheduler."},{"pos":[7196,7372],"content":"If there is no scheduler attached to the calling context, calling this method will result in a <bpt id=\"p1\">[</bpt>scheduler_not_attached<ept id=\"p1\">](scheduler-not-attached-class.md)</ept> exception being thrown.","source":"If there is no scheduler attached to the calling context, calling this method will result in a [scheduler_not_attached](scheduler-not-attached-class.md) exception being thrown."},{"pos":[7379,7723],"content":"Calling this method from a context that is internal to and managed by a scheduler, or a context that was attached using a method other than the <bpt id=\"p1\">[</bpt>Scheduler::Attach<ept id=\"p1\">](scheduler-class.md#attach)</ept> or <bpt id=\"p2\">[</bpt>CurrentScheduler::Create<ept id=\"p2\">](#create)</ept> methods, will result in an <bpt id=\"p3\">[</bpt>improper_scheduler_detach<ept id=\"p3\">](improper-scheduler-detach-class.md)</ept> exception being thrown.","source":"Calling this method from a context that is internal to and managed by a scheduler, or a context that was attached using a method other than the [Scheduler::Attach](scheduler-class.md#attach) or [CurrentScheduler::Create](#create) methods, will result in an [improper_scheduler_detach](improper-scheduler-detach-class.md) exception being thrown."},{"pos":[7733,7781],"content":"<bpt id=\"p1\">&lt;a name=\"get\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CurrentScheduler::Get Method","linkify":"<a name=\"get\"></a>  CurrentScheduler::Get Method","source":"<a name=\"get\"></a>  CurrentScheduler::Get Method"},{"content":"Returns a pointer to the scheduler associated with the calling context, also referred to as the current scheduler.","pos":[7785,7899]},{"pos":[7955,7967],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"A pointer to the scheduler associated with the calling context (the current scheduler).","pos":[7971,8058]},{"pos":[8068,8075],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"This method will result in the process' default scheduler being created and/or attached to the calling context if there is no scheduler currently associated with the calling context.","pos":[8079,8261]},{"content":"No additional reference is placed on the <ph id=\"ph1\">`Scheduler`</ph> object returned by this method.","pos":[8262,8346],"source":" No additional reference is placed on the `Scheduler` object returned by this method."},{"pos":[8356,8454],"content":"<bpt id=\"p1\">&lt;a name=\"getnumberofvirtualprocessors\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CurrentScheduler::GetNumberOfVirtualProcessors Method","linkify":"<a name=\"getnumberofvirtualprocessors\"></a>  CurrentScheduler::GetNumberOfVirtualProcessors Method","source":"<a name=\"getnumberofvirtualprocessors\"></a>  CurrentScheduler::GetNumberOfVirtualProcessors Method"},{"content":"Returns the current number of virtual processors for the scheduler associated with the calling context.","pos":[8458,8561]},{"pos":[8644,8656],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"pos":[8660,8802],"content":"If a scheduler is associated with the calling context, the current number of virtual processors for that scheduler; otherwise, the value <ph id=\"ph1\">`-1`</ph>.","source":"If a scheduler is associated with the calling context, the current number of virtual processors for that scheduler; otherwise, the value `-1`."},{"pos":[8812,8819],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"This method will not result in scheduler attachment if the calling context is not already associated with a scheduler.","pos":[8823,8941]},{"content":"The return value from this method is an instantaneous sampling of the number of virtual processors for the scheduler associated with the calling context.","pos":[8948,9101]},{"content":"This value can be stale the moment it is returned.","pos":[9102,9152]},{"pos":[9162,9222],"content":"<bpt id=\"p1\">&lt;a name=\"getpolicy\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CurrentScheduler::GetPolicy Method","linkify":"<a name=\"getpolicy\"></a>  CurrentScheduler::GetPolicy Method","source":"<a name=\"getpolicy\"></a>  CurrentScheduler::GetPolicy Method"},{"content":"Returns a copy of the policy that the current scheduler was created with.","pos":[9226,9299]},{"pos":[9366,9378],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"A copy of the policy that that the current scheduler was created with.","pos":[9382,9452]},{"pos":[9462,9469],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"This method will result in the process' default scheduler being created and/or attached to the calling context if there is no scheduler currently associated with the calling context.","pos":[9473,9655]},{"pos":[9665,9711],"content":"<bpt id=\"p1\">&lt;a name=\"id\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CurrentScheduler::Id Method","linkify":"<a name=\"id\"></a>  CurrentScheduler::Id Method","source":"<a name=\"id\"></a>  CurrentScheduler::Id Method"},{"content":"Returns a unique identifier for the current scheduler.","pos":[9715,9769]},{"pos":[9826,9838],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"pos":[9842,9963],"content":"If a scheduler is associated with the calling context, a unique identifier for that scheduler; otherwise, the value <ph id=\"ph1\">`-1`</ph>.","source":"If a scheduler is associated with the calling context, a unique identifier for that scheduler; otherwise, the value `-1`."},{"pos":[9973,9980],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"This method will not result in scheduler attachment if the calling context is not already associated with a scheduler.","pos":[9984,10102]},{"pos":[10112,10192],"content":"<bpt id=\"p1\">&lt;a name=\"isavailablelocation\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CurrentScheduler::IsAvailableLocation Method","linkify":"<a name=\"isavailablelocation\"></a>  CurrentScheduler::IsAvailableLocation Method","source":"<a name=\"isavailablelocation\"></a>  CurrentScheduler::IsAvailableLocation Method"},{"content":"Determines whether a given location is available on the current scheduler.","pos":[10196,10270]},{"pos":[10362,10372],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"A reference to the location to query the current scheduler about.","pos":[10392,10457]},{"pos":[10467,10479],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"pos":[10483,10605],"content":"An indication of whether or not the location specified by the <ph id=\"ph1\">`_Placement`</ph> argument is available on the current scheduler.","source":"An indication of whether or not the location specified by the `_Placement` argument is available on the current scheduler."},{"pos":[10615,10622],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"This method will not result in scheduler attachment if the calling context is not already associated with a scheduler.","pos":[10626,10744]},{"content":"Note that the return value is an instantaneous sampling of whether the given location is available.","pos":[10751,10850]},{"content":"In the presence of multiple schedulers, dynamic resource management can add or take away resources from schedulers at any point.","pos":[10851,10979]},{"content":"Should this happen, the given location can change availability.","pos":[10980,11043]},{"pos":[11053,11137],"content":"<bpt id=\"p1\">&lt;a name=\"registershutdownevent\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CurrentScheduler::RegisterShutdownEvent Method","linkify":"<a name=\"registershutdownevent\"></a>  CurrentScheduler::RegisterShutdownEvent Method","source":"<a name=\"registershutdownevent\"></a>  CurrentScheduler::RegisterShutdownEvent Method"},{"content":"Causes the Windows event handle passed in the <ph id=\"ph1\">`_ShutdownEvent`</ph> parameter to be signaled when the scheduler associated with the current context shuts down and destroys itself.","pos":[11141,11315],"source":"Causes the Windows event handle passed in the `_ShutdownEvent` parameter to be signaled when the scheduler associated with the current context shuts down and destroys itself."},{"content":"At the time the event is signaled, all work that had been scheduled to the scheduler is complete.","pos":[11316,11413]},{"content":"Multiple shutdown events can be registered through this method.","pos":[11414,11477]},{"pos":[11566,11576],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"A handle to a Windows event object which will be signaled by the runtime when the scheduler associated with the current context shuts down and destroys itself.","pos":[11600,11759]},{"pos":[11769,11776],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[11780,11956],"content":"If there is no scheduler attached to the calling context, calling this method will result in a <bpt id=\"p1\">[</bpt>scheduler_not_attached<ept id=\"p1\">](scheduler-not-attached-class.md)</ept> exception being thrown.","source":"If there is no scheduler attached to the calling context, calling this method will result in a [scheduler_not_attached](scheduler-not-attached-class.md) exception being thrown."},{"pos":[11966,12032],"content":"<bpt id=\"p1\">&lt;a name=\"scheduletask\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CurrentScheduler::ScheduleTask Method","linkify":"<a name=\"scheduletask\"></a>  CurrentScheduler::ScheduleTask Method","source":"<a name=\"scheduletask\"></a>  CurrentScheduler::ScheduleTask Method"},{"content":"Schedules a light-weight task within the scheduler associated with the calling context.","pos":[12036,12123]},{"content":"The light-weight task will be placed in a schedule group determined by the runtime.","pos":[12124,12207]},{"content":"The version that takes the parameter <ph id=\"ph1\">`_Placement`</ph> causes the task to be biased towards executing at the specified location.","pos":[12208,12331],"source":" The version that takes the parameter `_Placement` causes the task to be biased towards executing at the specified location."},{"pos":[12549,12559],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"A pointer to the function to execute to perform the body of the light-weight task.","pos":[12574,12656]},{"content":"A void pointer to the data that will be passed as a parameter to the body of the task.","pos":[12674,12760]},{"content":"A reference to a location where the light-weight task will be biased towards executing at.","pos":[12783,12873]},{"pos":[12883,12890],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"This method will result in the process' default scheduler being created and/or attached to the calling context if there is no scheduler currently associated with the calling context.","pos":[12894,13076]},{"pos":[13085,13093],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>concurrency Namespace<ept id=\"p1\">](concurrency-namespace.md)</ept><ph id=\"ph1\"> </ph>","pos":[13097,13147],"source":"[concurrency Namespace](concurrency-namespace.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Scheduler Class<ept id=\"p1\">](scheduler-class.md)</ept><ph id=\"ph1\"> </ph>","pos":[13150,13189],"source":" [Scheduler Class](scheduler-class.md) "},{"content":"<bpt id=\"p1\"> [</bpt>PolicyElementKey Enumeration<ept id=\"p1\">](concurrency-namespace-enums.md)</ept><ph id=\"ph1\"> </ph>","pos":[13192,13256],"source":" [PolicyElementKey Enumeration](concurrency-namespace-enums.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Task Scheduler<ept id=\"p1\">](../../../parallel/concrt/task-scheduler-concurrency-runtime.md)</ept>","pos":[13259,13340],"source":" [Task Scheduler](../../../parallel/concrt/task-scheduler-concurrency-runtime.md)"}],"content":"---\ntitle: \"CurrentScheduler Class | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"concrt/concurrency::CurrentScheduler\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"CurrentScheduler class\"\nms.assetid: 31c20e0e-4cdf-49b4-8220-d726130aad2b\ncaps.latest.revision: 20\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# CurrentScheduler Class\nRepresents an abstraction for the current scheduler associated with the calling context.  \n  \n## Syntax  \n  \n```\nclass CurrentScheduler;\n```  \n  \n## Members  \n  \n### Public Methods  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CurrentScheduler::Create Method](#create)|Creates a new scheduler whose behavior is described by the `_Policy` parameter and attaches it to the calling context. The newly created scheduler will become the current scheduler for the calling context.|  \n|[CurrentScheduler::CreateScheduleGroup Method](#createschedulegroup)|Overloaded. Creates a new schedule group within the scheduler associated with the calling context. The version that takes the parameter `_Placement` causes tasks within the newly created schedule group to be biased towards executing at the location specified by that parameter.|  \n|[CurrentScheduler::Detach Method](#detach)|Detaches the current scheduler from the calling context and restores the previously attached scheduler as the current scheduler, if one exists. After this method returns, the calling context is then managed by the scheduler that was previously attached to the context using either the `CurrentScheduler::Create` or `Scheduler::Attach` method.|  \n|[CurrentScheduler::Get Method](#get)|Returns a pointer to the scheduler associated with the calling context, also referred to as the current scheduler.|  \n|[CurrentScheduler::GetNumberOfVirtualProcessors Method](#getnumberofvirtualprocessors)|Returns the current number of virtual processors for the scheduler associated with the calling context.|  \n|[CurrentScheduler::GetPolicy Method](#getpolicy)|Returns a copy of the policy that the current scheduler was created with.|  \n|[CurrentScheduler::Id Method](#id)|Returns a unique identifier for the current scheduler.|  \n|[CurrentScheduler::IsAvailableLocation Method](#isavailablelocation)|Determines whether a given location is available on the current scheduler.|  \n|[CurrentScheduler::RegisterShutdownEvent Method](#registershutdownevent)|Causes the Windows event handle passed in the `_ShutdownEvent` parameter to be signaled when the scheduler associated with the current context shuts down and destroys itself. At the time the event is signaled, all work that had been scheduled to the scheduler is complete. Multiple shutdown events can be registered through this method.|  \n|[CurrentScheduler::ScheduleTask Method](#scheduletask)|Overloaded. Schedules a light-weight task within the scheduler associated with the calling context. The light-weight task will be placed in a schedule group determined by the runtime. The version that takes the parameter `_Placement` causes the task to be biased towards executing at the specified location.|  \n  \n## Remarks  \n If there is no scheduler (see [Scheduler](scheduler-class.md)) associated with the calling context, many methods within the `CurrentScheduler` class will result in attachment of the process' default scheduler. This may also imply that the process' default scheduler is created during such a call.  \n  \n## Inheritance Hierarchy  \n `CurrentScheduler`  \n  \n## Requirements  \n **Header:** concrt.h  \n  \n **Namespace:** concurrency  \n  \n##  <a name=\"create\"></a>  CurrentScheduler::Create Method  \n Creates a new scheduler whose behavior is described by the `_Policy` parameter and attaches it to the calling context. The newly created scheduler will become the current scheduler for the calling context.  \n  \n```\nstatic void __cdecl Create(const SchedulerPolicy& _Policy);\n```  \n  \n### Parameters  \n `_Policy`  \n The scheduler policy that describes the behavior of the newly created scheduler.  \n  \n### Remarks  \n The attachment of the scheduler to the calling context implicitly places a reference count on the scheduler.  \n  \n After a scheduler is created with the `Create` method, you must call the [CurrentScheduler::Detach](#detach) method at some point in the future in order to allow the scheduler to shut down.  \n  \n If this method is called from a context that is already attached to a different scheduler, the existing scheduler is remembered as the previous scheduler, and the newly created scheduler becomes the current scheduler. When you call the `CurrentScheduler::Detach` method at a later point, the previous scheduler is restored as the current scheduler.  \n  \n This method can throw a variety of exceptions, including [scheduler_resource_allocation_error](scheduler-resource-allocation-error-class.md) and [invalid_scheduler_policy_value](invalid-scheduler-policy-value-class.md).  \n  \n##  <a name=\"createschedulegroup\"></a>  CurrentScheduler::CreateScheduleGroup Method  \n Creates a new schedule group within the scheduler associated with the calling context. The version that takes the parameter `_Placement` causes tasks within the newly created schedule group to be biased towards executing at the location specified by that parameter.  \n  \n```\nstatic ScheduleGroup* __cdecl CreateScheduleGroup();\n\nstatic ScheduleGroup* __cdecl CreateScheduleGroup(location& _Placement);\n```  \n  \n### Parameters  \n `_Placement`  \n A reference to a location where the tasks within the schedule group will be biased towards executing at.  \n  \n### Return Value  \n A pointer to the newly created schedule group. This `ScheduleGroup` object has an initial reference count placed on it.  \n  \n### Remarks  \n This method will result in the process' default scheduler being created and/or attached to the calling context if there is no scheduler currently associated with the calling context.  \n  \n You must invoke the [Release](schedulegroup-class.md#release) method on a schedule group when you are done scheduling work to it. The scheduler will destroy the schedule group when all work queued to it has completed.  \n  \n Note that if you explicitly created this scheduler, you must release all references to schedule groups within it, before you release your reference on the scheduler, by detaching the current context from it.  \n  \n##  <a name=\"detach\"></a>  CurrentScheduler::Detach Method  \n Detaches the current scheduler from the calling context and restores the previously attached scheduler as the current scheduler, if one exists. After this method returns, the calling context is then managed by the scheduler that was previously attached to the context using either the `CurrentScheduler::Create` or `Scheduler::Attach` method.  \n  \n```\nstatic void __cdecl Detach();\n```  \n  \n### Remarks  \n The `Detach` method implicitly removes a reference count from the scheduler.  \n  \n If there is no scheduler attached to the calling context, calling this method will result in a [scheduler_not_attached](scheduler-not-attached-class.md) exception being thrown.  \n  \n Calling this method from a context that is internal to and managed by a scheduler, or a context that was attached using a method other than the [Scheduler::Attach](scheduler-class.md#attach) or [CurrentScheduler::Create](#create) methods, will result in an [improper_scheduler_detach](improper-scheduler-detach-class.md) exception being thrown.  \n  \n##  <a name=\"get\"></a>  CurrentScheduler::Get Method  \n Returns a pointer to the scheduler associated with the calling context, also referred to as the current scheduler.  \n  \n```\nstatic Scheduler* __cdecl Get();\n```  \n  \n### Return Value  \n A pointer to the scheduler associated with the calling context (the current scheduler).  \n  \n### Remarks  \n This method will result in the process' default scheduler being created and/or attached to the calling context if there is no scheduler currently associated with the calling context. No additional reference is placed on the `Scheduler` object returned by this method.  \n  \n##  <a name=\"getnumberofvirtualprocessors\"></a>  CurrentScheduler::GetNumberOfVirtualProcessors Method  \n Returns the current number of virtual processors for the scheduler associated with the calling context.  \n  \n```\nstatic unsigned int __cdecl GetNumberOfVirtualProcessors();\n```  \n  \n### Return Value  \n If a scheduler is associated with the calling context, the current number of virtual processors for that scheduler; otherwise, the value `-1`.  \n  \n### Remarks  \n This method will not result in scheduler attachment if the calling context is not already associated with a scheduler.  \n  \n The return value from this method is an instantaneous sampling of the number of virtual processors for the scheduler associated with the calling context. This value can be stale the moment it is returned.  \n  \n##  <a name=\"getpolicy\"></a>  CurrentScheduler::GetPolicy Method  \n Returns a copy of the policy that the current scheduler was created with.  \n  \n```\nstatic SchedulerPolicy __cdecl GetPolicy();\n```  \n  \n### Return Value  \n A copy of the policy that that the current scheduler was created with.  \n  \n### Remarks  \n This method will result in the process' default scheduler being created and/or attached to the calling context if there is no scheduler currently associated with the calling context.  \n  \n##  <a name=\"id\"></a>  CurrentScheduler::Id Method  \n Returns a unique identifier for the current scheduler.  \n  \n```\nstatic unsigned int __cdecl Id();\n```  \n  \n### Return Value  \n If a scheduler is associated with the calling context, a unique identifier for that scheduler; otherwise, the value `-1`.  \n  \n### Remarks  \n This method will not result in scheduler attachment if the calling context is not already associated with a scheduler.  \n  \n##  <a name=\"isavailablelocation\"></a>  CurrentScheduler::IsAvailableLocation Method  \n Determines whether a given location is available on the current scheduler.  \n  \n```\nstatic bool __cdecl IsAvailableLocation(const location& _Placement);\n```  \n  \n### Parameters  \n `_Placement`  \n A reference to the location to query the current scheduler about.  \n  \n### Return Value  \n An indication of whether or not the location specified by the `_Placement` argument is available on the current scheduler.  \n  \n### Remarks  \n This method will not result in scheduler attachment if the calling context is not already associated with a scheduler.  \n  \n Note that the return value is an instantaneous sampling of whether the given location is available. In the presence of multiple schedulers, dynamic resource management can add or take away resources from schedulers at any point. Should this happen, the given location can change availability.  \n  \n##  <a name=\"registershutdownevent\"></a>  CurrentScheduler::RegisterShutdownEvent Method  \n Causes the Windows event handle passed in the `_ShutdownEvent` parameter to be signaled when the scheduler associated with the current context shuts down and destroys itself. At the time the event is signaled, all work that had been scheduled to the scheduler is complete. Multiple shutdown events can be registered through this method.  \n  \n```\nstatic void __cdecl RegisterShutdownEvent(HANDLE _ShutdownEvent);\n```  \n  \n### Parameters  \n `_ShutdownEvent`  \n A handle to a Windows event object which will be signaled by the runtime when the scheduler associated with the current context shuts down and destroys itself.  \n  \n### Remarks  \n If there is no scheduler attached to the calling context, calling this method will result in a [scheduler_not_attached](scheduler-not-attached-class.md) exception being thrown.  \n  \n##  <a name=\"scheduletask\"></a>  CurrentScheduler::ScheduleTask Method  \n Schedules a light-weight task within the scheduler associated with the calling context. The light-weight task will be placed in a schedule group determined by the runtime. The version that takes the parameter `_Placement` causes the task to be biased towards executing at the specified location.  \n  \n```\nstatic void __cdecl ScheduleTask(\n    TaskProc _Proc,\n    _Inout_opt_ void* _Data);\n\nstatic void __cdecl ScheduleTask(\n    TaskProc _Proc,\n    _Inout_opt_ void* _Data,\n    location& _Placement);\n```  \n  \n### Parameters  \n `_Proc`  \n A pointer to the function to execute to perform the body of the light-weight task.  \n  \n `_Data`  \n A void pointer to the data that will be passed as a parameter to the body of the task.  \n  \n `_Placement`  \n A reference to a location where the light-weight task will be biased towards executing at.  \n  \n### Remarks  \n This method will result in the process' default scheduler being created and/or attached to the calling context if there is no scheduler currently associated with the calling context.  \n  \n## See Also  \n [concurrency Namespace](concurrency-namespace.md)   \n [Scheduler Class](scheduler-class.md)   \n [PolicyElementKey Enumeration](concurrency-namespace-enums.md)   \n [Task Scheduler](../../../parallel/concrt/task-scheduler-concurrency-runtime.md)\n\n\n\n"}