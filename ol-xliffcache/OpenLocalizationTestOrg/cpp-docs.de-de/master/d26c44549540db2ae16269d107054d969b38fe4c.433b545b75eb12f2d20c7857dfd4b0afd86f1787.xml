{"nodes":[{"pos":[12,61],"content":"Compiler Warning (level 1) C4683 | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Compiler Warning (level 1) C4683 | Microsoft Docs","pos":[0,49]}]},{"pos":[609,641],"content":"Compiler Warning (level 1) C4683","linkify":"Compiler Warning (level 1) C4683","nodes":[{"content":"Compiler Warning (level 1) C4683","pos":[0,32]}]},{"content":"<bpt id=\"p1\">**</bpt>'<ept id=\"p1\">**</ept><ph id=\"ph1\"> </ph>","pos":[642,648],"source":"**'** "},{"content":"<bpt id=\"p1\"> **</bpt><bpt id=\"p2\">*</bpt>function<ept id=\"p2\">*</ept> ': event source has an 'out'-parameter; exercise caution when hooking multiple event handlers<ept id=\"p1\">**</ept>","pos":[651,760],"source":" ***function* ': event source has an 'out'-parameter; exercise caution when hooking multiple event handlers**"},{"content":"If more than one event sink is listening to a COM event source, the value of an out parameter may be ignored.","pos":[767,876]},{"content":"Be aware that a memory leak will occur in the following situation:","pos":[883,949]},{"content":"If a method has an out parameter that is internally allocated, for example a BSTR *.","pos":[959,1043]},{"content":"If the event has more than one handler (is a multicast event)","pos":[1053,1114]},{"content":"The reason for the leak is that the out parameter will be set by more than one handler, but returned to the call site only by the last handler.","pos":[1121,1264]},{"content":"The following sample generates C4683:","pos":[1271,1308]}],"content":"---\ntitle: \"Compiler Warning (level 1) C4683 | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"error-reference\"\nf1_keywords: \n  - \"C4683\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"C4683\"\nms.assetid: e6e77364-dba1-46dd-ae1d-03da23070bce\ncaps.latest.revision: 5\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Compiler Warning (level 1) C4683\n**'**   \n ***function* ': event source has an 'out'-parameter; exercise caution when hooking multiple event handlers**  \n  \n If more than one event sink is listening to a COM event source, the value of an out parameter may be ignored.  \n  \n Be aware that a memory leak will occur in the following situation:  \n  \n1.  If a method has an out parameter that is internally allocated, for example a BSTR *.  \n  \n2.  If the event has more than one handler (is a multicast event)  \n  \n The reason for the leak is that the out parameter will be set by more than one handler, but returned to the call site only by the last handler.  \n  \n The following sample generates C4683:  \n  \n```  \n// C4683.cpp  \n// compile with: /W1 /LD  \n#define _ATL_ATTRIBUTES 1  \n#include \"atlbase.h\"  \n#include \"atlcom.h\"  \n  \n[ module(name=\"xx\") ];  \n  \n[ object ]  \n__interface I {  \n   HRESULT f([out] int* pi);  \n   // try the following line instead  \n   // HRESULT f(int* pi);  \n};  \n  \n[ coclass, event_source(com) ]  \nstruct E {  \n   __event __interface I;   // C4683  \n};  \n```"}