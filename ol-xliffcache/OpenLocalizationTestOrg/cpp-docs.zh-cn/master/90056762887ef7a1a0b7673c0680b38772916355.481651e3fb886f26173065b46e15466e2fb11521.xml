{"nodes":[{"pos":[12,66],"content":"Visual C++ change history 2003 - 2015 | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Visual C++ change history 2003 - 2015 | Microsoft Docs","pos":[0,54]}]},{"content":"Visual C++ change history 2003 - 2015","pos":[625,662]},{"content":"When you upgrade to a new version of the Visual C++ compiler, you might encounter compilation and/or runtime errors in code that previously compiled and ran correctly.","pos":[663,830]},{"content":"Changes in the new version that cause such problems are known as <bpt id=\"p1\">*</bpt>breaking changes<ept id=\"p1\">*</ept>, and typically they're required by modifications in the C++ language standard, function signatures, or the layout of objects in memory.","pos":[831,1050],"source":" Changes in the new version that cause such problems are known as *breaking changes*, and typically they're required by modifications in the C++ language standard, function signatures, or the layout of objects in memory."},{"content":"To avoid run-time errors that are difficult to detect and diagnose, we recommend that you never statically link to binaries that were compiled by using different versions of the compiler.","pos":[1057,1244]},{"content":"Also, when you upgrade an EXE or DLL project, make sure to upgrade the libraries that it links to.","pos":[1245,1343]},{"content":"If you're using CRT (C Runtime) or STL (Standard Template Library) types, don't pass them between binaries (including DLLs) that were compiled by using different versions of the compiler.","pos":[1344,1531]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Potential Errors Passing CRT Objects Across DLL Boundaries<ept id=\"p1\">](../c-runtime-library/potential-errors-passing-crt-objects-across-dll-boundaries.md)</ept>.","pos":[1532,1703],"source":" For more information, see [Potential Errors Passing CRT Objects Across DLL Boundaries](../c-runtime-library/potential-errors-passing-crt-objects-across-dll-boundaries.md)."},{"content":"We further recommend that you never write code that depends on a particular layout for an object that is not a COM interface or a POD object.","pos":[1710,1851]},{"content":"If you do write such code, then you must ensure that it works after you upgrade.","pos":[1852,1932]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Portability At ABI Boundaries<ept id=\"p1\">](../cpp/portability-at-abi-boundaries-modern-cpp.md)</ept>.","pos":[1933,2043],"source":" For more information, see [Portability At ABI Boundaries](../cpp/portability-at-abi-boundaries-modern-cpp.md)."},{"content":"Additionally, ongoing improvements to compiler conformance can sometimes change how the compiler understands your existing source code.","pos":[2050,2185]},{"content":"When this happens, you might encounter new or different errors during your build, or even behavioral differences in code that previously built and seemed to run correctly.","pos":[2186,2357]},{"content":"Although these are not breaking changes like the ones discussed in this document, source code changes might be needed to resolve these issues.","pos":[2358,2500]},{"content":"This article describes all the breaking changes going back to Visual Studio 2003, and in this article the terms \"new behavior\" or \"now\" refer to Visual Studio 2015.","pos":[2507,2671]},{"content":"The terms \"old behavior\" and \"before\" refer to Visual Studio 2013 and earlier releases.","pos":[2672,2759]},{"content":"C Runtime (CRT) Library Breaking Changes","pos":[2770,2810]},{"content":"Standard C++ and Standard Template Library (STL) Breaking Changes","pos":[2831,2896]},{"content":"MFC and ATL Breaking Changes","pos":[2917,2945]},{"content":"Concurrency Runtime Breaking Changes","pos":[2966,3002]},{"pos":[3047,3082],"content":"Visual C++ 2015 Conformance Changes"},{"pos":[3115,3138],"content":"C Runtime Library (CRT)"},{"content":"General Changes","pos":[3149,3164]},{"content":"<bpt id=\"p1\">**</bpt>Refactored binaries<ept id=\"p1\">**</ept> The CRT Library  has been refactored into a two different binaries, a Universal CRT (ucrtbase), which contains most of the standard functionality, and a VC Runtime Library (vcruntime140), which contains the compiler-related functionality, such as exception handling, and intrinsics.","pos":[3174,3480],"source":"**Refactored binaries** The CRT Library  has been refactored into a two different binaries, a Universal CRT (ucrtbase), which contains most of the standard functionality, and a VC Runtime Library (vcruntime140), which contains the compiler-related functionality, such as exception handling, and intrinsics."},{"content":"If you are using the default project settings, then this change does not impact you since the linker will use the new default libraries automatically.","pos":[3481,3631]},{"content":"If you have set the project's <bpt id=\"p1\">**</bpt>Linker<ept id=\"p1\">**</ept> property <bpt id=\"p2\">**</bpt>Ignore All Default Libraries<ept id=\"p2\">**</ept> to <bpt id=\"p3\">**</bpt>Yes<ept id=\"p3\">**</ept> or you are using the /NODEFAULTLIB linker option on the command line, then you must update your list of libraries (in the <bpt id=\"p4\">**</bpt>Additional Dependencies<ept id=\"p4\">**</ept> property) to include the new, refactored libraries.","pos":[3632,3927],"source":" If you have set the project's **Linker** property **Ignore All Default Libraries** to **Yes** or you are using the /NODEFAULTLIB linker option on the command line, then you must update your list of libraries (in the **Additional Dependencies** property) to include the new, refactored libraries."},{"content":"Replace the old CRT library (libcmt.lib, libcmtd.lib, msvcrt.lib, msvcrtd.lib) with the equivalent refactored libraries.","pos":[3928,4048]},{"content":"For each of the two refactored libraries, there are static (.lib) and dynamic (.dll) versions, and release (with no suffix) and debug versions (with the \"d\" suffix).","pos":[4049,4214]},{"content":"The dynamic versions have an import library that you link with.","pos":[4215,4278]},{"content":"The two refactored libraries are Universal CRT, specifically ucrtbase.dll or .lib, ucrtbased.dll or .lib, and the VC runtime library, libvcruntime.lib, libvcruntime.dll, libvcruntimed.lib, and libvcruntimed.dll.","pos":[4279,4490]},{"content":"See <bpt id=\"p1\">[</bpt>CRT Library Features<ept id=\"p1\">](../c-runtime-library/crt-library-features.md)</ept>.","pos":[4491,4564],"source":" See [CRT Library Features](../c-runtime-library/crt-library-features.md)."},{"content":"locale.h&gt;","pos":[4577,4586],"source":"locale.h>"},{"content":"<bpt id=\"p1\">**</bpt>localeconv<ept id=\"p1\">**</ept> The <bpt id=\"p2\">[</bpt>localeconv<ept id=\"p2\">](../c-runtime-library/reference/localeconv.md)</ept> function declared in locale.h now works correctly when <bpt id=\"p3\">[</bpt>per-thread locale<ept id=\"p3\">](../parallel/multithreading-and-locales.md)</ept> is enabled.","pos":[4596,4803],"source":"**localeconv** The [localeconv](../c-runtime-library/reference/localeconv.md) function declared in locale.h now works correctly when [per-thread locale](../parallel/multithreading-and-locales.md) is enabled."},{"content":"In previous versions of the library, this function would return the lconv data for the global locale, not the thread's locale.","pos":[4804,4930]},{"content":"If you use per thread locale, you should check your use of localeconv to see if your code assumes that the lconv data returned is for the global locale and modify it appropriately.","pos":[4941,5121]},{"content":"math.h&gt;","pos":[5134,5141],"source":"math.h>"},{"content":"<bpt id=\"p1\">**</bpt>C++ overloads of math library functions<ept id=\"p1\">**</ept> In previous versions, <ph id=\"ph1\">\\&lt;</ph>math.h&gt; defined some, but not all, of the C++ overloads for the math library functions.","pos":[5151,5306],"source":"**C++ overloads of math library functions** In previous versions, \\<math.h> defined some, but not all, of the C++ overloads for the math library functions."},{"content":"cmath&gt; defined the remaining overloads, so to get all of the overloads, one needed to include the <ph id=\"ph1\">\\&lt;</ph>cmath&gt; header.","pos":[5309,5423],"source":"cmath> defined the remaining overloads, so to get all of the overloads, one needed to include the \\<cmath> header."},{"content":"This led to problems with function overload resolution in code that only included <ph id=\"ph1\">\\&lt;</ph>math.h&gt;.","pos":[5424,5516],"source":" This led to problems with function overload resolution in code that only included \\<math.h>."},{"content":"Now, all C++ overloads have been removed from <ph id=\"ph1\">\\&lt;</ph>math.h&gt; and are now present only in <ph id=\"ph2\">\\&lt;</ph>cmath&gt;.","pos":[5517,5610],"source":" Now, all C++ overloads have been removed from \\<math.h> and are now present only in \\<cmath>."},{"content":"To resolve errors, include <ph id=\"ph1\">&lt;cmath&gt;</ph> to get the declarations of the functions that were removed from <ph id=\"ph2\">\\&lt;</ph>math.h&gt;.","pos":[5621,5730],"source":"To resolve errors, include <cmath> to get the declarations of the functions that were removed from \\<math.h>."},{"content":"The following table lists the functions that were moved.","pos":[5731,5787]},{"content":"Functions that were moved:","pos":[5798,5824]},{"content":"double abs(double) and float abs(float)","pos":[5838,5877]},{"content":"double pow(double, int), float pow(float, float), float pow(float, int), long double pow(long double, long double), long double pow(long double, int)","pos":[5891,6040]},{"content":"float and long double versions of floating point functions acos, acosh, asin, asinh, atan, atanh, atan2, cbrt, ceil, copysign, cos, cosh, erf, erfc, exp, exp2, expm1, fabs, fdim, floor, fma, fmax, fmin, fmod, frexp, hypot, ilogb, ldexp, lgamma, llrint, llround, log, log10, log1p, log2, lrint, lround, modf, nearbyint, nextafter, nexttoward, remainder, remquo, rint, round, scalbln, scalbn, sin, sinh, sqrt, tan, tanh, tgamma, trunc","pos":[6054,6486]},{"content":"If you have code that uses abs with a floating point type that only includes the math.h header, the floating point versions will no longer be available, so the call, even with a floating point argument, now resolves to abs(int).","pos":[6497,6725]},{"content":"This produces the error:","pos":[6726,6750]},{"content":"The fix for this warning is to replace the call to abs with a floating point version of abs, such as fabs for a double argument or fabsf for a float argument, or include the cmath header and continue to use abs.","pos":[6880,7091]},{"content":"<bpt id=\"p1\">**</bpt>Floating point conformance<ept id=\"p1\">**</ept> Many changes to the math library have been made to improve conformance to the IEEE-754 and C11 Annex F specifications with respect to special case inputs such as NaNs and infinities.","pos":[7101,7314],"source":"**Floating point conformance** Many changes to the math library have been made to improve conformance to the IEEE-754 and C11 Annex F specifications with respect to special case inputs such as NaNs and infinities."},{"content":"For example, quiet NaN inputs, which were often treated as errors in previous versions of the library, are no longer treated as errors.","pos":[7315,7450]},{"content":"See <bpt id=\"p1\">[</bpt>IEEE 754 Standard<ept id=\"p1\">](http://grouper.ieee.org/groups/754)</ept> and Annex F of the <bpt id=\"p2\">[</bpt>C11 Standard<ept id=\"p2\">](http://www.iso-9899.info/wiki/The_Standard)</ept>.","pos":[7451,7589],"source":" See [IEEE 754 Standard](http://grouper.ieee.org/groups/754) and Annex F of the [C11 Standard](http://www.iso-9899.info/wiki/The_Standard)."},{"content":"These changes won't cause compile-time errors, but might cause programs to behave differently and more correctly according to the standard.","pos":[7600,7739]},{"content":"<bpt id=\"p1\">**</bpt>FLT_ROUNDS<ept id=\"p1\">**</ept> In Visual Studio 2013, the FLT_ROUNDS macro expanded to a constant expression, which was incorrect because the rounding mode is configurable at runtime, for example, by calling fesetround.","pos":[7749,7952],"source":"**FLT_ROUNDS** In Visual Studio 2013, the FLT_ROUNDS macro expanded to a constant expression, which was incorrect because the rounding mode is configurable at runtime, for example, by calling fesetround."},{"content":"The FLT_ROUNDS macro is now dynamic and correctly reflects the current rounding mode.","pos":[7953,8038]},{"content":"new&gt; and <ph id=\"ph1\">\\&lt;</ph>new.h&gt;","pos":[8051,8068],"source":"new> and \\<new.h>"},{"content":"<bpt id=\"p1\">**</bpt>new and delete<ept id=\"p1\">**</ept> In previous versions of the library, the implementation-defined operator new and delete functions were exported from the runtime library DLL (for example, msvcr120.dll).","pos":[8078,8266],"source":"**new and delete** In previous versions of the library, the implementation-defined operator new and delete functions were exported from the runtime library DLL (for example, msvcr120.dll)."},{"content":"These operator functions are now always statically linked into your binaries, even when using the runtime library DLLs.","pos":[8267,8386]},{"content":"This is not a breaking change for native or mixed code (/clr), however for code compiled as <bpt id=\"p1\">[</bpt>/clr:pure<ept id=\"p1\">](../build/reference/clr-common-language-runtime-compilation.md)</ept>, this might cause your code to fail to compile.","pos":[8397,8611],"source":"This is not a breaking change for native or mixed code (/clr), however for code compiled as [/clr:pure](../build/reference/clr-common-language-runtime-compilation.md), this might cause your code to fail to compile."},{"content":"If you compile code as /clr:pure, you may need to add #include <ph id=\"ph1\">\\&lt;</ph>new&gt; or #include <ph id=\"ph2\">\\&lt;</ph>new.h&gt; to work around build errors due to this change.","pos":[8612,8750],"source":" If you compile code as /clr:pure, you may need to add #include \\<new> or #include \\<new.h> to work around build errors due to this change."},{"content":"Note that /clr:pure is deprecated in <ph id=\"ph1\">[!INCLUDE[vs_dev14](../ide/includes/vs_dev14_md.md)]</ph> and might be removed in future releases.","pos":[8751,8881],"source":" Note that /clr:pure is deprecated in [!INCLUDE[vs_dev14](../ide/includes/vs_dev14_md.md)] and might be removed in future releases."},{"content":"process.h&gt;","pos":[8894,8904],"source":"process.h>"},{"content":"<bpt id=\"p1\">**</bpt>_beginthread and _beginthreadex<ept id=\"p1\">**</ept> The <bpt id=\"p2\">[</bpt>_beginthread<ept id=\"p2\">](../c-runtime-library/reference/beginthread-beginthreadex.md)</ept> and <bpt id=\"p3\">[</bpt>_beginthreadex<ept id=\"p3\">](../c-runtime-library/reference/beginthread-beginthreadex.md)</ept> functions now hold a reference to the module in which the thread procedure is defined for the duration of the thread.","pos":[8914,9229],"source":"**_beginthread and _beginthreadex** The [_beginthread](../c-runtime-library/reference/beginthread-beginthreadex.md) and [_beginthreadex](../c-runtime-library/reference/beginthread-beginthreadex.md) functions now hold a reference to the module in which the thread procedure is defined for the duration of the thread."},{"content":"This helps to ensure that modules are not unloaded until a thread has run to completion.","pos":[9230,9318]},{"content":"stdarg.h&gt;","pos":[9331,9340],"source":"stdarg.h>"},{"content":"<bpt id=\"p1\">**</bpt>va_start and reference types<ept id=\"p1\">**</ept> When compiling C++ code, <bpt id=\"p2\">[</bpt>va_start<ept id=\"p2\">](../c-runtime-library/reference/va-arg-va-copy-va-end-va-start.md)</ept> now validates at compile-time that the argument passed to it is not of reference type.","pos":[9350,9571],"source":"**va_start and reference types** When compiling C++ code, [va_start](../c-runtime-library/reference/va-arg-va-copy-va-end-va-start.md) now validates at compile-time that the argument passed to it is not of reference type."},{"content":"Reference-type arguments are prohibited by the C++ Standard.","pos":[9572,9632]},{"content":"stdio.h&gt; and <ph id=\"ph1\">\\&lt;</ph>conio.h&gt;","pos":[9645,9668],"source":"stdio.h> and \\<conio.h>"},{"content":"The printf and scanf family of functions are now defined inline.","pos":[9680,9744]},{"content":"The definitions of all of the printf and scanf functions have been moved inline into <ph id=\"ph1\">\\&lt;</ph>stdio.h&gt;, <ph id=\"ph2\">\\&lt;</ph>conio.h&gt;, and other CRT headers.","pos":[9747,9878],"source":" The definitions of all of the printf and scanf functions have been moved inline into \\<stdio.h>, \\<conio.h>, and other CRT headers."},{"content":"This is a breaking change that leads to a linker error (LNK2019, unresolved external symbol) for any programs that declared these functions locally without including the appropriate CRT headers.","pos":[9879,10073]},{"content":"If possible, you should update the code to include the CRT headers (that is, add #include <ph id=\"ph1\">\\&lt;</ph>stdio.h&gt;) and the inline functions, but if you do not want to modify your code to include these header files, an alternative solution is to add an additional library to your linker input, legacy_stdio_definitions.lib.","pos":[10074,10383],"source":" If possible, you should update the code to include the CRT headers (that is, add #include \\<stdio.h>) and the inline functions, but if you do not want to modify your code to include these header files, an alternative solution is to add an additional library to your linker input, legacy_stdio_definitions.lib."},{"pos":[10394,10679],"content":"To add this library to your linker input in the IDE, open the context menu for the project node, choose <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>, then in the <bpt id=\"p2\">**</bpt>Project Properties<ept id=\"p2\">**</ept> dialog box, choose <bpt id=\"p3\">**</bpt>Linker<ept id=\"p3\">**</ept>, and edit the <bpt id=\"p4\">**</bpt>Linker Input<ept id=\"p4\">**</ept> to add legacy_stdio_definitions.lib to the semi-colon-separated list.","source":"To add this library to your linker input in the IDE, open the context menu for the project node, choose **Properties**, then in the **Project Properties** dialog box, choose **Linker**, and edit the **Linker Input** to add legacy_stdio_definitions.lib to the semi-colon-separated list."},{"content":"If your project links with static libraries that were compiled with a release of Visual C++ earlier than 2015, the linker might report an unresolved external symbol.","pos":[10690,10855]},{"content":"These errors might reference internal stdio definitions for _iob, _iob_func, or related imports for certain stdio functions in the form of _imp<ph id=\"ph1\">\\_</ph>*.","pos":[10856,11003],"source":" These errors might reference internal stdio definitions for _iob, _iob_func, or related imports for certain stdio functions in the form of _imp\\_*."},{"content":"Microsoft recommends that you recompile all static libraries with the latest version of the Visual C++ compiler and libraries when you upgrade a project.","pos":[11004,11157]},{"content":"If the library is a third-party library for which source is not available, you should either request an updated binary from the third party or encapsulate your usage of that library into a separate DLL that you compile with the older version of the Visual C++ compiler and libraries.","pos":[11158,11441]},{"pos":[11453,11710],"content":"[!WARNING]\n If you are linking with Windows SDK 8.1 or earlier, you might encounter these unresolved external symbol errors. In that case, you should resolve the error by adding legacy_stdio_definitions.lib to the linker input as described previously.","leadings":["","    > "],"nodes":[{"content":" If you are linking with Windows SDK 8.1 or earlier, you might encounter these unresolved external symbol errors. In that case, you should resolve the error by adding legacy_stdio_definitions.lib to the linker input as described previously.","pos":[11,251],"nodes":[{"content":"If you are linking with Windows SDK 8.1 or earlier, you might encounter these unresolved external symbol errors.","pos":[1,113]},{"content":"In that case, you should resolve the error by adding legacy_stdio_definitions.lib to the linker input as described previously.","pos":[114,240]}]}]},{"content":"To troubleshoot unresolved symbol errors, you can try using <bpt id=\"p1\">[</bpt>dumpbin.exe<ept id=\"p1\">](../build/reference/dumpbin-reference.md)</ept> to examine the symbols defined in a binary.","pos":[11721,11879],"source":"To troubleshoot unresolved symbol errors, you can try using [dumpbin.exe](../build/reference/dumpbin-reference.md) to examine the symbols defined in a binary."},{"content":"Try the following command line to view symbols defined in a library.","pos":[11880,11948]},{"content":"<bpt id=\"p1\">**</bpt>gets and _getws<ept id=\"p1\">**</ept> The <bpt id=\"p2\">[</bpt>gets<ept id=\"p2\">](../c-runtime-library/gets-getws.md)</ept> and <bpt id=\"p3\">[</bpt>_getws<ept id=\"p3\">](../c-runtime-library/gets-getws.md)</ept> functions have been removed.","pos":[12032,12176],"source":"**gets and _getws** The [gets](../c-runtime-library/gets-getws.md) and [_getws](../c-runtime-library/gets-getws.md) functions have been removed."},{"content":"The gets function was removed from the C Standard Library in C11 because it cannot be used securely.","pos":[12177,12277]},{"content":"The _getws function was a Microsoft extension that was equivalent to gets but for wide strings.","pos":[12278,12373]},{"content":"As alternatives to these functions, consider use of <bpt id=\"p1\">[</bpt>fgets<ept id=\"p1\">](../c-runtime-library/reference/fgets-fgetws.md)</ept>, <bpt id=\"p2\">[</bpt>fgetws<ept id=\"p2\">](../c-runtime-library/reference/fgets-fgetws.md)</ept>, <bpt id=\"p3\">[</bpt>gets_s<ept id=\"p3\">](../c-runtime-library/reference/gets-s-getws-s.md)</ept>, and <bpt id=\"p4\">[</bpt>_getws_s<ept id=\"p4\">](../c-runtime-library/reference/gets-s-getws-s.md)</ept>.","pos":[12374,12666],"source":" As alternatives to these functions, consider use of [fgets](../c-runtime-library/reference/fgets-fgetws.md), [fgetws](../c-runtime-library/reference/fgets-fgetws.md), [gets_s](../c-runtime-library/reference/gets-s-getws-s.md), and [_getws_s](../c-runtime-library/reference/gets-s-getws-s.md)."},{"content":"<bpt id=\"p1\">**</bpt>_cgets and _cgetws<ept id=\"p1\">**</ept> The <bpt id=\"p2\">[</bpt>_cgets<ept id=\"p2\">](../c-runtime-library/cgets-cgetws.md)</ept> and <bpt id=\"p3\">[</bpt>_cgetws<ept id=\"p3\">](../c-runtime-library/cgets-cgetws.md)</ept> functions have been removed.","pos":[12676,12830],"source":"**_cgets and _cgetws** The [_cgets](../c-runtime-library/cgets-cgetws.md) and [_cgetws](../c-runtime-library/cgets-cgetws.md) functions have been removed."},{"content":"As alternatives to these functions, consider use of <bpt id=\"p1\">[</bpt>_cgets_s<ept id=\"p1\">](../c-runtime-library/reference/cgets-s-cgetws-s.md)</ept> and <bpt id=\"p2\">[</bpt>_cgetws_s<ept id=\"p2\">](../c-runtime-library/reference/cgets-s-cgetws-s.md)</ept>.","pos":[12831,13014],"source":" As alternatives to these functions, consider use of [_cgets_s](../c-runtime-library/reference/cgets-s-cgetws-s.md) and [_cgetws_s](../c-runtime-library/reference/cgets-s-cgetws-s.md)."},{"pos":[13024,13169],"content":"<bpt id=\"p1\">**</bpt>Infinity and NaN Formatting<ept id=\"p1\">**</ept> In previous versions, infinities and NaNs would be formatted using a set of Visual C++-specific sentinel strings.","source":"**Infinity and NaN Formatting** In previous versions, infinities and NaNs would be formatted using a set of Visual C++-specific sentinel strings."},{"content":"Infinity: 1.#INF","pos":[13183,13199]},{"content":"Quiet NaN: 1.#QNAN","pos":[13213,13231]},{"content":"Signaling NaN: 1.#SNAN","pos":[13245,13267]},{"content":"Indefinite NaN: 1.#IND","pos":[13281,13303]},{"content":"Any of these may have been prefixed by a sign and may have been formatted slightly differently depending on field width and precision (sometimes with unusual effects, e.g. printf(\"%.2f\\n\", INFINITY) would print 1.#J because the #INF would be \"rounded\" to a precision of 2 digits).","pos":[13314,13594]},{"content":"C99 introduced new requirements on how infinities and NaNs are to be formatted.","pos":[13595,13674]},{"content":"The Visual C++ implementation now conforms to these requirements.","pos":[13675,13740]},{"content":"The new strings are as follows:","pos":[13741,13772]},{"content":"Infinity: inf","pos":[13786,13799]},{"content":"Quiet NaN: nan","pos":[13813,13827]},{"content":"Signaling NaN: nan(snan)","pos":[13841,13865]},{"content":"Indefinite NaN:nan(ind)","pos":[13879,13902]},{"content":"Any of these may be prefixed by a sign.","pos":[13913,13952]},{"content":"If a capital format specifier is used (%F instead of %f) then the strings are printed in capital letters (INF instead of inf), as is required.","pos":[13953,14095]},{"pos":[14106,14298],"content":"The <bpt id=\"p1\">[</bpt>scanf<ept id=\"p1\">](../c-runtime-library/reference/scanf-scanf-l-wscanf-wscanf-l.md)</ept> functions have been modified to parse these new strings, so these strings will round-trip through printf and scanf.","source":"The [scanf](../c-runtime-library/reference/scanf-scanf-l-wscanf-wscanf-l.md) functions have been modified to parse these new strings, so these strings will round-trip through printf and scanf."},{"content":"<bpt id=\"p1\">**</bpt>Floating point formatting and parsing<ept id=\"p1\">**</ept> New floating point formatting and parsing algorithms have been introduced to improve correctness.","pos":[14308,14447],"source":"**Floating point formatting and parsing** New floating point formatting and parsing algorithms have been introduced to improve correctness."},{"content":"This change affects the <bpt id=\"p1\">[</bpt>printf<ept id=\"p1\">](../c-runtime-library/reference/printf-printf-l-wprintf-wprintf-l.md)</ept> and <bpt id=\"p2\">[</bpt>scanf<ept id=\"p2\">](../c-runtime-library/reference/scanf-scanf-l-wscanf-wscanf-l.md)</ept> families of functions, as well as functions like <bpt id=\"p3\">[</bpt>strtod<ept id=\"p3\">](../c-runtime-library/reference/strtod-strtod-l-wcstod-wcstod-l.md)</ept>.","pos":[14448,14752],"source":" This change affects the [printf](../c-runtime-library/reference/printf-printf-l-wprintf-wprintf-l.md) and [scanf](../c-runtime-library/reference/scanf-scanf-l-wscanf-wscanf-l.md) families of functions, as well as functions like [strtod](../c-runtime-library/reference/strtod-strtod-l-wcstod-wcstod-l.md)."},{"content":"The old formatting algorithms would generate only a limited number of digits, then would fill the remaining decimal places with zero.","pos":[14763,14896]},{"content":"This is usually good enough to generate strings that will round-trip back to the original floating point value, but it's not great if you want the exact value (or the closest decimal representation thereof).","pos":[14897,15104]},{"content":"The new formatting algorithms generate as many digits as are required to represent the value (or to fill the specified precision).","pos":[15105,15235]},{"content":"As an example of the improvement; consider the results when printing a large power of two:","pos":[15236,15326]},{"content":"The old parsing algorithms would consider only up to 17 significant digits from the input string and would discard the rest of the digits.","pos":[15509,15647]},{"content":"This is sufficient to generate a very close approximation of the value represented by the string, and the result is usually very close to the correctly rounded result.","pos":[15648,15815]},{"content":"The new implementation considers all present digits and produces the correctly rounded result for all inputs (up to 768 digits in length).","pos":[15816,15954]},{"content":"In addition, these functions now respect the rounding mode (controllable via fesetround).","pos":[15955,16044]},{"content":"This is a potentially breaking behavior change because these functions might output different results.","pos":[16046,16148]},{"content":"The new results are always more correct than the old results.","pos":[16149,16210]},{"pos":[16220,16528],"content":"<bpt id=\"p1\">**</bpt>Hexadecimal and infinity/NaN floating point parsing<ept id=\"p1\">**</ept> The floating point parsing algorithms will now parse hexadecimal floating point strings (such as those generated by the %a and %A printf format specifiers) and all infinity and NaN strings that are generated by the printf functions, as described above.","source":"**Hexadecimal and infinity/NaN floating point parsing** The floating point parsing algorithms will now parse hexadecimal floating point strings (such as those generated by the %a and %A printf format specifiers) and all infinity and NaN strings that are generated by the printf functions, as described above."},{"content":"<bpt id=\"p1\">**</bpt>%A and %a zero padding<ept id=\"p1\">**</ept> The %a and %A format specifiers format a floating point number as a hexadecimal mantissa and binary exponent.","pos":[16538,16674],"source":"**%A and %a zero padding** The %a and %A format specifiers format a floating point number as a hexadecimal mantissa and binary exponent."},{"content":"In previous versions, the printf functions would incorrectly zero-pad strings.","pos":[16675,16753]},{"content":"For example, printf(\"%07.0a\\n\", 1.0) would print 00x1p+0, where it should print 0x01p+0.","pos":[16754,16842]},{"content":"This has been fixed.","pos":[16843,16863]},{"content":"<bpt id=\"p1\">**</bpt>%A and %a precision<ept id=\"p1\">**</ept> The default precision of the %A and %a format specifiers was 6 in previous versions of the library.","pos":[16873,16996],"source":"**%A and %a precision** The default precision of the %A and %a format specifiers was 6 in previous versions of the library."},{"content":"The default precision is now 13 for conformance with the C Standard.","pos":[16997,17065]},{"content":"This is a runtime behavior change in the output of any function that uses a format string with %A or %a.","pos":[17076,17180]},{"content":"In the old behavior, the output using the %A specifier might be \"1.1A2B3Cp+111\".","pos":[17181,17261]},{"content":"Now the output for the same value is \"1.1A2B3C4D5E6F7p+111\".","pos":[17262,17322]},{"content":"To get the old behavior, you can specify the precision, for example, %.6A.","pos":[17323,17397]},{"content":"See <bpt id=\"p1\">[</bpt>Precision Specification<ept id=\"p1\">](../c-runtime-library/precision-specification.md)</ept>.","pos":[17398,17477],"source":" See [Precision Specification](../c-runtime-library/precision-specification.md)."},{"content":"<bpt id=\"p1\">**</bpt>%F specifier<ept id=\"p1\">**</ept> The %F format/conversion specifier is now supported.","pos":[17487,17556],"source":"**%F specifier** The %F format/conversion specifier is now supported."},{"content":"It is functionally equivalent to the %f format specifier, except that infinities and NaNs are formatted using capital letters.","pos":[17557,17683]},{"content":"In previous versions, the implementation used to parse F and N as length modifiers.","pos":[17694,17777]},{"content":"This behavior dated back to the age of segmented address spaces: these length modifiers were used to indicate far and near pointers, respectively, as in %Fp or %Ns.","pos":[17778,17942]},{"content":"This behavior has been removed.","pos":[17943,17974]},{"content":"If %F is encountered, it is now treated as the %F format specifier; if %N is encountered, it is now treated as an invalid parameter.","pos":[17975,18107]},{"content":"<bpt id=\"p1\">**</bpt>Exponent formatting<ept id=\"p1\">**</ept> The %e and %E format specifiers format a floating point number as a decimal mantissa and exponent.","pos":[18117,18239],"source":"**Exponent formatting** The %e and %E format specifiers format a floating point number as a decimal mantissa and exponent."},{"content":"The %g and %G format specifiers also format numbers in this form in some cases.","pos":[18240,18319]},{"content":"In previous versions, the CRT would always generate strings with three-digit exponents.","pos":[18320,18407]},{"content":"For example, printf(\"%e\\n\", 1.0) would print 1.000000e+000.","pos":[18408,18467]},{"content":"This was incorrect: C requires that if the exponent is representable using only one or two digits, then only two digits are to be printed.","pos":[18468,18606]},{"content":"In Visual Studio 2005 a global conformance switch was added: <bpt id=\"p1\">[</bpt>_set_output_format<ept id=\"p1\">](../c-runtime-library/set-output-format.md)</ept>.","pos":[18617,18742],"source":"In Visual Studio 2005 a global conformance switch was added: [_set_output_format](../c-runtime-library/set-output-format.md)."},{"content":"A program could call this function with the argument _TWO_DIGIT_EXPONENT, to enable conforming exponent printing.","pos":[18743,18856]},{"content":"The default behavior has been changed to the standards-conforming exponent printing mode.","pos":[18857,18946]},{"content":"<bpt id=\"p1\">**</bpt>Format string validation<ept id=\"p1\">**</ept> In previous versions, the printf and scanf functions would silently accept many invalid format strings, sometimes with unusual effects.","pos":[18956,19120],"source":"**Format string validation** In previous versions, the printf and scanf functions would silently accept many invalid format strings, sometimes with unusual effects."},{"content":"For example, %hlhlhld would be treated as %d.","pos":[19121,19166]},{"content":"All invalid format strings are now treated as invalid parameters.","pos":[19167,19232]},{"content":"fopen mode string validation","pos":[19244,19272]},{"content":"In previous versions, the fopen family of functions silently accepted some invalid mode strings (e.g. r+b+).","pos":[19285,19393]},{"content":"Invalid mode strings are now detected and treated as invalid parameters.","pos":[19394,19466]},{"content":"_O_U8TEXT mode","pos":[19478,19492]},{"content":"The <bpt id=\"p1\">[</bpt>_setmode<ept id=\"p1\">](../c-runtime-library/reference/setmode.md)</ept> function now correctly reports the mode for streams opened in_O_U8TEXT mode.","pos":[19505,19639],"source":"The [_setmode](../c-runtime-library/reference/setmode.md) function now correctly reports the mode for streams opened in_O_U8TEXT mode."},{"content":"In previous versions of the library, it would report such streams as being opened in _O_WTEXT.","pos":[19640,19734]},{"content":"This is a breaking change if your code interprets the _O_WTEXT mode for streams where the encoding is UTF-8.","pos":[19745,19853]},{"content":"If your application doesn't support UTF_8, consider adding support for this increasingly common encoding.","pos":[19854,19959]},{"content":"<bpt id=\"p1\">**</bpt>snprintf and vsnprintf<ept id=\"p1\">**</ept> The <bpt id=\"p2\">[</bpt>snprintf<ept id=\"p2\">](../c-runtime-library/reference/snprintf-snprintf-snprintf-l-snwprintf-snwprintf-l.md)</ept> and <bpt id=\"p3\">[</bpt>vsnprintf<ept id=\"p3\">](../c-runtime-library/reference/vsnprintf-vsnprintf-vsnprintf-l-vsnwprintf-vsnwprintf-l.md)</ept> functions are now implemented.","pos":[19969,20234],"source":"**snprintf and vsnprintf** The [snprintf](../c-runtime-library/reference/snprintf-snprintf-snprintf-l-snwprintf-snwprintf-l.md) and [vsnprintf](../c-runtime-library/reference/vsnprintf-vsnprintf-vsnprintf-l-vsnwprintf-vsnwprintf-l.md) functions are now implemented."},{"content":"Older code often provided definitions macro versions of these functions because they were not implemented by the CRT library, but these are no longer needed in newer versions.","pos":[20235,20410]},{"content":"If <bpt id=\"p1\">[</bpt>snprintf<ept id=\"p1\">](../c-runtime-library/reference/snprintf-snprintf-snprintf-l-snwprintf-snwprintf-l.md)</ept> or <bpt id=\"p2\">[</bpt>vsnprintf<ept id=\"p2\">](../c-runtime-library/reference/vsnprintf-vsnprintf-vsnprintf-l-vsnwprintf-vsnwprintf-l.md)</ept> is defined as a macro before including <ph id=\"ph1\">\\&lt;</ph>stdio.h&gt;, compilation now fails with an error that indicates where the macro was defined.","pos":[20411,20747],"source":" If [snprintf](../c-runtime-library/reference/snprintf-snprintf-snprintf-l-snwprintf-snwprintf-l.md) or [vsnprintf](../c-runtime-library/reference/vsnprintf-vsnprintf-vsnprintf-l-vsnwprintf-vsnwprintf-l.md) is defined as a macro before including \\<stdio.h>, compilation now fails with an error that indicates where the macro was defined."},{"content":"Normally, the fix to this problem is to delete any declarations of snprintf or vsnprintf in user code.","pos":[20758,20860]},{"content":"<bpt id=\"p1\">**</bpt>tmpnam Generates Usable File Names<ept id=\"p1\">**</ept> In previous versions, the tmpnam and tmpnam_s functions generated file names in the root of the drive (such as \\sd3c.).","pos":[20870,21028],"source":"**tmpnam Generates Usable File Names** In previous versions, the tmpnam and tmpnam_s functions generated file names in the root of the drive (such as \\sd3c.)."},{"content":"These functions now generate usable file name paths in a temporary directory.","pos":[21029,21106]},{"content":"<bpt id=\"p1\">**</bpt>FILE Encapsulation<ept id=\"p1\">**</ept> In previous versions, the FILE type was completely defined in <ph id=\"ph1\">\\&lt;</ph>stdio.h&gt;, so it was possible for user code to reach into a FILE and modify its internals.","pos":[21116,21292],"source":"**FILE Encapsulation** In previous versions, the FILE type was completely defined in \\<stdio.h>, so it was possible for user code to reach into a FILE and modify its internals."},{"content":"The stdio library has been changed to hide implementation details.","pos":[21293,21359]},{"content":"As part of this, FILE as defined in <ph id=\"ph1\">\\&lt;</ph>stdio.h&gt; is now an opaque type and its members are inaccessible from outside of the CRT itself.","pos":[21360,21493],"source":" As part of this, FILE as defined in \\<stdio.h> is now an opaque type and its members are inaccessible from outside of the CRT itself."},{"pos":[21503,21855],"content":"<bpt id=\"p1\">**</bpt>_outp and _inp<ept id=\"p1\">**</ept> The functions <bpt id=\"p2\">[</bpt>_outp<ept id=\"p2\">](../c-runtime-library/outp-outpw-outpd.md)</ept>, <bpt id=\"p3\">[</bpt>_outpw<ept id=\"p3\">](../c-runtime-library/outp-outpw-outpd.md)</ept>, <bpt id=\"p4\">[</bpt>_outpd<ept id=\"p4\">](../c-runtime-library/outp-outpw-outpd.md)</ept>, <bpt id=\"p5\">[</bpt>_inp<ept id=\"p5\">](../c-runtime-library/inp-inpw-inpd.md)</ept>, <bpt id=\"p6\">[</bpt>_inpw<ept id=\"p6\">](../c-runtime-library/inp-inpw-inpd.md)</ept>, and <bpt id=\"p7\">[</bpt>_inpd<ept id=\"p7\">](../c-runtime-library/inp-inpw-inpd.md)</ept> have been removed.","source":"**_outp and _inp** The functions [_outp](../c-runtime-library/outp-outpw-outpd.md), [_outpw](../c-runtime-library/outp-outpw-outpd.md), [_outpd](../c-runtime-library/outp-outpw-outpd.md), [_inp](../c-runtime-library/inp-inpw-inpd.md), [_inpw](../c-runtime-library/inp-inpw-inpd.md), and [_inpd](../c-runtime-library/inp-inpw-inpd.md) have been removed."},{"content":"stdlib.h&gt;, <ph id=\"ph1\">\\&lt;</ph>malloc.h&gt;, and <ph id=\"ph2\">\\&lt;</ph>sys/stat.h&gt;","pos":[21868,21909],"source":"stdlib.h>, \\<malloc.h>, and \\<sys/stat.h>"},{"content":"<bpt id=\"p1\">**</bpt>strtof and wcstof<ept id=\"p1\">**</ept> The strtof and wcstof functions failed to set errno to ERANGE when the value was not representable as a float.","pos":[21919,22051],"source":"**strtof and wcstof** The strtof and wcstof functions failed to set errno to ERANGE when the value was not representable as a float."},{"content":"This has been fixed.","pos":[22052,22072]},{"content":"(Note that this error was specific to these two functions; the strtod, wcstod, strtold, and wcstold functions were unaffected.) This is a runtime breaking change.","pos":[22073,22235]},{"content":"<bpt id=\"p1\">**</bpt>Aligned allocation functions<ept id=\"p1\">**</ept> In previous versions, the aligned allocation functions (_aligned_malloc, _aligned_offset_malloc, etc.) would silently accept requests for a block with an alignment of 0.","pos":[22245,22447],"source":"**Aligned allocation functions** In previous versions, the aligned allocation functions (_aligned_malloc, _aligned_offset_malloc, etc.) would silently accept requests for a block with an alignment of 0."},{"content":"The requested alignment must be a power of two, which zero is not.","pos":[22448,22514]},{"content":"This has been fixed, and a requested alignment of 0 is now treated as an invalid parameter.","pos":[22515,22606]},{"content":"This is a runtime breaking change.","pos":[22607,22641]},{"content":"<bpt id=\"p1\">**</bpt>Heap functions<ept id=\"p1\">**</ept> The _heapadd, _heapset, and _heapused functions have been removed.","pos":[22651,22736],"source":"**Heap functions** The _heapadd, _heapset, and _heapused functions have been removed."},{"content":"These functions have been nonfunctional since the CRT was updated to use the Windows heap.","pos":[22737,22827]},{"content":"<bpt id=\"p1\">**</bpt>smallheap<ept id=\"p1\">**</ept> The smalheap link option has been removed.","pos":[22837,22893],"source":"**smallheap** The smalheap link option has been removed."},{"content":"See <bpt id=\"p1\">[</bpt>Link Options<ept id=\"p1\">](../c-runtime-library/link-options.md)</ept>.","pos":[22894,22951],"source":" See [Link Options](../c-runtime-library/link-options.md)."},{"content":"string.h&gt;","pos":[22964,22973],"source":"string.h>"},{"content":"<bpt id=\"p1\">**</bpt>wcstok<ept id=\"p1\">**</ept> The signature of the wcstok function has been changed to match what is required by the C Standard.","pos":[22983,23092],"source":"**wcstok** The signature of the wcstok function has been changed to match what is required by the C Standard."},{"content":"In previous versions of the library, the signature of this function was:","pos":[23093,23165]},{"content":"It used an internal, per-thread context to track state across calls, as is done for strtok.","pos":[23250,23341]},{"content":"The function now has the signature wchar_t* wcstok(wchar_t<ph id=\"ph1\">\\*</ph>, wchar_t const<ph id=\"ph2\">\\*</ph>, wchar_t<ph id=\"ph3\">\\*\\*</ph>), and requires the caller to pass the context as a third argument to the function.","pos":[23342,23515],"source":" The function now has the signature wchar_t* wcstok(wchar_t\\*, wchar_t const\\*, wchar_t\\*\\*), and requires the caller to pass the context as a third argument to the function."},{"content":"A new _wcstok function has been added with the old signature to ease porting.","pos":[23526,23603]},{"content":"When compiling C++ code, there is also an inline overload of wcstok that has the old signature.","pos":[23604,23699]},{"content":"This overload is declared as deprecated.","pos":[23700,23740]},{"content":"In C code, you may define_CRT_NON_CONFORMING_WCSTOK to cause _wcstok to be used in place of wcstok.","pos":[23741,23840]},{"content":"time.h&gt;","pos":[23853,23860],"source":"time.h>"},{"content":"<bpt id=\"p1\">**</bpt>clock<ept id=\"p1\">**</ept> In previous versions, the <bpt id=\"p2\">[</bpt>clock<ept id=\"p2\">](../c-runtime-library/reference/clock.md)</ept> function was implemented using the Windows API <bpt id=\"p3\">[</bpt>GetSystemTimeAsFileTime<ept id=\"p3\">](http://msdn.microsoft.com/library/windows/desktop/ms724397.aspx)</ept>.","pos":[23870,24093],"source":"**clock** In previous versions, the [clock](../c-runtime-library/reference/clock.md) function was implemented using the Windows API [GetSystemTimeAsFileTime](http://msdn.microsoft.com/library/windows/desktop/ms724397.aspx)."},{"content":"With this implementation, the clock function was sensitive to the system time, and was thus not necessarily monotonic.","pos":[24094,24212]},{"content":"The clock function has been reimplemented in terms of <bpt id=\"p1\">[</bpt>QueryPerformanceCounter<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/desktop/ms644904.aspx)</ept> and is now monotonic.","pos":[24213,24380],"source":" The clock function has been reimplemented in terms of [QueryPerformanceCounter](https://msdn.microsoft.com/library/windows/desktop/ms644904.aspx) and is now monotonic."},{"content":"<bpt id=\"p1\">**</bpt>fstat and _utime<ept id=\"p1\">**</ept> In previous versions, the <bpt id=\"p2\">[</bpt>_stat<ept id=\"p2\">](../c-runtime-library/reference/stat-functions.md)</ept>, <bpt id=\"p3\">[</bpt>fstat<ept id=\"p3\">](../c-runtime-library/reference/fstat-fstat32-fstat64-fstati64-fstat32i64-fstat64i32.md)</ept>, and <bpt id=\"p4\">[</bpt>_utime<ept id=\"p4\">](../c-runtime-library/reference/utime-utime32-utime64-wutime-wutime32-wutime64.md)</ept> functions handle daylight savings time incorrectly.","pos":[24390,24739],"source":"**fstat and _utime** In previous versions, the [_stat](../c-runtime-library/reference/stat-functions.md), [fstat](../c-runtime-library/reference/fstat-fstat32-fstat64-fstati64-fstat32i64-fstat64i32.md), and [_utime](../c-runtime-library/reference/utime-utime32-utime64-wutime-wutime32-wutime64.md) functions handle daylight savings time incorrectly."},{"content":"Prior to Visual Studio 2013, all of these functions incorrectly adjusted standard time times as if they were in daylight time.","pos":[24740,24866]},{"content":"In Visual Studio 2013, the problem was fixed in the _stat family of functions, but the similar problems in the fstat and _utime families of functions were not fixed.","pos":[24877,25042]},{"content":"This led to problems due to the inconsistency between the functions.","pos":[25043,25111]},{"content":"The fstat and _utime families of functions have now been fixed, so all of these functions now handle daylight savings time correctly and consistently.","pos":[25112,25262]},{"content":"<bpt id=\"p1\">**</bpt>asctime<ept id=\"p1\">**</ept> In previous versions, the <bpt id=\"p2\">[</bpt>asctime<ept id=\"p2\">](../c-runtime-library/reference/asctime-wasctime.md)</ept> function would pad single-digit days with a leading zero, for example: Fri Jun 06 08:00:00 2014.","pos":[25272,25468],"source":"**asctime** In previous versions, the [asctime](../c-runtime-library/reference/asctime-wasctime.md) function would pad single-digit days with a leading zero, for example: Fri Jun 06 08:00:00 2014."},{"content":"The specification requires that such days be padded with a leading space, e.g. Fri Jun  6 08:00:00 2014.","pos":[25469,25573]},{"content":"This has been fixed.","pos":[25574,25594]},{"content":"<bpt id=\"p1\">**</bpt>strftime and wcsftime<ept id=\"p1\">**</ept> The strftime and wcsftime functions now support the %C, %D, %e, %F, %g, %G, %h, %n, %r, %R, %t, %T, %u, and %V format specifiers.","pos":[25604,25759],"source":"**strftime and wcsftime** The strftime and wcsftime functions now support the %C, %D, %e, %F, %g, %G, %h, %n, %r, %R, %t, %T, %u, and %V format specifiers."},{"content":"Additionally, the E and O modifiers are parsed but ignored.","pos":[25760,25819]},{"content":"The %c format specifier is specified as producing an \"appropriate date and time representation\" for the current locale.","pos":[25830,25949]},{"content":"In the C locale, this representation is required to be the same as %a %b %e %T %Y.","pos":[25950,26032]},{"content":"This is the same form as is produced by asctime.","pos":[26033,26081]},{"content":"In previous versions, the %c format specifier incorrectly formatted times using a MM/DD/YY HH:MM:SS representation.","pos":[26082,26197]},{"content":"This has been fixed.","pos":[26198,26218]},{"content":"<bpt id=\"p1\">**</bpt>timespec and TIME_UTC<ept id=\"p1\">**</ept> The <ph id=\"ph1\">\\&lt;</ph>time.h&gt; header now defines the timespec type and the timespec_get function from the C11 Standard.","pos":[26228,26357],"source":"**timespec and TIME_UTC** The \\<time.h> header now defines the timespec type and the timespec_get function from the C11 Standard."},{"content":"In addition, the TIME_UTC macro, for use with the timespec_get function, is now defined.","pos":[26358,26446]},{"content":"This is a breaking change for code that has a conflicting definition for any of these.","pos":[26447,26533]},{"pos":[26543,26660],"content":"<bpt id=\"p1\">**</bpt>CLOCKS_PER_SEC<ept id=\"p1\">**</ept> The CLOCKS_PER_SEC macro now expands to an integer of type clock_t, as required by the C language.","source":"**CLOCKS_PER_SEC** The CLOCKS_PER_SEC macro now expands to an integer of type clock_t, as required by the C language."},{"pos":[26694,26719],"content":"Standard Template Library"},{"content":"To enable new optimizations and debugging checks, the Visual Studio implementation of the C++ Standard Library intentionally breaks binary compatibility from one version to the next.","pos":[26723,26905]},{"content":"Therefore, when the C++ Standard Library is used, object files and static libraries that are compiled by using different versions can't be mixed in one binary (EXE or DLL), and C++ Standard Library objects can't be passed between binaries that are compiled by using different versions.","pos":[26906,27191]},{"content":"Such mixing emits linker errors about _MSC_VER mismatches.","pos":[27192,27250]},{"content":"(_MSC_VER is the macro that contains the compiler's major version—for example, 1800 for Visual Studio 2013.) This check cannot detect DLL mixing, and cannot detect mixing that involves Visual C++ 2008 or earlier.","pos":[27251,27463]},{"content":"<bpt id=\"p1\">**</bpt>STL include files<ept id=\"p1\">**</ept> Some changes have been made to the include structure in the STL headers.","pos":[27473,27567],"source":"**STL include files** Some changes have been made to the include structure in the STL headers."},{"content":"STL headers are allowed to include each other in unspecified ways.","pos":[27568,27634]},{"content":"In general, you should write your code so that it carefully includes all of the headers that it needs according to the C++ standard and doesn't rely on which STL headers include which other STL headers.","pos":[27635,27837]},{"content":"This makes code portable across versions and platforms.","pos":[27838,27893]},{"content":"At least two header changes in <ph id=\"ph1\">[!INCLUDE[vs_dev14](../ide/includes/vs_dev14_md.md)]</ph> affect user code.","pos":[27894,27995],"source":" At least two header changes in [!INCLUDE[vs_dev14](../ide/includes/vs_dev14_md.md)] affect user code."},{"content":"First, <ph id=\"ph1\">\\&lt;</ph>string&gt; no longer includes <ph id=\"ph2\">\\&lt;</ph>iterator&gt;.","pos":[27996,28044],"source":" First, \\<string> no longer includes \\<iterator>."},{"content":"Second, <ph id=\"ph1\">\\&lt;</ph>tuple&gt; now declares std::array without including all of <ph id=\"ph2\">\\&lt;</ph>array&gt;, which can break code through the following combination of code constructs: your code has a variable named \"array\", and you have a using-directive \"using namespace std;\", and you include an STL header (such as <ph id=\"ph3\">\\&lt;</ph>functional&gt;) that includes <ph id=\"ph4\">\\&lt;</ph>tuple&gt;, which now declares std::array.","pos":[28045,28399],"source":" Second, \\<tuple> now declares std::array without including all of \\<array>, which can break code through the following combination of code constructs: your code has a variable named \"array\", and you have a using-directive \"using namespace std;\", and you include an STL header (such as \\<functional>) that includes \\<tuple>, which now declares std::array."},{"content":"<bpt id=\"p1\">**</bpt>steady_clock<ept id=\"p1\">**</ept> The <ph id=\"ph1\">\\&lt;</ph>chrono&gt; implementation of <bpt id=\"p2\">[</bpt>steady_clock<ept id=\"p2\">](../standard-library/steady-clock-struct.md)</ept> has changed to meet the C++ Standard requirements for steadiness and monotonicity.","pos":[28409,28599],"source":"**steady_clock** The \\<chrono> implementation of [steady_clock](../standard-library/steady-clock-struct.md) has changed to meet the C++ Standard requirements for steadiness and monotonicity."},{"content":"steady_clock is now based on <bpt id=\"p1\">[</bpt>QueryPerformanceCounter<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/desktop/ms644904.aspx)</ept> and high_resolution_clock is now a typedef for steady_clock.","pos":[28600,28781],"source":" steady_clock is now based on [QueryPerformanceCounter](https://msdn.microsoft.com/library/windows/desktop/ms644904.aspx) and high_resolution_clock is now a typedef for steady_clock."},{"content":"As a result, in Visual C++ steady_clock::time_point is now a typedef for chrono::time_point&lt;steady_clock&gt;; however, this is not necessarily the case for other implementations.","pos":[28782,28957],"source":" As a result, in Visual C++ steady_clock::time_point is now a typedef for chrono::time_point<steady_clock>; however, this is not necessarily the case for other implementations."},{"content":"<bpt id=\"p1\">**</bpt>allocators and const<ept id=\"p1\">**</ept> We now require allocator equality/inequality comparisons to accept const arguments on both sides.","pos":[28967,29089],"source":"**allocators and const** We now require allocator equality/inequality comparisons to accept const arguments on both sides."},{"content":"If your allocators define these operators as follows:","pos":[29091,29144]},{"content":"You should update these to declare them as const members.","pos":[29225,29282]},{"content":"<bpt id=\"p1\">**</bpt>const elements<ept id=\"p1\">**</ept> The C++ standard has always forbidden containers of const elements (such as vector<ph id=\"ph1\">\\&lt;</ph>const T&gt; or set<ph id=\"ph2\">\\&lt;</ph>const T&gt;).","pos":[29368,29498],"source":"**const elements** The C++ standard has always forbidden containers of const elements (such as vector\\<const T> or set\\<const T>)."},{"content":"Visual C++ 2013 and earlier accepted such containers.","pos":[29499,29552]},{"content":"In the current version, such containers fail to compile.","pos":[29553,29609]},{"content":"<bpt id=\"p1\">**</bpt>std::allocator::deallocate<ept id=\"p1\">**</ept> In Visual C++ 2013 and earlier, std::allocator::deallocate(p, n) ignored the argument passed in for n.","pos":[29619,29752],"source":"**std::allocator::deallocate** In Visual C++ 2013 and earlier, std::allocator::deallocate(p, n) ignored the argument passed in for n."},{"content":"The C++ standard has always required that n be equal to the value passed as the first argument to the invocation of allocate which returned p.","pos":[29754,29896]},{"content":"However, in the current version, the value of n is inspected.","pos":[29897,29958]},{"content":"Code that passes arguments for n that differ from what the standard requires might crash at runtime.","pos":[29959,30059]},{"content":"<bpt id=\"p1\">**</bpt>hash_map and hash_set<ept id=\"p1\">**</ept> The non-standard header files hash_map and hash_set are deprecated in <ph id=\"ph1\">[!INCLUDE[vs_dev14](../ide/includes/vs_dev14_md.md)]</ph> and will be removed in a future release.","pos":[30069,30258],"source":"**hash_map and hash_set** The non-standard header files hash_map and hash_set are deprecated in [!INCLUDE[vs_dev14](../ide/includes/vs_dev14_md.md)] and will be removed in a future release."},{"content":"Use unordered_map and unordered_set instead.","pos":[30259,30303]},{"content":"<bpt id=\"p1\">**</bpt>comparators and operator()<ept id=\"p1\">**</ept> Associative containers (the <ph id=\"ph1\">\\&lt;</ph>map&gt; family) now require their comparators to have const-callable function call operators.","pos":[30313,30464],"source":"**comparators and operator()** Associative containers (the \\<map> family) now require their comparators to have const-callable function call operators."},{"content":"The following code in a comparator class declaration now fails to compile:","pos":[30465,30539]},{"content":"To resolve this error, change the function declaration to:","pos":[30622,30680]},{"content":"<bpt id=\"p1\">**</bpt>type traits<ept id=\"p1\">**</ept> The old names for type traits from an earlier version of the C++ draft standard have been removed.","pos":[30768,30882],"source":"**type traits** The old names for type traits from an earlier version of the C++ draft standard have been removed."},{"content":"These were changed in C++11 and have been updated to the C++11 values in <ph id=\"ph1\">[!INCLUDE[vs_dev14](../ide/includes/vs_dev14_md.md)]</ph>.","pos":[30883,31009],"source":" These were changed in C++11 and have been updated to the C++11 values in [!INCLUDE[vs_dev14](../ide/includes/vs_dev14_md.md)]."},{"content":"The following table shows the old and new names.","pos":[31010,31058]},{"content":"Old name","pos":[31069,31077]},{"content":"New name","pos":[31078,31086]},{"content":"add_reference","pos":[31133,31146]},{"content":"add_lvalue_reference","pos":[31147,31167]},{"content":"has_default_constructor","pos":[31176,31199]},{"content":"is_default_constructible","pos":[31200,31224]},{"content":"has_copy_constructor","pos":[31233,31253]},{"content":"is_copy_constructible","pos":[31254,31275]},{"content":"has_move_constructor","pos":[31284,31304]},{"content":"is_move_constructible","pos":[31305,31326]},{"content":"has_nothrow_constructor","pos":[31335,31358]},{"content":"is_nothrow_default_constructible","pos":[31359,31391]},{"content":"has_nothrow_default_constructor","pos":[31400,31431]},{"content":"is_nothrow_default_constructible","pos":[31432,31464]},{"content":"has_nothrow_copy","pos":[31473,31489]},{"content":"is_nothrow_copy_constructible","pos":[31490,31519]},{"content":"has_nothrow_copy_constructor","pos":[31528,31556]},{"content":"is_nothrow_copy_constructible","pos":[31557,31586]},{"content":"has_nothrow_move_constructor","pos":[31595,31623]},{"content":"is_nothrow_move_constructible","pos":[31624,31653]},{"content":"has_nothrow_assign","pos":[31662,31680]},{"content":"is_nothrow_copy_assignable","pos":[31681,31707]},{"content":"has_nothrow_copy_assign","pos":[31716,31739]},{"content":"is_nothrow_copy_assignable","pos":[31740,31766]},{"content":"has_nothrow_move_assign","pos":[31775,31798]},{"content":"is_nothrow_move_assignable","pos":[31799,31825]},{"content":"has_trivial_constructor","pos":[31834,31857]},{"content":"is_trivially_default_constructible","pos":[31858,31892]},{"content":"has_trivial_default_constructor","pos":[31901,31932]},{"content":"is_trivially_default_constructible","pos":[31933,31967]},{"content":"has_trivial_copy","pos":[31976,31992]},{"content":"is_trivially_copy_constructible","pos":[31993,32024]},{"content":"has_trivial_move_constructor","pos":[32033,32061]},{"content":"is_trivially_move_constructible","pos":[32062,32093]},{"content":"has_trivial_assign","pos":[32102,32120]},{"content":"is_trivially_copy_assignable","pos":[32121,32149]},{"content":"has_trivial_move_assign","pos":[32158,32181]},{"content":"is_trivially_move_assignable","pos":[32182,32210]},{"content":"has_trivial_destructor","pos":[32219,32241]},{"content":"is_trivially_destructible","pos":[32242,32267]},{"content":"<bpt id=\"p1\">**</bpt>launch::any and launch::sync policies<ept id=\"p1\">**</ept> The nonstandard launch::any and launch::sync policies were removed.","pos":[32278,32387],"source":"**launch::any and launch::sync policies** The nonstandard launch::any and launch::sync policies were removed."},{"content":"Instead, for launch::any, use launch:async &amp;#124; launch:deferred.","pos":[32388,32454],"source":" Instead, for launch::any, use launch:async &#124; launch:deferred."},{"content":"For launch::sync, use launch::deferred.","pos":[32455,32494]},{"content":"See <bpt id=\"p1\">[</bpt>launch Enumeration<ept id=\"p1\">](../standard-library/future-enums.md#launch_enumeration)</ept>.","pos":[32495,32576],"source":" See [launch Enumeration](../standard-library/future-enums.md#launch_enumeration)."},{"pos":[32610,32621],"content":"MFC and ATL"},{"content":"<bpt id=\"p1\">**</bpt>Microsoft Foundation Classes (MFC)<ept id=\"p1\">**</ept> is no longer included in a \"Typical\" install of Visual Studio because of its large size.","pos":[32631,32758],"source":"**Microsoft Foundation Classes (MFC)** is no longer included in a \"Typical\" install of Visual Studio because of its large size."},{"content":"To install MFC, choose the Custom install option in Visual Studio 2015 setup.","pos":[32759,32836]},{"content":"If you already have Visual Studio 2015 installed, you can install MFC by re-running Visual Studio setup, choosing the Custom install option, and choosing Microsoft Foundation Classes.","pos":[32837,33020]},{"content":"You can re-run Visual Studio setup from the Control Panel, Programs and Features, or from the installation media.","pos":[33021,33134]},{"content":"The Visual C++ Redistributable Package still includes this library.","pos":[33145,33212]},{"pos":[33249,33268],"content":"Concurrency Runtime"},{"content":"<bpt id=\"p1\">**</bpt>Yield macro from Windows.h conflicting with concurrency::Context::Yield<ept id=\"p1\">**</ept> The Concurrency Runtime previously used #undef to undefine the Yield macro to avoid conflicts between the Yield macro defined in Windows.h h and the concurrency::Context::Yield function.","pos":[33278,33540],"source":"**Yield macro from Windows.h conflicting with concurrency::Context::Yield** The Concurrency Runtime previously used #undef to undefine the Yield macro to avoid conflicts between the Yield macro defined in Windows.h h and the concurrency::Context::Yield function."},{"content":"This #undef has been removed and a new non-conflicting equivalent API call <bpt id=\"p1\">[</bpt>concurrency::Context::YieldExecution<ept id=\"p1\">](../parallel/concrt/reference/context-class.md#context__yieldexecution_method)</ept> has been added.","pos":[33541,33748],"source":" This #undef has been removed and a new non-conflicting equivalent API call [concurrency::Context::YieldExecution](../parallel/concrt/reference/context-class.md#context__yieldexecution_method) has been added."},{"content":"To work around conflicts with Yield, you can either update your code to call the YieldExecution function instead, or surround the Yield function name with parentheses at call sites, as in the following example:","pos":[33749,33959]},{"content":"Compiler Conformance Improvements in Visual C++ 2015","pos":[34033,34085]},{"content":"When upgrading code from previous versions, you might also encounter compiler errors that are due to conformance improvements made in Visual C++ 2015.","pos":[34089,34239]},{"content":"These improvements do not break binary compatibility from earlier versions of Visual C++, but they can produce compiler errors where none were emitted before.","pos":[34240,34398]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Visual C++ What's New 2003 through 2015<ept id=\"p1\">](../porting/visual-cpp-what-s-new-2003-through-2015.md)</ept>.","pos":[34399,34522],"source":" For more information, see [Visual C++ What's New 2003 through 2015](../porting/visual-cpp-what-s-new-2003-through-2015.md)."},{"content":"In Visual C++ 2015, ongoing improvements to compiler conformance can sometimes change how the compiler understands your existing source code.","pos":[34529,34670]},{"content":"When this happens, you might encounter new or different errors during your build, or even behavioral differences in code that previously built and seemed to run correctly.","pos":[34671,34842]},{"content":"Fortunately, these differences  have little or no impact on most of your source code and when source code or other changes are needed to address these differences,  fixes are usually small and straight-forward.","pos":[34849,35059]},{"content":"We've included many examples of previously-acceptable source code that might need to be changed <bpt id=\"p1\">*</bpt>(before)<ept id=\"p1\">*</ept> and the fixes to correct them <bpt id=\"p2\">*</bpt>(after)<ept id=\"p2\">*</ept>.","pos":[35060,35207],"source":" We've included many examples of previously-acceptable source code that might need to be changed *(before)* and the fixes to correct them *(after)*."},{"content":"Although these differences can affect your source code or other build artifacts, they don't affect binary compatibility between updates to Visual C++ versions.","pos":[35214,35373]},{"content":"A more-severe kind of change, the  <bpt id=\"p1\">*</bpt>breaking change<ept id=\"p1\">*</ept> can affect binary compatibility, but these kinds of binary compatibility breaks only occur between major versions of Visual C++.","pos":[35374,35555],"source":" A more-severe kind of change, the  *breaking change* can affect binary compatibility, but these kinds of binary compatibility breaks only occur between major versions of Visual C++."},{"content":"For example, between Visual C++ 2013 and Visual C++ 2015.","pos":[35556,35613]},{"content":"For information on the breaking changes that occurred between Visual C++ 2013 and Visual C++ 2015, see <bpt id=\"p1\">[</bpt>Visual C++ 2015 Conformance Changes<ept id=\"p1\">](#VC_2015)</ept>.","pos":[35614,35765],"source":" For information on the breaking changes that occurred between Visual C++ 2013 and Visual C++ 2015, see [Visual C++ 2015 Conformance Changes](#VC_2015)."},{"content":"Conformance Improvements in Visual C++ 2015","pos":[35776,35819]},{"content":"Conformance Improvements in Update 1","pos":[35840,35876]},{"content":"Conformance Improvements in Update 2","pos":[35901,35937]},{"content":"Conformance Improvements in Update 3","pos":[35962,35998]},{"pos":[36045,36088],"content":"Conformance Improvements in Visual C++ 2015"},{"content":"/Zc:forScope- option","pos":[36098,36118]},{"pos":[36129,36221],"content":"The compiler option <bpt id=\"p1\">**</bpt>/Zc:forScope-<ept id=\"p1\">**</ept> is deprecated and will be removed in a future release.","source":"The compiler option **/Zc:forScope-** is deprecated and will be removed in a future release."},{"content":"The option was usually used in order to allow nonstandard code that uses loop variables after the point where, according to the standard, they should have gone out of scope.","pos":[36375,36548]},{"content":"It was only necessary when you are compiling with the /Za option, since without /Za, using a for loop variable after the end of the loop is always allowed.","pos":[36549,36704]},{"content":"If you don't care about standards conformance (for example, if your code isn't meant to portable to other compilers), you could turn off the /Za option (or set the Disable Language Extensions property to No).","pos":[36705,36913]},{"content":"If you do care about writing portable, standards-compliant code, you should rewrite your code so that it conforms to the standard by moving the declaration of such variables to a point outside the loop.","pos":[36914,37116]},{"content":"/Zg compiler option","pos":[37386,37405]},{"content":"The /Zg compiler option (Generate Function Prototypes) is no longer available.","pos":[37418,37496]},{"content":"This compiler option was previously deprecated.","pos":[37497,37544]},{"content":"You can no longer run unit tests with C++/CLI from the command-line with mstest.exe.","pos":[37554,37638]},{"content":"Instead, use vstest.console.exe.","pos":[37639,37671]},{"content":"See <bpt id=\"p1\">[</bpt>VSTest.Console.exe command-line options<ept id=\"p1\">](/devops-test-docs/test/vstest-console-exe-command-line-options)</ept>.","pos":[37672,37782],"source":" See [VSTest.Console.exe command-line options](/devops-test-docs/test/vstest-console-exe-command-line-options)."},{"content":"mutable keyword","pos":[37794,37809]},{"content":"The <ph id=\"ph1\">`mutable`</ph> storage class specifier is no longer allowed in places where previously it compiled without error.","pos":[37822,37934],"source":"The `mutable` storage class specifier is no longer allowed in places where previously it compiled without error."},{"content":"Now, the compiler gives error C2071 (illegal storage class).","pos":[37935,37995]},{"content":"According to the standard, the mutable specifier can be applied only to names of class data members, and cannot be applied to names declared const or static, and cannot be applied to reference members.","pos":[37996,38197]},{"content":"For example, consider the following code:","pos":[38208,38249]},{"content":"Previous versions of the Visual C++ compiler accepted this, but now the compiler gives the following error:","pos":[38351,38458]},{"content":"To fix the error, simply remove the redundant mutable keyword.","pos":[38547,38609]},{"content":"char_16_t and char32_t","pos":[38621,38643]},{"content":"You can no longer use <ph id=\"ph1\">`char16_t`</ph> or <ph id=\"ph2\">`char32_t`</ph> as aliases in a typedef, because these types are now treated as built-in.","pos":[38656,38776],"source":"You can no longer use `char16_t` or `char32_t` as aliases in a typedef, because these types are now treated as built-in."},{"content":"It was common for users and library authors to define char16_t and char32_t as aliases of uint16_t and uint32_t, respectively.","pos":[38777,38903]},{"content":"To update your code, remove the typedef declarations and rename any other identifiers that collide with these names.","pos":[39228,39344]},{"content":"Non-type template parameters","pos":[39356,39384]},{"content":"Certain code that involves non-type template parameters is now correctly checked for type compatibility when you provide explicit template arguments.","pos":[39397,39546]},{"content":"For example, the following code compiled without error in previous versions of Visual C++.","pos":[39547,39637]},{"content":"The current compiler correctly gives an error, because the template parameter type doesn't match the template argument (the parameter is a pointer to a const member, but the function f is non-const):","pos":[39954,40153]},{"content":"To address this error in your code, make sure that the type of the template argument you use matches the declared type of the template parameter.","pos":[40348,40493]},{"content":"__declspec(align)","pos":[40505,40522]},{"content":"The compiler no longer accepts <ph id=\"ph1\">`__declspec(align)`</ph> on functions.","pos":[40535,40599],"source":"The compiler no longer accepts `__declspec(align)` on functions."},{"content":"This was always ignored, but now it produces a compiler error.","pos":[40600,40662]},{"content":"To fix this problem, remove <ph id=\"ph1\">`__declspec(align)`</ph> from the function declaration.","pos":[40793,40871],"source":"To fix this problem, remove `__declspec(align)` from the function declaration."},{"content":"Since it had no effect, removing it does not change anything.","pos":[40872,40933]},{"content":"Exception handling","pos":[40945,40963]},{"content":"There are a couple of changes to exception handling.","pos":[40976,41028]},{"content":"First, exception objects have to be either copyable or movable.","pos":[41029,41092]},{"content":"The following code compiled in <ph id=\"ph1\">[!INCLUDE[cpp_dev12_long](../build/reference/includes/cpp_dev12_long_md.md)]</ph>, but does not compile in <ph id=\"ph2\">[!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)]</ph>:","pos":[41093,41295],"source":" The following code compiled in [!INCLUDE[cpp_dev12_long](../build/reference/includes/cpp_dev12_long_md.md)], but does not compile in [!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)]:"},{"content":"The problem is that the copy constructor is private, so the object cannot be copied as happens in the normal course of handling an exception.","pos":[41504,41645]},{"content":"The same applies when the copy constructor is declared <ph id=\"ph1\">`explicit`</ph>.","pos":[41646,41712],"source":" The same applies when the copy constructor is declared `explicit`."},{"pos":[41901,42020],"content":"To update your code, make sure that the copy constructor for your exception object is public and not marked <ph id=\"ph1\">`explicit`</ph>.","source":"To update your code, make sure that the copy constructor for your exception object is public and not marked `explicit`."},{"content":"Catching an exception by value also requires the exception object to be copyable.","pos":[42031,42112]},{"content":"The following code compiled in <ph id=\"ph1\">[!INCLUDE[cpp_dev12_long](../build/reference/includes/cpp_dev12_long_md.md)]</ph>, but does not compile in <ph id=\"ph2\">[!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)]</ph>:","pos":[42113,42315],"source":" The following code compiled in [!INCLUDE[cpp_dev12_long](../build/reference/includes/cpp_dev12_long_md.md)], but does not compile in [!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)]:"},{"pos":[42620,42705],"content":"You can fix this issue by changing the parameter type for the <ph id=\"ph1\">`catch`</ph> to a reference.","source":"You can fix this issue by changing the parameter type for the `catch` to a reference."},{"content":"String literals followed by macros","pos":[42784,42818]},{"content":"The compiler now supports user defined literals.","pos":[42831,42879]},{"content":"As a consequence, string literals followed by macros without any intervening whitespace are interpreted as user-defined literals, which might produce errors or unexpected results.","pos":[42880,43059]},{"content":"For example, in previous compilers the following code compiled successfully:","pos":[43060,43136]},{"content":"The compiler interpreted this as a string literal \"hello\" followed by a macro, which is expanded \"there\", and then the two string literals were concatenated into one.","pos":[43343,43509]},{"content":"In <ph id=\"ph1\">[!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)]</ph>, the compiler interprets this as a user-defined literal, but since there is no matching user-defined literal _x defined, it gives an error.","pos":[43510,43721],"source":" In [!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)], the compiler interprets this as a user-defined literal, but since there is no matching user-defined literal _x defined, it gives an error."},{"content":"To fix this problem, add a space between the string literal and the macro.","pos":[43994,44068]},{"content":"Adjacent string literals","pos":[44080,44104]},{"content":"Similarly to the previous, due to related changes in string parsing, adjacent string literals (either wide or narrow character string literals) without any whitespace were interpreted as a single concatenated string in previous releases of Visaul C++.","pos":[44117,44368]},{"content":"In <ph id=\"ph1\">[!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)]</ph>, you must now add whitespace between the two strings.","pos":[44369,44494],"source":" In [!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)], you must now add whitespace between the two strings."},{"content":"For example, the following code must be changed:","pos":[44495,44543]},{"content":"Simply add a space in between the two strings.","pos":[44611,44657]},{"content":"Placement new and delete","pos":[44727,44751]},{"content":"A change has been made to the delete operator in order to bring it into conformance with C++14 standard.","pos":[44764,44868]},{"content":"Details of the standards change can be found at <bpt id=\"p1\">[</bpt>C++ Sized Deallocation<ept id=\"p1\">](http://isocpp.org/files/papers/n3778.html)</ept>.","pos":[44869,44985],"source":" Details of the standards change can be found at [C++ Sized Deallocation](http://isocpp.org/files/papers/n3778.html)."},{"content":"The changes add a form of the global delete operator that takes a size parameter.","pos":[44986,45067]},{"content":"The breaking change is that if you were previously using an operator delete with the same signature (to correspond with a placement new operator), you will receive a compiler error (C2956, which occurs at the point where the placement new is used, since that's the position in code where the compiler tries to identify an appropriate matching delete operator).","pos":[45068,45428]},{"content":"The function <ph id=\"ph1\">`void operator delete(void *, size_t)`</ph> was a placement delete operator corresponding to the placement new function \"void <ph id=\"ph2\">\\*</ph> operator new(size_t, size_t)\" in C++11.","pos":[45439,45615],"source":"The function `void operator delete(void *, size_t)` was a placement delete operator corresponding to the placement new function \"void \\* operator new(size_t, size_t)\" in C++11."},{"content":"With C++14 sized deallocation, this delete function is now a <bpt id=\"p1\">*</bpt>usual deallocation function<ept id=\"p1\">*</ept> (global delete operator).","pos":[45616,45732],"source":" With C++14 sized deallocation, this delete function is now a *usual deallocation function* (global delete operator)."},{"content":"The standard requires that if the use of a placement new looks up a corresponding delete function and finds a usual deallocation function, the program is ill-formed.","pos":[45733,45898]},{"content":"For example, suppose your code defines both a placement new and a placement delete:","pos":[45909,45992]},{"content":"The problem occurs because of the match in function signatures between a placement delete operator you've defined, and the new global sized delete operator.","pos":[46145,46301]},{"content":"Consider whether you can use a different type other than size_t for any placement new and delete operators.","pos":[46302,46409]},{"content":"Note that the type of the size_t typedef is compiler-dependent; it is a typedef for unsigned int in Visual C++.","pos":[46411,46522]},{"content":"A good solution is to use an enumerated type such as this:","pos":[46523,46581]},{"content":"Then, change your definition of placement new and delete to use this type as the second argument instead of size_t.","pos":[46662,46777]},{"content":"You’ll also need to update the calls to placement new to pass the new type (for example, by using <ph id=\"ph1\">`static_cast&lt;my_type&gt;`</ph> to convert from the integer value) and update the definition of new and delete to cast back to the integer type.","pos":[46778,47011],"source":" You’ll also need to update the calls to placement new to pass the new type (for example, by using `static_cast<my_type>` to convert from the integer value) and update the definition of new and delete to cast back to the integer type."},{"content":"You don’t need to use an enum for this; a class type with a size_t member would also work.","pos":[47012,47102]},{"content":"An alternative solution is that you might be able to eliminate the placement new altogether.","pos":[47113,47205]},{"content":"If your code uses placement new to implement a memory pool where the placement argument is the size of the object being allocated or deleted, then sized deallocation feature might be suitable to replace your own custom memory pool code, and you can get rid of the placement functions and just use your own two-argument delete operator instead of the placement functions.","pos":[47206,47576]},{"content":"If you don't want to update your code immediately, you can revert to the old behavior by using the compiler option /Zc:sizedDealloc-.","pos":[47587,47720]},{"content":"If you use this option, the two-argument delete functions don’t exist and won't cause a conflict with your placement delete operator.","pos":[47721,47854]},{"content":"Union data members","pos":[47866,47884]},{"content":"Data members of unions can no longer have reference types.","pos":[47897,47955]},{"content":"The following code compiled successfully in <ph id=\"ph1\">[!INCLUDE[cpp_dev12_long](../build/reference/includes/cpp_dev12_long_md.md)]</ph>, but produces an error in <ph id=\"ph2\">[!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)]</ph>.","pos":[47956,48172],"source":" The following code compiled successfully in [!INCLUDE[cpp_dev12_long](../build/reference/includes/cpp_dev12_long_md.md)], but produces an error in [!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)]."},{"content":"The preceding code produces the following errors:","pos":[48385,48434]},{"content":"To address this issue, change reference types either to a pointer or a value.","pos":[48670,48747]},{"content":"Changing the type to a pointer requires changes in the code that uses the union field.","pos":[48748,48834]},{"content":"Changing the code to a value would change the data stored in the union, which affects other fields since fields in union types share the same memory.","pos":[48835,48984]},{"content":"Depending on the size of the value, it might also change the size of the union.","pos":[48985,49064]},{"content":"Anonymous unions are now more conformant to the standard.","pos":[49074,49131]},{"content":"Previous versions of the compiler generated an explicit constructor and destructor for anonymous unions.","pos":[49132,49236]},{"content":"These are deleted in <ph id=\"ph1\">[!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)]</ph>.","pos":[49237,49327],"source":" These are deleted in [!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)]."},{"pos":[49524,49645],"content":"The preceding code generates the following error in <ph id=\"ph1\">[!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)]</ph>:","source":"The preceding code generates the following error in [!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)]:"},{"content":"To resolve this issue, provide your own definitions of the constructor and/or destructor.","pos":[49871,49960]},{"content":"Unions with anonymous structs","pos":[50228,50257]},{"content":"In order to conform with the standard, the runtime behavior has changed for members of anonymous structures in unions.","pos":[50270,50388]},{"content":"The constructor for anonymous structure members in a union is no longer implicitly called when such a union is created.","pos":[50389,50508]},{"content":"Also, the destructor for anonymous structure members in a union is no longer implicitly called when the union goes out of scope.","pos":[50509,50637]},{"content":"Consider the following code, in which a union U contains an anonymous structure that contains a member which is a named structure S that has a destructor.","pos":[50638,50792]},{"content":"In <ph id=\"ph1\">[!INCLUDE[cpp_dev12_long](../build/reference/includes/cpp_dev12_long_md.md)]</ph>, the constructor for S is called when the union is created, and the destructor for S is called when the stack for function f is cleaned up.","pos":[51352,51571],"source":"In [!INCLUDE[cpp_dev12_long](../build/reference/includes/cpp_dev12_long_md.md)], the constructor for S is called when the union is created, and the destructor for S is called when the stack for function f is cleaned up."},{"content":"But in <ph id=\"ph1\">[!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)]</ph>, the constructor and destructor are not called.","pos":[51572,51695],"source":" But in [!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)], the constructor and destructor are not called."},{"content":"The compiler gives a warning about this behavior change.","pos":[51696,51752]},{"content":"To restore the original behavior, give the anonymous structure a name.","pos":[51962,52032]},{"content":"The runtime behavior of non-anonymous structures is the same, regardless of the compiler version.","pos":[52033,52130]},{"content":"Alternatively, try moving the constructor and destructor code into new functions, and add calls to these functions from the constructor and destructor for the union.","pos":[52669,52834]},{"content":"Template resolution","pos":[53409,53428]},{"content":"Changes have been made to name resolution for templates.","pos":[53441,53497]},{"content":"In C++, when considering candidates for the resolution of a name, it can be the case that one or more names under consideration as potential matches produces an invalid template instantiation.","pos":[53498,53690]},{"content":"These invalid instantiations do not normally cause compiler errors, a principle which is known as SFINAE (Substitution Failure Is Not An Error).","pos":[53691,53835]},{"content":"Now, if SFINAE requires the compiler to instantiate the specialization of a class template, then any errors that occur during this process are compiler errors.","pos":[53846,54005]},{"content":"In previous versions, the compiler would ignore such errors.","pos":[54006,54066]},{"content":"For example, consider the following code:","pos":[54067,54108]},{"content":"If you compile with the current compiler, you get the following error:","pos":[54703,54773]},{"content":"This is because at the point of the first invocation of the is_base_of the class 'D' has not yet been defined.","pos":[55180,55290]},{"content":"In this case, the fix is not to use such type traits until the class has been defined.","pos":[55301,55387]},{"content":"If you move the definitions of B and D to the beginning of the code file, the error is resolved.","pos":[55388,55484]},{"content":"If the definitions are in header files, check the order of the include statements for the header files to make sure that any class definitions are compiled before the problematic templates are used.","pos":[55485,55683]},{"content":"Copy constructors","pos":[55695,55712]},{"content":"In both <ph id=\"ph1\">[!INCLUDE[vs_dev12](../atl-mfc-shared/includes/vs_dev12_md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[vs_dev14](../ide/includes/vs_dev14_md.md)]</ph>, the compiler generates a copy constructor for a class if that class has a user-defined move constructor but no user-defined copy constructor.","pos":[55725,55996],"source":"In both [!INCLUDE[vs_dev12](../atl-mfc-shared/includes/vs_dev12_md.md)] and [!INCLUDE[vs_dev14](../ide/includes/vs_dev14_md.md)], the compiler generates a copy constructor for a class if that class has a user-defined move constructor but no user-defined copy constructor."},{"content":"In Dev14, this implicitly generated copy constructor is also marked \"= delete\".","pos":[55997,56076]},{"pos":[56113,56149],"content":"Conformance Improvements in Update 1"},{"content":"Private virtual base classes and indirect inheritance","pos":[56161,56214]},{"content":"Previous versions of the compiler allowed a derived class to call member functions of its <bpt id=\"p1\">*</bpt>indirectly-derived<ept id=\"p1\">*</ept><ph id=\"ph1\">`private virtual`</ph> base classes.","pos":[56227,56368],"source":"Previous versions of the compiler allowed a derived class to call member functions of its *indirectly-derived*`private virtual` base classes."},{"content":"This old behavior was incorrect and does not conform to the C++ standard.","pos":[56369,56442]},{"content":"The compiler no longer accepts code written in this way and issues compiler error C2280 as a result.","pos":[56443,56543]},{"content":"Example (before)","pos":[56688,56704]},{"content":"Example (after)","pos":[56993,57008]},{"content":"-or -","pos":[57243,57248]},{"content":"Overloaded operator new and operator delete","pos":[57506,57549]},{"content":"Previous versions of the compiler allowed non-member <ph id=\"ph1\">`operator new`</ph> and non-member <ph id=\"ph2\">`operator delete`</ph> to be declared static, and to be declared in namespaces other than the global namespace.","pos":[57562,57751],"source":"Previous versions of the compiler allowed non-member `operator new` and non-member `operator delete` to be declared static, and to be declared in namespaces other than the global namespace."},{"content":"This old behavior created a risk that the program would not call the <ph id=\"ph1\">`new`</ph> or <ph id=\"ph2\">`delete`</ph> operator implementation that the programmer intended, resulting in silent bad runtime behavior.","pos":[57753,57935],"source":"  This old behavior created a risk that the program would not call the `new` or `delete` operator implementation that the programmer intended, resulting in silent bad runtime behavior."},{"content":"The compiler no longer accepts code written in this way and issues compiler error C2323 instead.","pos":[57936,58032]},{"content":"Example (before)","pos":[58235,58251]},{"content":"Example (after)","pos":[58392,58407]},{"content":"Additionally, although the compiler doesn't give a specific diagnostic, inline operator new is considered ill-formed.","pos":[58546,58663]},{"pos":[58673,58749],"content":"<bpt id=\"p1\">*</bpt><bpt id=\"p2\">*</bpt>Calling 'operator <ept id=\"p2\">*</ept>type<ept id=\"p1\">*</ept>()' (user-defined conversion) on non-class types**","source":"**Calling 'operator *type*()' (user-defined conversion) on non-class types**"},{"content":"Previous versions of the compiler allowed 'operator <bpt id=\"p1\">*</bpt>type<ept id=\"p1\">*</ept>()' to be called on non-class types while silently ignoring it.","pos":[58760,58881],"source":"Previous versions of the compiler allowed 'operator *type*()' to be called on non-class types while silently ignoring it."},{"content":"This old behavior created a risk of silent bad code generation, resulting in unpredictable runtime behavior.","pos":[58882,58990]},{"content":"The compiler no longer accepts code written in this way and issues compiler error C2228 instead.","pos":[58991,59087]},{"content":"Example (before)","pos":[59206,59222]},{"content":"Example (after)","pos":[59444,59459]},{"content":"Redundant typename in elaborated type specifiers","pos":[59709,59757]},{"content":"Previous versions of the compiler allowed <ph id=\"ph1\">`typename`</ph> in an elaborated type specifiers; code written in this way is semantically incorrect.","pos":[59770,59908],"source":"Previous versions of the compiler allowed `typename` in an elaborated type specifiers; code written in this way is semantically incorrect."},{"content":"The compiler no longer accepts code written in this way and issues compiler error C3406 instead.","pos":[59909,60005]},{"content":"Example (before)","pos":[60122,60138]},{"content":"Example (after)","pos":[60238,60253]},{"content":"Type deduction of arrays from an initializer list","pos":[60458,60507]},{"content":"Previous versions of the compiler did not support type deduction of arrays from an initializer list.","pos":[60520,60620]},{"content":"The compiler now supports this form of type deduction and, as a result, calls to function templates using initializer lists might now be ambiguous or a different overload might be chosen than in previous versions of the compiler.","pos":[60621,60850]},{"content":"To resolve these issues, the program must now explicitly specify the overload that the programmer intended.","pos":[60851,60958]},{"content":"When this new behavior causes overload resolution to consider an additional candidate that is equally as good as the historic candidate, the call becomes ambiguous and the compiler issues compiler error C2668 as a result.","pos":[60969,61190]},{"content":"Example 1: Ambiguous call to overloaded function (before)","pos":[61307,61364]},{"content":"Example 1: ambiguous call to overloaded function (after)","pos":[61876,61932]},{"content":"When this new behavior causes overload resolution to consider an additional candidate that is a better match than the historic candidate, the call resolves unambiguously to the new candidate, causing a change in program behavior that is probably different than the programmer intended.","pos":[62303,62588]},{"content":"Example 2: change in overload resolution (before)","pos":[62599,62648]},{"content":"Example 2: change in overload resolution (after)","pos":[63168,63216]},{"content":"Restoration of switch statement warnings","pos":[63592,63632]},{"content":"A Previous version of the compiler removed previously-existing warnings related to <ph id=\"ph1\">`switch`</ph> statements; these warnings have now been restored.","pos":[63645,63787],"source":"A Previous version of the compiler removed previously-existing warnings related to `switch` statements; these warnings have now been restored."},{"content":"The compiler now issues the restored warnings, and warnings related to specific cases (including the default case) are now issued on the line containing the offending case, rather than on the last line of the switch statement.","pos":[63788,64014]},{"content":"As a result of now issuing those warnings on different lines than in the past, warnings previously suppressed by using <ph id=\"ph1\">`#pragma warning(disable:####)`</ph> may no longer be suppressed as intended.","pos":[64015,64206],"source":" As a result of now issuing those warnings on different lines than in the past, warnings previously suppressed by using `#pragma warning(disable:####)` may no longer be suppressed as intended."},{"content":"To suppress these warnings as intended, it might be necessary to move the <ph id=\"ph1\">`#pragma warning(disable:####)`</ph> directive to a line above the first potentially-offending case.","pos":[64207,64376],"source":" To suppress these warnings as intended, it might be necessary to move the `#pragma warning(disable:####)` directive to a line above the first potentially-offending case."},{"content":"The following are the restored warnings.","pos":[64377,64417]},{"content":"Example of C4063 (before)","pos":[65366,65391]},{"content":"Example of C4063 (after)","pos":[65946,65970]},{"content":"Examples of the other restored warnings are provided in their documentation.","pos":[66563,66639]},{"pos":[66649,66738],"content":"<bpt id=\"p1\">**</bpt>#include: use of parent-directory specifier '..' in pathname<ept id=\"p1\">**</ept> (only affects /Wall /WX)","source":"**#include: use of parent-directory specifier '..' in pathname** (only affects /Wall /WX)"},{"content":"Previous versions of the compiler did not detect the use of the parent-directory specifier '..'","pos":[66749,66844]},{"content":"in the pathname of  <ph id=\"ph1\">`#include`</ph> directives.","pos":[66845,66887],"source":" in the pathname of  `#include` directives."},{"content":"Code written in this way is usually intended to include headers that exist outside of the project by incorrectly using project-relative paths.","pos":[66888,67030]},{"content":"This old behavior created a risk that the program could be compiled by including a different source file than the programmer intended, or that these relative paths would not be portable to other build environments.","pos":[67031,67245]},{"content":"The compiler now detects and notifies the programmer of code written in this way and issues an optional compiler warning C4464, if enabled.","pos":[67246,67385]},{"content":"Example (before)","pos":[67482,67498]},{"content":"Example (after)","pos":[67601,67616]},{"content":"Additionally, although the compiler does not give a specific diagnostic, we also recommend that the parent-directory specifier \"..\" should note be used to specify your project's include directories.","pos":[67758,67956]},{"pos":[67966,68045],"content":"<bpt id=\"p1\">**</bpt>#pragma optimize() extends past end of header file<ept id=\"p1\">**</ept> (only affects /Wall /WX)","source":"**#pragma optimize() extends past end of header file** (only affects /Wall /WX)"},{"content":"Previous versions of the compiler did not detect changes to  optimization flag settings that escape a header file included within a translation unit.","pos":[68056,68205]},{"content":"The compiler now detects and notifies the programmer of code written in this way and issues an optional compiler warning C4426 at the location of the offending <ph id=\"ph1\">`#include`</ph>, if enabled.","pos":[68206,68389],"source":" The compiler now detects and notifies the programmer of code written in this way and issues an optional compiler warning C4426 at the location of the offending `#include`, if enabled."},{"content":"This warning is only issued if the changes conflict with the optimization flags set by command-line arguments to the compiler.","pos":[68390,68516]},{"content":"Example (before)","pos":[68661,68677]},{"content":"Example (after)","pos":[68867,68882]},{"pos":[69159,69249],"content":"<bpt id=\"p1\">**</bpt>Mismatched #pragma warning(push)<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>#pragma warning(pop)<ept id=\"p2\">**</ept> (only affects /Wall /WX)","source":"**Mismatched #pragma warning(push)** and **#pragma warning(pop)** (only affects /Wall /WX)"},{"content":"Previous versions of the compiler did not detect <ph id=\"ph1\">`#pragma warning(push)`</ph> state changes being paired with <ph id=\"ph2\">`#pragma warning(pop)`</ph> state changes in a different source file, which is rarely intended.","pos":[69260,69455],"source":"Previous versions of the compiler did not detect `#pragma warning(push)` state changes being paired with `#pragma warning(pop)` state changes in a different source file, which is rarely intended."},{"content":"This old behavior created a risk that the program would be compiled with a different set of warnings enabled than the programmer intended, possibly resulting in silent bad runtime behavior.","pos":[69456,69645]},{"content":"The compiler now detects and notifies the programmer of code written in this way and issues an optional compiler warning C5031 at the location of the matching <ph id=\"ph1\">`#pragma warning(pop)`</ph>, if enabled.","pos":[69646,69840],"source":" The compiler now detects and notifies the programmer of code written in this way and issues an optional compiler warning C5031 at the location of the matching `#pragma warning(pop)`, if enabled."},{"content":"This warning includes a note referencing the location of the corresponding #pragma warning(push).","pos":[69841,69938]},{"content":"Example (before)","pos":[70085,70101]},{"content":"Example (after)","pos":[70674,70689]},{"content":"Though uncommon, code written in this way is sometimes intentional.","pos":[71397,71464]},{"content":"Code written in this way is sensitive to changes in <ph id=\"ph1\">`#include`</ph> order; when possible, we recommend that source code files manage warning state in a self-contained way.","pos":[71465,71631],"source":" Code written in this way is sensitive to changes in `#include` order; when possible, we recommend that source code files manage warning state in a self-contained way."},{"pos":[71641,71701],"content":"<bpt id=\"p1\">**</bpt>Unmatched #pragma warning(push)<ept id=\"p1\">**</ept> (only affects /Wall /WX)","source":"**Unmatched #pragma warning(push)** (only affects /Wall /WX)"},{"content":"Previous versions of the compiler did not detect unmatched <ph id=\"ph1\">`#pragma warning(push)`</ph> state changes at the end of a translation unit.","pos":[71712,71842],"source":"Previous versions of the compiler did not detect unmatched `#pragma warning(push)` state changes at the end of a translation unit."},{"content":"The compiler now detects and notifies the programmer of code written in this way and issues an optional compiler warning C5032 at the location of the unmatched #pragma warning(push), if enabled.","pos":[71843,72037]},{"content":"This warning is only issued if there are no compilation errors in the translation unit.","pos":[72038,72125]},{"content":"Example (before)","pos":[72260,72276]},{"content":"Example (after)","pos":[72657,72672]},{"content":"Additional warnings might be issued as a result of improved #pragma warning state tracking","pos":[73058,73148]},{"content":"Previous versions of the compiler tracked #pragma warning state changes insufficiently well to issue all intended warnings.","pos":[73161,73284]},{"content":"This behavior created a risk that certain warnings would be effectively suppressed in circumstances different than the programmer intended.","pos":[73285,73424]},{"content":"The compiler now tracks #pragma warning state more robustly -- especially related to #pragma warning state changes inside of templates -- and optionally issues new warnings C5031 and C5032 which are intended to help the programmer locate unintended uses of <ph id=\"ph1\">`#pragma warning(push)`</ph> and <ph id=\"ph2\">`#pragma warning(pop)`</ph>.","pos":[73425,73733],"source":" The compiler now tracks #pragma warning state more robustly -- especially related to #pragma warning state changes inside of templates -- and optionally issues new warnings C5031 and C5032 which are intended to help the programmer locate unintended uses of `#pragma warning(push)` and `#pragma warning(pop)`."},{"content":"As a result of improved #pragma warning state change tracking, warnings formerly incorrectly suppressed or warnings related to issues formerly misdiagnosed might now be issued.","pos":[73744,73920]},{"content":"Improved identification of unreachable code","pos":[73932,73975]},{"content":"C++ Standard Library changes and improved ability to inline function calls over previous versions of the compiler might allow the compiler to prove that certain code is now unreachable.","pos":[73988,74173]},{"content":"This new behavior can result in new and more-frequently issued instances of warning C4720.","pos":[74174,74264]},{"content":"In many cases, this warning might only be issued when compiling with optimizations enabled, since optimizations may inline more function calls, eliminate redundant code, or otherwise make it possible to determine that certain code is unreachable.","pos":[74342,74588]},{"content":"We have observed that new instances of warning C4720 have frequently occurred in try/catch blocks, especially in relation to use of <bpt id=\"p1\">[</bpt>std::find<ept id=\"p1\">](assetId:///std::find?qualifyHint=False&amp;autoUpgrade=True)</ept>.","pos":[74589,74790],"source":" We have observed that new instances of warning C4720 have frequently occurred in try/catch blocks, especially in relation to use of [std::find](assetId:///std::find?qualifyHint=False&autoUpgrade=True)."},{"content":"Example (before)","pos":[74801,74817]},{"content":"Example (after)","pos":[75008,75023]},{"pos":[75269,75305],"content":"Conformance Improvements in Update 2"},{"content":"Additional warnings and errors might be issued as a result of partial support for expression SFINAE","pos":[75317,75416]},{"content":"Previous versions of the compiler did not parse certain kinds of expressions inside <ph id=\"ph1\">`decltype`</ph> specifiers due to lack of  support for expression SFINAE.","pos":[75429,75581],"source":"Previous versions of the compiler did not parse certain kinds of expressions inside `decltype` specifiers due to lack of  support for expression SFINAE."},{"content":"This old behavior was incorrect and does not conform to the C++ standard.","pos":[75582,75655]},{"content":"The compiler now parses these expressions and has partial support for expression SFINAE due to  ongoing conformance improvements.","pos":[75656,75785]},{"content":"As a result, the compiler now issues warnings and errors found in  expressions that previous versions of the compiler did not parse.","pos":[75786,75918]},{"pos":[75929,76089],"content":"When this new behavior parses a <ph id=\"ph1\">`decltype`</ph> expression that includes a type that has not yet been declared, the compiler issues compiler error C2039 as a result.","source":"When this new behavior parses a `decltype` expression that includes a type that has not yet been declared, the compiler issues compiler error C2039 as a result."},{"content":"Example 1:  use of an undeclared type (before)","pos":[76199,76245]},{"content":"Example 1 (after)","pos":[76479,76496]},{"pos":[76786,77021],"content":"When this new behavior parses a <ph id=\"ph1\">`decltype`</ph> expression that is missing a necessary use of the <ph id=\"ph2\">`typename`</ph> keyword to specify that a dependent name is a type, the compiler issues  compiler warning C4346 together with compiler error C2923.","source":"When this new behavior parses a `decltype` expression that is missing a necessary use of the `typename` keyword to specify that a dependent name is a type, the compiler issues  compiler warning C4346 together with compiler error C2923."},{"content":"Example 2: dependent name is not a type (before)","pos":[77259,77307]},{"content":"Example 2 (after)","pos":[77758,77775]},{"pos":[78159,78240],"content":"member variables prevent implicitly defined constructors and assignment operators"},{"content":"Previous versions of the compiler allowed a class that has <ph id=\"ph1\">`volatile`</ph> member variables to have default copy/move constructors and default copy/move assignment operators automatically generated.","pos":[78253,78446],"source":"Previous versions of the compiler allowed a class that has `volatile` member variables to have default copy/move constructors and default copy/move assignment operators automatically generated."},{"content":"This old behavior was incorrect and does not conform to the C++ standard.","pos":[78447,78520]},{"content":"The compiler now considers a class that has volatile member variables to have non-trivial construction and assignment operators which prevents default implementations of these operators from being automatically generated.","pos":[78521,78742]},{"content":"When such a class is a member of a union (or an anonymous union inside of a class), the copy/move constructors and copy/move assignment operators of the union (or the class containing the unonymous union) will be implicitly defined as deleted.","pos":[78744,78987]},{"content":"Attempting to construct or copy the union (or class containing the anonymous union) without explicitly defining them is an error and the compiler  issues compiler error C2280 as a result.","pos":[78988,79175]},{"content":"Example (before)","pos":[79302,79318]},{"content":"Example (after)","pos":[79635,79650]},{"content":"Static member functions do not support cv-qualifiers.","pos":[80043,80096]},{"content":"Previous versions of Visual C++ 2015 allowed static member functions to have cv-qualifiers.","pos":[80109,80200]},{"content":"This behavior is due to a regression in Visual C++ 2015 and Visual C++ 2015 Update 1; Visual C++ 2013 and previous versions of Visual C++ reject code written in this way.","pos":[80201,80371]},{"content":"The behavior of Visual C++ 2015 and Visual C++ 2015 Update 1 is incorrect and does not conform to the C++ standard.","pos":[80372,80487]},{"content":"Visual Studio 2015 Update 2 rejects code written in this way and issues compiler error C2511 instead.","pos":[80489,80590]},{"content":"Example (before)","pos":[80721,80737]},{"content":"Example(after)","pos":[80885,80899]},{"pos":[81048,81127],"content":"<bpt id=\"p1\">**</bpt>Forward declaration of enum is not allowed in WinRT code<ept id=\"p1\">**</ept> (affects /ZW only)","source":"**Forward declaration of enum is not allowed in WinRT code** (affects /ZW only)"},{"content":"Code compiled for the Windows Runtime (WinRT) doesn't allow <ph id=\"ph1\">`enum`</ph> types to be forward declared, similarly to when managed C++ code is compiled for the .Net Framework using the /clr compiler switch.","pos":[81138,81336],"source":"Code compiled for the Windows Runtime (WinRT) doesn't allow `enum` types to be forward declared, similarly to when managed C++ code is compiled for the .Net Framework using the /clr compiler switch."},{"content":"This behavior is ensures that the size of an enumeration is always known and can be correctly projected to the WinRT type system.","pos":[81337,81466]},{"content":"The compiler rejects code written in this way and  issues compiler error C2599 together with compiler error C3197.","pos":[81467,81581]},{"content":"Example (before)","pos":[81811,81827]},{"content":"Example (after)","pos":[82284,82299]},{"pos":[82690,82805],"content":"<bpt id=\"p1\">**</bpt>Overloaded non-member operator new and operator delete may not be declared inline<ept id=\"p1\">**</ept> (Level 1 (/W1) on-by-default)","source":"**Overloaded non-member operator new and operator delete may not be declared inline** (Level 1 (/W1) on-by-default)"},{"content":"Previous versions of the compiler do not issue a warning when non-member operator new and operator delete functions are declared inline.","pos":[82816,82952]},{"content":"Code written in this way is ill-formed (no diagnostic required) and can cause memory issues  resulting from mismatched new and delete operators (especially when used together with sized deallocation) that can be difficult to diagnose.","pos":[82953,83187]},{"content":"The compiler now issues compiler warning C4595 to help identify code written in this way.","pos":[83190,83279]},{"content":"Example (before)","pos":[83433,83449]},{"content":"Example (after)","pos":[83593,83608]},{"content":"Fixing code that's written in this way might require that the operator definitions be moved out of a header file and into a corresponding source file.","pos":[83746,83896]},{"pos":[83933,83969],"content":"Conformance Improvements in Update 3"},{"pos":[83979,84050],"content":"<bpt id=\"p1\">**</bpt>std::is_convertable now detects self-assignment<ept id=\"p1\">**</ept>  (standard library)","source":"**std::is_convertable now detects self-assignment**  (standard library)"},{"content":"Previous versions of the <ph id=\"ph1\">`std::is_convertable`</ph> type-trait did not correctly detect self-assignment of a class type when its copy constructor is deleted or private.","pos":[84061,84224],"source":"Previous versions of the `std::is_convertable` type-trait did not correctly detect self-assignment of a class type when its copy constructor is deleted or private."},{"content":"Now, <ph id=\"ph1\">`std::is_convertable&lt;&gt;::value`</ph> is correctly set to <ph id=\"ph2\">`false`</ph> when applied to a class type with a deleted or private copy constructor.","pos":[84225,84361],"source":" Now, `std::is_convertable<>::value` is correctly set to `false` when applied to a class type with a deleted or private copy constructor."},{"content":"There is no compiler diagnostic associated with this change.","pos":[84372,84432]},{"content":"Example","pos":[84443,84450]},{"content":"In previous versions of Visual C++, the static assertions at the bottom of this example pass because <ph id=\"ph1\">`std::is_convertable&lt;&gt;::value`</ph> was incorrectly set to <ph id=\"ph2\">`true`</ph>.","pos":[84893,85055],"source":"In previous versions of Visual C++, the static assertions at the bottom of this example pass because `std::is_convertable<>::value` was incorrectly set to `true`."},{"content":"Now, <ph id=\"ph1\">`std::is_convertable&lt;&gt;::value`</ph> is correctly set to <ph id=\"ph2\">`false`</ph>, causing the static assertions to fail.","pos":[85056,85159],"source":" Now, `std::is_convertable<>::value` is correctly set to `false`, causing the static assertions to fail."},{"content":"Defaulted or deleted trivial copy and move constructors respect access specifiers","pos":[85171,85252]},{"content":"Previous versions of the compiler did not check the access specifier of defaulted or deleted trivial copy and move constructors before allowing them to be called.","pos":[85265,85427]},{"content":"This old behavior was incorrect and does not conform to the C++ standard.","pos":[85428,85501]},{"content":"In some cases, this old  behavior created a risk of silent bad code generation, resulting in unpredictable runtime behavior.","pos":[85502,85626]},{"content":"The compiler now checks the access specifier  of defaulted or deleted trivial copy and move constructors to determine whether it can be called, and if not, issues compiler warning C2248 as a result.","pos":[85627,85825]},{"content":"Example (before)","pos":[85945,85961]},{"content":"Example (after)","pos":[86278,86293]},{"pos":[86566,86642],"content":"<bpt id=\"p1\">**</bpt>Deprecation of attributed ATL code support<ept id=\"p1\">**</ept> (Level 1 (/W1) on-by-default)","source":"**Deprecation of attributed ATL code support** (Level 1 (/W1) on-by-default)"},{"content":"Previous versions of the compiler supported attributed ATL code.","pos":[86653,86717]},{"content":"As the next phase of removing support for attributed ATL code that <bpt id=\"p1\">[</bpt>began in Visual C++ 2008<ept id=\"p1\">](https://msdn.microsoft.com/library/bb384632\\(v=vs.90\\).aspx)</ept>, attributed ATL code has been deprecated.","pos":[86718,86914],"source":" As the next phase of removing support for attributed ATL code that [began in Visual C++ 2008](https://msdn.microsoft.com/library/bb384632\\(v=vs.90\\).aspx), attributed ATL code has been deprecated."},{"content":"The compiler now issues compiler warning C4467 to help identify this kind of deprecated code.","pos":[86915,87008]},{"pos":[87107,87374],"content":"If you want to continue using attributed ATL code until support is removed from the compiler, you can disable this warning by passing the <ph id=\"ph1\">`/Wv:18`</ph> or <ph id=\"ph2\">`/wd:4467`</ph> command line arguments to the compiler, or by adding  <ph id=\"ph3\">`#pragma warning(disable:4467)`</ph> in your source code.","source":"If you want to continue using attributed ATL code until support is removed from the compiler, you can disable this warning by passing the `/Wv:18` or `/wd:4467` command line arguments to the compiler, or by adding  `#pragma warning(disable:4467)` in your source code."},{"content":"Example 1 (before)","pos":[87385,87403]},{"content":"Example 1 (after)","pos":[87527,87544]},{"content":"Sometimes you might need or want to create an IDL file to avoid the use deprecated ATL attributes, as in the example code below","pos":[87656,87783]},{"content":"Example 2 (before)","pos":[87794,87812]},{"content":"First, create the *.idl file; the vc140.idl generated file can be used to obtain an <ph id=\"ph1\">\\*</ph>.idl file containing the interfaces and annotations.","pos":[88299,88437],"source":"First, create the *.idl file; the vc140.idl generated file can be used to obtain an \\*.idl file containing the interfaces and annotations."},{"content":"Next, add a MIDL step to your build to make sure that the C++ interface definitions are generated.","pos":[88448,88546]},{"content":"Example 2 IDL (after)","pos":[88557,88578]},{"content":"Then, use ATL directly in the implementation file, as in the example code below.","pos":[89291,89371]},{"content":"Example 2  Implementation (after)","pos":[89382,89415]},{"pos":[89774,89868],"content":"<bpt id=\"p1\">**</bpt>Precompiled header (PCH) files and mismatched #include directives<ept id=\"p1\">**</ept> (only affects /Wall /WX)","source":"**Precompiled header (PCH) files and mismatched #include directives** (only affects /Wall /WX)"},{"content":"Previous versions of the compiler accepted mismatched <ph id=\"ph1\">`#include`</ph> directives in source files between <ph id=\"ph2\">`-Yc`</ph> and <ph id=\"ph3\">`-Yu`</ph> compilations when using precompiled header (PCH)  files.","pos":[89879,90051],"source":"Previous versions of the compiler accepted mismatched `#include` directives in source files between `-Yc` and `-Yu` compilations when using precompiled header (PCH)  files."},{"content":"Code written in this way is no longer accepted by the compiler.","pos":[90052,90115]},{"content":"The compiler now issues compiler warning CC4598 to help identify mismatched <ph id=\"ph1\">`#include`</ph> directives when using PCH files.","pos":[90118,90237],"source":"   The compiler now issues compiler warning CC4598 to help identify mismatched `#include` directives when using PCH files."},{"content":"Example (before):","pos":[90404,90421]},{"content":"X.cpp (-Ycc.h)","pos":[90432,90446]},{"content":"Z.cpp (-Yuc.h)","pos":[90552,90566]},{"content":"Example (after)","pos":[90711,90726]},{"content":"X.cpp (-Ycc.h)","pos":[90737,90751]},{"content":"Z.cpp (-Yuc.h)","pos":[90858,90872]},{"pos":[91012,91106],"content":"<bpt id=\"p1\">**</bpt>Precompiled header (PCH) files and mismatched include directories<ept id=\"p1\">**</ept> (only affects /Wall /WX)","source":"**Precompiled header (PCH) files and mismatched include directories** (only affects /Wall /WX)"},{"content":"Previous versions of the compiler accepted mismatched include directory (<ph id=\"ph1\">`-I`</ph>) command line arguments to the compiler between <ph id=\"ph2\">`-Yc`</ph> and <ph id=\"ph3\">`-Yu`</ph> compilations when using precompiled header (PCH)  files.","pos":[91117,91315],"source":"Previous versions of the compiler accepted mismatched include directory (`-I`) command line arguments to the compiler between `-Yc` and `-Yu` compilations when using precompiled header (PCH)  files."},{"content":"Code written in this way is no longer accepted by the compiler.","pos":[91316,91379]},{"content":"The compiler now issues compiler warning CC4599 to help identify mismatched include directory (<ph id=\"ph1\">`-I`</ph>) command line arguments when using PCH files.","pos":[91382,91527],"source":"   The compiler now issues compiler warning CC4599 to help identify mismatched include directory (`-I`) command line arguments when using PCH files."},{"content":"Example (before)","pos":[91675,91691]},{"content":"Example (after)","pos":[91804,91819]},{"content":"Visual C++ 2013 Conformance Changes","pos":[91935,91970]},{"content":"Compiler","pos":[91980,91988]},{"content":"The final keyword now generates an unresolved symbol error where it would have compiled previously:","pos":[91998,92097]},{"content":"In earlier versions, an error wasn't issued because the call was a virtual call; nevertheless, the program would crash at runtime.","pos":[92334,92464]},{"content":"Now, a linker error is issued because the class is known to be final.","pos":[92465,92534]},{"content":"In this example, to fix the error, you would link against the obj that contains the definition of S2::f.","pos":[92535,92639]},{"content":"When you use friend functions in namespaces, you must re-declare the friend function before you refer to it or you will get an error because the compiler now conforms to the ISO C++ Standard.","pos":[92649,92840]},{"content":"For example, this no longer compiles:","pos":[92841,92878]},{"content":"To correct this code, declare the friend function:","pos":[93142,93192]},{"content":"The C++ Standard does not allow explicit specialization in a class.","pos":[93490,93557]},{"content":"Although Visual C++ allows it in some cases, in cases such as the following example, an error is now generated because the compiler doesn't consider the second function to be a specialization of the first one.","pos":[93558,93767]},{"content":"To correct this code, modify the second function:","pos":[93981,94030]},{"content":"Visual C++ no longer tries to disambiguate the two functions in the following example, and now emits an error:","pos":[94109,94219]},{"content":"To correct this code, clarify the call:","pos":[94424,94463]},{"content":"Before the compiler was made compliant with ISO C++11, the following code would have compiled and caused x to resolve to type int:","pos":[94671,94801]},{"content":"This code now resolves x to a type of std::initializer_list<ph id=\"ph1\">\\&lt;</ph>int&gt; and causes an error on the next line that tries to assign x to type int.","pos":[94881,95019],"source":"This code now resolves x to a type of std::initializer_list\\<int> and causes an error on the next line that tries to assign x to type int."},{"content":"(There is no conversion by default.) To correct this code, use int to replace auto:","pos":[95020,95103]},{"content":"Aggregate initialization is no longer allowed when the type of the right-hand value does not match the type of the left-hand value that's being initialized, and an error is issued because the ISO C++11 Standard requires uniform initialization to work without narrowing conversions.","pos":[95181,95462]},{"content":"Previously, if a narrowing conversion was available, a <bpt id=\"p1\">[</bpt>Compiler Warning (level 4) C4242<ept id=\"p1\">](../error-messages/compiler-warnings/compiler-warning-level-4-c4242.md)</ept> warning would have been issued instead of an error.","pos":[95463,95675],"source":" Previously, if a narrowing conversion was available, a [Compiler Warning (level 4) C4242](../error-messages/compiler-warnings/compiler-warning-level-4-c4242.md) warning would have been issued instead of an error."},{"content":"To correct this code, add an explicit narrowing conversion:","pos":[95764,95823]},{"content":"The following initialization is no longer allowed:","pos":[95921,95971]},{"content":"To correct this code, use either of these forms:","pos":[96037,96085]},{"content":"Name lookup has changed.","pos":[96179,96203]},{"content":"The following code is resolved differently in Visual C++ in Visual Studio 2012 and Visual C++ in Visual Studio 2013:","pos":[96204,96320]},{"content":"In Visual C++ in Visual Studio 2012, the E1 in expression E1::b resolved to ::E1 in the global scope.","pos":[96495,96596]},{"content":"In Visual C++ in Visual Studio 2013, E1 in expression E1::b resolves to the typedef E2 definition in main() and has type ::E2.","pos":[96597,96723]},{"content":"Object layout has changed.","pos":[96733,96759]},{"content":"On x64, the object layout of a class may change from previous releases.","pos":[96760,96831]},{"content":"If it has a virtual function but it doesn’t have a base class that has a virtual function, the object model of the compiler inserts a pointer to a virtual function table after the data member layout.","pos":[96832,97031]},{"content":"This means the layout may not be optimal in all cases.","pos":[97032,97086]},{"content":"In previous releases, an optimization for x64 would try to improve the layout for you, but because it failed to work correctly in complex code situations, it was removed in Visual C++ in Visual Studio 2013.","pos":[97087,97293]},{"content":"For example, consider this code:","pos":[97294,97326]},{"content":"In Visual C++ in Visual Studio 2013, the result of sizeof(S2) on x64 is 48, but in previous releases, it evaluates to 32.","pos":[97507,97628]},{"content":"To make this evaluate to 32 in Visual C++ in Visual Studio 2013 for x64, add a dummy base class that has a virtual function:","pos":[97629,97753]},{"content":"To find places in your code that an earlier release would have tried to optimize, use a compiler from that release together with the /W3 compiler option and turn on Warning 4370.","pos":[98010,98188]},{"content":"For example:","pos":[98189,98201]},{"content":"On Visual C++ compilers before Visual C++ in Visual Studio 2013, this code outputs this message: warning C4370: 'S2' : layout of class has changed from a previous version of the compiler due to better packing","pos":[98422,98630]},{"content":"The x86 compiler has the same sub-optimal layout issue in all versions of Visual C++.","pos":[98641,98726]},{"content":"For example, if this code is compiled for x86:","pos":[98727,98773]},{"content":"The result of sizeof(S) is 24.","pos":[98903,98933]},{"content":"However, this can be reduced to 16 if you use the workaround just mentioned for x64:","pos":[98934,99018]},{"content":"Standard Library","pos":[99225,99241]},{"content":"Visual C++ in Visual Studio 2013 detects mismatches in _ITERATOR_DEBUG_LEVEL, which was implemented in Visual C++ 2010, and RuntimeLibrary mismatches.","pos":[99245,99395]},{"content":"These occur when compiler options /MT (static release), /MTd (static debug), /MD (dynamic release), and /MDd (dynamic debug) are mixed.","pos":[99396,99531]},{"content":"If your code acknowledges the previous release's simulated alias templates, you have to change it.","pos":[99541,99639]},{"content":"For example, instead of allocator_traits<ph id=\"ph1\">\\&lt;</ph>A&gt;::rebind_alloc<ph id=\"ph2\">\\&lt;</ph>U&gt;::other, now you have to say allocator_traits<ph id=\"ph3\">\\&lt;</ph>A&gt;::rebind_alloc<ph id=\"ph4\">\\&lt;</ph>U&gt;.","pos":[99640,99770],"source":" For example, instead of allocator_traits\\<A>::rebind_alloc\\<U>::other, now you have to say allocator_traits\\<A>::rebind_alloc\\<U>."},{"content":"Although ratio_add<ph id=\"ph1\">\\&lt;</ph>R1, R2&gt;::type is no longer necessary and we now recommend that you say ratio_add<ph id=\"ph2\">\\&lt;</ph>R1, R2&gt;, the former will still compile because ratio<ph id=\"ph3\">\\&lt;</ph>N, D&gt; is required to have a \"type\" typedef for a reduced ratio, which will be the same type if it's already reduced.","pos":[99771,100043],"source":" Although ratio_add\\<R1, R2>::type is no longer necessary and we now recommend that you say ratio_add\\<R1, R2>, the former will still compile because ratio\\<N, D> is required to have a \"type\" typedef for a reduced ratio, which will be the same type if it's already reduced."},{"content":"You must use #include <ph id=\"ph1\">\\&lt;</ph>algorithm&gt; when you call std::min() or std::max().","pos":[100053,100127],"source":"You must use #include \\<algorithm> when you call std::min() or std::max()."},{"content":"If your existing code uses the previous release’s simulated scoped enums—traditional unscoped enums wrapped in namespaces—you have to change it.","pos":[100137,100281]},{"content":"For example, if you referred to the type std::future_status::future_status, now you have to say std::future_status.","pos":[100282,100397]},{"content":"However, most code is unaffected—for example, std::future_status::ready still compiles.","pos":[100398,100485]},{"content":"explicit operator bool() is stricter than operator unspecified-bool-type().","pos":[100495,100570]},{"content":"explicit operator bool() permits explicit conversions to bool—for example, given shared_ptr<ph id=\"ph1\">\\&lt;</ph>X&gt; sp, both static_cast<ph id=\"ph2\">\\&lt;</ph>bool&gt;(sp) and bool b(sp) are valid—and Boolean-testable \"contextual conversions\" to bool—for example, if (sp), !sp, sp &amp;&amp; whatever.","pos":[100571,100820],"source":" explicit operator bool() permits explicit conversions to bool—for example, given shared_ptr\\<X> sp, both static_cast\\<bool>(sp) and bool b(sp) are valid—and Boolean-testable \"contextual conversions\" to bool—for example, if (sp), !sp, sp && whatever."},{"content":"However, explicit operator bool() forbids implicit conversions to bool, so you can't say bool b = sp; and given a bool return type, you can't say return sp.","pos":[100821,100977]},{"content":"Now that real variadic templates are implemented, _VARIADIC_MAX and related macros have no effect.","pos":[100987,101085]},{"content":"If you're still defining _VARIADIC_MAX, it is just ignored.","pos":[101086,101145]},{"content":"If you acknowledged our macro machinery intended to support simulated variadic templates in any other way, you have to change your code.","pos":[101146,101282]},{"content":"In addition to ordinary keywords, STL headers now forbid the macro-izing of the context-sensitive keywords \"override\" and \"final\".","pos":[101292,101422]},{"content":"reference_wrapper/ref()/cref() now forbid binding to temporary objects.","pos":[101432,101503]},{"content":"random&gt; now strictly enforces its compile-time preconditions.","pos":[101515,101576],"source":"random> now strictly enforces its compile-time preconditions."},{"content":"Various STL type traits have the precondition \"T shall be a complete type\".","pos":[101586,101661]},{"content":"Although the compiler now enforces this more strictly, it may not enforce it in all situations.","pos":[101662,101757]},{"content":"(Because STL precondition violations trigger undefined behavior, the Standard doesn't guarantee enforcement.)","pos":[101758,101867]},{"content":"The STL does not support /clr:oldSyntax.","pos":[101877,101917]},{"content":"The C++11 specification for common_type&lt;&gt; had unexpected and undesired consequences; in particular, it makes common_type<ph id=\"ph1\">\\&lt;</ph>int, int&gt;::type return int&amp;&amp;.","pos":[101927,102078],"source":"The C++11 specification for common_type<> had unexpected and undesired consequences; in particular, it makes common_type\\<int, int>::type return int&&."},{"content":"Therefore, Visual C++ implements the Proposed Resolution for Library Working Group issue 2141, which makes common_type<ph id=\"ph1\">\\&lt;</ph>int, int=\"\"&gt;::type return int.","pos":[102079,102229],"source":" Therefore, Visual C++ implements the Proposed Resolution for Library Working Group issue 2141, which makes common_type\\<int, int=\"\">::type return int."},{"content":"As a side-effect of this change, the identity case no longer works (common_type<ph id=\"ph1\">\\&lt;</ph>T&gt; does not always result in type T).","pos":[102240,102358],"source":"As a side-effect of this change, the identity case no longer works (common_type\\<T> does not always result in type T)."},{"content":"This complies with the Proposed Resolution, but it breaks any code that relied on the previous behavior.","pos":[102359,102463]},{"content":"If you require an identity type trait, don't use the non-standard std::identity that's defined in &lt;type_traits&gt;                 because it won't work for <ph id=\"ph1\">\\&lt;</ph>void&gt;                 .","pos":[102474,102653],"source":"If you require an identity type trait, don't use the non-standard std::identity that's defined in <type_traits>                 because it won't work for \\<void>                 ."},{"content":"Instead, implement your own identity type trait to suit your needs.","pos":[102654,102721]},{"content":"Here's an example:","pos":[102722,102740]},{"content":"MFC and ATL","pos":[102864,102875]},{"content":"MFC MBCS Library is no longer included in Visual Studio because Unicode is so popular and use of MBCS is significantly reduced.","pos":[102885,103012]},{"content":"This change also keeps MFC more closely aligned with the Windows SDK itself, because many of the new controls and messages are Unicode-only.","pos":[103013,103153]},{"content":"However, if you must continue to use the MFC MBCS library, you can download it from the MSDN Download Center.","pos":[103154,103263]},{"content":"The Visual C++ Redistributable Package still includes this library.","pos":[103264,103331]},{"content":"Accessibility for the MFC ribbon is changed.","pos":[103341,103385]},{"content":"Instead of a one-level architecture, there is now a hierarchical architecture.","pos":[103387,103465]},{"content":"You can still use the old behavior by calling CRibbonBar::EnableSingleLevelAccessibilityMode().","pos":[103466,103561]},{"content":"CDatabase::GetConnect method is removed.","pos":[103571,103611]},{"content":"To improve security, the connection string is now stored encrypted and is decrypted only as needed; it cannot be returned as plain text.","pos":[103612,103748]},{"content":"The string can be obtained by using the CDatabase::Dump method.","pos":[103750,103813]},{"content":"Signature of CWnd::OnPowerBroadcast is changed.","pos":[103823,103870]},{"content":"The signature of this message handler is changed to take an LPARAM as the second parameter.","pos":[103871,103962]},{"content":"Signatures are changed to accommodate message handlers.","pos":[103972,104027]},{"content":"The parameter lists of the following functions have been changed to use newly added ON_WM_* message handlers:","pos":[104028,104137]},{"content":"CWnd::OnDisplayChange changed to (UINT, int, int) instead of (WPARAM, LPARAM) so that the new ON_WM_DISPLAYCHANGE macro can be used in the message map.","pos":[104151,104302]},{"content":"CFrameWnd::OnDDEInitiate changed to (CWnd*, UINT, UNIT) instead of (WPARAM, LPARAM) so that the new ON_WM_DDE_INITIATE macro can be used in the message map.","pos":[104316,104472]},{"content":"CFrameWnd::OnDDEExecute changed to (CWnd*, HANDLE) instead of (WPARAM, LPARAM) so that the new ON_WM_DDE_EXECUTE macro can be used in the message map.","pos":[104486,104636]},{"content":"CFrameWnd::OnDDETerminate changed to (CWnd*) as the parameter instead of (WPARAM, LPARAM) so that the new ON_WM_DDE_TERMINATE macro can be used in the message map.","pos":[104650,104813]},{"content":"CMFCMaskedEdit::OnCut changed to no parameters instead of (WPARAM, LPARAM) so that the new ON_WM_CUT macro can be used in the message map.","pos":[104827,104965]},{"content":"CMFCMaskedEdit::OnClear changed to no parameters instead of (WPARAM, LPARAM) so that the new ON_WM_CLEAR macro can be used in the message map.","pos":[104979,105121]},{"content":"CMFCMaskedEdit::OnPaste changed to no parameters instead of (WPARAM, LPARAM) so that the new ON_WM_PASTE macro can be used in the message map.","pos":[105135,105277]},{"content":"ifdefs in the MFC header files are removed.","pos":[105289,105332]},{"content":"Numerous #ifdefs in the MFC header files related to unsupported versions of Windows (WINVER <ph id=\"ph1\">&amp;lt;</ph> 0x0501) are removed.","pos":[105333,105450],"source":" Numerous #ifdefs in the MFC header files related to unsupported versions of Windows (WINVER &lt; 0x0501) are removed."},{"content":"ATL DLL (atl120.dll) is removed.","pos":[105460,105492]},{"content":"ATL is now provided as headers and a static library (atls.lib).","pos":[105493,105556]},{"content":"Atlsd.lib, atlsn.lib, and atlsnd.lib are removed.","pos":[105566,105615]},{"content":"Atls.lib no longer has character-set dependencies or code that's specific for debug/release.","pos":[105616,105708]},{"content":"Because it works the same for Unicode/ANSI and debug/release, only one version of the library is required.","pos":[105709,105815]},{"content":"ATL/MFC Trace tool is removed together with the ATL DLL, and the tracing mechanism is simplified.","pos":[105825,105922]},{"content":"The CTraceCategory constructor now takes one parameter (the category name), and the TRACE macros call the CRT debug reporting functions.","pos":[105923,106059]},{"content":"Visual C++ 2012 Breaking Changes","pos":[106068,106100]},{"content":"Compiler","pos":[106110,106118]},{"content":"The /Yl compiler option has changed.","pos":[106128,106164]},{"content":"By default, the compiler uses this option, which can lead to LNK2011 errors under certain conditions.","pos":[106165,106266]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>/Yl (Inject PCH Reference for Debug Library)<ept id=\"p1\">](../build/reference/yl-inject-pch-reference-for-debug-library.md)</ept>.","pos":[106267,106405],"source":" For more information, see [/Yl (Inject PCH Reference for Debug Library)](../build/reference/yl-inject-pch-reference-for-debug-library.md)."},{"content":"In code that's compiled by using /clr, the enum class keyword defines a C++11 enum, not a common language runtime (CLR) enum.","pos":[106415,106540]},{"content":"To define a CLR enum, you must be explicit about its accessibility.","pos":[106541,106608]},{"content":"Use the template keyword to explicitly disambiguate a dependent name (C++ Language Standard compliance).","pos":[106618,106722]},{"content":"In the following example, the highlighted template keyword is mandatory to resolve the ambiguity.","pos":[106723,106820]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Name Resolution for Dependent Types<ept id=\"p1\">](../cpp/name-resolution-for-dependent-types.md)</ept>.","pos":[106821,106932],"source":" For more information, see [Name Resolution for Dependent Types](../cpp/name-resolution-for-dependent-types.md)."},{"content":"Constant expression of type float is no longer allowed as a template argument, as shown in the following example.","pos":[107112,107225]},{"content":"Code that's compiled by using the /GS command-line option and that has an off-by-one vulnerability may lead to process termination at                 runtime, as shown in the following pseudocode example.","pos":[107390,107594]},{"content":"The default architecture for x86 builds is changed to SSE2; therefore, the compiler may emit SSE instructions, and will use the XMM                 registers to perform floating-point calculations.","pos":[107754,107951]},{"content":"If you want to revert to previous behavior, then use the /arch:IA32 compiler flag to specify the                 architecture as IA32.","pos":[107952,108086]},{"content":"The compiler may issue warnings <bpt id=\"p1\">[</bpt>Compiler Warning (level 4) C4703<ept id=\"p1\">](../error-messages/compiler-warnings/compiler-warning-level-4-c4703.md)</ept> and C4701 where previously it did not.","pos":[108096,108272],"source":"The compiler may issue warnings [Compiler Warning (level 4) C4703](../error-messages/compiler-warnings/compiler-warning-level-4-c4703.md) and C4701 where previously it did not."},{"content":"The compiler applies stronger checks for use of                 uninitialized local variables of pointer type.","pos":[108273,108383]},{"content":"When the new linker flag /HIGHENTROPYVA is specified, Windows 8 typically causes memory allocations to return a 64-bit address.","pos":[108393,108520]},{"content":"(Prior to Windows 8, such allocations more often returned addresses that were less than 2 GB.)  This may expose pointer truncation bugs in existing code.","pos":[108537,108690]},{"content":"By default, this switch is on.","pos":[108691,108721]},{"content":"To disable this behavior, specify /HIGHENTROPYVA:NO.","pos":[108723,108775]},{"content":"The managed compiler (Visual Basic/C#) also supports /HIGHENTROPYVA for managed builds.","pos":[108785,108872]},{"content":"However, in this case,                 the /HIGHENTROPYVAswitch is off by default.","pos":[108874,108956]},{"content":"IDE","pos":[108966,108969]},{"content":"Although we recommend that you do not create Windows Forms applications in C++/CLI, maintenance of existing C++/CLI UI applications is supported.","pos":[108979,109124]},{"content":"If you have to create a Windows Forms application, or any other .NET UI application, use C# or Visual Basic.","pos":[109125,109233]},{"content":"Use C++/CLI for interoperability purposes only.","pos":[109234,109281]},{"content":"Parallel Patterns Library and Concurrency Runtime Library","pos":[109291,109348]},{"content":"The SchedulerType enumeration of UmsThreadDefault is deprecated.","pos":[109352,109416]},{"content":"Specification of UmsThreadDefault produces a deprecated warning, and internally maps back to the ThreadScheduler.","pos":[109417,109530]},{"content":"Standard Library","pos":[109540,109556]},{"content":"Following a breaking change between the C++98/03 and C++11 standards, using explicit template arguments to call make_pair()—as inmake_pair<ph id=\"ph1\">\\&lt;</ph>int, int&gt;(x, y)—typically does not compile in Visual C++ in Visual Studio 2012.","pos":[109566,109785],"source":"Following a breaking change between the C++98/03 and C++11 standards, using explicit template arguments to call make_pair()—as inmake_pair\\<int, int>(x, y)—typically does not compile in Visual C++ in Visual Studio 2012."},{"content":"The solution is to always call make_pair()without explicit template arguments—as in make_pair(x, y).","pos":[109786,109886]},{"content":"Providing explicit template arguments defeats the purpose of the function.","pos":[109887,109961]},{"content":"If you require precise control over the resulting type, use pair instead of make_pair—as in pair<ph id=\"ph1\">\\&lt;</ph>short, short&gt;(int1, int2).","pos":[109962,110086],"source":" If you require precise control over the resulting type, use pair instead of make_pair—as in pair\\<short, short>(int1, int2)."},{"content":"Another breaking change between the C++98/03 and C++11 standards: When A is implicitly convertible to B and B is implicitly convertible to C, but A is not implicitly convertible to C, C++98/03 and Visual C++ 2010 permitted pair<ph id=\"ph1\">\\&lt;</ph>A, X&gt; to be converted (implicitly or explicitly) to pair<ph id=\"ph2\">\\&lt;</ph>C, X&gt;.","pos":[110096,110389],"source":"Another breaking change between the C++98/03 and C++11 standards: When A is implicitly convertible to B and B is implicitly convertible to C, but A is not implicitly convertible to C, C++98/03 and Visual C++ 2010 permitted pair\\<A, X> to be converted (implicitly or explicitly) to pair\\<C, X>."},{"content":"(The other type, X, is not of interest here, and this is not specific to the first type in the pair.) Because C++11 and Visual C++ in Visual Studio 2012 detect that A is not implicitly convertible to C, they remove the pair conversion from overload resolution.","pos":[110390,110650]},{"content":"This is a positive change for many scenarios.","pos":[110651,110696]},{"content":"For example, overloading func(const pair<ph id=\"ph1\">\\&lt;</ph>int, int&gt;&amp;) and func(const pair<ph id=\"ph2\">\\&lt;</ph>string, string&gt;&amp;), and calling func() with pair<ph id=\"ph3\">\\&lt;</ph>const char *, const char <ph id=\"ph4\">\\*</ph>&gt; will compile with this change.","pos":[110697,110880],"source":" For example, overloading func(const pair\\<int, int>&) and func(const pair\\<string, string>&), and calling func() with pair\\<const char *, const char \\*> will compile with this change."},{"content":"However, this change breaks code that relied on aggressive pair conversions.","pos":[110881,110957]},{"content":"Such code can typically be fixed by performing one part of the conversion explicitly—for example, by passing make_pair(static_cast<ph id=\"ph1\">\\&lt;</ph>B&gt;(a), x) to a function that expects pair<ph id=\"ph2\">\\&lt;</ph>C, X&gt;.","pos":[110958,111139],"source":" Such code can typically be fixed by performing one part of the conversion explicitly—for example, by passing make_pair(static_cast\\<B>(a), x) to a function that expects pair\\<C, X>."},{"content":"Visual C++ 2010 simulated variadic templates—for example, make_shared<ph id=\"ph1\">\\&lt;</ph>T&gt;(arg1, arg2, argN)—up to a limit of 10 arguments, by stamping out overloads and specializations with preprocessor machinery.","pos":[111149,111346],"source":"Visual C++ 2010 simulated variadic templates—for example, make_shared\\<T>(arg1, arg2, argN)—up to a limit of 10 arguments, by stamping out overloads and specializations with preprocessor machinery."},{"content":"In Visual C++ in Visual Studio 2012, this limit is reduced to 5 arguments to improve compile times and compiler memory consumption for the majority of users.","pos":[111347,111504]},{"content":"However, you can set the previous limit by explicitly defining _VARIADIC_MAX as 10, project-wide.","pos":[111505,111602]},{"content":"C++11 17.6.4.3.1 [macro.names]/2 forbids macro-izing keywords when C++ Standard Library headers are included.","pos":[111612,111721]},{"content":"The headers now emit compiler errors if they detect macro-ized keywords.","pos":[111722,111794]},{"content":"(Defining _ALLOW_KEYWORD_MACROS allows such code to compile, but we strongly discourage that usage.) As an exception, macro-ized new is permitted by default, because the headers comprehensively defend themselves by using #pragma push_macro(\"new\")/#undef new/#pragma pop_macro(\"new\").","pos":[111795,112078]},{"content":"Defining _ENFORCE_BAN_OF_MACRO_NEW does exactly what its name implies.","pos":[112079,112149]},{"content":"To implement various optimizations and debugging checks, the C++ Standard Library implementation intentionally breaks binary compatibility among versions of Visual Studio (2005, 2008, 2010, 2012).","pos":[112159,112355]},{"content":"When the C++ Standard Library is used, this forbids the mixing of object files and static libraries that are compiled by using different versions into one binary (EXE or DLL), and forbids the passing of C++ Standard Library objects between binaries that are compiled by using different versions.","pos":[112356,112651]},{"content":"The mixing of object files and static libraries (using the C++ Standard Library) that were compiled by using Visual C++ 2010 with those that were compiled by using Visual C++ in Visual Studio 2012 emits linker errors about _MSC_VER mismatch, where _MSC_VER is the macro that contains the compiler's major version (1700 for Visual C++ in Visual Studio 2012).","pos":[112652,113009]},{"content":"This check cannot detect DLL mixing, and cannot detect mixing that involves Visual C++ 2008 or earlier.","pos":[113010,113113]},{"content":"In addition to detecting _ITERATOR_DEBUG_LEVEL mismatches, which was implemented in Visual C++ 2010, Visual C++ in Visual Studio 2012 detects Runtime Library mismatches.","pos":[113123,113292]},{"content":"These occur when the compiler options /MT (static release), /MTd (static debug), /MD (dynamic release), and /MDd (dynamic debug) are mixed.","pos":[113293,113432]},{"content":"operator<ph id=\"ph1\">\\&lt;</ph>(), operator&gt;(), operator<ph id=\"ph2\">\\&lt;</ph>=(), and operator&gt;=() were previously available for the std::unordered_map andstdext::hash_map families of containers, although their implementations were not actually useful.","pos":[113442,113654],"source":"operator\\<(), operator>(), operator\\<=(), and operator>=() were previously available for the std::unordered_map andstdext::hash_map families of containers, although their implementations were not actually useful."},{"content":"These non-standard operators have been removed in Visual C++ in Visual Studio 2012.","pos":[113655,113738]},{"content":"Additionally, the implementation of operator==() and operator!=() for thestd::unordered_map family has been extended to cover the stdext::hash_map family.","pos":[113739,113893]},{"content":"(We recommend that you avoid the use of thestdext::hash_map family in new code.)","pos":[113894,113974]},{"content":"C++11 22.4.1.4 [locale.codecvt] specifies that codecvt::length() and codecvt::do_length() should take modifiable stateT&amp;parameters, but Visual C++ 2010 took const stateT&amp;.","pos":[113984,114155],"source":"C++11 22.4.1.4 [locale.codecvt] specifies that codecvt::length() and codecvt::do_length() should take modifiable stateT&parameters, but Visual C++ 2010 took const stateT&."},{"content":"Visual C++ in Visual Studio 2012 takes stateT&amp; as mandated by the standard.","pos":[114156,114231],"source":" Visual C++ in Visual Studio 2012 takes stateT& as mandated by the standard."},{"content":"This difference is significant for anyone who is attempting to override the virtual function do_length().","pos":[114232,114337]},{"content":"CRT","pos":[114347,114350]},{"content":"The C Runtime (CRT) heap, which is used for new and malloc(), is no longer private.","pos":[114360,114443]},{"content":"The CRT now uses the process heap.","pos":[114444,114478]},{"content":"This means that the heap is not destroyed when a DLL is unloaded, so DLLs that link statically to the CRT must ensure memory that's allocated by the DLL code is cleaned up before it’s unloaded.","pos":[114479,114672]},{"content":"The iscsymf() function asserts with negative values.","pos":[114682,114734]},{"content":"The threadlocaleinfostruct struct has changed to accommodate the changes to locale functions.","pos":[114744,114837]},{"content":"CRT functions that have corresponding intrinsics such as memxxx(), strxxx() are removed from intrin.h.","pos":[114847,114949]},{"content":"If you included intrin.h only for these functions, you must now include the corresponding CRT headers.","pos":[114950,115052]},{"content":"MFC and ATL","pos":[115062,115073]},{"content":"Removed Fusion support (afxcomctl32.h); therefore, all methods that are defined in afxcomctl32.h have been removed.","pos":[115083,115198]},{"content":"Header files afxcomctl32.h and afxcomctl32.inl have been deleted.","pos":[115199,115264]},{"content":"Changed the name of CDockablePane::RemoveFromDefaultPaneDividier to CDockablePane::RemoveFromDefaultPaneDivider.","pos":[115274,115386]},{"content":"Changed the signature of CFileDialog::SetDefExt to use LPCTSTR; therefore, Unicode builds are affected.","pos":[115396,115499]},{"content":"Removed obsolete ATL tracing categories.","pos":[115509,115549]},{"content":"Changed the signature of CBasePane::MoveWindow to take a const CRect.","pos":[115559,115628]},{"content":"Changed the signature of CMFCEditBrowseCtrl::EnableBrowseButton.","pos":[115638,115702]},{"content":"Removed m_fntTabs and m_fntTabsBold from CMFCBaseTabCtrl.","pos":[115712,115769]},{"content":"Added a parameter to the CMFCRibbonStatusBarPane constructors.","pos":[115779,115841]},{"content":"(It is a default parameter, and so it is not source-breaking.)","pos":[115842,115904]},{"content":"Added a parameter to the CMFCRibbonCommandsListBox constructor.","pos":[115914,115977]},{"content":"(It is a default parameter, and so it is not source-breaking.)","pos":[115978,116040]},{"content":"Removed the AFXTrackMouse API (and related timer proc).","pos":[116050,116105]},{"content":"Use the Win32 TrackMouseEvent API instead.","pos":[116106,116148]},{"content":"Added a parameter to the CFolderPickerDialog constructor.","pos":[116158,116215]},{"content":"(It is a default parameter, and so it is not source-breaking.)","pos":[116216,116278]},{"content":"CFileStatus structure size changed: The m_attribute member changed from BYTE to DWORD (to match the value that's returned fromGetFileAttributes).","pos":[116288,116433]},{"content":"CRichEditCtrl and CRichEditView use MSFTEDIT_CLASS (RichEdit 4.1 control) instead of RICHEDIT_CLASS (RichEdit 3.0 control) in Unicode builds.","pos":[116443,116584]},{"content":"Removed AFX_GLOBAL_DATA::IsWindowsThemingDrawParentBackground because it is always TRUE on Windows Vista, Windows 7, and Windows 8.","pos":[116594,116725]},{"content":"Removed AFX_GLOBAL_DATA::IsWindowsLayerSupportAvailable because it is always TRUE on Windows Vista, Windows 7, and Windows 8.","pos":[116735,116860]},{"content":"Removed AFX_GLOBAL_DATA::DwmExtendFrameIntoClientArea.","pos":[116870,116924]},{"content":"Call Windows API directly on Windows Vista, Windows 7, and Windows 8.","pos":[116925,116994]},{"content":"Removed AFX_GLOBAL_DATA::DwmDefWindowProc.","pos":[117004,117046]},{"content":"Call Windows API directly on Windows Vista, Windows 7, and Windows 8.","pos":[117047,117116]},{"content":"Renamed AFX_GLOBAL_DATA::DwmIsCompositionEnabled to IsDwmCompositionEnabled to eliminate name collision.","pos":[117126,117230]},{"content":"Changed identifiers for a number of MFC internal timers and moved the definitions to afxres.h (AFX_TIMER_ID_*).","pos":[117240,117351]},{"content":"Changed the signature of OnExitSizeMove method to agree with the ON_WM_EXITSIZEMOVE macro:","pos":[117361,117451]},{"content":"CFrameWndEx","pos":[117465,117476]},{"content":"CMDIFrameWndEx","pos":[117490,117504]},{"content":"CPaneFrameWnd","pos":[117518,117531]},{"content":"Changed the name and signature of OnDWMCompositionChanged to agree with the ON_WM_DWMCOMPOSITIONCHANGED macro:","pos":[117541,117651]},{"content":"CFrameWndEx","pos":[117665,117676]},{"content":"CMDIFrameWndEx","pos":[117690,117704]},{"content":"CPaneFrameWnd","pos":[117718,117731]},{"content":"Changed the signature of OnMouseLeave method to agree with the ON_WM_MOUSELEAVE macro:","pos":[117741,117827]},{"content":"CMFCCaptionBar","pos":[117841,117855]},{"content":"CMFCColorBar","pos":[117869,117881]},{"content":"CMFCHeaderCtrl","pos":[117895,117909]},{"content":"CMFCProperySheetListBox","pos":[117923,117946]},{"content":"CMFCRibbonBar","pos":[117960,117973]},{"content":"CMFCRibbonPanelMenuBar","pos":[117987,118009]},{"content":"CMFCRibbonRichEditCtrl","pos":[118023,118045]},{"content":"CMFCSpinButtonCtrl","pos":[118059,118077]},{"content":"CMFCToolBar ReplaceThisText","pos":[118091,118118]},{"content":"CMFCToolBarComboBoxEdit","pos":[118132,118155]},{"content":"CMFCToolBarEditCtrl","pos":[118169,118188]},{"content":"CMFCAutoHideBar","pos":[118202,118217]},{"content":"Changed the signature of OnPowerBroadcast to agree with the ON_WM_POWERBROADCAST macro:","pos":[118227,118314]},{"content":"CFrameWndEx","pos":[118328,118339]},{"content":"CMDIFrameWndEx","pos":[118353,118367]},{"content":"Changed the signature of OnStyleChanged to agree with the ON_WM_STYLECHANGED macro:","pos":[118377,118460]},{"content":"CMFCListCtrl","pos":[118474,118486]},{"content":"CMFCStatusBar","pos":[118500,118513]},{"content":"Renamed the internal method FontFamalyProcFonts to FontFamilyProcFonts.","pos":[118523,118594]},{"content":"Removed numerous global static CString objects to eliminate memory leaks in some situations (replaced with #defines), and the following class member variables:","pos":[118604,118763]},{"content":"CKeyBoardManager::m_strDelimiter","pos":[118777,118809]},{"content":"CMFCPropertyGridProperty::m_strFormatChar","pos":[118823,118864]},{"content":"CMFCPropertyGridProperty::m_strFormatShort","pos":[118878,118920]},{"content":"CMFCPropertyGridProperty::m_strFormatLong","pos":[118934,118975]},{"content":"CMFCPropertyGridProperty::m_strFormatUShort","pos":[118989,119032]},{"content":"CMFCPropertyGridProperty::m_strFormatULong","pos":[119046,119088]},{"content":"CMFCPropertyGridProperty::m_strFormatFloat","pos":[119102,119144]},{"content":"CMFCPropertyGridProperty::m_strFormatDouble","pos":[119158,119201]},{"content":"CMFCToolBarImages::m_strPngResType","pos":[119215,119249]},{"content":"CMFCPropertyGridProperty::m_strFormat","pos":[119263,119300]},{"content":"Changed the signature of CKeyboardManager::ShowAllAccelerators and removed the accelerator delimiter parameter.","pos":[119310,119421]},{"content":"Added CPropertyPage::GetParentSheet, and in the CPropertyPage class, call it instead of GetParent to get the correct parent sheet window, which may be the parent or a grandparent window to CPropertyPage.","pos":[119431,119634]},{"content":"You might have to change your code to call GetParentSheet instead ofGetParent.","pos":[119635,119713]},{"content":"Fixed unbalanced #pragma warning(push) in ATLBASE.H, which caused warnings to be disabled incorrectly.","pos":[119723,119825]},{"content":"Those warnings are now enabled correctly after ATLBASE.H has been parsed.","pos":[119826,119899]},{"content":"Moved D2D-related methods from AFX_GLOBAL_DATA to _AFX_D2D_STATE:","pos":[119909,119974]},{"content":"GetDirectD2dFactory","pos":[119988,120007]},{"content":"GetWriteFactory","pos":[120021,120036]},{"content":"GetWICFactory","pos":[120050,120063]},{"content":"InitD2D","pos":[120077,120084]},{"content":"ReleaseD2DRefs","pos":[120098,120112]},{"content":"IsD2DInitialized","pos":[120126,120142]},{"content":"D2D1MakeRotateMatrix","pos":[120156,120176]},{"content":"Instead of calling, for example, afxGlobalData.IsD2DInitialized, call AfxGetD2DState-&gt;IsD2DInitialized.","pos":[120190,120293],"source":"Instead of calling, for example, afxGlobalData.IsD2DInitialized, call AfxGetD2DState->IsD2DInitialized."},{"content":"Removed obsolete ATL*.CPP files from the \\atlmfc\\include\\ folder.","pos":[120303,120368]},{"content":"Moved afxGlobalData initialization to on-demand instead of at CRT initialization time, to satisfy DLLMain requirements.","pos":[120378,120497]},{"content":"Added the RemoveButtonByIndex method to the CMFCOutlookBarPane class.","pos":[120507,120576]},{"content":"Corrected CMFCCmdUsageCount::IsFreqeuntlyUsedCmd to IsFrequentlyUsedCmd.","pos":[120586,120658]},{"content":"Corrected several instances of RestoreOriginalstate to RestoreOriginalState (CMFCToolBar, CMFCMenuBar, CMFCOutlookBarPane).","pos":[120668,120791]},{"content":"Removed unused methods from CDockablePane: SetCaptionStyle, IsDrawCaption, IsHideDisabledButtons, GetRecentSiblingPaneInfo, andCanAdjustLayout.","pos":[120801,120944]},{"content":"Removed CDockablePane static member variables m_bCaptionText and m_bHideDisabledButtons.","pos":[120954,121042]},{"content":"Added an override DeleteString method to CMFCFontComboBox.","pos":[121052,121110]},{"content":"Removed unused methods from CPane: GetMinLength and IsLastPaneOnLastRow.","pos":[121120,121192]},{"content":"Renamed CPane::GetDockSiteRow(CDockingPanesRow *) to CPane::SetDockSiteRow.","pos":[121202,121277]},{"content":"Visual C++ 2010 Breaking Changes","pos":[121286,121318]},{"content":"Compiler","pos":[121328,121336]},{"content":"The auto keyword has a new default meaning.","pos":[121346,121389]},{"content":"Because use of the old meaning is rare, most applications will not be affected by this change.","pos":[121390,121484]},{"content":"The new static_assert keyword is introduced, which will cause a name conflict if there is already an identifier by that name in your code.","pos":[121494,121632]},{"content":"Support for the new lambda notation excludes support for coding an unquoted GUID in an IDL uuid attribute.","pos":[121642,121748]},{"content":"The .NET Framework 4 introduces the concept of corrupted state exceptions, which are exceptions that leave a process in an unrecoverable                 corrupted state.","pos":[121758,121927]},{"content":"By default, you cannot catch a corrupted state exception, even with the /EHa compiler option that catches all other exceptions.","pos":[121928,122055]},{"content":"To explicitly catch a corrupted state exception, use __try-<ph id=\"ph1\">\\_</ph>_except statements.","pos":[122072,122152],"source":"                 To explicitly catch a corrupted state exception, use __try-\\__except statements."},{"content":"Or, apply the [HandledProcessCorruptedStateExceptions]attribute                 to enable a function to catch corrupted state exceptions.","pos":[122153,122290]},{"content":"This change affects primarily system programmers who might have to catch a corrupted                 state exception.","pos":[122292,122409]},{"content":"The eight exceptions are STATUS_ACCESS_VIOLATION, STATUS_STACK_OVERFLOW, EXCEPTION_ILLEGAL_INSTRUCTION,                 EXCEPTION_IN_PAGE_ERROR, EXCEPTION_INVALID_DISPOSITION, EXCEPTION_NONCONTINUABLE_EXCEPTION, EXCEPTION_PRIV_INSTRUCTION, STATUS_UNWIND_CONSOLIDATE.","pos":[122410,122676]},{"content":"For more information about these exceptions, see the <bpt id=\"p1\">[</bpt>GetExceptionCode<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/windows/desktop/ms679356.aspx)</ept> macro.","pos":[122693,122843],"source":"                 For more information about these exceptions, see the [GetExceptionCode](https://msdn.microsoft.com/en-us/library/windows/desktop/ms679356.aspx) macro."},{"content":"The revised /GS compiler option guards against buffer overruns more comprehensively than in earlier versions.","pos":[122853,122962]},{"content":"This version might insert additional security checks in the stack that might decrease performance.","pos":[122963,123061]},{"content":"Use the new __declspec(safebuffers) keyword to instruct the compiler to not insert security checks for a particular function.","pos":[123062,123187]},{"content":"If you compile with both the /GL (Whole Program Optimization) and /clr (Common Language Runtime Compilation) compiler options, the /GLoption is ignored.","pos":[123197,123349]},{"content":"This change was made because the combination of compiler options provided little benefit.","pos":[123350,123439]},{"content":"As a result of this change, the performance of the build is improved.","pos":[123440,123509]},{"content":"By default, support for trigraphs is disabled in Visual C++ 2010 .","pos":[123519,123585]},{"content":"Use the /Zc:trigraphs compiler option to enable trigraphs support.","pos":[123586,123652]},{"content":"A trigraph consists of two consecutive question marks (\"??\") followed by a unique third character.","pos":[123653,123751]},{"content":"The compiler replaces a trigraph with a corresponding punctuation character.","pos":[123752,123828]},{"content":"For example, the compiler replaces the \"??=\" trigraph with the '#' character.","pos":[123829,123906]},{"content":"Use trigraphs in C source files that use a character set that does not contain convenient graphic representations for some punctuation characters.","pos":[123907,124053]},{"content":"The linker no longer supports optimizing for Windows 98.","pos":[124063,124119]},{"content":"The /OPT (Optimizations) option produces a compile time error if you specify/OPT:WIN98 or /OPT:NOWIN98.","pos":[124120,124223]},{"content":"The default compiler options that are specified by the RuntimeLibrary and DebugInformationFormat build system properties have been changed.","pos":[124233,124372]},{"content":"By default, these build properties are specified in projects that are created by Visual C++ releases 7.0 through 10.0.","pos":[124373,124491]},{"content":"If you migrate a project that was created by Visual C++ 6.0, consider whether to specify a value for these properties.","pos":[124492,124610]},{"content":"In Visual C++ 2010, RuntimeLibrary = MultiThreaded (/MD) and DebugInformationFormat = ProgramDatabase (/Zi).","pos":[124620,124728]},{"content":"In Visual C++ 9.0,RuntimeLibrary = MultiThreaded (/MT) and DebugInformationFormat = Disabled.","pos":[124729,124822]},{"content":"CLR","pos":[124832,124835]},{"content":"The Microsoft C# and Visual Basic compilers can now produce a no primary interop assembly (no-PIA).","pos":[124845,124944]},{"content":"A no-PIA assembly can use COM types without the deployment of the relevant primary interop assembly (PIA).","pos":[124945,125051]},{"content":"When consuming no-PIA assemblies produced by Visual C# or Visual Basic, you must reference the PIA assembly on the compile command before you reference any no-PIA assembly that uses the library.","pos":[125052,125246]},{"content":"Visual C++ Projects and MSBuild","pos":[125256,125287]},{"content":"Visual C++ projects are now based on the MSBuild tool.","pos":[125297,125351]},{"content":"Consequently, project files use a new XML file format and a .vcxproj file suffix.","pos":[125352,125433]},{"content":"Visual C++ 2010 automatically converts project files from earlier versions of Visual Studio to the new file format.","pos":[125434,125549]},{"content":"An existing project is affected if it depends on the previous build tool, VCBUILD.exe, or project file suffix, .vcproj.","pos":[125550,125669]},{"content":"In earlier releases, Visual C++ supported the late evaluation of property sheets.","pos":[125679,125760]},{"content":"For example, a parent property sheet could import a child property sheet, and the parent could use a variable defined in the child to define other variables.","pos":[125761,125918]},{"content":"Late evaluation enabled the parent to use the child variable even before the child property sheet was imported.","pos":[125919,126030]},{"content":"In Visual C++ 2010, a project sheet variable cannot be used before it is defined because MSBuild supports only early evaluation.","pos":[126031,126159]},{"content":"IDE","pos":[126169,126172]},{"content":"The application termination dialog box no longer ends an application.","pos":[126182,126251]},{"content":"In previous releases, when the abort() or terminate() function closed the                 retail build of an application, the C Run-Time Library displayed an application termination message in a console window or dialog box.","pos":[126252,126476]},{"content":"The message said in part, \"This                 application has requested the Runtime to terminate it in an unusual way.","pos":[126477,126597]},{"content":"Please contact the application's support team for more information.\"","pos":[126598,126666]},{"content":"The application termination message was redundant because Windows subsequently displayed the current termination handler, which was usually the Windows Error Reporting                 (Dr. Watson) dialog box or the Visual Studio debugger.","pos":[126683,126921]},{"content":"Starting in Visual Studio 2010, the C Run-Time Library does not display the message.","pos":[126922,127006]},{"content":"Furthermore, the runtime                 prevents the application from ending before a debugger starts.","pos":[127007,127110]},{"content":"This is a breaking change only if you depend on the previous behavior of the application termination                 message.","pos":[127111,127236]},{"content":"Specifically for Visual Studio 2010, IntelliSense does not work for C++/CLI code or attributes, Find All References does not work for local                 variables, and Code Model does not retrieve type names from imported assemblies or resolve types to their fully qualified names.","pos":[127246,127530]},{"content":"Libraries","pos":[127540,127549]},{"content":"The SafeInt class is included in Visual C++ and is no longer in a separate download.","pos":[127559,127643]},{"content":"This is a breaking change only if you have developed a class that is also named \"SafeInt\".","pos":[127644,127734]},{"content":"The libraries deployment model no longer uses manifests to find a particular version of a dynamic link library.","pos":[127744,127855]},{"content":"Instead, the name of each dynamic link library contains its version number, and you use that name to locate the library.","pos":[127856,127976]},{"content":"In previous versions of Visual Studio, you could rebuild the run time libraries.","pos":[127986,128066]},{"content":"Visual C++ 2010 no longer supports building your own copies of the C run time library files.","pos":[128067,128159]},{"content":"Standard Library","pos":[128169,128185]},{"content":"The <ph id=\"ph1\">\\&lt;</ph>iterator&gt;                 header is no longer included automatically by many other header files.","pos":[128195,128297],"source":"The \\<iterator>                 header is no longer included automatically by many other header files."},{"content":"Instead, include that header explicitly if you require support                 for the standalone iterators defined in the An existing project is affected if it depends on the previous build tool, VCBUILD.exe, or project file suffix,                  .vcproj.interator&gt; header.","pos":[128298,128575],"source":" Instead, include that header explicitly if you require support                 for the standalone iterators defined in the An existing project is affected if it depends on the previous build tool, VCBUILD.exe, or project file suffix,                  .vcproj.interator> header."},{"content":"In the <ph id=\"ph1\">\\&lt;</ph>algorithm&gt;                 header, the checked_* and unchecked_<ph id=\"ph2\">\\*</ph> functions are removed.","pos":[128585,128682],"source":"In the \\<algorithm>                 header, the checked_* and unchecked_\\* functions are removed."},{"content":"And in the <ph id=\"ph1\">\\&lt;</ph>iterator&gt;&gt; header, the                  checked_iteratorclass is removed, and the unchecked_array_iterator class has been added.","pos":[128683,128824],"source":" And in the \\<iterator>> header, the                  checked_iteratorclass is removed, and the unchecked_array_iterator class has been added."},{"content":"The CComPtr::CComPtr(int) constructor is removed.","pos":[128834,128883]},{"content":"That constructor allowed a CComPtr object to be constructed from the NULL macro, but was unnecessary and allowed nonsensical constructions from non-zero integers.","pos":[128884,129046]},{"content":"A CComPtr can still be constructed from NULL, which is defined as 0, but will fail if constructed from an integer other than literal 0.","pos":[129057,129192]},{"content":"use nullptr instead.","pos":[129193,129213]},{"content":"The following ctype member functions were removed: ctype::_Do_narrow_s, ctype::_Do_widen_s, ctype::_narrow_s, ctype::_widen_s.","pos":[129223,129349]},{"content":"If an application uses one of these member functions, you must replace it with the corresponding non-secure version: ctype::do_narrow,ctype::do_widen, ctype::narrow, ctype::widen.","pos":[129350,129529]},{"content":"CRT, MFC, and ATL Libraries","pos":[129539,129566]},{"content":"Support has been removed for users to build the CRT, MFC, and ATL libraries.","pos":[129576,129652]},{"content":"For example, an appropriate nmake file is not provided.","pos":[129653,129708]},{"content":"However, users still have access to the source code for these libraries.","pos":[129725,129797]},{"content":"And a document that describes the MSBuild options that Microsoft uses to build these                 libraries will probably be posted in a Visual C++ Team Blog.","pos":[129798,129959]},{"content":"MFC support for IA64 has been removed.","pos":[129969,130007]},{"content":"However, support for the CRT and ATL on IA64 is still provided.","pos":[130008,130071]},{"content":"Ordinals are no longer reused in MFC module-definition (.def) files.","pos":[130081,130149]},{"content":"This change means ordinals will not be different between minor versions, and binary compatibility for service packs and quick fix engineering releases will be improved.","pos":[130150,130318]},{"content":"A new virtual function was added to the CDocTemplate class.","pos":[130328,130387]},{"content":"This new virtual function is <bpt id=\"p1\">[</bpt>CDocTemplate Class<ept id=\"p1\">](../mfc/reference/cdoctemplate-class.md)</ept>.","pos":[130388,130478],"source":" This new virtual function is [CDocTemplate Class](../mfc/reference/cdoctemplate-class.md)."},{"content":"The previous version of OpenDocumentFile had two parameters.","pos":[130479,130539]},{"content":"The new version has three parameters.","pos":[130540,130577]},{"content":"To support the restart manager, any class derived from CDocTemplate must implement the version that has three parameters.","pos":[130578,130699]},{"content":"The new parameter is bAddToMRU.","pos":[130700,130731]},{"content":"Macros and Environment Variables","pos":[130741,130773]},{"content":"The environment variable __MSVCRT_HEAP_SELECT is no longer supported.","pos":[130783,130852]},{"content":"This environment variable is removed and there is no replacement.","pos":[130853,130918]},{"content":"Microsoft Macro Assembler Reference","pos":[130928,130963]},{"content":"Several directives were removed from the Microsoft Macro Assembler Reference compiler.","pos":[130973,131059]},{"content":"The removed directives are .186, .286, .286P, .287,.8086, .8087, and .NO87.","pos":[131060,131135]},{"content":"Visual C++ 2008 Breaking Changes","pos":[131144,131176]},{"content":"Compiler","pos":[131186,131194]},{"content":"The Windows 95, Windows 98, Windows ME, and Windows NT platforms are no longer supported.","pos":[131204,131293]},{"content":"These operating systems have been removed from the list of targeted platforms.","pos":[131294,131372]},{"content":"The compiler no longer supports multiple attributes that were directly associated with ATL Server.","pos":[131382,131480]},{"content":"The following attributes are no longer supported:","pos":[131481,131530]},{"content":"perf_counter","pos":[131544,131556]},{"content":"perf_object","pos":[131570,131581]},{"content":"perfmon","pos":[131595,131602]},{"content":"request_handler","pos":[131616,131631]},{"content":"soap_handler","pos":[131645,131657]},{"content":"soap_header","pos":[131671,131682]},{"content":"soap_method","pos":[131696,131707]},{"content":"tag_name","pos":[131721,131729]},{"content":"Visual C++ Projects","pos":[131739,131758]},{"content":"When upgrading projects from previous versions of Visual Studio, you might have to modify the WINVER and _WIN32_WINNT macros so that they are greater than or equal to 0x0500.","pos":[131768,131942]},{"content":"Beginning with Visual Studio 2008, the new project wizard does not have an option to create a C++ SQL Server project.","pos":[131952,132069]},{"content":"SQL Server projects created by using an earlier version of Visual Studio will still compile and work correctly.","pos":[132070,132181]},{"content":"The Windows API header file Winable.h has been removed.","pos":[132191,132246]},{"content":"Include Winuser.h instead.","pos":[132247,132273]},{"content":"The Windows API library Rpcndr.lib has been removed.","pos":[132283,132335]},{"content":"Link with rpcrt4.lib instead.","pos":[132336,132365]},{"content":"CRT","pos":[132375,132378]},{"content":"Support for Windows 95, Windows 98, Windows Millennium Edition, and Windows NT 4.0 has been removed.","pos":[132388,132488]},{"content":"The following global variables have been removed:","pos":[132498,132547]},{"content":"_osplatform","pos":[132561,132572]},{"content":"_osver","pos":[132586,132592]},{"content":"_winmajor","pos":[132606,132615]},{"content":"_winminor","pos":[132629,132638]},{"content":"_winver","pos":[132652,132659]},{"content":"The following functions have been removed.","pos":[132669,132711]},{"content":"Use the Windows API functions GetVersion or GetVersionEx instead:","pos":[132712,132777]},{"content":"_get_osplatform","pos":[132791,132806]},{"content":"_get_osver","pos":[132820,132830]},{"content":"_get_winmajor","pos":[132844,132857]},{"content":"_get_winminor","pos":[132871,132884]},{"content":"_get_winver","pos":[132898,132909]},{"content":"The syntax for SAL Annotations has changed.","pos":[132919,132962]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>SAL Annotations<ept id=\"p1\">](../c-runtime-library/sal-annotations.md)</ept>.","pos":[132963,133048],"source":" For more information, see [SAL Annotations](../c-runtime-library/sal-annotations.md)."},{"content":"The IEEE filter now supports the SSE 4.1 instruction set.","pos":[133058,133115]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>_fpieee_flt<ept id=\"p1\">](../c-runtime-library/reference/fpieee-flt.md)</ept>_fpieee_flt.","pos":[133116,133213],"source":" For more information, see [_fpieee_flt](../c-runtime-library/reference/fpieee-flt.md)_fpieee_flt."},{"content":"The C Run-Time Libraries that ship with Visual Studio are no longer dependent on the system DLL msvcrt.dll.","pos":[133223,133330]},{"content":"Standard Library","pos":[133340,133356]},{"content":"Support for Windows 95, Windows 98, Windows Millennium Edition, and Windows NT 4.0 has been removed.","pos":[133366,133466]},{"content":"When compiling in debug mode with _HAS_ITERATOR_DEBUGGING defined, an application will now assert when an iterator attempts to increment or decrement past the bounds of the underlying container.","pos":[133476,133670]},{"content":"The member variable c of the stack Class is now declared protected.","pos":[133680,133747]},{"content":"Previously, this member variable was declared public.","pos":[133748,133801]},{"content":"The behavior of money_get::do_get has changed.","pos":[133811,133857]},{"content":"Previously, when parsing a monetary amount with more fraction digits than are called for by frac_digits, do_get used to consume them all.","pos":[133858,133995]},{"content":"Now, do_get stops parsing after consuming at most frac_digits characters.","pos":[133996,134069]},{"content":"ATL","pos":[134079,134082]},{"content":"ATL cannot be built without a dependency on CRT.","pos":[134092,134140]},{"content":"In earlier versions of Visual Studio, you could use #define ATL_MIN_CRT to make an ATL project minimally dependent on CRT.","pos":[134141,134263]},{"content":"In Visual C++ 2008, all ATL projects are minimally dependent on CRT regardless of whether ATL_MIN_CRT is defined.","pos":[134264,134377]},{"content":"The ATL Server codebase has been released as a shared source project on CodePlex and is not installed as part of Visual Studio.","pos":[134387,134514]},{"content":"Data encoding and decoding classes from atlenc.h and utility functions and classes from atlutil.h and atlpath.h have been kept and are now part of the ATL library.","pos":[134515,134678]},{"content":"Several files associated with ATL Server are no longer part of Visual Studio.","pos":[134679,134756]},{"content":"Some functions are no longer included in the DLL.","pos":[134766,134815]},{"content":"They are still located in the import library.","pos":[134816,134861]},{"content":"This will not affect code that uses the functions statically.","pos":[134862,134923]},{"content":"It will affect only the code that uses these functions dynamically.","pos":[134924,134991]},{"content":"The macros PROP_ENTRY and PROP_ENTRY_EX have been deprecated and replaced with the macros PROP_ENTRY_TYPE andPROP_ENTRY_TYPE_EX for security reasons.","pos":[135001,135150]},{"content":"ATL/MFC Shared Classes","pos":[135160,135182]},{"content":"ATL cannot be built without a dependency on CRT.","pos":[135192,135240]},{"content":"In earlier versions of Visual Studio, you could use #define ATL_MIN_CRT to make an ATL project minimally dependent on CRT.","pos":[135241,135363]},{"content":"In Visual C++ 2008, all ATL projects are minimally dependent on CRT regardless of whether ATL_MIN_CRT is defined.","pos":[135364,135477]},{"content":"The ATL Server codebase has been released as a shared source project on CodePlex and is not installed as part of Visual Studio.","pos":[135487,135614]},{"content":"Data encoding and decoding classes from atlenc.h and utility functions and classes from atlutil.h and atlpath.h have been kept and are now part of the ATL library.","pos":[135615,135778]},{"content":"Several files associated with ATL Server are no longer part of Visual Studio.","pos":[135779,135856]},{"content":"Some functions are no longer included in the DLL.","pos":[135866,135915]},{"content":"They are still located in the import library.","pos":[135916,135961]},{"content":"This will not affect code that uses the functions statically.","pos":[135962,136023]},{"content":"It will affect only the code that uses these functions dynamically.","pos":[136024,136091]},{"content":"MFC","pos":[136101,136104]},{"content":"CTime Class The CTime class now accepts dates starting from 1/1/1900 C.E.","pos":[136114,136187]},{"content":"instead of 1/1/1970 C.E.","pos":[136188,136212]},{"content":"Tab order of controls in MFC dialogs The correct tab order of multiple controls in an MFC dialog is disturbed if an MFC ActiveX control is inserted in the tab order.","pos":[136229,136394]},{"content":"This change corrects that problem.","pos":[136395,136429]},{"content":"For example, create an MFC dialog application that has an ActiveX control and several edit controls.","pos":[136440,136540]},{"content":"Position the ActiveX control in the middle of the tab order of the edit controls.","pos":[136541,136622]},{"content":"Start the application, click an edit control whose tab order is after the ActiveX control, then tab.","pos":[136623,136723]},{"content":"Prior to this change, the focus went to the edit control following the ActiveX control instead of the next edit control in the tab order.","pos":[136724,136861]},{"content":"CFileDialog Class   Custom templates for the CFileDialog class cannot be automatically ported to Windows Vista.","pos":[136871,136982]},{"content":"They are still usable, but will not have the additional functionality or looks of Windows Vista style dialogs.","pos":[136983,137093]},{"content":"CWnd ClassandCFrameWnd Class    The CWnd::GetMenuBarInfo method was removed.","pos":[137103,137179]},{"content":"The CFrameWnd::GetMenuBarInfo method is now a non-virtual method.","pos":[137196,137261]},{"content":"For more information, see GetMenuBarInfo Functionin the Windows SDK.","pos":[137262,137330]},{"content":"MFC ISAPI support  MFC no longer supports building applications with the Internet Server Application Programming Interface (ISAPI).","pos":[137347,137478]},{"content":"If you want to build an ISAPI application, call the ISAPI extensions directly.","pos":[137479,137557]},{"content":"Deprecated ANSI APIs    The ANSI versions of several MFC methods are deprecated.","pos":[137567,137647]},{"content":"Use the Unicode versions of those methods in your future applications.","pos":[137648,137718]},{"content":"For more information, see Build Requirements for Windows Vista Common Controls.","pos":[137719,137798]},{"content":"Visual C++ 2005 Breaking Changes","pos":[137807,137839]},{"content":"CRT","pos":[137849,137852]},{"content":"Many functions have been deprecated.","pos":[137862,137898]},{"content":"See Deprecated CRT Functions.","pos":[137899,137928]},{"content":"Many functions now validate their parameters, halting execution if given invalid parameters.","pos":[137938,138030]},{"content":"This may break code that passes invalid parameters and relies on the function ignoring them or just returning an error code.","pos":[138031,138155]},{"content":"See Parameter Validation.","pos":[138156,138181]},{"content":"The file descriptor value -2 is now used to indicate that stdout and stderr are not available for output, as for example in a Windows application that has no console window.","pos":[138191,138364]},{"content":"The previous value used was -1.","pos":[138365,138396]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>_fileno<ept id=\"p1\">](../c-runtime-library/reference/fileno.md)</ept>.","pos":[138397,138475],"source":" For more information, see [_fileno](../c-runtime-library/reference/fileno.md)."},{"content":"The single-threaded CRT libraries, libc.lib and libcd.lib, have been removed.","pos":[138485,138562]},{"content":"Use the multi-threaded CRT libraries.","pos":[138563,138600]},{"content":"The /ML compiler flag is no longer supported.","pos":[138601,138646]},{"content":"Non-locking versions of some functions have been added in cases where the performance difference between the multithreaded code and the single-threaded code is potentially significant.","pos":[138647,138831]},{"content":"The overload of pow, double pow(int, int), was removed to better conform with the standard.","pos":[138841,138932]},{"content":"The %n format specifier is no longer supported by default in any of the printf family of functions because it is inherently insecure.","pos":[138942,139075]},{"content":"The default behavior if %n is encountered is to invoke the invalid parameter handler.","pos":[139076,139161]},{"content":"To enable %n support, use _set_printf_count_output (also see_get_printf_count_output).","pos":[139162,139248]},{"content":"sprintf now prints the negative sign of a signed zero.","pos":[139258,139312]},{"content":"swprintf has been changed to conform with the Standard; it now requires a size parameter.","pos":[139322,139411]},{"content":"The form of swprintf without a size parameter has been deprecated.","pos":[139412,139478]},{"content":"_set_security_error_handler has been removed.","pos":[139488,139533]},{"content":"Remove any calls to that function; the default handler is a much safer way of dealing with security errors.","pos":[139534,139641]},{"content":"time_t is now a 64-bit value (unless _USE_32BIT_TIME_T is defined).","pos":[139651,139718]},{"content":"The _spawn, _wspawn Functions now leave errno untouched on success, as specified by the C Standard.","pos":[139728,139827]},{"content":"RTC now uses wide characters by default.","pos":[139837,139877]},{"content":"Floating-point control word support functions have been deprecated for applications compiled with /CLR or /CLR:PURE.","pos":[139887,140003]},{"content":"The affected functions are _clear87, _clearfp, _control87, _controlfp, _fpreset, _status87, _statusfp.","pos":[140004,140106]},{"content":"You can disable the deprecation warning by defining _CRT_MANAGED_FP_NO_DEPRECATE, but the use of these functions in managed code is unpredictable and unsupported.","pos":[140107,140269]},{"content":"Some functions now return const pointers.","pos":[140279,140320]},{"content":"The old, non-const behavior can be reinstated by defining _CONST_RETURN.","pos":[140321,140393]},{"content":"The affected functions are","pos":[140394,140420]},{"content":"memchr, wmemchr","pos":[140434,140449]},{"content":"strchr, wcschr, _mbschr, _mbschr_l","pos":[140463,140497]},{"content":"strpbrk, wcspbrk, _mbspbrk, _mbspbrk_l","pos":[140511,140549]},{"content":"strrchr, wcsrchr, _mbsrchr, _mbsrchr_l","pos":[140563,140601]},{"content":"strstr, wcsstr, _mbsstr, _mbsstr_l","pos":[140615,140649]},{"content":"When linking with Setargv.obj or Wsetargv.obj, it is no longer possible to suppress the expansion of a wildcard character on the command line by enclosing it in double quotes.","pos":[140659,140834]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Expanding Wildcard Arguments<ept id=\"p1\">](../c-language/expanding-wildcard-arguments.md)</ept>.","pos":[140835,140939],"source":" For more information, see [Expanding Wildcard Arguments](../c-language/expanding-wildcard-arguments.md)."},{"content":"Standard Library (2005)","pos":[140949,140972]},{"content":"The exception class (located in the <ph id=\"ph1\">\\&lt;</ph>exception&gt; header) has been moved to the std namespace.","pos":[140982,141075],"source":"The exception class (located in the \\<exception> header) has been moved to the std namespace."},{"content":"In previous versions, this class was in the global namespace.","pos":[141076,141137]},{"content":"To resolve any errors indicating that the exception class cannot be found, add the following using statement to your code:                 using namespace std;","pos":[141138,141297]},{"content":"When calling valarray::resize(), the contents of the valarray will be lost and will be replaced by default values.","pos":[141307,141421]},{"content":"The resize() method is intended to reinitialize the valarray rather than grow it dynamically like a vector.","pos":[141422,141529]},{"content":"Debug Iterators: Applications built with a debug version of the C-Runtime Library and which use iterators incorrectly might begin to see asserts at runtime.","pos":[141539,141695]},{"content":"To disable these asserts, you must define _HAS_ITERATOR_DEBUGGING to 0.","pos":[141696,141767]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Debug Iterator Support<ept id=\"p1\">](../standard-library/debug-iterator-support.md)</ept>","pos":[141768,141865],"source":" For more information, see [Debug Iterator Support](../standard-library/debug-iterator-support.md)"},{"content":"Visual C++ .NET 2003 Breaking Changes","pos":[141874,141911]},{"content":"Compiler","pos":[141921,141929]},{"content":"Closing parentheses now required for the defined preprocessor directive (C2004).","pos":[141939,142019]},{"pos":[142029,142197],"content":"Explicit specializations no longer find template parameters from primary template (<bpt id=\"p1\">[</bpt>Compiler Error C2146<ept id=\"p1\">](../error-messages/compiler-errors-1/compiler-error-c2146.md)</ept>).","source":"Explicit specializations no longer find template parameters from primary template ([Compiler Error C2146](../error-messages/compiler-errors-1/compiler-error-c2146.md))."},{"pos":[142207,142439],"content":"A protected member (n) can only be accessed through a member function of a class (B) that inherits from the class (A) of which it (n) is a member (<bpt id=\"p1\">[</bpt>Compiler Error C2247<ept id=\"p1\">](../error-messages/compiler-errors-1/compiler-error-c2247.md)</ept>).","source":"A protected member (n) can only be accessed through a member function of a class (B) that inherits from the class (A) of which it (n) is a member ([Compiler Error C2247](../error-messages/compiler-errors-1/compiler-error-c2247.md))."},{"pos":[142449,142614],"content":"Improved accessibility checks in compiler now detect inaccessible base classes (<bpt id=\"p1\">[</bpt>Compiler Error C2248<ept id=\"p1\">](../error-messages/compiler-errors-1/compiler-error-c2248.md)</ept>).","source":"Improved accessibility checks in compiler now detect inaccessible base classes ([Compiler Error C2248](../error-messages/compiler-errors-1/compiler-error-c2248.md))."},{"content":"An exception cannot be caught if the destructor and/or copy constructor is inaccessible (C2316).","pos":[142624,142720]},{"pos":[142730,142877],"content":"Default arguments on pointers to functions no longer allowed (<bpt id=\"p1\">[</bpt>Compiler Error C2383<ept id=\"p1\">](../error-messages/compiler-errors-1/compiler-error-c2383.md)</ept>).","source":"Default arguments on pointers to functions no longer allowed ([Compiler Error C2383](../error-messages/compiler-errors-1/compiler-error-c2383.md))."},{"pos":[142887,143034],"content":"A static data member cannot be initialized via derived class (<bpt id=\"p1\">[</bpt>Compiler Error C2477<ept id=\"p1\">](../error-messages/compiler-errors-1/compiler-error-c2477.md)</ept>).","source":"A static data member cannot be initialized via derived class ([Compiler Error C2477](../error-messages/compiler-errors-1/compiler-error-c2477.md))."},{"pos":[143044,143228],"content":"The initialization of a typedef is not allowed by the standard and now generates a compiler error (<bpt id=\"p1\">[</bpt>Compiler Error C2513<ept id=\"p1\">](../error-messages/compiler-errors-2/compiler-error-c2513.md)</ept>).","source":"The initialization of a typedef is not allowed by the standard and now generates a compiler error ([Compiler Error C2513](../error-messages/compiler-errors-2/compiler-error-c2513.md))."},{"pos":[143238,143350],"content":"bool is now a proper type (<bpt id=\"p1\">[</bpt>Compiler Error C2632<ept id=\"p1\">](../error-messages/compiler-errors-2/compiler-error-c2632.md)</ept>).","source":"bool is now a proper type ([Compiler Error C2632](../error-messages/compiler-errors-2/compiler-error-c2632.md))."},{"pos":[143360,143488],"content":"A UDC can now create ambiguity with overloaded operators (<bpt id=\"p1\">[</bpt>C2666<ept id=\"p1\">](../error-messages/compiler-errors-2/compiler-error-c2666.md)</ept>).","source":"A UDC can now create ambiguity with overloaded operators ([C2666](../error-messages/compiler-errors-2/compiler-error-c2666.md))."},{"pos":[143498,143649],"content":"More expressions are now considered valid null pointer constants (<bpt id=\"p1\">[</bpt>Compiler Error C2668<ept id=\"p1\">](../error-messages/compiler-errors-2/compiler-error-c2668.md)</ept>).","source":"More expressions are now considered valid null pointer constants ([Compiler Error C2668](../error-messages/compiler-errors-2/compiler-error-c2668.md))."},{"pos":[143659,143827],"content":"template&lt;&gt; is now required in places where the compiler would previously imply it (<bpt id=\"p1\">[</bpt>Compiler Error C2768<ept id=\"p1\">](../error-messages/compiler-errors-2/compiler-error-c2768.md)</ept>).","source":"template<> is now required in places where the compiler would previously imply it ([Compiler Error C2768](../error-messages/compiler-errors-2/compiler-error-c2768.md))."},{"pos":[143837,144096],"content":"The expilicit specialization of a member function ourside the class is not valid if the function has already been explicitly specialized via a template class specialization (<bpt id=\"p1\">[</bpt>Compiler Error C2910<ept id=\"p1\">](../error-messages/compiler-errors-2/compiler-error-c2910.md)</ept>).","source":"The expilicit specialization of a member function ourside the class is not valid if the function has already been explicitly specialized via a template class specialization ([Compiler Error C2910](../error-messages/compiler-errors-2/compiler-error-c2910.md))."},{"pos":[144106,144258],"content":"Floating point non-type template parameters are no longer allowed (<bpt id=\"p1\">[</bpt>Compiler Error C2993<ept id=\"p1\">](../error-messages/compiler-errors-2/compiler-error-c2993.md)</ept>).","source":"Floating point non-type template parameters are no longer allowed ([Compiler Error C2993](../error-messages/compiler-errors-2/compiler-error-c2993.md))."},{"content":"Class templates are not allowed as template type arguments (C3206).","pos":[144268,144335]},{"pos":[144345,144504],"content":"Friend function names are no longer introduced into containing namespace (<bpt id=\"p1\">[</bpt>Compiler Error C3767<ept id=\"p1\">](../error-messages/compiler-errors-2/compiler-error-c3767.md)</ept>).","source":"Friend function names are no longer introduced into containing namespace ([Compiler Error C3767](../error-messages/compiler-errors-2/compiler-error-c3767.md))."},{"content":"The compiler will no longer accept extra commas in a macro (C4002).","pos":[144514,144581]},{"content":"An object of POD type constructed with an initializer of the form () will be default-initialized (C4345).","pos":[144591,144696]},{"pos":[144706,144886],"content":"typename is now required if a dependent name is to be treated as a type (<bpt id=\"p1\">[</bpt>Compiler Warning (level 1) C4346<ept id=\"p1\">](../error-messages/compiler-warnings/compiler-warning-level-1-c4346.md)</ept>).","source":"typename is now required if a dependent name is to be treated as a type ([Compiler Warning (level 1) C4346](../error-messages/compiler-warnings/compiler-warning-level-1-c4346.md))."},{"content":"Functions that were incorrectly considered template specializations are no longer considered so (C4347).","pos":[144896,145000]},{"content":"Static data members cannot be initialized via derived class (C4356).","pos":[145010,145078]},{"pos":[145088,145284],"content":"A class template specialization needs to be defined before it was used in a return type (<bpt id=\"p1\">[</bpt>Compiler Warning (level 3) C4686<ept id=\"p1\">](../error-messages/compiler-warnings/compiler-warning-level-3-c4686.md)</ept>).","source":"A class template specialization needs to be defined before it was used in a return type ([Compiler Warning (level 3) C4686](../error-messages/compiler-warnings/compiler-warning-level-3-c4686.md))."},{"content":"The compiler now reports unreachable code (C4702).","pos":[145294,145344]},{"content":"See Also","pos":[145353,145361]},{"content":"What's New for Visual C++ in Visual Studio","pos":[145365,145407]}],"content":"---\ntitle: \"Visual C++ change history 2003 - 2015 | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"breaking changes [C++]\"\nms.assetid: b38385a9-a483-4de9-99a6-797488bc5110\ncaps.latest.revision: 124\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"ru-ru\"\n  - \"zh-cn\"\n  - \"zh-tw\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"tr-tr\"\n---\n# Visual C++ change history 2003 - 2015\nWhen you upgrade to a new version of the Visual C++ compiler, you might encounter compilation and/or runtime errors in code that previously compiled and ran correctly. Changes in the new version that cause such problems are known as *breaking changes*, and typically they're required by modifications in the C++ language standard, function signatures, or the layout of objects in memory.  \n  \n To avoid run-time errors that are difficult to detect and diagnose, we recommend that you never statically link to binaries that were compiled by using different versions of the compiler. Also, when you upgrade an EXE or DLL project, make sure to upgrade the libraries that it links to. If you're using CRT (C Runtime) or STL (Standard Template Library) types, don't pass them between binaries (including DLLs) that were compiled by using different versions of the compiler. For more information, see [Potential Errors Passing CRT Objects Across DLL Boundaries](../c-runtime-library/potential-errors-passing-crt-objects-across-dll-boundaries.md).  \n  \n We further recommend that you never write code that depends on a particular layout for an object that is not a COM interface or a POD object. If you do write such code, then you must ensure that it works after you upgrade. For more information, see [Portability At ABI Boundaries](../cpp/portability-at-abi-boundaries-modern-cpp.md).  \n  \n Additionally, ongoing improvements to compiler conformance can sometimes change how the compiler understands your existing source code. When this happens, you might encounter new or different errors during your build, or even behavioral differences in code that previously built and seemed to run correctly. Although these are not breaking changes like the ones discussed in this document, source code changes might be needed to resolve these issues.  \n  \n This article describes all the breaking changes going back to Visual Studio 2003, and in this article the terms \"new behavior\" or \"now\" refer to Visual Studio 2015. The terms \"old behavior\" and \"before\" refer to Visual Studio 2013 and earlier releases.  \n  \n1.  [C Runtime (CRT) Library Breaking Changes](#BK_CRT)  \n  \n2.  [Standard C++ and Standard Template Library (STL) Breaking Changes](#BK_STL)  \n  \n3.  [MFC and ATL Breaking Changes](#BK_MFC)  \n  \n4.  [Concurrency Runtime Breaking Changes](#BK_ConcRT)  \n  \n## <a name=\"VC_2015\"></a> Visual C++ 2015 Conformance Changes  \n  \n###  <a name=\"BK_CRT\"></a> C Runtime Library (CRT)  \n  \n#### General Changes  \n  \n-   **Refactored binaries** The CRT Library  has been refactored into a two different binaries, a Universal CRT (ucrtbase), which contains most of the standard functionality, and a VC Runtime Library (vcruntime140), which contains the compiler-related functionality, such as exception handling, and intrinsics. If you are using the default project settings, then this change does not impact you since the linker will use the new default libraries automatically. If you have set the project's **Linker** property **Ignore All Default Libraries** to **Yes** or you are using the /NODEFAULTLIB linker option on the command line, then you must update your list of libraries (in the **Additional Dependencies** property) to include the new, refactored libraries. Replace the old CRT library (libcmt.lib, libcmtd.lib, msvcrt.lib, msvcrtd.lib) with the equivalent refactored libraries. For each of the two refactored libraries, there are static (.lib) and dynamic (.dll) versions, and release (with no suffix) and debug versions (with the \"d\" suffix). The dynamic versions have an import library that you link with. The two refactored libraries are Universal CRT, specifically ucrtbase.dll or .lib, ucrtbased.dll or .lib, and the VC runtime library, libvcruntime.lib, libvcruntime.dll, libvcruntimed.lib, and libvcruntimed.dll. See [CRT Library Features](../c-runtime-library/crt-library-features.md).  \n  \n#### \\<locale.h>  \n  \n-   **localeconv** The [localeconv](../c-runtime-library/reference/localeconv.md) function declared in locale.h now works correctly when [per-thread locale](../parallel/multithreading-and-locales.md) is enabled. In previous versions of the library, this function would return the lconv data for the global locale, not the thread's locale.  \n  \n     If you use per thread locale, you should check your use of localeconv to see if your code assumes that the lconv data returned is for the global locale and modify it appropriately.  \n  \n#### \\<math.h>  \n  \n-   **C++ overloads of math library functions** In previous versions, \\<math.h> defined some, but not all, of the C++ overloads for the math library functions. \\<cmath> defined the remaining overloads, so to get all of the overloads, one needed to include the \\<cmath> header. This led to problems with function overload resolution in code that only included \\<math.h>. Now, all C++ overloads have been removed from \\<math.h> and are now present only in \\<cmath>.  \n  \n     To resolve errors, include <cmath> to get the declarations of the functions that were removed from \\<math.h>. The following table lists the functions that were moved.  \n  \n     Functions that were moved:  \n  \n    1.  double abs(double) and float abs(float)  \n  \n    2.  double pow(double, int), float pow(float, float), float pow(float, int), long double pow(long double, long double), long double pow(long double, int)  \n  \n    3.  float and long double versions of floating point functions acos, acosh, asin, asinh, atan, atanh, atan2, cbrt, ceil, copysign, cos, cosh, erf, erfc, exp, exp2, expm1, fabs, fdim, floor, fma, fmax, fmin, fmod, frexp, hypot, ilogb, ldexp, lgamma, llrint, llround, log, log10, log1p, log2, lrint, lround, modf, nearbyint, nextafter, nexttoward, remainder, remquo, rint, round, scalbln, scalbn, sin, sinh, sqrt, tan, tanh, tgamma, trunc  \n  \n     If you have code that uses abs with a floating point type that only includes the math.h header, the floating point versions will no longer be available, so the call, even with a floating point argument, now resolves to abs(int). This produces the error:  \n  \n    ```Output  \n    warning C4244: 'argument' : conversion from 'float' to 'int', possible loss of data  \n    ```  \n  \n     The fix for this warning is to replace the call to abs with a floating point version of abs, such as fabs for a double argument or fabsf for a float argument, or include the cmath header and continue to use abs.  \n  \n-   **Floating point conformance** Many changes to the math library have been made to improve conformance to the IEEE-754 and C11 Annex F specifications with respect to special case inputs such as NaNs and infinities. For example, quiet NaN inputs, which were often treated as errors in previous versions of the library, are no longer treated as errors. See [IEEE 754 Standard](http://grouper.ieee.org/groups/754) and Annex F of the [C11 Standard](http://www.iso-9899.info/wiki/The_Standard).  \n  \n     These changes won't cause compile-time errors, but might cause programs to behave differently and more correctly according to the standard.  \n  \n-   **FLT_ROUNDS** In Visual Studio 2013, the FLT_ROUNDS macro expanded to a constant expression, which was incorrect because the rounding mode is configurable at runtime, for example, by calling fesetround. The FLT_ROUNDS macro is now dynamic and correctly reflects the current rounding mode.  \n  \n#### \\<new> and \\<new.h>  \n  \n-   **new and delete** In previous versions of the library, the implementation-defined operator new and delete functions were exported from the runtime library DLL (for example, msvcr120.dll). These operator functions are now always statically linked into your binaries, even when using the runtime library DLLs.  \n  \n     This is not a breaking change for native or mixed code (/clr), however for code compiled as [/clr:pure](../build/reference/clr-common-language-runtime-compilation.md), this might cause your code to fail to compile. If you compile code as /clr:pure, you may need to add #include \\<new> or #include \\<new.h> to work around build errors due to this change. Note that /clr:pure is deprecated in [!INCLUDE[vs_dev14](../ide/includes/vs_dev14_md.md)] and might be removed in future releases.  \n  \n#### \\<process.h>  \n  \n-   **_beginthread and _beginthreadex** The [_beginthread](../c-runtime-library/reference/beginthread-beginthreadex.md) and [_beginthreadex](../c-runtime-library/reference/beginthread-beginthreadex.md) functions now hold a reference to the module in which the thread procedure is defined for the duration of the thread. This helps to ensure that modules are not unloaded until a thread has run to completion.  \n  \n#### \\<stdarg.h>  \n  \n-   **va_start and reference types** When compiling C++ code, [va_start](../c-runtime-library/reference/va-arg-va-copy-va-end-va-start.md) now validates at compile-time that the argument passed to it is not of reference type. Reference-type arguments are prohibited by the C++ Standard.  \n  \n#### \\<stdio.h> and \\<conio.h>  \n  \n-   **The printf and scanf family of functions are now defined inline.** The definitions of all of the printf and scanf functions have been moved inline into \\<stdio.h>, \\<conio.h>, and other CRT headers. This is a breaking change that leads to a linker error (LNK2019, unresolved external symbol) for any programs that declared these functions locally without including the appropriate CRT headers. If possible, you should update the code to include the CRT headers (that is, add #include \\<stdio.h>) and the inline functions, but if you do not want to modify your code to include these header files, an alternative solution is to add an additional library to your linker input, legacy_stdio_definitions.lib.  \n  \n     To add this library to your linker input in the IDE, open the context menu for the project node, choose **Properties**, then in the **Project Properties** dialog box, choose **Linker**, and edit the **Linker Input** to add legacy_stdio_definitions.lib to the semi-colon-separated list.  \n  \n     If your project links with static libraries that were compiled with a release of Visual C++ earlier than 2015, the linker might report an unresolved external symbol. These errors might reference internal stdio definitions for _iob, _iob_func, or related imports for certain stdio functions in the form of _imp\\_*. Microsoft recommends that you recompile all static libraries with the latest version of the Visual C++ compiler and libraries when you upgrade a project. If the library is a third-party library for which source is not available, you should either request an updated binary from the third party or encapsulate your usage of that library into a separate DLL that you compile with the older version of the Visual C++ compiler and libraries.  \n  \n    > [!WARNING]\n    >  If you are linking with Windows SDK 8.1 or earlier, you might encounter these unresolved external symbol errors. In that case, you should resolve the error by adding legacy_stdio_definitions.lib to the linker input as described previously.  \n  \n     To troubleshoot unresolved symbol errors, you can try using [dumpbin.exe](../build/reference/dumpbin-reference.md) to examine the symbols defined in a binary. Try the following command line to view symbols defined in a library.  \n  \n    ```cpp  \n    dumpbin.exe /LINKERMEMBER somelibrary.lib  \n    ```  \n  \n-   **gets and _getws** The [gets](../c-runtime-library/gets-getws.md) and [_getws](../c-runtime-library/gets-getws.md) functions have been removed. The gets function was removed from the C Standard Library in C11 because it cannot be used securely. The _getws function was a Microsoft extension that was equivalent to gets but for wide strings. As alternatives to these functions, consider use of [fgets](../c-runtime-library/reference/fgets-fgetws.md), [fgetws](../c-runtime-library/reference/fgets-fgetws.md), [gets_s](../c-runtime-library/reference/gets-s-getws-s.md), and [_getws_s](../c-runtime-library/reference/gets-s-getws-s.md).  \n  \n-   **_cgets and _cgetws** The [_cgets](../c-runtime-library/cgets-cgetws.md) and [_cgetws](../c-runtime-library/cgets-cgetws.md) functions have been removed. As alternatives to these functions, consider use of [_cgets_s](../c-runtime-library/reference/cgets-s-cgetws-s.md) and [_cgetws_s](../c-runtime-library/reference/cgets-s-cgetws-s.md).  \n  \n-   **Infinity and NaN Formatting** In previous versions, infinities and NaNs would be formatted using a set of Visual C++-specific sentinel strings.  \n  \n    -   Infinity: 1.#INF  \n  \n    -   Quiet NaN: 1.#QNAN  \n  \n    -   Signaling NaN: 1.#SNAN  \n  \n    -   Indefinite NaN: 1.#IND  \n  \n     Any of these may have been prefixed by a sign and may have been formatted slightly differently depending on field width and precision (sometimes with unusual effects, e.g. printf(\"%.2f\\n\", INFINITY) would print 1.#J because the #INF would be \"rounded\" to a precision of 2 digits). C99 introduced new requirements on how infinities and NaNs are to be formatted. The Visual C++ implementation now conforms to these requirements. The new strings are as follows:  \n  \n    -   Infinity: inf  \n  \n    -   Quiet NaN: nan  \n  \n    -   Signaling NaN: nan(snan)  \n  \n    -   Indefinite NaN:nan(ind)  \n  \n     Any of these may be prefixed by a sign. If a capital format specifier is used (%F instead of %f) then the strings are printed in capital letters (INF instead of inf), as is required.  \n  \n     The [scanf](../c-runtime-library/reference/scanf-scanf-l-wscanf-wscanf-l.md) functions have been modified to parse these new strings, so these strings will round-trip through printf and scanf.  \n  \n-   **Floating point formatting and parsing** New floating point formatting and parsing algorithms have been introduced to improve correctness. This change affects the [printf](../c-runtime-library/reference/printf-printf-l-wprintf-wprintf-l.md) and [scanf](../c-runtime-library/reference/scanf-scanf-l-wscanf-wscanf-l.md) families of functions, as well as functions like [strtod](../c-runtime-library/reference/strtod-strtod-l-wcstod-wcstod-l.md).  \n  \n     The old formatting algorithms would generate only a limited number of digits, then would fill the remaining decimal places with zero. This is usually good enough to generate strings that will round-trip back to the original floating point value, but it's not great if you want the exact value (or the closest decimal representation thereof). The new formatting algorithms generate as many digits as are required to represent the value (or to fill the specified precision). As an example of the improvement; consider the results when printing a large power of two:  \n  \n    ```cpp  \n    printf(\"%.0f\\n\", pow(2.0, 80))  \n  \n    ```  \n  \n    ```Output  \n        Old:  1208925819614629200000000    New:  1208925819614629174706176  \n    ```  \n  \n     The old parsing algorithms would consider only up to 17 significant digits from the input string and would discard the rest of the digits. This is sufficient to generate a very close approximation of the value represented by the string, and the result is usually very close to the correctly rounded result. The new implementation considers all present digits and produces the correctly rounded result for all inputs (up to 768 digits in length). In addition, these functions now respect the rounding mode (controllable via fesetround).  This is a potentially breaking behavior change because these functions might output different results. The new results are always more correct than the old results.  \n  \n-   **Hexadecimal and infinity/NaN floating point parsing** The floating point parsing algorithms will now parse hexadecimal floating point strings (such as those generated by the %a and %A printf format specifiers) and all infinity and NaN strings that are generated by the printf functions, as described above.  \n  \n-   **%A and %a zero padding** The %a and %A format specifiers format a floating point number as a hexadecimal mantissa and binary exponent. In previous versions, the printf functions would incorrectly zero-pad strings. For example, printf(\"%07.0a\\n\", 1.0) would print 00x1p+0, where it should print 0x01p+0. This has been fixed.  \n  \n-   **%A and %a precision** The default precision of the %A and %a format specifiers was 6 in previous versions of the library. The default precision is now 13 for conformance with the C Standard.  \n  \n     This is a runtime behavior change in the output of any function that uses a format string with %A or %a. In the old behavior, the output using the %A specifier might be \"1.1A2B3Cp+111\". Now the output for the same value is \"1.1A2B3C4D5E6F7p+111\". To get the old behavior, you can specify the precision, for example, %.6A. See [Precision Specification](../c-runtime-library/precision-specification.md).  \n  \n-   **%F specifier** The %F format/conversion specifier is now supported. It is functionally equivalent to the %f format specifier, except that infinities and NaNs are formatted using capital letters.  \n  \n     In previous versions, the implementation used to parse F and N as length modifiers. This behavior dated back to the age of segmented address spaces: these length modifiers were used to indicate far and near pointers, respectively, as in %Fp or %Ns. This behavior has been removed. If %F is encountered, it is now treated as the %F format specifier; if %N is encountered, it is now treated as an invalid parameter.  \n  \n-   **Exponent formatting** The %e and %E format specifiers format a floating point number as a decimal mantissa and exponent. The %g and %G format specifiers also format numbers in this form in some cases. In previous versions, the CRT would always generate strings with three-digit exponents. For example, printf(\"%e\\n\", 1.0) would print 1.000000e+000. This was incorrect: C requires that if the exponent is representable using only one or two digits, then only two digits are to be printed.  \n  \n     In Visual Studio 2005 a global conformance switch was added: [_set_output_format](../c-runtime-library/set-output-format.md). A program could call this function with the argument _TWO_DIGIT_EXPONENT, to enable conforming exponent printing. The default behavior has been changed to the standards-conforming exponent printing mode.  \n  \n-   **Format string validation** In previous versions, the printf and scanf functions would silently accept many invalid format strings, sometimes with unusual effects. For example, %hlhlhld would be treated as %d. All invalid format strings are now treated as invalid parameters.  \n  \n-   **fopen mode string validation**  \n  \n     In previous versions, the fopen family of functions silently accepted some invalid mode strings (e.g. r+b+). Invalid mode strings are now detected and treated as invalid parameters.  \n  \n-   **_O_U8TEXT mode**  \n  \n     The [_setmode](../c-runtime-library/reference/setmode.md) function now correctly reports the mode for streams opened in_O_U8TEXT mode. In previous versions of the library, it would report such streams as being opened in _O_WTEXT.  \n  \n     This is a breaking change if your code interprets the _O_WTEXT mode for streams where the encoding is UTF-8. If your application doesn't support UTF_8, consider adding support for this increasingly common encoding.  \n  \n-   **snprintf and vsnprintf** The [snprintf](../c-runtime-library/reference/snprintf-snprintf-snprintf-l-snwprintf-snwprintf-l.md) and [vsnprintf](../c-runtime-library/reference/vsnprintf-vsnprintf-vsnprintf-l-vsnwprintf-vsnwprintf-l.md) functions are now implemented. Older code often provided definitions macro versions of these functions because they were not implemented by the CRT library, but these are no longer needed in newer versions. If [snprintf](../c-runtime-library/reference/snprintf-snprintf-snprintf-l-snwprintf-snwprintf-l.md) or [vsnprintf](../c-runtime-library/reference/vsnprintf-vsnprintf-vsnprintf-l-vsnwprintf-vsnwprintf-l.md) is defined as a macro before including \\<stdio.h>, compilation now fails with an error that indicates where the macro was defined.  \n  \n     Normally, the fix to this problem is to delete any declarations of snprintf or vsnprintf in user code.  \n  \n-   **tmpnam Generates Usable File Names** In previous versions, the tmpnam and tmpnam_s functions generated file names in the root of the drive (such as \\sd3c.). These functions now generate usable file name paths in a temporary directory.  \n  \n-   **FILE Encapsulation** In previous versions, the FILE type was completely defined in \\<stdio.h>, so it was possible for user code to reach into a FILE and modify its internals. The stdio library has been changed to hide implementation details. As part of this, FILE as defined in \\<stdio.h> is now an opaque type and its members are inaccessible from outside of the CRT itself.  \n  \n-   **_outp and _inp** The functions [_outp](../c-runtime-library/outp-outpw-outpd.md), [_outpw](../c-runtime-library/outp-outpw-outpd.md), [_outpd](../c-runtime-library/outp-outpw-outpd.md), [_inp](../c-runtime-library/inp-inpw-inpd.md), [_inpw](../c-runtime-library/inp-inpw-inpd.md), and [_inpd](../c-runtime-library/inp-inpw-inpd.md) have been removed.  \n  \n#### \\<stdlib.h>, \\<malloc.h>, and \\<sys/stat.h>  \n  \n-   **strtof and wcstof** The strtof and wcstof functions failed to set errno to ERANGE when the value was not representable as a float. This has been fixed. (Note that this error was specific to these two functions; the strtod, wcstod, strtold, and wcstold functions were unaffected.) This is a runtime breaking change.  \n  \n-   **Aligned allocation functions** In previous versions, the aligned allocation functions (_aligned_malloc, _aligned_offset_malloc, etc.) would silently accept requests for a block with an alignment of 0. The requested alignment must be a power of two, which zero is not. This has been fixed, and a requested alignment of 0 is now treated as an invalid parameter. This is a runtime breaking change.  \n  \n-   **Heap functions** The _heapadd, _heapset, and _heapused functions have been removed. These functions have been nonfunctional since the CRT was updated to use the Windows heap.  \n  \n-   **smallheap** The smalheap link option has been removed. See [Link Options](../c-runtime-library/link-options.md).  \n  \n#### \\<string.h>  \n  \n-   **wcstok** The signature of the wcstok function has been changed to match what is required by the C Standard. In previous versions of the library, the signature of this function was:  \n  \n    ```cpp  \n    wchar_t* wcstok(wchar_t*, wchar_t const*)  \n    ```  \n  \n     It used an internal, per-thread context to track state across calls, as is done for strtok. The function now has the signature wchar_t* wcstok(wchar_t\\*, wchar_t const\\*, wchar_t\\*\\*), and requires the caller to pass the context as a third argument to the function.  \n  \n     A new _wcstok function has been added with the old signature to ease porting. When compiling C++ code, there is also an inline overload of wcstok that has the old signature. This overload is declared as deprecated. In C code, you may define_CRT_NON_CONFORMING_WCSTOK to cause _wcstok to be used in place of wcstok.  \n  \n#### \\<time.h>  \n  \n-   **clock** In previous versions, the [clock](../c-runtime-library/reference/clock.md) function was implemented using the Windows API [GetSystemTimeAsFileTime](http://msdn.microsoft.com/library/windows/desktop/ms724397.aspx). With this implementation, the clock function was sensitive to the system time, and was thus not necessarily monotonic. The clock function has been reimplemented in terms of [QueryPerformanceCounter](https://msdn.microsoft.com/library/windows/desktop/ms644904.aspx) and is now monotonic.  \n  \n-   **fstat and _utime** In previous versions, the [_stat](../c-runtime-library/reference/stat-functions.md), [fstat](../c-runtime-library/reference/fstat-fstat32-fstat64-fstati64-fstat32i64-fstat64i32.md), and [_utime](../c-runtime-library/reference/utime-utime32-utime64-wutime-wutime32-wutime64.md) functions handle daylight savings time incorrectly. Prior to Visual Studio 2013, all of these functions incorrectly adjusted standard time times as if they were in daylight time.  \n  \n     In Visual Studio 2013, the problem was fixed in the _stat family of functions, but the similar problems in the fstat and _utime families of functions were not fixed. This led to problems due to the inconsistency between the functions. The fstat and _utime families of functions have now been fixed, so all of these functions now handle daylight savings time correctly and consistently.  \n  \n-   **asctime** In previous versions, the [asctime](../c-runtime-library/reference/asctime-wasctime.md) function would pad single-digit days with a leading zero, for example: Fri Jun 06 08:00:00 2014. The specification requires that such days be padded with a leading space, e.g. Fri Jun  6 08:00:00 2014. This has been fixed.  \n  \n-   **strftime and wcsftime** The strftime and wcsftime functions now support the %C, %D, %e, %F, %g, %G, %h, %n, %r, %R, %t, %T, %u, and %V format specifiers. Additionally, the E and O modifiers are parsed but ignored.  \n  \n     The %c format specifier is specified as producing an \"appropriate date and time representation\" for the current locale. In the C locale, this representation is required to be the same as %a %b %e %T %Y. This is the same form as is produced by asctime. In previous versions, the %c format specifier incorrectly formatted times using a MM/DD/YY HH:MM:SS representation. This has been fixed.  \n  \n-   **timespec and TIME_UTC** The \\<time.h> header now defines the timespec type and the timespec_get function from the C11 Standard. In addition, the TIME_UTC macro, for use with the timespec_get function, is now defined. This is a breaking change for code that has a conflicting definition for any of these.  \n  \n-   **CLOCKS_PER_SEC** The CLOCKS_PER_SEC macro now expands to an integer of type clock_t, as required by the C language.  \n  \n####  <a name=\"BK_STL\"></a> Standard Template Library  \n To enable new optimizations and debugging checks, the Visual Studio implementation of the C++ Standard Library intentionally breaks binary compatibility from one version to the next. Therefore, when the C++ Standard Library is used, object files and static libraries that are compiled by using different versions can't be mixed in one binary (EXE or DLL), and C++ Standard Library objects can't be passed between binaries that are compiled by using different versions. Such mixing emits linker errors about _MSC_VER mismatches. (_MSC_VER is the macro that contains the compiler's major version—for example, 1800 for Visual Studio 2013.) This check cannot detect DLL mixing, and cannot detect mixing that involves Visual C++ 2008 or earlier.  \n  \n-   **STL include files** Some changes have been made to the include structure in the STL headers. STL headers are allowed to include each other in unspecified ways. In general, you should write your code so that it carefully includes all of the headers that it needs according to the C++ standard and doesn't rely on which STL headers include which other STL headers. This makes code portable across versions and platforms. At least two header changes in [!INCLUDE[vs_dev14](../ide/includes/vs_dev14_md.md)] affect user code. First, \\<string> no longer includes \\<iterator>. Second, \\<tuple> now declares std::array without including all of \\<array>, which can break code through the following combination of code constructs: your code has a variable named \"array\", and you have a using-directive \"using namespace std;\", and you include an STL header (such as \\<functional>) that includes \\<tuple>, which now declares std::array.  \n  \n-   **steady_clock** The \\<chrono> implementation of [steady_clock](../standard-library/steady-clock-struct.md) has changed to meet the C++ Standard requirements for steadiness and monotonicity. steady_clock is now based on [QueryPerformanceCounter](https://msdn.microsoft.com/library/windows/desktop/ms644904.aspx) and high_resolution_clock is now a typedef for steady_clock. As a result, in Visual C++ steady_clock::time_point is now a typedef for chrono::time_point<steady_clock>; however, this is not necessarily the case for other implementations.  \n  \n-   **allocators and const** We now require allocator equality/inequality comparisons to accept const arguments on both sides.  If your allocators define these operators as follows:  \n  \n    ```cpp  \n    bool operator==(const MyAlloc& other)  \n    ```  \n  \n     You should update these to declare them as const members.  \n  \n    ```cpp  \n    bool operator==(const MyAlloc& other) const  \n    ```  \n  \n-   **const elements** The C++ standard has always forbidden containers of const elements (such as vector\\<const T> or set\\<const T>). Visual C++ 2013 and earlier accepted such containers. In the current version, such containers fail to compile.  \n  \n-   **std::allocator::deallocate** In Visual C++ 2013 and earlier, std::allocator::deallocate(p, n) ignored the argument passed in for n.  The C++ standard has always required that n be equal to the value passed as the first argument to the invocation of allocate which returned p. However, in the current version, the value of n is inspected. Code that passes arguments for n that differ from what the standard requires might crash at runtime.  \n  \n-   **hash_map and hash_set** The non-standard header files hash_map and hash_set are deprecated in [!INCLUDE[vs_dev14](../ide/includes/vs_dev14_md.md)] and will be removed in a future release. Use unordered_map and unordered_set instead.  \n  \n-   **comparators and operator()** Associative containers (the \\<map> family) now require their comparators to have const-callable function call operators. The following code in a comparator class declaration now fails to compile:  \n  \n    ```cpp  \n    bool operator()(const X& a, const X& b)  \n    ```  \n  \n     To resolve this error, change the function declaration to:  \n  \n    ```cpp  \n    bool operator()(const X& a, const X& b) const  \n    ```  \n  \n-   **type traits** The old names for type traits from an earlier version of the C++ draft standard have been removed. These were changed in C++11 and have been updated to the C++11 values in [!INCLUDE[vs_dev14](../ide/includes/vs_dev14_md.md)]. The following table shows the old and new names.  \n  \n    |Old name|New name|  \n    |--------------|--------------|  \n    |add_reference|add_lvalue_reference|  \n    |has_default_constructor|is_default_constructible|  \n    |has_copy_constructor|is_copy_constructible|  \n    |has_move_constructor|is_move_constructible|  \n    |has_nothrow_constructor|is_nothrow_default_constructible|  \n    |has_nothrow_default_constructor|is_nothrow_default_constructible|  \n    |has_nothrow_copy|is_nothrow_copy_constructible|  \n    |has_nothrow_copy_constructor|is_nothrow_copy_constructible|  \n    |has_nothrow_move_constructor|is_nothrow_move_constructible|  \n    |has_nothrow_assign|is_nothrow_copy_assignable|  \n    |has_nothrow_copy_assign|is_nothrow_copy_assignable|  \n    |has_nothrow_move_assign|is_nothrow_move_assignable|  \n    |has_trivial_constructor|is_trivially_default_constructible|  \n    |has_trivial_default_constructor|is_trivially_default_constructible|  \n    |has_trivial_copy|is_trivially_copy_constructible|  \n    |has_trivial_move_constructor|is_trivially_move_constructible|  \n    |has_trivial_assign|is_trivially_copy_assignable|  \n    |has_trivial_move_assign|is_trivially_move_assignable|  \n    |has_trivial_destructor|is_trivially_destructible|  \n  \n-   **launch::any and launch::sync policies** The nonstandard launch::any and launch::sync policies were removed. Instead, for launch::any, use launch:async &#124; launch:deferred. For launch::sync, use launch::deferred. See [launch Enumeration](../standard-library/future-enums.md#launch_enumeration).  \n  \n####  <a name=\"BK_MFC\"></a> MFC and ATL  \n  \n-   **Microsoft Foundation Classes (MFC)** is no longer included in a \"Typical\" install of Visual Studio because of its large size. To install MFC, choose the Custom install option in Visual Studio 2015 setup. If you already have Visual Studio 2015 installed, you can install MFC by re-running Visual Studio setup, choosing the Custom install option, and choosing Microsoft Foundation Classes. You can re-run Visual Studio setup from the Control Panel, Programs and Features, or from the installation media.  \n  \n     The Visual C++ Redistributable Package still includes this library.  \n  \n####  <a name=\"BK_ConcRT\"></a> Concurrency Runtime  \n  \n-   **Yield macro from Windows.h conflicting with concurrency::Context::Yield** The Concurrency Runtime previously used #undef to undefine the Yield macro to avoid conflicts between the Yield macro defined in Windows.h h and the concurrency::Context::Yield function. This #undef has been removed and a new non-conflicting equivalent API call [concurrency::Context::YieldExecution](../parallel/concrt/reference/context-class.md#context__yieldexecution_method) has been added. To work around conflicts with Yield, you can either update your code to call the YieldExecution function instead, or surround the Yield function name with parentheses at call sites, as in the following example:  \n  \n    ```cpp  \n    (concurrency::Context::Yield)();  \n    ```  \n  \n## Compiler Conformance Improvements in Visual C++ 2015  \n When upgrading code from previous versions, you might also encounter compiler errors that are due to conformance improvements made in Visual C++ 2015. These improvements do not break binary compatibility from earlier versions of Visual C++, but they can produce compiler errors where none were emitted before. For more information, see [Visual C++ What's New 2003 through 2015](../porting/visual-cpp-what-s-new-2003-through-2015.md).  \n  \n In Visual C++ 2015, ongoing improvements to compiler conformance can sometimes change how the compiler understands your existing source code. When this happens, you might encounter new or different errors during your build, or even behavioral differences in code that previously built and seemed to run correctly.  \n  \n Fortunately, these differences  have little or no impact on most of your source code and when source code or other changes are needed to address these differences,  fixes are usually small and straight-forward. We've included many examples of previously-acceptable source code that might need to be changed *(before)* and the fixes to correct them *(after)*.  \n  \n Although these differences can affect your source code or other build artifacts, they don't affect binary compatibility between updates to Visual C++ versions. A more-severe kind of change, the  *breaking change* can affect binary compatibility, but these kinds of binary compatibility breaks only occur between major versions of Visual C++. For example, between Visual C++ 2013 and Visual C++ 2015. For information on the breaking changes that occurred between Visual C++ 2013 and Visual C++ 2015, see [Visual C++ 2015 Conformance Changes](#VC_2015).  \n  \n-   [Conformance Improvements in Visual C++ 2015](#VS_RTM)  \n  \n-   [Conformance Improvements in Update 1](#VS_Update1)  \n  \n-   [Conformance Improvements in Update 2](#VS_Update2)  \n  \n-   [Conformance Improvements in Update 3](#VS_Update3)  \n  \n###  <a name=\"VS_RTM\"></a> Conformance Improvements in Visual C++ 2015  \n  \n-   /Zc:forScope- option  \n  \n     The compiler option **/Zc:forScope-** is deprecated and will be removed in a future release.  \n  \n    ```cpp  \n    Command line warning  D9035: option 'Zc:forScope-' has been deprecated and will be removed in a future release  \n    ```  \n  \n     The option was usually used in order to allow nonstandard code that uses loop variables after the point where, according to the standard, they should have gone out of scope. It was only necessary when you are compiling with the /Za option, since without /Za, using a for loop variable after the end of the loop is always allowed. If you don't care about standards conformance (for example, if your code isn't meant to portable to other compilers), you could turn off the /Za option (or set the Disable Language Extensions property to No). If you do care about writing portable, standards-compliant code, you should rewrite your code so that it conforms to the standard by moving the declaration of such variables to a point outside the loop.  \n  \n    ```cpp  \n    // C2065 expected  \n    int main() {  \n        // Uncomment the following line to resolve.  \n        // int i;  \n        for (int i = 0; i < 1; i++);  \n        i = 20;   // i has already gone out of scope under /Za  \n    }  \n  \n    ```  \n  \n-   **/Zg compiler option**  \n  \n     The /Zg compiler option (Generate Function Prototypes) is no longer available. This compiler option was previously deprecated.  \n  \n-   You can no longer run unit tests with C++/CLI from the command-line with mstest.exe. Instead, use vstest.console.exe. See [VSTest.Console.exe command-line options](/devops-test-docs/test/vstest-console-exe-command-line-options).  \n  \n-   **mutable keyword**  \n  \n     The `mutable` storage class specifier is no longer allowed in places where previously it compiled without error. Now, the compiler gives error C2071 (illegal storage class). According to the standard, the mutable specifier can be applied only to names of class data members, and cannot be applied to names declared const or static, and cannot be applied to reference members.  \n  \n     For example, consider the following code:  \n  \n    ```cpp  \n  \n    struct S   \n    {  \n        mutable int &r;  \n    };  \n  \n    ```  \n  \n     Previous versions of the Visual C++ compiler accepted this, but now the compiler gives the following error:  \n  \n    ```Output  \n    error C2071: 'S::r': illegal storage class  \n    ```  \n  \n     To fix the error, simply remove the redundant mutable keyword.  \n  \n-   **char_16_t and char32_t**  \n  \n     You can no longer use `char16_t` or `char32_t` as aliases in a typedef, because these types are now treated as built-in. It was common for users and library authors to define char16_t and char32_t as aliases of uint16_t and uint32_t, respectively.  \n  \n    ```cpp  \n  \n    #include <cstdint>  \n  \n    typedef uint16_t char16_t; //C2628  \n    typedef uint32_t char32_t; //C2628  \n  \n    int main(int argc, char* argv[])  \n    {  \n        uint16_t x = 1; uint32_t y = 2;  \n        char16_t a = x;  \n        char32_t b = y;  \n        return 0;  \n    }  \n  \n    ```  \n  \n     To update your code, remove the typedef declarations and rename any other identifiers that collide with these names.  \n  \n-   **Non-type template parameters**  \n  \n     Certain code that involves non-type template parameters is now correctly checked for type compatibility when you provide explicit template arguments. For example, the following code compiled without error in previous versions of Visual C++.  \n  \n    ```cpp  \n  \n    struct S1  \n    {  \n        void f(int);  \n        void f(int, int);  \n    };  \n  \n    struct S2  \n    {  \n        template <class C, void (C::*Function)(int) const> void f() {}  \n    };  \n  \n    void f()  \n    {  \n        S2 s2;  \n        s2.f<S1, &S1::f>();  \n    }  \n  \n    ```  \n  \n     The current compiler correctly gives an error, because the template parameter type doesn't match the template argument (the parameter is a pointer to a const member, but the function f is non-const):  \n  \n    ```Output  \n    error C2893: Failed to specialize function template 'void S2::f(void)'note: With the following template arguments:note: 'C=S1'note: 'Function=S1::f'  \n    ```  \n  \n     To address this error in your code, make sure that the type of the template argument you use matches the declared type of the template parameter.  \n  \n-   **__declspec(align)**  \n  \n     The compiler no longer accepts `__declspec(align)` on functions. This was always ignored, but now it produces a compiler error.  \n  \n    ```cpp  \n    error C3323: 'alignas' and '__declspec(align)' are not allowed on function declarations  \n    ```  \n  \n     To fix this problem, remove `__declspec(align)` from the function declaration. Since it had no effect, removing it does not change anything.  \n  \n-   **Exception handling**  \n  \n     There are a couple of changes to exception handling. First, exception objects have to be either copyable or movable. The following code compiled in [!INCLUDE[cpp_dev12_long](../build/reference/includes/cpp_dev12_long_md.md)], but does not compile in [!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)]:  \n  \n    ```cpp  \n  \n    struct S  \n    {  \n    public:  \n        S();  \n    private:  \n        S(const S &);  \n    };  \n  \n    int main()  \n    {  \n        throw S(); // error  \n    }  \n  \n    ```  \n  \n     The problem is that the copy constructor is private, so the object cannot be copied as happens in the normal course of handling an exception. The same applies when the copy constructor is declared `explicit`.  \n  \n    ```cpp  \n  \n    struct S  \n    {  \n        S();  \n        explicit S(const S &);  \n    };  \n  \n    int main()  \n    {  \n        throw S(); // error  \n    }  \n  \n    ```  \n  \n     To update your code, make sure that the copy constructor for your exception object is public and not marked `explicit`.  \n  \n     Catching an exception by value also requires the exception object to be copyable. The following code compiled in [!INCLUDE[cpp_dev12_long](../build/reference/includes/cpp_dev12_long_md.md)], but does not compile in [!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)]:  \n  \n    ```cpp  \n  \n    struct B  \n    {  \n    public:  \n        B();  \n    private:  \n        B(const B &);  \n    };  \n  \n    struct D : public B {};  \n  \n    int main()  \n    {  \n        try  \n        {  \n        }  \n        catch (D d) // error  \n        {  \n        }  \n    }  \n  \n    ```  \n  \n     You can fix this issue by changing the parameter type for the `catch` to a reference.  \n  \n    ```cpp  \n  \n    catch (D& d)  \n    {  \n    }  \n  \n    ```  \n  \n-   **String literals followed by macros**  \n  \n     The compiler now supports user defined literals. As a consequence, string literals followed by macros without any intervening whitespace are interpreted as user-defined literals, which might produce errors or unexpected results. For example, in previous compilers the following code compiled successfully:  \n  \n    ```cpp  \n  \n    #define _x \"there\"  \n    char* func() {  \n        return \"hello\"_x;  \n    }  \n    int main()  \n    {  \n        char * p = func();  \n        return 0;  \n    }  \n  \n    ```  \n  \n     The compiler interpreted this as a string literal \"hello\" followed by a macro, which is expanded \"there\", and then the two string literals were concatenated into one. In [!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)], the compiler interprets this as a user-defined literal, but since there is no matching user-defined literal _x defined, it gives an error.  \n  \n    ```cpp  \n  \n    error C3688: invalid literal suffix '_x'; literal operator or literal operator template 'operator \"\"_x' not found  \n    note: Did you forget a space between the string literal and the prefix of the following string literal?  \n  \n    ```  \n  \n     To fix this problem, add a space between the string literal and the macro.  \n  \n-   **Adjacent string literals**  \n  \n     Similarly to the previous, due to related changes in string parsing, adjacent string literals (either wide or narrow character string literals) without any whitespace were interpreted as a single concatenated string in previous releases of Visaul C++. In [!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)], you must now add whitespace between the two strings. For example, the following code must be changed:  \n  \n    ```cpp  \n    char * str = \"abc\"\"def\";  \n    ```  \n  \n     Simply add a space in between the two strings.  \n  \n    ```cpp  \n    char * str = \"abc\" \"def\";  \n    ```  \n  \n-   **Placement new and delete**  \n  \n     A change has been made to the delete operator in order to bring it into conformance with C++14 standard. Details of the standards change can be found at [C++ Sized Deallocation](http://isocpp.org/files/papers/n3778.html). The changes add a form of the global delete operator that takes a size parameter. The breaking change is that if you were previously using an operator delete with the same signature (to correspond with a placement new operator), you will receive a compiler error (C2956, which occurs at the point where the placement new is used, since that's the position in code where the compiler tries to identify an appropriate matching delete operator).  \n  \n     The function `void operator delete(void *, size_t)` was a placement delete operator corresponding to the placement new function \"void \\* operator new(size_t, size_t)\" in C++11. With C++14 sized deallocation, this delete function is now a *usual deallocation function* (global delete operator). The standard requires that if the use of a placement new looks up a corresponding delete function and finds a usual deallocation function, the program is ill-formed.  \n  \n     For example, suppose your code defines both a placement new and a placement delete:  \n  \n    ```cpp  \n  \n    void * operator new(std::size_t, std::size_t);  \n    void operator delete(void*, std::size_t) noexcept;  \n  \n    ```  \n  \n     The problem occurs because of the match in function signatures between a placement delete operator you've defined, and the new global sized delete operator. Consider whether you can use a different type other than size_t for any placement new and delete operators.  Note that the type of the size_t typedef is compiler-dependent; it is a typedef for unsigned int in Visual C++. A good solution is to use an enumerated type such as this:  \n  \n    ```cpp  \n  \n    enum class my_type : size_t {};  \n  \n    ```  \n  \n     Then, change your definition of placement new and delete to use this type as the second argument instead of size_t. You’ll also need to update the calls to placement new to pass the new type (for example, by using `static_cast<my_type>` to convert from the integer value) and update the definition of new and delete to cast back to the integer type. You don’t need to use an enum for this; a class type with a size_t member would also work.  \n  \n     An alternative solution is that you might be able to eliminate the placement new altogether. If your code uses placement new to implement a memory pool where the placement argument is the size of the object being allocated or deleted, then sized deallocation feature might be suitable to replace your own custom memory pool code, and you can get rid of the placement functions and just use your own two-argument delete operator instead of the placement functions.  \n  \n     If you don't want to update your code immediately, you can revert to the old behavior by using the compiler option /Zc:sizedDealloc-. If you use this option, the two-argument delete functions don’t exist and won't cause a conflict with your placement delete operator.  \n  \n-   **Union data members**  \n  \n     Data members of unions can no longer have reference types. The following code compiled successfully in [!INCLUDE[cpp_dev12_long](../build/reference/includes/cpp_dev12_long_md.md)], but produces an error in [!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)].  \n  \n    ```cpp  \n  \n    union U1   \n    {  \n        const int i;  \n    };  \n    union U2  \n    {  \n        int & i;  \n    };  \n    union U3  \n    {  \n        struct { int & i; };  \n    };  \n  \n    ```  \n  \n     The preceding code produces the following errors:  \n  \n    ```Output  \n  \n    test.cpp(67): error C2625: 'U2::i': illegal union member; type 'int &' is reference type  \n    test.cpp(70): error C2625: 'U3::i': illegal union member; type 'int &' is reference type  \n  \n    ```  \n  \n     To address this issue, change reference types either to a pointer or a value. Changing the type to a pointer requires changes in the code that uses the union field. Changing the code to a value would change the data stored in the union, which affects other fields since fields in union types share the same memory. Depending on the size of the value, it might also change the size of the union.  \n  \n-   Anonymous unions are now more conformant to the standard. Previous versions of the compiler generated an explicit constructor and destructor for anonymous unions. These are deleted in [!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)].  \n  \n    ```cpp  \n  \n    struct S   \n    {  \n        S();  \n    };  \n  \n    union   \n    {  \n        struct   \n        {  \n            S s;  \n        };  \n    } u; // C2280  \n  \n    ```  \n  \n     The preceding code generates the following error in [!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)]:  \n  \n    ```cpp  \n  \n    error C2280: '<unnamed-type-u>::<unnamed-type-u>(void)': attempting to reference a deleted function  \n    note: compiler has generated '<unnamed-type-u>::<unnamed-type-u>' here  \n  \n    ```  \n  \n     To resolve this issue, provide your own definitions of the constructor and/or destructor.  \n  \n    ```cpp  \n  \n    struct S   \n    {  \n        // Provide a default constructor by adding an empty function body.  \n        S() {}  \n    };  \n  \n    union   \n    {  \n        struct   \n        {  \n            S s;  \n        };  \n    } u;  \n  \n    ```  \n  \n-   **Unions with anonymous structs**  \n  \n     In order to conform with the standard, the runtime behavior has changed for members of anonymous structures in unions. The constructor for anonymous structure members in a union is no longer implicitly called when such a union is created. Also, the destructor for anonymous structure members in a union is no longer implicitly called when the union goes out of scope. Consider the following code, in which a union U contains an anonymous structure that contains a member which is a named structure S that has a destructor.  \n  \n    ```cpp  \n  \n    #include <stdio.h>  \n    struct S   \n    {  \n        S() { printf(\"Creating S\\n\"); }  \n        ~S() { printf(\"Destroying S\\n\"); }  \n    };  \n    union U   \n    {  \n        struct {  \n            S s;  \n        };  \n        U() {}  \n        ~U() {}  \n    };  \n  \n    void f()  \n    {  \n        U u;  \n        // Destructor implicitly called here.  \n    }  \n  \n    int main()  \n    {  \n        f();  \n  \n        char s[1024];  \n        printf(\"Press any key.\\n\");  \n        gets_s(s);  \n        return 0;  \n    }  \n  \n    ```  \n  \n     In [!INCLUDE[cpp_dev12_long](../build/reference/includes/cpp_dev12_long_md.md)], the constructor for S is called when the union is created, and the destructor for S is called when the stack for function f is cleaned up. But in [!INCLUDE[cpp_dev14_long](../porting/includes/cpp_dev14_long_md.md)], the constructor and destructor are not called. The compiler gives a warning about this behavior change.  \n  \n    ```Output  \n    warning C4587: 'U::s': behavior change: constructor is no longer implicitly calledwarning C4588: 'U::s': behavior change: destructor is no longer implicitly called  \n    ```  \n  \n     To restore the original behavior, give the anonymous structure a name. The runtime behavior of non-anonymous structures is the same, regardless of the compiler version.  \n  \n    ```cpp  \n  \n    #include <stdio.h>  \n  \n    struct S   \n    {  \n        S() { printf(\"Creating S.\\n\"); }  \n        ~S() { printf(\"Destroying S\\n\"); }  \n    };  \n    union U   \n    {  \n        struct   \n        {  \n            S s;  \n        } namedStruct;  \n        U() {}  \n        ~U() {}  \n    };  \n  \n    void f()  \n    {  \n        U u;  \n    }  \n  \n    int main()  \n    {  \n        f();  \n  \n        char s[1024];  \n        printf(\"Press any key.\\n\");  \n        gets_s(s);  \n        return 0;  \n    }  \n  \n    ```  \n  \n     Alternatively, try moving the constructor and destructor code into new functions, and add calls to these functions from the constructor and destructor for the union.  \n  \n    ```cpp  \n  \n    #include <stdio.h>  \n  \n    struct S   \n    {  \n        void Create() { printf(\"Creating S.\\n\"); }  \n        void Destroy() { printf(\"Destroying S\\n\"); }  \n    };  \n    union U   \n    {  \n        struct   \n        {  \n            S s;  \n        };  \n        U() { s.Create(); }  \n        ~U() { s.Destroy(); }  \n    };  \n  \n    void f()  \n    {  \n        U u;  \n    }  \n  \n    int main()  \n    {  \n        f();  \n  \n        char s[1024];  \n        printf(\"Press any key.\\n\");  \n        gets_s(s);  \n        return 0;  \n    }  \n  \n    ```  \n  \n-   **Template resolution**  \n  \n     Changes have been made to name resolution for templates. In C++, when considering candidates for the resolution of a name, it can be the case that one or more names under consideration as potential matches produces an invalid template instantiation. These invalid instantiations do not normally cause compiler errors, a principle which is known as SFINAE (Substitution Failure Is Not An Error).  \n  \n     Now, if SFINAE requires the compiler to instantiate the specialization of a class template, then any errors that occur during this process are compiler errors. In previous versions, the compiler would ignore such errors. For example, consider the following code:  \n  \n    ```cpp  \n  \n    #include <type_traits>  \n  \n    template< typename T>  \n    struct S  \n    {  \n        S() = default;  \n        S(const S&);  \n        S(S& &);  \n  \n        template< typename U, typename = typename std::enable_if< std::is_base_of< T, U> ::value> ::type>  \n        S(S< U> & &);  \n    };  \n  \n    struct D;  \n  \n    void f1()  \n    {  \n        S< D> s1;  \n        S< D> s2(s1);  \n    }  \n  \n    struct B  \n    {  \n    };  \n  \n    struct D : public B  \n    {  \n    };  \n  \n    void f2()  \n    {  \n        S< D> s1;  \n        S< D> s2(s1);  \n    }  \n  \n    ```  \n  \n     If you compile with the current compiler, you get the following error:  \n  \n    ```Output  \n  \n    type_traits(1110): error C2139: 'D': an undefined class is not allowed as an argument to compiler intrinsic type trait '__is_base_of'  \n    ..\\t331.cpp(14): note: see declaration of 'D'  \n    ..\\t331.cpp(10): note: see reference to class template instantiation 'std::is_base_of<T,U>' being compiled  \n    with  \n    [  \n        T=D,  \n        U=D  \n    ]  \n  \n    ```  \n  \n     This is because at the point of the first invocation of the is_base_of the class 'D' has not yet been defined.  \n  \n     In this case, the fix is not to use such type traits until the class has been defined. If you move the definitions of B and D to the beginning of the code file, the error is resolved. If the definitions are in header files, check the order of the include statements for the header files to make sure that any class definitions are compiled before the problematic templates are used.  \n  \n-   **Copy constructors**  \n  \n     In both [!INCLUDE[vs_dev12](../atl-mfc-shared/includes/vs_dev12_md.md)] and [!INCLUDE[vs_dev14](../ide/includes/vs_dev14_md.md)], the compiler generates a copy constructor for a class if that class has a user-defined move constructor but no user-defined copy constructor. In Dev14, this implicitly generated copy constructor is also marked \"= delete\".  \n  \n###  <a name=\"VS_Update1\"></a> Conformance Improvements in Update 1  \n  \n-   **Private virtual base classes and indirect inheritance**  \n  \n     Previous versions of the compiler allowed a derived class to call member functions of its *indirectly-derived*`private virtual` base classes. This old behavior was incorrect and does not conform to the C++ standard. The compiler no longer accepts code written in this way and issues compiler error C2280 as a result.  \n  \n    ```Output  \n  \n    error C2280: 'void *S3::__delDtor(unsigned int)': attempting to reference a deleted function  \n  \n    ```  \n  \n     Example (before)  \n  \n    ```cpp  \n  \n    class base  \n    {  \n    protected:  \n        base();  \n        ~base();  \n    };  \n  \n    class middle : private virtual base {}; class top : public virtual middle {};   \n  \n    void destroy(top *p)  \n    {  \n        delete p;  //  \n    }  \n  \n    ```  \n  \n     Example (after)  \n  \n    ```cpp  \n  \n    class base;  // as above  \n  \n    class middle : protected virtual base {};  \n    class top : public virtual middle {};  \n  \n    void destroy(top *p)  \n    {  \n        delete p;  \n    }  \n  \n    ```  \n  \n     -or -  \n  \n    ```cpp  \n  \n    class base;  // as above  \n  \n    class middle : private virtual base {};  \n    class top : public virtual middle, private virtual bottom {};  \n  \n    void destroy(top *p)  \n    {  \n        delete p;  \n    }  \n  \n    ```  \n  \n-   **Overloaded operator new and operator delete**  \n  \n     Previous versions of the compiler allowed non-member `operator new` and non-member `operator delete` to be declared static, and to be declared in namespaces other than the global namespace.  This old behavior created a risk that the program would not call the `new` or `delete` operator implementation that the programmer intended, resulting in silent bad runtime behavior. The compiler no longer accepts code written in this way and issues compiler error C2323 instead.  \n  \n    ```Output  \n  \n    error C2323: 'operator new': non-member operator new or delete functions may not be declared static or in a namespace other than the global namespace.  \n  \n    ```  \n  \n     Example (before)  \n  \n    ```cpp  \n  \n    static inline void * __cdecl operator new(size_t cb, const std::nothrow_t&)  // error C2323  \n  \n    ```  \n  \n     Example (after)  \n  \n    ```cpp  \n  \n    void * __cdecl operator new(size_t cb, const std::nothrow_t&)  // removed 'static inline'  \n  \n    ```  \n  \n     Additionally, although the compiler doesn't give a specific diagnostic, inline operator new is considered ill-formed.  \n  \n-   **Calling 'operator *type*()' (user-defined conversion) on non-class types**  \n  \n     Previous versions of the compiler allowed 'operator *type*()' to be called on non-class types while silently ignoring it. This old behavior created a risk of silent bad code generation, resulting in unpredictable runtime behavior. The compiler no longer accepts code written in this way and issues compiler error C2228 instead.  \n  \n    ```Output  \n  \n    error C2228: left of '.operator type' must have class/struct/union  \n  \n    ```  \n  \n     Example (before)  \n  \n    ```cpp  \n  \n    typedef int index_t;  \n    void bounds_check(index_t index);  \n    void login(int column)  \n    {  \n        bounds_check(column.operator index_t());  // error C2228  \n    }  \n  \n    ```  \n  \n     Example (after)  \n  \n    ```cpp  \n  \n    typedef int index_t;  \n    void bounds_check(index_t index);  \n    void login(int column)  \n    {  \n        bounds_check(column);  // removed cast to 'index_t', 'index_t' is an alias of 'int'  \n    }  \n  \n    ```  \n  \n-   **Redundant typename in elaborated type specifiers**  \n  \n     Previous versions of the compiler allowed `typename` in an elaborated type specifiers; code written in this way is semantically incorrect. The compiler no longer accepts code written in this way and issues compiler error C3406 instead.  \n  \n    ```Output  \n    error C3406: 'typename' cannot be used in an elaborated type specifier  \n    ```  \n  \n     Example (before)  \n  \n    ```cpp  \n  \n    template <typename class T>  \n    class container;  \n  \n    ```  \n  \n     Example (after)  \n  \n    ```cpp  \n  \n    template <class T>  // alternatively, could be 'template <typename T>'; 'typename' is not elaborating a type specifier in this case  \n    class container;  \n  \n    ```  \n  \n-   **Type deduction of arrays from an initializer list**  \n  \n     Previous versions of the compiler did not support type deduction of arrays from an initializer list. The compiler now supports this form of type deduction and, as a result, calls to function templates using initializer lists might now be ambiguous or a different overload might be chosen than in previous versions of the compiler. To resolve these issues, the program must now explicitly specify the overload that the programmer intended.  \n  \n     When this new behavior causes overload resolution to consider an additional candidate that is equally as good as the historic candidate, the call becomes ambiguous and the compiler issues compiler error C2668 as a result.  \n  \n    ```Output  \n  \n    error C2668: 'function' : ambiguous call to overloaded function.  \n  \n    ```  \n  \n     Example 1: Ambiguous call to overloaded function (before)  \n  \n    ```cpp  \n  \n    // In previous versions of the compiler, code written in this way would unambiguously call f(int, Args...)  \n    template < typename... Args>  \n    void f(int, Args...);  //  \n  \n    template < int N, typename... Args>  \n    void f(const int(&)[N], Args...);  \n  \n    int main()  \n    {  \n        // The compiler now considers this call ambiguous, and issues a compiler error  \n         f({ 3 });   error C2668 : 'f' ambiguous call to overloaded function  \n    }  \n  \n    ```  \n  \n     Example 1: ambiguous call to overloaded function (after)  \n  \n    ```cpp  \n  \n    template < typename... Args>  \n    void f(int, Args...);  //  \n  \n    template < int N, typename... Args>  \n    void f(const int(&)[N], Args...);  \n  \n    int main()  \n    {  \n        // To call f(int, Args...) when there is just one expression in the initializer list, remove the braces from it.  \n        f(3);   \n    }  \n  \n    ```  \n  \n     When this new behavior causes overload resolution to consider an additional candidate that is a better match than the historic candidate, the call resolves unambiguously to the new candidate, causing a change in program behavior that is probably different than the programmer intended.  \n  \n     Example 2: change in overload resolution (before)  \n  \n    ```cpp  \n  \n    // In previous versions of the compiler, code written in this way would unambiguously call f(S, Args...)  \n    struct S  \n    {  \n        int i;  \n        int j;  \n    };  \n  \n    template < typename... Args>  \n    void f(S, Args...);  \n  \n    template < int N, typename... Args>  \n    void f(const int *&)[N], Args...);  \n  \n    int main()  \n    {  \n        // The compiler now resolves this call to f(const int (&)[N], Args...) instead  \n         f({ 1, 2 });   \n    }  \n  \n    ```  \n  \n     Example 2: change in overload resolution (after)  \n  \n    ```cpp  \n  \n    struct S;  // as before  \n  \n    template < typename... Args>  \n    void f(S, Args...);  \n  \n    template < int N, typename... Args>  \n    void f(const int *&)[N], Args...);  \n  \n    int main()  \n    {  \n        // To call f(S, Args...), perform an explicit cast to S on the initializer list.  \n        f(S{ 1, 2 });   \n    }  \n  \n    ```  \n  \n-   **Restoration of switch statement warnings**  \n  \n     A Previous version of the compiler removed previously-existing warnings related to `switch` statements; these warnings have now been restored. The compiler now issues the restored warnings, and warnings related to specific cases (including the default case) are now issued on the line containing the offending case, rather than on the last line of the switch statement. As a result of now issuing those warnings on different lines than in the past, warnings previously suppressed by using `#pragma warning(disable:####)` may no longer be suppressed as intended. To suppress these warnings as intended, it might be necessary to move the `#pragma warning(disable:####)` directive to a line above the first potentially-offending case. The following are the restored warnings.  \n  \n    ```Output  \n    warning C4060: switch statement contains no 'case' or 'default' labels  \n    ```  \n  \n    ```Output  \n  \n    warning C4061: enumerator 'bit1' in switch of enum 'flags' is not explicitly handled by a case label  \n  \n    ```  \n  \n    ```Output  \n  \n    warning C4062: enumerator 'bit1' in switch of enum 'flags' is not handled  \n  \n    ```  \n  \n    ```Output  \n  \n    warning C4063: case 'bit32' is not a valid value for switch of enum 'flags'  \n  \n    ```  \n  \n    ```Output  \n  \n    warning C4064: switch of incomplete enum 'flags'  \n  \n    ```  \n  \n    ```Output  \n    warning C4065: switch statement contains 'default' but no 'case' labels  \n    ```  \n  \n    ```Output  \n  \n    warning C4808: case 'value' is not a valid value for switch condition of type 'bool'  \n  \n    ```  \n  \n    ```Output  \n    Warning C4809: switch statement has redundant 'default' label; all possible 'case' labels are given  \n    ```  \n  \n     Example of C4063 (before)  \n  \n    ```cpp  \n  \n    class settings  \n    {  \n    public:  \n        enum flags  \n        {  \n            bit0 = 0x1,  \n            bit1 = 0x2,  \n            ...  \n        };  \n        ...  \n    };  \n  \n    int main()  \n    {  \n        auto val = settings::bit1;  \n  \n        switch (val)  \n        {  \n        case settings::bit0:  \n            break;  \n  \n        case settings::bit1:  \n            break;  \n  \n             case settings::bit0 | settings::bit1:  // warning C4063  \n                break;  \n        }  \n    };  \n  \n    ```  \n  \n     Example of C4063 (after)  \n  \n    ```cpp  \n  \n    class settings { ... };  // as above  \n    int main()  \n    {  \n        // since C++11, use std::underlying_type to determine the underlying type of an enum  \n        typedef std::underlying_type< settings::flags> ::type flags_t;   \n  \n            auto val = settings::bit1;  \n  \n        switch (static_cast< flags_t> (val))  \n        {  \n        case settings::bit0:  \n            break;  \n  \n        case settings::bit1:  \n            break;  \n  \n        case settings::bit0 | settings::bit1:  // ok  \n            break;  \n        }  \n    };  \n  \n    ```  \n  \n     Examples of the other restored warnings are provided in their documentation.  \n  \n-   **#include: use of parent-directory specifier '..' in pathname** (only affects /Wall /WX)  \n  \n     Previous versions of the compiler did not detect the use of the parent-directory specifier '..' in the pathname of  `#include` directives. Code written in this way is usually intended to include headers that exist outside of the project by incorrectly using project-relative paths. This old behavior created a risk that the program could be compiled by including a different source file than the programmer intended, or that these relative paths would not be portable to other build environments. The compiler now detects and notifies the programmer of code written in this way and issues an optional compiler warning C4464, if enabled.  \n  \n    ```Output  \n    warning C4464: relative include path contains '..'  \n    ```  \n  \n     Example (before)  \n  \n    ```cpp  \n  \n    #include \"..\\headers\\C4426.h\"  // emits warning C4464  \n  \n    ```  \n  \n     Example (after)  \n  \n    ```cpp  \n  \n    #include \"C4426.h\"  // add absolute path to 'headers\\' to your project's include directories  \n  \n    ```  \n  \n     Additionally, although the compiler does not give a specific diagnostic, we also recommend that the parent-directory specifier \"..\" should note be used to specify your project's include directories.  \n  \n-   **#pragma optimize() extends past end of header file** (only affects /Wall /WX)  \n  \n     Previous versions of the compiler did not detect changes to  optimization flag settings that escape a header file included within a translation unit. The compiler now detects and notifies the programmer of code written in this way and issues an optional compiler warning C4426 at the location of the offending `#include`, if enabled. This warning is only issued if the changes conflict with the optimization flags set by command-line arguments to the compiler.  \n  \n    ```Output  \n    warning C4426: optimization flags changed after including header, may be due to #pragma optimize()  \n    ```  \n  \n     Example (before)  \n  \n    ```cpp  \n  \n    // C4426.h  \n    #pragma optimize(\"g\", off)  \n    ...  \n    // C4426.h ends  \n  \n    // C4426.cpp  \n    #include \"C4426.h\"  // warning C4426  \n  \n    ```  \n  \n     Example (after)  \n  \n    ```cpp  \n  \n    // C4426.h  \n    #pragma optimize(\"g\", off)  \n                ...  \n    #pragma optimize(\"\", on)  // restores optimization flags set via command-line arguments  \n    // C4426.h ends  \n  \n    // C4426.cpp  \n    #include \"C4426.h\"  \n  \n    ```  \n  \n-   **Mismatched #pragma warning(push)** and **#pragma warning(pop)** (only affects /Wall /WX)  \n  \n     Previous versions of the compiler did not detect `#pragma warning(push)` state changes being paired with `#pragma warning(pop)` state changes in a different source file, which is rarely intended. This old behavior created a risk that the program would be compiled with a different set of warnings enabled than the programmer intended, possibly resulting in silent bad runtime behavior. The compiler now detects and notifies the programmer of code written in this way and issues an optional compiler warning C5031 at the location of the matching `#pragma warning(pop)`, if enabled. This warning includes a note referencing the location of the corresponding #pragma warning(push).  \n  \n    ```Output  \n    warning C5031: #pragma warning(pop): likely mismatch, popping warning state pushed in different file  \n    ```  \n  \n     Example (before)  \n  \n    ```cpp  \n  \n    // C5031_part1.h  \n    #pragma warning(push)  \n    #pragma warning(disable:####)  \n    ...  \n    // C5031_part1.h ends without #pragma warning(pop)  \n  \n    // C5031_part2.h  \n    ...  \n    #pragma warning(pop)  // pops a warning state not pushed in this source file  \n    ...  \n    // C5031_part1.h ends  \n  \n    // C5031.cpp  \n    #include \"C5031_part1.h\" // leaves #pragma warning(push) 'dangling'  \n    ...  \n    #include \"C5031_part2.h\" // matches 'dangling' #pragma warning(push), resulting in warning C5031  \n    ...  \n  \n    ```  \n  \n     Example (after)  \n  \n    ```cpp  \n  \n    // C5031_part1.h  \n    #pragma warning(push)  \n    #pragma warning(disable:####)  \n    ...  \n    #pragma warning(pop)  // pops the warning state pushed in this source file  \n    // C5031_part1.h ends without #pragma warning(pop)  \n  \n    // C5031_part2.h  \n    #pragma warning(push)  // pushes the warning state pushed in this source file  \n    #pragma warning(disable:####)  \n    ...  \n    #pragma warning(pop)  \n    // C5031_part1.h ends  \n  \n    // C5031.cpp  \n    #include \"C5031_part1.h\" // #pragma warning state changes are self-contained and independent of other source files or their #include order.  \n    ...  \n    #include \"C5031_part2.h\"  \n    ...  \n  \n    ```  \n  \n     Though uncommon, code written in this way is sometimes intentional. Code written in this way is sensitive to changes in `#include` order; when possible, we recommend that source code files manage warning state in a self-contained way.  \n  \n-   **Unmatched #pragma warning(push)** (only affects /Wall /WX)  \n  \n     Previous versions of the compiler did not detect unmatched `#pragma warning(push)` state changes at the end of a translation unit. The compiler now detects and notifies the programmer of code written in this way and issues an optional compiler warning C5032 at the location of the unmatched #pragma warning(push), if enabled. This warning is only issued if there are no compilation errors in the translation unit.  \n  \n    ```Output  \n    warning C5032: detected #pragma warning(push) with no corresponding #pragma warning(pop)  \n    ```  \n  \n     Example (before)  \n  \n    ```cpp  \n  \n    // C5032.h  \n    #pragma warning(push)  \n    #pragma warning(disable:####)  \n    ...  \n    // C5032.h ends without #pragma warning(pop)  \n  \n    // C5032.cpp  \n    #include \"C5032.h\"  \n    ...  \n    // C5032.cpp ends -- the translation unit is completed without #pragma warning(pop), resulting in warning C5032 on line 1 of C5032.h  \n  \n    ```  \n  \n     Example (after)  \n  \n    ```cpp  \n  \n    // C5032.h  \n    #pragma warning(push)  \n    #pragma warning(disable:####)  \n    ...  \n    #pragma warning(pop) // matches #pragma warning (push) on line 1  \n    // C5032.h ends  \n  \n    // C5032.cpp  \n    #include \"C5032.h\"  \n    ...  \n    // C5032.cpp ends -- the translation unit is completed without unmatched #pragma warning(push)  \n  \n    ```  \n  \n-   **Additional warnings might be issued as a result of improved #pragma warning state tracking**  \n  \n     Previous versions of the compiler tracked #pragma warning state changes insufficiently well to issue all intended warnings. This behavior created a risk that certain warnings would be effectively suppressed in circumstances different than the programmer intended. The compiler now tracks #pragma warning state more robustly -- especially related to #pragma warning state changes inside of templates -- and optionally issues new warnings C5031 and C5032 which are intended to help the programmer locate unintended uses of `#pragma warning(push)` and `#pragma warning(pop)`.  \n  \n     As a result of improved #pragma warning state change tracking, warnings formerly incorrectly suppressed or warnings related to issues formerly misdiagnosed might now be issued.  \n  \n-   **Improved identification of unreachable code**  \n  \n     C++ Standard Library changes and improved ability to inline function calls over previous versions of the compiler might allow the compiler to prove that certain code is now unreachable. This new behavior can result in new and more-frequently issued instances of warning C4720.  \n  \n    ```Output  \n    warning C4720: unreachable code  \n    ```  \n  \n     In many cases, this warning might only be issued when compiling with optimizations enabled, since optimizations may inline more function calls, eliminate redundant code, or otherwise make it possible to determine that certain code is unreachable. We have observed that new instances of warning C4720 have frequently occurred in try/catch blocks, especially in relation to use of [std::find](assetId:///std::find?qualifyHint=False&autoUpgrade=True).  \n  \n     Example (before)  \n  \n    ```cpp  \n  \n    try  \n    {  \n        auto iter = std::find(v.begin(), v.end(), 5);  \n    }  \n    catch (…)  \n    {  \n        do_something();   // ok  \n    }  \n  \n    ```  \n  \n     Example (after)  \n  \n    ```cpp  \n  \n    try  \n    {  \n        auto iter = std::find(v.begin(), v.end(), 5);  \n    }  \n    catch (…)  \n    {  \n        do_something();   // warning C4702: unreachable code  \n    }  \n  \n    ```  \n  \n###  <a name=\"VS_Update2\"></a> Conformance Improvements in Update 2  \n  \n-   **Additional warnings and errors might be issued as a result of partial support for expression SFINAE**  \n  \n     Previous versions of the compiler did not parse certain kinds of expressions inside `decltype` specifiers due to lack of  support for expression SFINAE. This old behavior was incorrect and does not conform to the C++ standard. The compiler now parses these expressions and has partial support for expression SFINAE due to  ongoing conformance improvements. As a result, the compiler now issues warnings and errors found in  expressions that previous versions of the compiler did not parse.  \n  \n     When this new behavior parses a `decltype` expression that includes a type that has not yet been declared, the compiler issues compiler error C2039 as a result.  \n  \n    ```Output  \n  \n    error C2039: 'type': is not a member of '`global namespace''  \n    ```  \n  \n     Example 1:  use of an undeclared type (before)  \n  \n    ```cpp  \n  \n    struct s1  \n    {  \n        template < typename T>  \n        auto f() - > decltype(s2< T> ::type::f());  // error C2039  \n  \n        template< typename>  \n        struct s2 {};  \n    }  \n  \n    ```  \n  \n     Example 1 (after)  \n  \n    ```cpp  \n  \n    struct s1  \n    {  \n        template < typename>  // forward declare s2struct s2;   \n  \n            template < typename T>  \n        auto f() - > decltype(s2< T> ::type::f());  \n  \n        template< typename>  \n        struct s2 {};  \n    }  \n  \n    ```  \n  \n     When this new behavior parses a `decltype` expression that is missing a necessary use of the `typename` keyword to specify that a dependent name is a type, the compiler issues  compiler warning C4346 together with compiler error C2923.  \n  \n    ```Output  \n  \n    warning C4346: 'S2<T>::Type': dependent name is not a type  \n  \n    ```  \n  \n    ```Output  \n  \n    error C2923: 's1': 'S2<T>::Type' is not a valid template type argument for parameter 'T'  \n    ```  \n  \n     Example 2: dependent name is not a type (before)  \n  \n    ```cpp  \n  \n    template < typename T>  \n    struct s1  \n    {  \n        typedef T type;  \n    };  \n  \n    template < typename T>  \n    struct s2  \n    {  \n        typedef T type;  \n    };  \n  \n    template < typename T>  \n    T declval();  \n  \n    struct s  \n    {  \n        template < typename T>  \n        auto f(T t) - > decltype(t(declval< S1< S2< T> ::type> ::type> ()));  // warning C4346, error C2923  \n    };  \n  \n    ```  \n  \n     Example 2 (after)  \n  \n    ```cpp  \n  \n    template < typename T> struct s1 { ... };  // as above  \n    template < typename T> struct s2 { ... };  // as above  \n  \n    template < typename T>  \n    T declval();  \n  \n    struct s  \n    {  \n        template < typename T>  \n        auto f(T t) - > decltype(t(declval< S1< typename S2< T> ::type> ::type> ()));  \n    };  \n  \n    ```  \n  \n-   `volatile` **member variables prevent implicitly defined constructors and assignment operators**  \n  \n     Previous versions of the compiler allowed a class that has `volatile` member variables to have default copy/move constructors and default copy/move assignment operators automatically generated. This old behavior was incorrect and does not conform to the C++ standard. The compiler now considers a class that has volatile member variables to have non-trivial construction and assignment operators which prevents default implementations of these operators from being automatically generated.  When such a class is a member of a union (or an anonymous union inside of a class), the copy/move constructors and copy/move assignment operators of the union (or the class containing the unonymous union) will be implicitly defined as deleted. Attempting to construct or copy the union (or class containing the anonymous union) without explicitly defining them is an error and the compiler  issues compiler error C2280 as a result.  \n  \n    ```Output  \n  \n    error C2280: 'B::B(const B &)': attempting to reference a deleted function  \n  \n    ```  \n  \n     Example (before)  \n  \n    ```cpp  \n  \n    struct A  \n    {  \n        volatile int i;  \n        volatile int j;  \n    };  \n  \n    extern A* pa;  \n  \n    struct B  \n    {  \n        union  \n        {  \n            A a;  \n            int i;  \n        };  \n    };  \n  \n    B b1{ *pa };  \n    B b2(b1);  // error C2280  \n    ```  \n  \n     Example (after)  \n  \n    ```cpp  \n  \n    struct A  \n    {  \n        int i; int j;   \n    };  \n  \n    extern volatile A* pa;  \n  \n    A getA()  // returns an A instance copied from contents of pa  \n    {  \n        A a;  \n        a.i = pa - > i;  \n        a.j = pa - > j;  \n        return a;  \n    }  \n  \n    struct B;  // as above  \n  \n    B b1{ GetA() };  \n    B b2(b1);  // error C2280  \n    ```  \n  \n-   **Static member functions do not support cv-qualifiers.**  \n  \n     Previous versions of Visual C++ 2015 allowed static member functions to have cv-qualifiers. This behavior is due to a regression in Visual C++ 2015 and Visual C++ 2015 Update 1; Visual C++ 2013 and previous versions of Visual C++ reject code written in this way. The behavior of Visual C++ 2015 and Visual C++ 2015 Update 1 is incorrect and does not conform to the C++ standard.  Visual Studio 2015 Update 2 rejects code written in this way and issues compiler error C2511 instead.  \n  \n    ```Output  \n    error C2511: 'void A::func(void) const': overloaded member function not found in 'A'  \n    ```  \n  \n     Example (before)  \n  \n    ```cpp  \n  \n    struct A  \n    {  \n        static void func();  \n    };  \n  \n    void A::func() const {}  // C2511  \n  \n    ```  \n  \n     Example(after)  \n  \n    ```cpp  \n  \n    struct A  \n    {  \n        static void func();  \n    };  \n  \n    void A::func() {}  // removed const  \n  \n    ```  \n  \n-   **Forward declaration of enum is not allowed in WinRT code** (affects /ZW only)  \n  \n     Code compiled for the Windows Runtime (WinRT) doesn't allow `enum` types to be forward declared, similarly to when managed C++ code is compiled for the .Net Framework using the /clr compiler switch. This behavior is ensures that the size of an enumeration is always known and can be correctly projected to the WinRT type system. The compiler rejects code written in this way and  issues compiler error C2599 together with compiler error C3197.  \n  \n    ```Output  \n  \n    error C2599: 'CustomEnum': the forward declaration of a WinRT enum is not allowed  \n  \n    ```  \n  \n    ```Output  \n  \n    error C3197: 'public': can only be used in definitions  \n  \n    ```  \n  \n     Example (before)  \n  \n    ```cpp  \n  \n    namespace A {  \n        public enum class CustomEnum : int32;  // forward declaration; error C2599, error C3197  \n    }  \n  \n    namespace A {  \n        public enum class CustomEnum : int32  \n        {  \n            Value1  \n        };  \n    }  \n  \n    public ref class Component sealed  \n    {  \n    public:  \n        CustomEnum f()  \n        {  \n            return CustomEnum::Value1;  \n        }  \n    };  \n  \n    ```  \n  \n     Example (after)  \n  \n    ```cpp  \n  \n              // forward declaration of CustomEnum removed  \n  \n    namespace A {  \n        public enum class CustomEnum : int32  \n        {  \n            Value1  \n        };  \n    }  \n  \n    public ref class Component sealed  \n    {  \n    public:  \n        CustomEnum f()  \n        {  \n            return CustomEnum::Value1;  \n        }  \n    };  \n  \n    ```  \n  \n-   **Overloaded non-member operator new and operator delete may not be declared inline** (Level 1 (/W1) on-by-default)  \n  \n     Previous versions of the compiler do not issue a warning when non-member operator new and operator delete functions are declared inline. Code written in this way is ill-formed (no diagnostic required) and can cause memory issues  resulting from mismatched new and delete operators (especially when used together with sized deallocation) that can be difficult to diagnose.   The compiler now issues compiler warning C4595 to help identify code written in this way.  \n  \n    ```Output  \n  \n    warning C4595: 'operator new': non-member operator new or delete functions may not be declared inline  \n  \n    ```  \n  \n     Example (before)  \n  \n    ```cpp  \n  \n              inline void* operator new(size_t sz)  // warning C4595  \n    {  \n        ...  \n    }  \n  \n    ```  \n  \n     Example (after)  \n  \n    ```cpp  \n  \n              void* operator new(size_t sz)  // removed inline  \n    {  \n        ...  \n    }  \n  \n    ```  \n  \n     Fixing code that's written in this way might require that the operator definitions be moved out of a header file and into a corresponding source file.  \n  \n###  <a name=\"VS_Update3\"></a> Conformance Improvements in Update 3  \n  \n-   **std::is_convertable now detects self-assignment**  (standard library)  \n  \n     Previous versions of the `std::is_convertable` type-trait did not correctly detect self-assignment of a class type when its copy constructor is deleted or private. Now, `std::is_convertable<>::value` is correctly set to `false` when applied to a class type with a deleted or private copy constructor.  \n  \n     There is no compiler diagnostic associated with this change.  \n  \n     Example  \n  \n    ```cpp  \n  \n    #include <type_traits>  \n  \n                class X1  \n    {  \n                public:  \n                X1(const X1&) = delete;  \n                };  \n  \n                class X2  \n    {  \n                private:  \n                X2(const X2&);  \n                };  \n  \n    static_assert(std::is_convertible<X1&, X1>::value, \"BOOM\");static_assert(std::is_convertible<X2&, X2>::value, \"BOOM\");  \n    ```  \n  \n     In previous versions of Visual C++, the static assertions at the bottom of this example pass because `std::is_convertable<>::value` was incorrectly set to `true`. Now, `std::is_convertable<>::value` is correctly set to `false`, causing the static assertions to fail.  \n  \n-   **Defaulted or deleted trivial copy and move constructors respect access specifiers**  \n  \n     Previous versions of the compiler did not check the access specifier of defaulted or deleted trivial copy and move constructors before allowing them to be called. This old behavior was incorrect and does not conform to the C++ standard. In some cases, this old  behavior created a risk of silent bad code generation, resulting in unpredictable runtime behavior. The compiler now checks the access specifier  of defaulted or deleted trivial copy and move constructors to determine whether it can be called, and if not, issues compiler warning C2248 as a result.  \n  \n    ```Output  \n  \n    error C2248: 'S::S' cannot access private member declared in class 'S'  \n    ```  \n  \n     Example (before)  \n  \n    ```cpp  \n  \n    class S {  \n    public:  \n        S() = default;  \n    private:  \n        S(const S&) = default;  \n    };  \n  \n    void f(S);  // pass S by value  \n  \n    int main()  \n    {  \n        S s;  \n        f(s);  // error C2248, can't invoke private copy constructor  \n    }  \n  \n    ```  \n  \n     Example (after)  \n  \n    ```cpp  \n  \n    class S {  \n    public:  \n        S() = default;  \n    private:  \n        S(const S&) = default;  \n    };  \n  \n    void f(const S&);  // pass S by reference  \n  \n    int main()  \n    {  \n        S s;  \n        f(s);   \n    }  \n  \n    ```  \n  \n-   **Deprecation of attributed ATL code support** (Level 1 (/W1) on-by-default)  \n  \n     Previous versions of the compiler supported attributed ATL code. As the next phase of removing support for attributed ATL code that [began in Visual C++ 2008](https://msdn.microsoft.com/library/bb384632\\(v=vs.90\\).aspx), attributed ATL code has been deprecated. The compiler now issues compiler warning C4467 to help identify this kind of deprecated code.  \n  \n    ```Output  \n    warning C4467: Usage of ATL attributes is deprecated  \n    ```  \n  \n     If you want to continue using attributed ATL code until support is removed from the compiler, you can disable this warning by passing the `/Wv:18` or `/wd:4467` command line arguments to the compiler, or by adding  `#pragma warning(disable:4467)` in your source code.  \n  \n     Example 1 (before)  \n  \n    ```cpp  \n  \n              [uuid(\"594382D9-44B0-461A-8DE3-E06A3E73C5EB\")]  \n    class A {};  \n  \n    ```  \n  \n     Example 1 (after)  \n  \n    ```cpp  \n  \n    __declspec(uuid(\"594382D9-44B0-461A-8DE3-E06A3E73C5EB\")) A {};  \n  \n    ```  \n  \n     Sometimes you might need or want to create an IDL file to avoid the use deprecated ATL attributes, as in the example code below  \n  \n     Example 2 (before)  \n  \n    ```cpp  \n  \n    [emitidl];  \n    [module(name = \"Foo\")];  \n  \n    [object, local, uuid(\"9e66a290-4365-11d2-a997-00c04fa37ddb\")]  \n    __interface ICustom {  \n        HRESULT Custom([in] long l, [out, retval] long *pLong);  \n        [local] HRESULT CustomLocal([in] long l, [out, retval] long *pLong);  \n    };  \n  \n    [coclass, appobject, uuid(\"9e66a294-4365-11d2-a997-00c04fa37ddb\")]  \n    class CFoo : public ICustom  \n    {  \n        // ...  \n    };  \n  \n    ```  \n  \n     First, create the *.idl file; the vc140.idl generated file can be used to obtain an \\*.idl file containing the interfaces and annotations.  \n  \n     Next, add a MIDL step to your build to make sure that the C++ interface definitions are generated.  \n  \n     Example 2 IDL (after)  \n  \n    ```cpp  \n  \n    import \"docobj.idl\";  \n  \n    [  \n        object, local, uuid(9e66a290 - 4365 - 11d2 - a997 - 00c04fa37ddb)  \n    ]  \n  \n    interface ICustom : IUnknown {  \n        HRESULT  Custom([in] long l, [out, retval] long *pLong);  \n        [local] HRESULT  CustomLocal([in] long l, [out, retval] long *pLong);  \n    };  \n  \n    [version(1.0), uuid(29079a2c - 5f3f - 3325 - 99a1 - 3ec9c40988bb)]  \n    library Foo  \n    {  \n        importlib(\"stdole2.tlb\");  \n    importlib(\"olepro32.dll\");  \n    [  \n        version(1.0),  \n        appobject,uuid(9e66a294 - 4365 - 11d2 - a997 - 00c04fa37ddb)  \n    ]  \n  \n    coclass CFoo {  \n        interface ICustom;  \n    };  \n    }  \n  \n    ```  \n  \n     Then, use ATL directly in the implementation file, as in the example code below.  \n  \n     Example 2  Implementation (after)  \n  \n    ```cpp  \n  \n    #include <idl.header.h>  \n    #include <atlbase.h>  \n  \n    class ATL_NO_VTABLE CFooImpl :  \n        public ICustom,  \n        public ATL::CComObjectRootEx< CComMultiThreadModel>  \n    {  \n    public:  \n        BEGIN_COM_MAP(CFooImpl)  \n            COM_INTERFACE_ENTRY(ICustom)  \n        END_COM_MAP()  \n    };  \n  \n    ```  \n  \n-   **Precompiled header (PCH) files and mismatched #include directives** (only affects /Wall /WX)  \n  \n     Previous versions of the compiler accepted mismatched `#include` directives in source files between `-Yc` and `-Yu` compilations when using precompiled header (PCH)  files. Code written in this way is no longer accepted by the compiler.   The compiler now issues compiler warning CC4598 to help identify mismatched `#include` directives when using PCH files.  \n  \n    ```Output  \n  \n    warning C4598: 'b.h': included header file specified for Ycc.h at position 2 does not match Yuc.h at that position  \n  \n    ```  \n  \n     Example (before):  \n  \n     X.cpp (-Ycc.h)  \n  \n    ```cpp  \n  \n    #include \"a.h\"  \n    #include \"b.h\"  \n    #include \"c.h\"  \n  \n    ```  \n  \n     Z.cpp (-Yuc.h)  \n  \n    ```cpp  \n  \n    #include \"b.h\"  \n    #include \"a.h\"  // mismatched order relative to X.cpp  \n    #include \"c.h\"  \n  \n    ```  \n  \n     Example (after)  \n  \n     X.cpp (-Ycc.h)  \n  \n    ```cpp  \n  \n    #include \"a.h\"  \n    #include \"b.h\"   \n    #include \"c.h\"  \n  \n    ```  \n  \n     Z.cpp (-Yuc.h)  \n  \n    ```cpp  \n  \n    #include \"a.h\"  \n    #include \"b.h\" // matched order relative to X.cpp  \n    #include \"c.h\"  \n  \n    ```  \n  \n-   **Precompiled header (PCH) files and mismatched include directories** (only affects /Wall /WX)  \n  \n     Previous versions of the compiler accepted mismatched include directory (`-I`) command line arguments to the compiler between `-Yc` and `-Yu` compilations when using precompiled header (PCH)  files. Code written in this way is no longer accepted by the compiler.   The compiler now issues compiler warning CC4599 to help identify mismatched include directory (`-I`) command line arguments when using PCH files.  \n  \n    ```Output  \n  \n    warning C4599: '-I..' : specified for Ycc.h at position 1 does not match Yuc.h at that position  \n  \n    ```  \n  \n     Example (before)  \n  \n    ```ms-dos  \n  \n    cl /c /Wall /Ycc.h -I.. X.cpp  \n    cl /c /Wall /Yuc.h Z.cpp  \n  \n    ```  \n  \n     Example (after)  \n  \n    ```ms-dos  \n  \n    cl /c /Wall /Ycc.h -I.. X.cpp  \n    cl /c /Wall /Yuc.h -I.. Z.cpp  \n  \n    ```  \n  \n## Visual C++ 2013 Conformance Changes  \n  \n### Compiler  \n  \n-   The final keyword now generates an unresolved symbol error where it would have compiled previously:  \n  \n    ```cpp  \n  \n    struct S1 {  \n        virtual void f() = 0;  \n    };  \n  \n    struct S2 final : public S1 {  \n        virtual void f();  \n    };  \n  \n    int main(S2 *p)  \n    {  \n        p->f();  \n    }  \n  \n    ```  \n  \n     In earlier versions, an error wasn't issued because the call was a virtual call; nevertheless, the program would crash at runtime. Now, a linker error is issued because the class is known to be final. In this example, to fix the error, you would link against the obj that contains the definition of S2::f.  \n  \n-   When you use friend functions in namespaces, you must re-declare the friend function before you refer to it or you will get an error because the compiler now conforms to the ISO C++ Standard. For example, this no longer compiles:  \n  \n    ```cpp  \n  \n    namespace NS {  \n        class C {  \n            void func(int);  \n            friend void func(C* const) {}  \n        };  \n  \n        void C::func(int) {  \n            NS::func(this);  // error  \n        }  \n    }  \n  \n    ```  \n  \n     To correct this code, declare the friend function:  \n  \n    ```cpp  \n  \n    namespace NS {  \n        class C {  \n            void func(int);  \n            friend void func(C* const) {}  \n        };  \n  \n        void func(C* const);  // conforming fix  \n  \n        void C::func(int) {  \n            NS::func(this);  \n        }  \n  \n    ```  \n  \n-   The C++ Standard does not allow explicit specialization in a class. Although Visual C++ allows it in some cases, in cases such as the following example, an error is now generated because the compiler doesn't consider the second function to be a specialization of the first one.  \n  \n    ```cpp  \n  \n    template < int N>  \n    class S {  \n    public:  \n        template  void f(T& val);  \n        template < > void f(char val);  \n    };  \n  \n    template class S< 1>;  \n  \n    ```  \n  \n     To correct this code, modify the second function:  \n  \n    ```cpp  \n  \n    template <> void f(char& val);  \n  \n    ```  \n  \n-   Visual C++ no longer tries to disambiguate the two functions in the following example, and now emits an error:  \n  \n    ```cpp  \n  \n    template< typename T> void Func(T* t = nullptr);  \n    template< typename T> void Func(...);  \n  \n    int main() {  \n        Func< int>(); // error  \n    }  \n  \n    ```  \n  \n     To correct this code, clarify the call:  \n  \n    ```cpp  \n  \n    template< typename T> void Func(T* t = nullptr);  \n    template< typename T> void Func(...);  \n  \n    int main() {  \n        Func< int>(nullptr); // ok  \n    }  \n  \n    ```  \n  \n-   Before the compiler was made compliant with ISO C++11, the following code would have compiled and caused x to resolve to type int:  \n  \n    ```cpp  \n  \n    auto x = {0};  \n    int y = x;  \n  \n    ```  \n  \n     This code now resolves x to a type of std::initializer_list\\<int> and causes an error on the next line that tries to assign x to type int. (There is no conversion by default.) To correct this code, use int to replace auto:  \n  \n    ```cpp  \n  \n    int x = {0};  \n    int y = x;  \n  \n    ```  \n  \n-   Aggregate initialization is no longer allowed when the type of the right-hand value does not match the type of the left-hand value that's being initialized, and an error is issued because the ISO C++11 Standard requires uniform initialization to work without narrowing conversions. Previously, if a narrowing conversion was available, a [Compiler Warning (level 4) C4242](../error-messages/compiler-warnings/compiler-warning-level-4-c4242.md) warning would have been issued instead of an error.  \n  \n    ```cpp  \n  \n    int i = 0;  \n    char c = {i}; // error  \n  \n    ```  \n  \n     To correct this code, add an explicit narrowing conversion:  \n  \n    ```cpp  \n  \n    int i = 0;  \n    char c = {static_cast<char>(i)};  \n  \n    ```  \n  \n-   The following initialization is no longer allowed:  \n  \n    ```cpp  \n  \n    void *p = {{0}};  \n  \n    ```  \n  \n     To correct this code, use either of these forms:  \n  \n    ```cpp  \n  \n    void *p = 0;  \n    // or  \n    void *p = {0};  \n  \n    ```  \n  \n-   Name lookup has changed. The following code is resolved differently in Visual C++ in Visual Studio 2012 and Visual C++ in Visual Studio 2013:  \n  \n    ```cpp  \n  \n    enum class E1 { a };  \n    enum class E2 { b };  \n  \n    int main()  \n    {  \n        typedef E2 E1;  \n        E1::b;  \n    }  \n  \n    ```  \n  \n     In Visual C++ in Visual Studio 2012, the E1 in expression E1::b resolved to ::E1 in the global scope. In Visual C++ in Visual Studio 2013, E1 in expression E1::b resolves to the typedef E2 definition in main() and has type ::E2.  \n  \n-   Object layout has changed. On x64, the object layout of a class may change from previous releases. If it has a virtual function but it doesn’t have a base class that has a virtual function, the object model of the compiler inserts a pointer to a virtual function table after the data member layout. This means the layout may not be optimal in all cases. In previous releases, an optimization for x64 would try to improve the layout for you, but because it failed to work correctly in complex code situations, it was removed in Visual C++ in Visual Studio 2013. For example, consider this code:  \n  \n    ```cpp  \n  \n    __declspec(align(16)) struct S1 {  \n    };  \n  \n    struct S2 {  \n        virtual ~S2();  \n        void *p;  \n        S1 s;  \n    };  \n  \n    ```  \n  \n-   In Visual C++ in Visual Studio 2013, the result of sizeof(S2) on x64 is 48, but in previous releases, it evaluates to 32. To make this evaluate to 32 in Visual C++ in Visual Studio 2013 for x64, add a dummy base class that has a virtual function:  \n  \n    ```cpp  \n  \n    __declspec(align(16)) struct S1 {  \n    };  \n  \n    struct dummy {  \n        virtual ~dummy() {}  \n    };  \n    struct S2 : public dummy {  \n        virtual ~S2();  \n        void *p;  \n        S1 s;  \n    };  \n  \n    ```  \n  \n     To find places in your code that an earlier release would have tried to optimize, use a compiler from that release together with the /W3 compiler option and turn on Warning 4370. For example:  \n  \n    ```cpp  \n  \n    #pragma warning(default:4370)  \n  \n    __declspec(align(16)) struct S1 {  \n    };  \n  \n    struct S2 {  \n        virtual ~S2();  \n        void *p;  \n        S1 s;  \n    };  \n  \n    ```  \n  \n     On Visual C++ compilers before Visual C++ in Visual Studio 2013, this code outputs this message: warning C4370: 'S2' : layout of class has changed from a previous version of the compiler due to better packing  \n  \n     The x86 compiler has the same sub-optimal layout issue in all versions of Visual C++. For example, if this code is compiled for x86:  \n  \n    ```cpp  \n  \n    struct S {  \n        virtual ~S();  \n        int i;  \n        double d;  \n    };  \n  \n    ```  \n  \n     The result of sizeof(S) is 24. However, this can be reduced to 16 if you use the workaround just mentioned for x64:  \n  \n    ```cpp  \n  \n    struct dummy {  \n        virtual ~dummy() {}  \n    };  \n  \n    struct S : public dummy {  \n        virtual ~S();  \n        int i;  \n        double d;  \n    };  \n  \n    ```  \n  \n### Standard Library  \n Visual C++ in Visual Studio 2013 detects mismatches in _ITERATOR_DEBUG_LEVEL, which was implemented in Visual C++ 2010, and RuntimeLibrary mismatches. These occur when compiler options /MT (static release), /MTd (static debug), /MD (dynamic release), and /MDd (dynamic debug) are mixed.  \n  \n-   If your code acknowledges the previous release's simulated alias templates, you have to change it. For example, instead of allocator_traits\\<A>::rebind_alloc\\<U>::other, now you have to say allocator_traits\\<A>::rebind_alloc\\<U>. Although ratio_add\\<R1, R2>::type is no longer necessary and we now recommend that you say ratio_add\\<R1, R2>, the former will still compile because ratio\\<N, D> is required to have a \"type\" typedef for a reduced ratio, which will be the same type if it's already reduced.  \n  \n-   You must use #include \\<algorithm> when you call std::min() or std::max().  \n  \n-   If your existing code uses the previous release’s simulated scoped enums—traditional unscoped enums wrapped in namespaces—you have to change it. For example, if you referred to the type std::future_status::future_status, now you have to say std::future_status. However, most code is unaffected—for example, std::future_status::ready still compiles.  \n  \n-   explicit operator bool() is stricter than operator unspecified-bool-type(). explicit operator bool() permits explicit conversions to bool—for example, given shared_ptr\\<X> sp, both static_cast\\<bool>(sp) and bool b(sp) are valid—and Boolean-testable \"contextual conversions\" to bool—for example, if (sp), !sp, sp && whatever. However, explicit operator bool() forbids implicit conversions to bool, so you can't say bool b = sp; and given a bool return type, you can't say return sp.  \n  \n-   Now that real variadic templates are implemented, _VARIADIC_MAX and related macros have no effect. If you're still defining _VARIADIC_MAX, it is just ignored. If you acknowledged our macro machinery intended to support simulated variadic templates in any other way, you have to change your code.  \n  \n-   In addition to ordinary keywords, STL headers now forbid the macro-izing of the context-sensitive keywords \"override\" and \"final\".  \n  \n-   reference_wrapper/ref()/cref() now forbid binding to temporary objects.  \n  \n-   \\<random> now strictly enforces its compile-time preconditions.  \n  \n-   Various STL type traits have the precondition \"T shall be a complete type\". Although the compiler now enforces this more strictly, it may not enforce it in all situations. (Because STL precondition violations trigger undefined behavior, the Standard doesn't guarantee enforcement.)  \n  \n-   The STL does not support /clr:oldSyntax.  \n  \n-   The C++11 specification for common_type<> had unexpected and undesired consequences; in particular, it makes common_type\\<int, int>::type return int&&. Therefore, Visual C++ implements the Proposed Resolution for Library Working Group issue 2141, which makes common_type\\<int, int=\"\">::type return int.  \n  \n     As a side-effect of this change, the identity case no longer works (common_type\\<T> does not always result in type T). This complies with the Proposed Resolution, but it breaks any code that relied on the previous behavior.  \n  \n     If you require an identity type trait, don't use the non-standard std::identity that's defined in <type_traits>                 because it won't work for \\<void>                 . Instead, implement your own identity type trait to suit your needs. Here's an example:  \n  \n    ```cpp  \n  \n    template < typename T> struct Identity {  \n        typedef T type;  \n    };  \n  \n    ```  \n  \n### MFC and ATL  \n  \n-   MFC MBCS Library is no longer included in Visual Studio because Unicode is so popular and use of MBCS is significantly reduced. This change also keeps MFC more closely aligned with the Windows SDK itself, because many of the new controls and messages are Unicode-only. However, if you must continue to use the MFC MBCS library, you can download it from the MSDN Download Center. The Visual C++ Redistributable Package still includes this library.  \n  \n-   Accessibility for the MFC ribbon is changed.  Instead of a one-level architecture, there is now a hierarchical architecture. You can still use the old behavior by calling CRibbonBar::EnableSingleLevelAccessibilityMode().  \n  \n-   CDatabase::GetConnect method is removed. To improve security, the connection string is now stored encrypted and is decrypted only as needed; it cannot be returned as plain text.  The string can be obtained by using the CDatabase::Dump method.  \n  \n-   Signature of CWnd::OnPowerBroadcast is changed. The signature of this message handler is changed to take an LPARAM as the second parameter.  \n  \n-   Signatures are changed to accommodate message handlers. The parameter lists of the following functions have been changed to use newly added ON_WM_* message handlers:  \n  \n    -   CWnd::OnDisplayChange changed to (UINT, int, int) instead of (WPARAM, LPARAM) so that the new ON_WM_DISPLAYCHANGE macro can be used in the message map.  \n  \n    -   CFrameWnd::OnDDEInitiate changed to (CWnd*, UINT, UNIT) instead of (WPARAM, LPARAM) so that the new ON_WM_DDE_INITIATE macro can be used in the message map.  \n  \n    -   CFrameWnd::OnDDEExecute changed to (CWnd*, HANDLE) instead of (WPARAM, LPARAM) so that the new ON_WM_DDE_EXECUTE macro can be used in the message map.  \n  \n    -   CFrameWnd::OnDDETerminate changed to (CWnd*) as the parameter instead of (WPARAM, LPARAM) so that the new ON_WM_DDE_TERMINATE macro can be used in the message map.  \n  \n    -   CMFCMaskedEdit::OnCut changed to no parameters instead of (WPARAM, LPARAM) so that the new ON_WM_CUT macro can be used in the message map.  \n  \n    -   CMFCMaskedEdit::OnClear changed to no parameters instead of (WPARAM, LPARAM) so that the new ON_WM_CLEAR macro can be used in the message map.  \n  \n    -   CMFCMaskedEdit::OnPaste changed to no parameters instead of (WPARAM, LPARAM) so that the new ON_WM_PASTE macro can be used in the message map.  \n  \n-   \\#ifdefs in the MFC header files are removed. Numerous #ifdefs in the MFC header files related to unsupported versions of Windows (WINVER &lt; 0x0501) are removed.  \n  \n-   ATL DLL (atl120.dll) is removed. ATL is now provided as headers and a static library (atls.lib).  \n  \n-   Atlsd.lib, atlsn.lib, and atlsnd.lib are removed. Atls.lib no longer has character-set dependencies or code that's specific for debug/release. Because it works the same for Unicode/ANSI and debug/release, only one version of the library is required.  \n  \n-   ATL/MFC Trace tool is removed together with the ATL DLL, and the tracing mechanism is simplified. The CTraceCategory constructor now takes one parameter (the category name), and the TRACE macros call the CRT debug reporting functions.  \n  \n## Visual C++ 2012 Breaking Changes  \n  \n### Compiler  \n  \n-   The /Yl compiler option has changed. By default, the compiler uses this option, which can lead to LNK2011 errors under certain conditions. For more information, see [/Yl (Inject PCH Reference for Debug Library)](../build/reference/yl-inject-pch-reference-for-debug-library.md).  \n  \n-   In code that's compiled by using /clr, the enum class keyword defines a C++11 enum, not a common language runtime (CLR) enum. To define a CLR enum, you must be explicit about its accessibility.  \n  \n-   Use the template keyword to explicitly disambiguate a dependent name (C++ Language Standard compliance). In the following example, the highlighted template keyword is mandatory to resolve the ambiguity. For more information, see [Name Resolution for Dependent Types](../cpp/name-resolution-for-dependent-types.md).  \n  \n    ```cpp  \n  \n    template < typename X = \"\", typename = \"\" AY = \"\">  \n    struct Container { typedef typename AY::template Rebind< X> ::Other AX; };  \n  \n    ```  \n  \n-   Constant expression of type float is no longer allowed as a template argument, as shown in the following example.  \n  \n    ```cpp  \n  \n    template<float n=3.14>  \n    struct B {};  // error C2993: 'float': illegal type for non-type template parameter 'n'  \n  \n    ```  \n  \n-   Code that's compiled by using the /GS command-line option and that has an off-by-one vulnerability may lead to process termination at                 runtime, as shown in the following pseudocode example.  \n  \n    ```cpp  \n    char buf[MAX]; int cch; ManipulateString(buf, &cch); // ... buf[cch] = '\\0'; // if cch >= MAX, process will terminate  \n    ```  \n  \n-   The default architecture for x86 builds is changed to SSE2; therefore, the compiler may emit SSE instructions, and will use the XMM                 registers to perform floating-point calculations. If you want to revert to previous behavior, then use the /arch:IA32 compiler flag to specify the                 architecture as IA32.  \n  \n-   The compiler may issue warnings [Compiler Warning (level 4) C4703](../error-messages/compiler-warnings/compiler-warning-level-4-c4703.md) and C4701 where previously it did not. The compiler applies stronger checks for use of                 uninitialized local variables of pointer type.  \n  \n-   When the new linker flag /HIGHENTROPYVA is specified, Windows 8 typically causes memory allocations to return a 64-bit address.                 (Prior to Windows 8, such allocations more often returned addresses that were less than 2 GB.)  This may expose pointer truncation bugs in existing code. By default, this switch is on.  To disable this behavior, specify /HIGHENTROPYVA:NO.  \n  \n-   The managed compiler (Visual Basic/C#) also supports /HIGHENTROPYVA for managed builds.  However, in this case,                 the /HIGHENTROPYVAswitch is off by default.  \n  \n### IDE  \n  \n-   Although we recommend that you do not create Windows Forms applications in C++/CLI, maintenance of existing C++/CLI UI applications is supported. If you have to create a Windows Forms application, or any other .NET UI application, use C# or Visual Basic. Use C++/CLI for interoperability purposes only.  \n  \n### Parallel Patterns Library and Concurrency Runtime Library  \n The SchedulerType enumeration of UmsThreadDefault is deprecated. Specification of UmsThreadDefault produces a deprecated warning, and internally maps back to the ThreadScheduler.  \n  \n### Standard Library  \n  \n-   Following a breaking change between the C++98/03 and C++11 standards, using explicit template arguments to call make_pair()—as inmake_pair\\<int, int>(x, y)—typically does not compile in Visual C++ in Visual Studio 2012. The solution is to always call make_pair()without explicit template arguments—as in make_pair(x, y). Providing explicit template arguments defeats the purpose of the function. If you require precise control over the resulting type, use pair instead of make_pair—as in pair\\<short, short>(int1, int2).  \n  \n-   Another breaking change between the C++98/03 and C++11 standards: When A is implicitly convertible to B and B is implicitly convertible to C, but A is not implicitly convertible to C, C++98/03 and Visual C++ 2010 permitted pair\\<A, X> to be converted (implicitly or explicitly) to pair\\<C, X>. (The other type, X, is not of interest here, and this is not specific to the first type in the pair.) Because C++11 and Visual C++ in Visual Studio 2012 detect that A is not implicitly convertible to C, they remove the pair conversion from overload resolution. This is a positive change for many scenarios. For example, overloading func(const pair\\<int, int>&) and func(const pair\\<string, string>&), and calling func() with pair\\<const char *, const char \\*> will compile with this change. However, this change breaks code that relied on aggressive pair conversions. Such code can typically be fixed by performing one part of the conversion explicitly—for example, by passing make_pair(static_cast\\<B>(a), x) to a function that expects pair\\<C, X>.  \n  \n-   Visual C++ 2010 simulated variadic templates—for example, make_shared\\<T>(arg1, arg2, argN)—up to a limit of 10 arguments, by stamping out overloads and specializations with preprocessor machinery. In Visual C++ in Visual Studio 2012, this limit is reduced to 5 arguments to improve compile times and compiler memory consumption for the majority of users. However, you can set the previous limit by explicitly defining _VARIADIC_MAX as 10, project-wide.  \n  \n-   C++11 17.6.4.3.1 [macro.names]/2 forbids macro-izing keywords when C++ Standard Library headers are included. The headers now emit compiler errors if they detect macro-ized keywords. (Defining _ALLOW_KEYWORD_MACROS allows such code to compile, but we strongly discourage that usage.) As an exception, macro-ized new is permitted by default, because the headers comprehensively defend themselves by using #pragma push_macro(\"new\")/#undef new/#pragma pop_macro(\"new\"). Defining _ENFORCE_BAN_OF_MACRO_NEW does exactly what its name implies.  \n  \n-   To implement various optimizations and debugging checks, the C++ Standard Library implementation intentionally breaks binary compatibility among versions of Visual Studio (2005, 2008, 2010, 2012). When the C++ Standard Library is used, this forbids the mixing of object files and static libraries that are compiled by using different versions into one binary (EXE or DLL), and forbids the passing of C++ Standard Library objects between binaries that are compiled by using different versions. The mixing of object files and static libraries (using the C++ Standard Library) that were compiled by using Visual C++ 2010 with those that were compiled by using Visual C++ in Visual Studio 2012 emits linker errors about _MSC_VER mismatch, where _MSC_VER is the macro that contains the compiler's major version (1700 for Visual C++ in Visual Studio 2012). This check cannot detect DLL mixing, and cannot detect mixing that involves Visual C++ 2008 or earlier.  \n  \n-   In addition to detecting _ITERATOR_DEBUG_LEVEL mismatches, which was implemented in Visual C++ 2010, Visual C++ in Visual Studio 2012 detects Runtime Library mismatches. These occur when the compiler options /MT (static release), /MTd (static debug), /MD (dynamic release), and /MDd (dynamic debug) are mixed.  \n  \n-   operator\\<(), operator>(), operator\\<=(), and operator>=() were previously available for the std::unordered_map andstdext::hash_map families of containers, although their implementations were not actually useful. These non-standard operators have been removed in Visual C++ in Visual Studio 2012. Additionally, the implementation of operator==() and operator!=() for thestd::unordered_map family has been extended to cover the stdext::hash_map family. (We recommend that you avoid the use of thestdext::hash_map family in new code.)  \n  \n-   C++11 22.4.1.4 [locale.codecvt] specifies that codecvt::length() and codecvt::do_length() should take modifiable stateT&parameters, but Visual C++ 2010 took const stateT&. Visual C++ in Visual Studio 2012 takes stateT& as mandated by the standard. This difference is significant for anyone who is attempting to override the virtual function do_length().  \n  \n### CRT  \n  \n-   The C Runtime (CRT) heap, which is used for new and malloc(), is no longer private. The CRT now uses the process heap. This means that the heap is not destroyed when a DLL is unloaded, so DLLs that link statically to the CRT must ensure memory that's allocated by the DLL code is cleaned up before it’s unloaded.  \n  \n-   The iscsymf() function asserts with negative values.  \n  \n-   The threadlocaleinfostruct struct has changed to accommodate the changes to locale functions.  \n  \n-   CRT functions that have corresponding intrinsics such as memxxx(), strxxx() are removed from intrin.h. If you included intrin.h only for these functions, you must now include the corresponding CRT headers.  \n  \n### MFC and ATL  \n  \n-   Removed Fusion support (afxcomctl32.h); therefore, all methods that are defined in afxcomctl32.h have been removed. Header files afxcomctl32.h and afxcomctl32.inl have been deleted.  \n  \n-   Changed the name of CDockablePane::RemoveFromDefaultPaneDividier to CDockablePane::RemoveFromDefaultPaneDivider.  \n  \n-   Changed the signature of CFileDialog::SetDefExt to use LPCTSTR; therefore, Unicode builds are affected.  \n  \n-   Removed obsolete ATL tracing categories.  \n  \n-   Changed the signature of CBasePane::MoveWindow to take a const CRect.  \n  \n-   Changed the signature of CMFCEditBrowseCtrl::EnableBrowseButton.  \n  \n-   Removed m_fntTabs and m_fntTabsBold from CMFCBaseTabCtrl.  \n  \n-   Added a parameter to the CMFCRibbonStatusBarPane constructors. (It is a default parameter, and so it is not source-breaking.)  \n  \n-   Added a parameter to the CMFCRibbonCommandsListBox constructor. (It is a default parameter, and so it is not source-breaking.)  \n  \n-   Removed the AFXTrackMouse API (and related timer proc). Use the Win32 TrackMouseEvent API instead.  \n  \n-   Added a parameter to the CFolderPickerDialog constructor. (It is a default parameter, and so it is not source-breaking.)  \n  \n-   CFileStatus structure size changed: The m_attribute member changed from BYTE to DWORD (to match the value that's returned fromGetFileAttributes).  \n  \n-   CRichEditCtrl and CRichEditView use MSFTEDIT_CLASS (RichEdit 4.1 control) instead of RICHEDIT_CLASS (RichEdit 3.0 control) in Unicode builds.  \n  \n-   Removed AFX_GLOBAL_DATA::IsWindowsThemingDrawParentBackground because it is always TRUE on Windows Vista, Windows 7, and Windows 8.  \n  \n-   Removed AFX_GLOBAL_DATA::IsWindowsLayerSupportAvailable because it is always TRUE on Windows Vista, Windows 7, and Windows 8.  \n  \n-   Removed AFX_GLOBAL_DATA::DwmExtendFrameIntoClientArea. Call Windows API directly on Windows Vista, Windows 7, and Windows 8.  \n  \n-   Removed AFX_GLOBAL_DATA::DwmDefWindowProc. Call Windows API directly on Windows Vista, Windows 7, and Windows 8.  \n  \n-   Renamed AFX_GLOBAL_DATA::DwmIsCompositionEnabled to IsDwmCompositionEnabled to eliminate name collision.  \n  \n-   Changed identifiers for a number of MFC internal timers and moved the definitions to afxres.h (AFX_TIMER_ID_*).  \n  \n-   Changed the signature of OnExitSizeMove method to agree with the ON_WM_EXITSIZEMOVE macro:  \n  \n    -   CFrameWndEx  \n  \n    -   CMDIFrameWndEx  \n  \n    -   CPaneFrameWnd  \n  \n-   Changed the name and signature of OnDWMCompositionChanged to agree with the ON_WM_DWMCOMPOSITIONCHANGED macro:  \n  \n    -   CFrameWndEx  \n  \n    -   CMDIFrameWndEx  \n  \n    -   CPaneFrameWnd  \n  \n-   Changed the signature of OnMouseLeave method to agree with the ON_WM_MOUSELEAVE macro:  \n  \n    -   CMFCCaptionBar  \n  \n    -   CMFCColorBar  \n  \n    -   CMFCHeaderCtrl  \n  \n    -   CMFCProperySheetListBox  \n  \n    -   CMFCRibbonBar  \n  \n    -   CMFCRibbonPanelMenuBar  \n  \n    -   CMFCRibbonRichEditCtrl  \n  \n    -   CMFCSpinButtonCtrl  \n  \n    -   CMFCToolBar ReplaceThisText  \n  \n    -   CMFCToolBarComboBoxEdit  \n  \n    -   CMFCToolBarEditCtrl  \n  \n    -   CMFCAutoHideBar  \n  \n-   Changed the signature of OnPowerBroadcast to agree with the ON_WM_POWERBROADCAST macro:  \n  \n    -   CFrameWndEx  \n  \n    -   CMDIFrameWndEx  \n  \n-   Changed the signature of OnStyleChanged to agree with the ON_WM_STYLECHANGED macro:  \n  \n    -   CMFCListCtrl  \n  \n    -   CMFCStatusBar  \n  \n-   Renamed the internal method FontFamalyProcFonts to FontFamilyProcFonts.  \n  \n-   Removed numerous global static CString objects to eliminate memory leaks in some situations (replaced with #defines), and the following class member variables:  \n  \n    -   CKeyBoardManager::m_strDelimiter  \n  \n    -   CMFCPropertyGridProperty::m_strFormatChar  \n  \n    -   CMFCPropertyGridProperty::m_strFormatShort  \n  \n    -   CMFCPropertyGridProperty::m_strFormatLong  \n  \n    -   CMFCPropertyGridProperty::m_strFormatUShort  \n  \n    -   CMFCPropertyGridProperty::m_strFormatULong  \n  \n    -   CMFCPropertyGridProperty::m_strFormatFloat  \n  \n    -   CMFCPropertyGridProperty::m_strFormatDouble  \n  \n    -   CMFCToolBarImages::m_strPngResType  \n  \n    -   CMFCPropertyGridProperty::m_strFormat  \n  \n-   Changed the signature of CKeyboardManager::ShowAllAccelerators and removed the accelerator delimiter parameter.  \n  \n-   Added CPropertyPage::GetParentSheet, and in the CPropertyPage class, call it instead of GetParent to get the correct parent sheet window, which may be the parent or a grandparent window to CPropertyPage. You might have to change your code to call GetParentSheet instead ofGetParent.  \n  \n-   Fixed unbalanced #pragma warning(push) in ATLBASE.H, which caused warnings to be disabled incorrectly. Those warnings are now enabled correctly after ATLBASE.H has been parsed.  \n  \n-   Moved D2D-related methods from AFX_GLOBAL_DATA to _AFX_D2D_STATE:  \n  \n    -   GetDirectD2dFactory  \n  \n    -   GetWriteFactory  \n  \n    -   GetWICFactory  \n  \n    -   InitD2D  \n  \n    -   ReleaseD2DRefs  \n  \n    -   IsD2DInitialized  \n  \n    -   D2D1MakeRotateMatrix  \n  \n    -   Instead of calling, for example, afxGlobalData.IsD2DInitialized, call AfxGetD2DState->IsD2DInitialized.  \n  \n-   Removed obsolete ATL*.CPP files from the \\atlmfc\\include\\ folder.  \n  \n-   Moved afxGlobalData initialization to on-demand instead of at CRT initialization time, to satisfy DLLMain requirements.  \n  \n-   Added the RemoveButtonByIndex method to the CMFCOutlookBarPane class.  \n  \n-   Corrected CMFCCmdUsageCount::IsFreqeuntlyUsedCmd to IsFrequentlyUsedCmd.  \n  \n-   Corrected several instances of RestoreOriginalstate to RestoreOriginalState (CMFCToolBar, CMFCMenuBar, CMFCOutlookBarPane).  \n  \n-   Removed unused methods from CDockablePane: SetCaptionStyle, IsDrawCaption, IsHideDisabledButtons, GetRecentSiblingPaneInfo, andCanAdjustLayout.  \n  \n-   Removed CDockablePane static member variables m_bCaptionText and m_bHideDisabledButtons.  \n  \n-   Added an override DeleteString method to CMFCFontComboBox.  \n  \n-   Removed unused methods from CPane: GetMinLength and IsLastPaneOnLastRow.  \n  \n-   Renamed CPane::GetDockSiteRow(CDockingPanesRow *) to CPane::SetDockSiteRow.  \n  \n## Visual C++ 2010 Breaking Changes  \n  \n### Compiler  \n  \n-   The auto keyword has a new default meaning. Because use of the old meaning is rare, most applications will not be affected by this change.  \n  \n-   The new static_assert keyword is introduced, which will cause a name conflict if there is already an identifier by that name in your code.  \n  \n-   Support for the new lambda notation excludes support for coding an unquoted GUID in an IDL uuid attribute.  \n  \n-   The .NET Framework 4 introduces the concept of corrupted state exceptions, which are exceptions that leave a process in an unrecoverable                 corrupted state. By default, you cannot catch a corrupted state exception, even with the /EHa compiler option that catches all other exceptions.                 To explicitly catch a corrupted state exception, use __try-\\__except statements. Or, apply the [HandledProcessCorruptedStateExceptions]attribute                 to enable a function to catch corrupted state exceptions.  This change affects primarily system programmers who might have to catch a corrupted                 state exception. The eight exceptions are STATUS_ACCESS_VIOLATION, STATUS_STACK_OVERFLOW, EXCEPTION_ILLEGAL_INSTRUCTION,                 EXCEPTION_IN_PAGE_ERROR, EXCEPTION_INVALID_DISPOSITION, EXCEPTION_NONCONTINUABLE_EXCEPTION, EXCEPTION_PRIV_INSTRUCTION, STATUS_UNWIND_CONSOLIDATE.                 For more information about these exceptions, see the [GetExceptionCode](https://msdn.microsoft.com/en-us/library/windows/desktop/ms679356.aspx) macro.  \n  \n-   The revised /GS compiler option guards against buffer overruns more comprehensively than in earlier versions. This version might insert additional security checks in the stack that might decrease performance. Use the new __declspec(safebuffers) keyword to instruct the compiler to not insert security checks for a particular function.  \n  \n-   If you compile with both the /GL (Whole Program Optimization) and /clr (Common Language Runtime Compilation) compiler options, the /GLoption is ignored. This change was made because the combination of compiler options provided little benefit. As a result of this change, the performance of the build is improved.  \n  \n-   By default, support for trigraphs is disabled in Visual C++ 2010 . Use the /Zc:trigraphs compiler option to enable trigraphs support. A trigraph consists of two consecutive question marks (\"??\") followed by a unique third character. The compiler replaces a trigraph with a corresponding punctuation character. For example, the compiler replaces the \"??=\" trigraph with the '#' character. Use trigraphs in C source files that use a character set that does not contain convenient graphic representations for some punctuation characters.  \n  \n-   The linker no longer supports optimizing for Windows 98. The /OPT (Optimizations) option produces a compile time error if you specify/OPT:WIN98 or /OPT:NOWIN98.  \n  \n-   The default compiler options that are specified by the RuntimeLibrary and DebugInformationFormat build system properties have been changed. By default, these build properties are specified in projects that are created by Visual C++ releases 7.0 through 10.0. If you migrate a project that was created by Visual C++ 6.0, consider whether to specify a value for these properties.  \n  \n-   In Visual C++ 2010, RuntimeLibrary = MultiThreaded (/MD) and DebugInformationFormat = ProgramDatabase (/Zi). In Visual C++ 9.0,RuntimeLibrary = MultiThreaded (/MT) and DebugInformationFormat = Disabled.  \n  \n### CLR  \n  \n-   The Microsoft C# and Visual Basic compilers can now produce a no primary interop assembly (no-PIA). A no-PIA assembly can use COM types without the deployment of the relevant primary interop assembly (PIA). When consuming no-PIA assemblies produced by Visual C# or Visual Basic, you must reference the PIA assembly on the compile command before you reference any no-PIA assembly that uses the library.  \n  \n### Visual C++ Projects and MSBuild  \n  \n-   Visual C++ projects are now based on the MSBuild tool. Consequently, project files use a new XML file format and a .vcxproj file suffix. Visual C++ 2010 automatically converts project files from earlier versions of Visual Studio to the new file format. An existing project is affected if it depends on the previous build tool, VCBUILD.exe, or project file suffix, .vcproj.  \n  \n-   In earlier releases, Visual C++ supported the late evaluation of property sheets. For example, a parent property sheet could import a child property sheet, and the parent could use a variable defined in the child to define other variables. Late evaluation enabled the parent to use the child variable even before the child property sheet was imported. In Visual C++ 2010, a project sheet variable cannot be used before it is defined because MSBuild supports only early evaluation.  \n  \n### IDE  \n  \n-   The application termination dialog box no longer ends an application. In previous releases, when the abort() or terminate() function closed the                 retail build of an application, the C Run-Time Library displayed an application termination message in a console window or dialog box. The message said in part, \"This                 application has requested the Runtime to terminate it in an unusual way. Please contact the application's support team for more information.\"                 The application termination message was redundant because Windows subsequently displayed the current termination handler, which was usually the Windows Error Reporting                 (Dr. Watson) dialog box or the Visual Studio debugger. Starting in Visual Studio 2010, the C Run-Time Library does not display the message. Furthermore, the runtime                 prevents the application from ending before a debugger starts. This is a breaking change only if you depend on the previous behavior of the application termination                 message.  \n  \n-   Specifically for Visual Studio 2010, IntelliSense does not work for C++/CLI code or attributes, Find All References does not work for local                 variables, and Code Model does not retrieve type names from imported assemblies or resolve types to their fully qualified names.  \n  \n### Libraries  \n  \n-   The SafeInt class is included in Visual C++ and is no longer in a separate download. This is a breaking change only if you have developed a class that is also named \"SafeInt\".  \n  \n-   The libraries deployment model no longer uses manifests to find a particular version of a dynamic link library. Instead, the name of each dynamic link library contains its version number, and you use that name to locate the library.  \n  \n-   In previous versions of Visual Studio, you could rebuild the run time libraries. Visual C++ 2010 no longer supports building your own copies of the C run time library files.  \n  \n### Standard Library  \n  \n-   The \\<iterator>                 header is no longer included automatically by many other header files. Instead, include that header explicitly if you require support                 for the standalone iterators defined in the An existing project is affected if it depends on the previous build tool, VCBUILD.exe, or project file suffix,                  .vcproj.interator> header.  \n  \n-   In the \\<algorithm>                 header, the checked_* and unchecked_\\* functions are removed. And in the \\<iterator>> header, the                  checked_iteratorclass is removed, and the unchecked_array_iterator class has been added.  \n  \n-   The CComPtr::CComPtr(int) constructor is removed. That constructor allowed a CComPtr object to be constructed from the NULL macro, but was unnecessary and allowed nonsensical constructions from non-zero integers.  \n  \n     A CComPtr can still be constructed from NULL, which is defined as 0, but will fail if constructed from an integer other than literal 0. use nullptr instead.  \n  \n-   The following ctype member functions were removed: ctype::_Do_narrow_s, ctype::_Do_widen_s, ctype::_narrow_s, ctype::_widen_s. If an application uses one of these member functions, you must replace it with the corresponding non-secure version: ctype::do_narrow,ctype::do_widen, ctype::narrow, ctype::widen.  \n  \n### CRT, MFC, and ATL Libraries  \n  \n-   Support has been removed for users to build the CRT, MFC, and ATL libraries. For example, an appropriate nmake file is not provided.                 However, users still have access to the source code for these libraries. And a document that describes the MSBuild options that Microsoft uses to build these                 libraries will probably be posted in a Visual C++ Team Blog.  \n  \n-   MFC support for IA64 has been removed. However, support for the CRT and ATL on IA64 is still provided.  \n  \n-   Ordinals are no longer reused in MFC module-definition (.def) files. This change means ordinals will not be different between minor versions, and binary compatibility for service packs and quick fix engineering releases will be improved.  \n  \n-   A new virtual function was added to the CDocTemplate class. This new virtual function is [CDocTemplate Class](../mfc/reference/cdoctemplate-class.md). The previous version of OpenDocumentFile had two parameters. The new version has three parameters. To support the restart manager, any class derived from CDocTemplate must implement the version that has three parameters. The new parameter is bAddToMRU.  \n  \n### Macros and Environment Variables  \n  \n-   The environment variable __MSVCRT_HEAP_SELECT is no longer supported. This environment variable is removed and there is no replacement.  \n  \n### Microsoft Macro Assembler Reference  \n  \n-   Several directives were removed from the Microsoft Macro Assembler Reference compiler. The removed directives are .186, .286, .286P, .287,.8086, .8087, and .NO87.  \n  \n## Visual C++ 2008 Breaking Changes  \n  \n### Compiler  \n  \n-   The Windows 95, Windows 98, Windows ME, and Windows NT platforms are no longer supported. These operating systems have been removed from the list of targeted platforms.  \n  \n-   The compiler no longer supports multiple attributes that were directly associated with ATL Server. The following attributes are no longer supported:  \n  \n    -   perf_counter  \n  \n    -   perf_object  \n  \n    -   perfmon  \n  \n    -   request_handler  \n  \n    -   soap_handler  \n  \n    -   soap_header  \n  \n    -   soap_method  \n  \n    -   tag_name  \n  \n### Visual C++ Projects  \n  \n-   When upgrading projects from previous versions of Visual Studio, you might have to modify the WINVER and _WIN32_WINNT macros so that they are greater than or equal to 0x0500.  \n  \n-   Beginning with Visual Studio 2008, the new project wizard does not have an option to create a C++ SQL Server project. SQL Server projects created by using an earlier version of Visual Studio will still compile and work correctly.  \n  \n-   The Windows API header file Winable.h has been removed. Include Winuser.h instead.  \n  \n-   The Windows API library Rpcndr.lib has been removed. Link with rpcrt4.lib instead.  \n  \n### CRT  \n  \n-   Support for Windows 95, Windows 98, Windows Millennium Edition, and Windows NT 4.0 has been removed.  \n  \n-   The following global variables have been removed:  \n  \n    -   _osplatform  \n  \n    -   _osver  \n  \n    -   _winmajor  \n  \n    -   _winminor  \n  \n    -   _winver  \n  \n-   The following functions have been removed. Use the Windows API functions GetVersion or GetVersionEx instead:  \n  \n    -   _get_osplatform  \n  \n    -   _get_osver  \n  \n    -   _get_winmajor  \n  \n    -   _get_winminor  \n  \n    -   _get_winver  \n  \n-   The syntax for SAL Annotations has changed. For more information, see [SAL Annotations](../c-runtime-library/sal-annotations.md).  \n  \n-   The IEEE filter now supports the SSE 4.1 instruction set. For more information, see [_fpieee_flt](../c-runtime-library/reference/fpieee-flt.md)_fpieee_flt.  \n  \n-   The C Run-Time Libraries that ship with Visual Studio are no longer dependent on the system DLL msvcrt.dll.  \n  \n### Standard Library  \n  \n-   Support for Windows 95, Windows 98, Windows Millennium Edition, and Windows NT 4.0 has been removed.  \n  \n-   When compiling in debug mode with _HAS_ITERATOR_DEBUGGING defined, an application will now assert when an iterator attempts to increment or decrement past the bounds of the underlying container.  \n  \n-   The member variable c of the stack Class is now declared protected. Previously, this member variable was declared public.  \n  \n-   The behavior of money_get::do_get has changed. Previously, when parsing a monetary amount with more fraction digits than are called for by frac_digits, do_get used to consume them all. Now, do_get stops parsing after consuming at most frac_digits characters.  \n  \n### ATL  \n  \n-   ATL cannot be built without a dependency on CRT. In earlier versions of Visual Studio, you could use #define ATL_MIN_CRT to make an ATL project minimally dependent on CRT. In Visual C++ 2008, all ATL projects are minimally dependent on CRT regardless of whether ATL_MIN_CRT is defined.  \n  \n-   The ATL Server codebase has been released as a shared source project on CodePlex and is not installed as part of Visual Studio. Data encoding and decoding classes from atlenc.h and utility functions and classes from atlutil.h and atlpath.h have been kept and are now part of the ATL library. Several files associated with ATL Server are no longer part of Visual Studio.  \n  \n-   Some functions are no longer included in the DLL. They are still located in the import library. This will not affect code that uses the functions statically. It will affect only the code that uses these functions dynamically.  \n  \n-   The macros PROP_ENTRY and PROP_ENTRY_EX have been deprecated and replaced with the macros PROP_ENTRY_TYPE andPROP_ENTRY_TYPE_EX for security reasons.  \n  \n### ATL/MFC Shared Classes  \n  \n-   ATL cannot be built without a dependency on CRT. In earlier versions of Visual Studio, you could use #define ATL_MIN_CRT to make an ATL project minimally dependent on CRT. In Visual C++ 2008, all ATL projects are minimally dependent on CRT regardless of whether ATL_MIN_CRT is defined.  \n  \n-   The ATL Server codebase has been released as a shared source project on CodePlex and is not installed as part of Visual Studio. Data encoding and decoding classes from atlenc.h and utility functions and classes from atlutil.h and atlpath.h have been kept and are now part of the ATL library. Several files associated with ATL Server are no longer part of Visual Studio.  \n  \n-   Some functions are no longer included in the DLL. They are still located in the import library. This will not affect code that uses the functions statically. It will affect only the code that uses these functions dynamically.  \n  \n### MFC  \n  \n-   CTime Class The CTime class now accepts dates starting from 1/1/1900 C.E. instead of 1/1/1970 C.E.                 Tab order of controls in MFC dialogs The correct tab order of multiple controls in an MFC dialog is disturbed if an MFC ActiveX control is inserted in the tab order. This change corrects that problem.  \n  \n     For example, create an MFC dialog application that has an ActiveX control and several edit controls. Position the ActiveX control in the middle of the tab order of the edit controls. Start the application, click an edit control whose tab order is after the ActiveX control, then tab. Prior to this change, the focus went to the edit control following the ActiveX control instead of the next edit control in the tab order.  \n  \n-   CFileDialog Class   Custom templates for the CFileDialog class cannot be automatically ported to Windows Vista. They are still usable, but will not have the additional functionality or looks of Windows Vista style dialogs.  \n  \n-   CWnd ClassandCFrameWnd Class    The CWnd::GetMenuBarInfo method was removed.                 The CFrameWnd::GetMenuBarInfo method is now a non-virtual method. For more information, see GetMenuBarInfo Functionin the Windows SDK.                 MFC ISAPI support  MFC no longer supports building applications with the Internet Server Application Programming Interface (ISAPI). If you want to build an ISAPI application, call the ISAPI extensions directly.  \n  \n-   Deprecated ANSI APIs    The ANSI versions of several MFC methods are deprecated. Use the Unicode versions of those methods in your future applications. For more information, see Build Requirements for Windows Vista Common Controls.  \n  \n## Visual C++ 2005 Breaking Changes  \n  \n### CRT  \n  \n-   Many functions have been deprecated. See Deprecated CRT Functions.  \n  \n-   Many functions now validate their parameters, halting execution if given invalid parameters. This may break code that passes invalid parameters and relies on the function ignoring them or just returning an error code. See Parameter Validation.  \n  \n-   The file descriptor value -2 is now used to indicate that stdout and stderr are not available for output, as for example in a Windows application that has no console window. The previous value used was -1. For more information, see [_fileno](../c-runtime-library/reference/fileno.md).  \n  \n-   The single-threaded CRT libraries, libc.lib and libcd.lib, have been removed. Use the multi-threaded CRT libraries. The /ML compiler flag is no longer supported. Non-locking versions of some functions have been added in cases where the performance difference between the multithreaded code and the single-threaded code is potentially significant.  \n  \n-   The overload of pow, double pow(int, int), was removed to better conform with the standard.  \n  \n-   The %n format specifier is no longer supported by default in any of the printf family of functions because it is inherently insecure. The default behavior if %n is encountered is to invoke the invalid parameter handler. To enable %n support, use _set_printf_count_output (also see_get_printf_count_output).  \n  \n-   sprintf now prints the negative sign of a signed zero.  \n  \n-   swprintf has been changed to conform with the Standard; it now requires a size parameter. The form of swprintf without a size parameter has been deprecated.  \n  \n-   _set_security_error_handler has been removed. Remove any calls to that function; the default handler is a much safer way of dealing with security errors.  \n  \n-   time_t is now a 64-bit value (unless _USE_32BIT_TIME_T is defined).  \n  \n-   The _spawn, _wspawn Functions now leave errno untouched on success, as specified by the C Standard.  \n  \n-   RTC now uses wide characters by default.  \n  \n-   Floating-point control word support functions have been deprecated for applications compiled with /CLR or /CLR:PURE. The affected functions are _clear87, _clearfp, _control87, _controlfp, _fpreset, _status87, _statusfp. You can disable the deprecation warning by defining _CRT_MANAGED_FP_NO_DEPRECATE, but the use of these functions in managed code is unpredictable and unsupported.  \n  \n-   Some functions now return const pointers. The old, non-const behavior can be reinstated by defining _CONST_RETURN. The affected functions are  \n  \n    1.  memchr, wmemchr  \n  \n    2.  strchr, wcschr, _mbschr, _mbschr_l  \n  \n    3.  strpbrk, wcspbrk, _mbspbrk, _mbspbrk_l  \n  \n    4.  strrchr, wcsrchr, _mbsrchr, _mbsrchr_l  \n  \n    5.  strstr, wcsstr, _mbsstr, _mbsstr_l  \n  \n-   When linking with Setargv.obj or Wsetargv.obj, it is no longer possible to suppress the expansion of a wildcard character on the command line by enclosing it in double quotes. For more information, see [Expanding Wildcard Arguments](../c-language/expanding-wildcard-arguments.md).  \n  \n### Standard Library (2005)  \n  \n-   The exception class (located in the \\<exception> header) has been moved to the std namespace. In previous versions, this class was in the global namespace. To resolve any errors indicating that the exception class cannot be found, add the following using statement to your code:                 using namespace std;  \n  \n-   When calling valarray::resize(), the contents of the valarray will be lost and will be replaced by default values. The resize() method is intended to reinitialize the valarray rather than grow it dynamically like a vector.  \n  \n-   Debug Iterators: Applications built with a debug version of the C-Runtime Library and which use iterators incorrectly might begin to see asserts at runtime. To disable these asserts, you must define _HAS_ITERATOR_DEBUGGING to 0. For more information, see [Debug Iterator Support](../standard-library/debug-iterator-support.md)  \n  \n## Visual C++ .NET 2003 Breaking Changes  \n  \n### Compiler  \n  \n-   Closing parentheses now required for the defined preprocessor directive (C2004).  \n  \n-   Explicit specializations no longer find template parameters from primary template ([Compiler Error C2146](../error-messages/compiler-errors-1/compiler-error-c2146.md)).  \n  \n-   A protected member (n) can only be accessed through a member function of a class (B) that inherits from the class (A) of which it (n) is a member ([Compiler Error C2247](../error-messages/compiler-errors-1/compiler-error-c2247.md)).  \n  \n-   Improved accessibility checks in compiler now detect inaccessible base classes ([Compiler Error C2248](../error-messages/compiler-errors-1/compiler-error-c2248.md)).  \n  \n-   An exception cannot be caught if the destructor and/or copy constructor is inaccessible (C2316).  \n  \n-   Default arguments on pointers to functions no longer allowed ([Compiler Error C2383](../error-messages/compiler-errors-1/compiler-error-c2383.md)).  \n  \n-   A static data member cannot be initialized via derived class ([Compiler Error C2477](../error-messages/compiler-errors-1/compiler-error-c2477.md)).  \n  \n-   The initialization of a typedef is not allowed by the standard and now generates a compiler error ([Compiler Error C2513](../error-messages/compiler-errors-2/compiler-error-c2513.md)).  \n  \n-   bool is now a proper type ([Compiler Error C2632](../error-messages/compiler-errors-2/compiler-error-c2632.md)).  \n  \n-   A UDC can now create ambiguity with overloaded operators ([C2666](../error-messages/compiler-errors-2/compiler-error-c2666.md)).  \n  \n-   More expressions are now considered valid null pointer constants ([Compiler Error C2668](../error-messages/compiler-errors-2/compiler-error-c2668.md)).  \n  \n-   template<> is now required in places where the compiler would previously imply it ([Compiler Error C2768](../error-messages/compiler-errors-2/compiler-error-c2768.md)).  \n  \n-   The expilicit specialization of a member function ourside the class is not valid if the function has already been explicitly specialized via a template class specialization ([Compiler Error C2910](../error-messages/compiler-errors-2/compiler-error-c2910.md)).  \n  \n-   Floating point non-type template parameters are no longer allowed ([Compiler Error C2993](../error-messages/compiler-errors-2/compiler-error-c2993.md)).  \n  \n-   Class templates are not allowed as template type arguments (C3206).  \n  \n-   Friend function names are no longer introduced into containing namespace ([Compiler Error C3767](../error-messages/compiler-errors-2/compiler-error-c3767.md)).  \n  \n-   The compiler will no longer accept extra commas in a macro (C4002).  \n  \n-   An object of POD type constructed with an initializer of the form () will be default-initialized (C4345).  \n  \n-   typename is now required if a dependent name is to be treated as a type ([Compiler Warning (level 1) C4346](../error-messages/compiler-warnings/compiler-warning-level-1-c4346.md)).  \n  \n-   Functions that were incorrectly considered template specializations are no longer considered so (C4347).  \n  \n-   Static data members cannot be initialized via derived class (C4356).  \n  \n-   A class template specialization needs to be defined before it was used in a return type ([Compiler Warning (level 3) C4686](../error-messages/compiler-warnings/compiler-warning-level-3-c4686.md)).  \n  \n-   The compiler now reports unreachable code (C4702).  \n  \n## See Also  \n[What's New for Visual C++ in Visual Studio](../what-s-new-for-visual-cpp-in-visual-studio.md)"}