{"nodes":[{"pos":[12,61],"content":"Compiler Warning (level 4) C4121 | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Compiler Warning (level 4) C4121 | Microsoft Docs","pos":[0,49]}]},{"content":"Compiler Warning (level 4) C4121","pos":[610,642]},{"content":"'symbol' : alignment of a member was sensitive to packing","pos":[643,700]},{"content":"The compiler added padding to align a structure member on the packing boundary but the packing value is less than the member's size.","pos":[707,839]},{"content":"For example, the following code snippet produces C4121:","pos":[840,895]},{"content":"To fix this issue, make one of the following changes:","pos":[1048,1101]},{"content":"Change the packing size to the size of the member that caused the warning or larger.","pos":[1111,1195]},{"content":"For example, in this snippet, change <ph id=\"ph1\">`pack(2)`</ph> to <ph id=\"ph2\">`pack(4)`</ph> or <ph id=\"ph3\">`pack(8)`</ph>.","pos":[1196,1269],"source":" For example, in this snippet, change `pack(2)` to `pack(4)` or `pack(8)`."},{"content":"Reorder member declarations by size, from largest to smallest.","pos":[1279,1341]},{"content":"In the snippet, reverse the order of the structure members such that the <ph id=\"ph1\">`long long`</ph> member precedes the <ph id=\"ph2\">`int`</ph>, and the <ph id=\"ph3\">`int`</ph> precedes the <ph id=\"ph4\">`char`</ph>.","pos":[1342,1488],"source":" In the snippet, reverse the order of the structure members such that the `long long` member precedes the `int`, and the `int` precedes the `char`."},{"content":"This warning only happens when the compiler adds padding before data members.","pos":[1495,1572]},{"content":"It does not happen when packing has placed data at a memory location that is not aligned for the data type, but no padding was placed before the data member.","pos":[1573,1730]},{"content":"When data is not aligned on boundaries that are multiples of the data's size, performance can degrade.","pos":[1731,1833]},{"content":"Reads and writes of unaligned data cause processor faults on some architectures and the faults may take two or three orders of magnitude more time to resolve.","pos":[1834,1992]},{"content":"Unaligned data accesses cannot be ported to some RISC architectures.","pos":[1993,2061]},{"content":"You can use <bpt id=\"p1\">[</bpt>#pragma pack<ept id=\"p1\">](../../preprocessor/pack.md)</ept> or <bpt id=\"p2\">[</bpt>/Zp<ept id=\"p2\">](../../build/reference/zp-struct-member-alignment.md)</ept> to specify the structure alignment.","pos":[2068,2220],"source":"You can use [#pragma pack](../../preprocessor/pack.md) or [/Zp](../../build/reference/zp-struct-member-alignment.md) to specify the structure alignment."},{"content":"(The compiler does not generate this warning when <bpt id=\"p1\">**</bpt>/Zp1<ept id=\"p1\">**</ept> is specified.)","pos":[2221,2294],"source":" (The compiler does not generate this warning when **/Zp1** is specified.)"}],"content":"---\ntitle: \"Compiler Warning (level 4) C4121 | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"error-reference\"\nf1_keywords: \n  - \"C4121\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"C4121\"\nms.assetid: 8c5b85c9-2543-426b-88bc-319c50158c7e\ncaps.latest.revision: 10\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Compiler Warning (level 4) C4121\n'symbol' : alignment of a member was sensitive to packing  \n  \n The compiler added padding to align a structure member on the packing boundary but the packing value is less than the member's size. For example, the following code snippet produces C4121:  \n  \n```  \n// C4121.cpp  \n// compile with: /W4 /c  \n#pragma pack(2)  \nstruct s  \n{  \n   char a;  \n   int b; // C4121  \n   long long c;  \n};  \n```  \n  \n To fix this issue, make one of the following changes:  \n  \n-   Change the packing size to the size of the member that caused the warning or larger. For example, in this snippet, change `pack(2)` to `pack(4)` or `pack(8)`.  \n  \n-   Reorder member declarations by size, from largest to smallest. In the snippet, reverse the order of the structure members such that the `long long` member precedes the `int`, and the `int` precedes the `char`.  \n  \n This warning only happens when the compiler adds padding before data members. It does not happen when packing has placed data at a memory location that is not aligned for the data type, but no padding was placed before the data member. When data is not aligned on boundaries that are multiples of the data's size, performance can degrade. Reads and writes of unaligned data cause processor faults on some architectures and the faults may take two or three orders of magnitude more time to resolve. Unaligned data accesses cannot be ported to some RISC architectures.  \n  \n You can use [#pragma pack](../../preprocessor/pack.md) or [/Zp](../../build/reference/zp-struct-member-alignment.md) to specify the structure alignment. (The compiler does not generate this warning when **/Zp1** is specified.)"}