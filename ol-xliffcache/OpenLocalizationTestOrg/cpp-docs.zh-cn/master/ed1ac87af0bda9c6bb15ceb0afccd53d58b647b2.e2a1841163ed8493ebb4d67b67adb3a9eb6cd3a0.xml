{"nodes":[{"pos":[12,48],"content":"CSecurityDesc Class | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"CSecurityDesc Class | Microsoft Docs","pos":[0,36]}]},{"content":"CSecurityDesc Class","pos":[662,681]},{"pos":[682,748],"content":"This class is a wrapper for the <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR<ept id=\"p1\">**</ept> structure.","source":"This class is a wrapper for the **SECURITY_DESCRIPTOR** structure."},{"pos":[756,866],"content":"[!IMPORTANT]\n This class and its members cannot be used in applications that execute in the Windows Runtime.","leadings":["","> "],"nodes":[{"content":"This class and its members cannot be used in applications that execute in the Windows Runtime.","pos":[14,108]}]},{"content":"Syntax","pos":[875,881]},{"content":"Members","pos":[923,930]},{"content":"Public Constructors","pos":[940,959]},{"content":"Name","pos":[966,970]},{"content":"Description","pos":[971,982]},{"content":"CSecurityDesc::CSecurityDesc","pos":[1021,1049]},{"content":"The constructor.","pos":[1082,1098]},{"content":"CSecurityDesc::~CSecurityDesc","pos":[1104,1133]},{"content":"The destructor.","pos":[1171,1186]},{"content":"Public Methods","pos":[1197,1211]},{"content":"Name","pos":[1218,1222]},{"content":"Description","pos":[1223,1234]},{"content":"CSecurityDesc::FromString","pos":[1273,1298]},{"content":"Converts a string-format security descriptor into a valid, functional security descriptor.","pos":[1328,1418]},{"content":"CSecurityDesc::GetControl","pos":[1424,1449]},{"content":"Retrieves control information from the security descriptor.","pos":[1479,1538]},{"content":"CSecurityDesc::GetDacl","pos":[1544,1566]},{"content":"Retrieves discretionary access-control list (DACL) information from the security descriptor.","pos":[1593,1685]},{"content":"CSecurityDesc::GetGroup","pos":[1691,1714]},{"content":"Retrieves the primary group information from the security descriptor.","pos":[1742,1811]},{"content":"CSecurityDesc::GetOwner","pos":[1817,1840]},{"content":"Retrieves owner informaton from the security descriptor.","pos":[1868,1924]},{"content":"CSecurityDesc::GetPSECURITY_DESCRIPTOR","pos":[1930,1968]},{"pos":[2011,2070],"content":"Returns a pointer to the <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR<ept id=\"p1\">**</ept> structure.","source":"Returns a pointer to the **SECURITY_DESCRIPTOR** structure."},{"content":"CSecurityDesc::GetSacl","pos":[2076,2098]},{"content":"Retrieves system access-control list (SACL) information from the security descriptor.","pos":[2125,2210]},{"content":"CSecurityDesc::IsDaclAutoInherited","pos":[2216,2250]},{"content":"Determines if the DACL is configured to support automatic propagation.","pos":[2289,2359]},{"content":"CSecurityDesc::IsDaclDefaulted","pos":[2365,2395]},{"content":"Determines if the security descriptor is configured with a default DACL.","pos":[2430,2502]},{"content":"CSecurityDesc::IsDaclPresent","pos":[2508,2536]},{"content":"Determines if the security descriptor contains a DACL.","pos":[2569,2623]},{"content":"CSecurityDesc::IsDaclProtected","pos":[2629,2659]},{"content":"Determines if the DACL is configured to prevent modifications.","pos":[2694,2756]},{"content":"CSecurityDesc::IsGroupDefaulted","pos":[2762,2793]},{"content":"Determines if the security descriptor's group security identifier (SID) was set by default.","pos":[2829,2920]},{"content":"CSecurityDesc::IsOwnerDefaulted","pos":[2926,2957]},{"content":"Determines if the security descriptor's owner SID was set by default.","pos":[2993,3062]},{"content":"CSecurityDesc::IsSaclAutoInherited","pos":[3068,3102]},{"content":"Determines if the SACL is configured to support automatic propagation.","pos":[3141,3211]},{"content":"CSecurityDesc::IsSaclDefaulted","pos":[3217,3247]},{"content":"Determines if the security descriptor is configured with a default SACL.","pos":[3282,3354]},{"content":"CSecurityDesc::IsSaclPresent","pos":[3360,3388]},{"content":"Determines if the security descriptor contains a SACL.","pos":[3421,3475]},{"content":"CSecurityDesc::IsSaclProtected","pos":[3481,3511]},{"content":"Determines if the SACL is configured to prevent modifications.","pos":[3546,3608]},{"content":"CSecurityDesc::IsSelfRelative","pos":[3614,3643]},{"content":"Determines if the security descriptor is in self-relative format.","pos":[3677,3742]},{"content":"CSecurityDesc::MakeAbsolute","pos":[3748,3775]},{"content":"Call this method to convert the security descriptor to absolute format.","pos":[3807,3878]},{"content":"CSecurityDesc::MakeSelfRelative","pos":[3884,3915]},{"content":"Call this method to convert the security descriptor to self-relative format.","pos":[3951,4027]},{"content":"CSecurityDesc::SetControl","pos":[4033,4058]},{"content":"Sets the control bits of a security descriptor.","pos":[4088,4135]},{"content":"CSecurityDesc::SetDacl","pos":[4141,4163]},{"content":"Sets information in a DACL.","pos":[4190,4217]},{"content":"If a DACL is already present in the security descriptor, it is replaced.","pos":[4218,4290]},{"content":"CSecurityDesc::SetGroup","pos":[4296,4319]},{"content":"Sets the primary group information of an absolute format security descriptor, replacing any primary group information already present.","pos":[4347,4481]},{"content":"CSecurityDesc::SetOwner","pos":[4487,4510]},{"content":"Sets the owner information of an absolute format security descriptor, replacing any owner information already present.","pos":[4538,4656]},{"content":"CSecurityDesc::SetSacl","pos":[4662,4684]},{"content":"Sets information in a SACL.","pos":[4711,4738]},{"content":"If a SACL is already present in the security descriptor, it is replaced.","pos":[4739,4811]},{"content":"CSecurityDesc::ToString","pos":[4817,4840]},{"content":"Converts a security descriptor to a string format.","pos":[4868,4918]},{"content":"Public Operators","pos":[4929,4945]},{"content":"Name","pos":[4952,4956]},{"content":"Description","pos":[4957,4968]},{"content":"CSecurityDesc::operator const SECURITY_DESCRIPTOR *","pos":[5007,5058]},{"pos":[5118,5177],"content":"Returns a pointer to the <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR<ept id=\"p1\">**</ept> structure.","source":"Returns a pointer to the **SECURITY_DESCRIPTOR** structure."},{"content":"CSecurityDesc::operator =","pos":[5183,5208]},{"content":"Assignment operator.","pos":[5239,5259]},{"content":"Remarks","pos":[5269,5276]},{"content":"The <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR<ept id=\"p1\">**</ept> structure contains the security information associated with an object.","pos":[5280,5378],"source":"The **SECURITY_DESCRIPTOR** structure contains the security information associated with an object."},{"content":"Applications use this structure to set and query an object's security status.","pos":[5379,5456]},{"content":"See also <bpt id=\"p1\">[</bpt>AtlGetSecurityDescriptor<ept id=\"p1\">](http://msdn.microsoft.com/library/233578b8-dcc5-4f51-8e62-7cdcc2ff6b11)</ept>.","pos":[5457,5565],"source":" See also [AtlGetSecurityDescriptor](http://msdn.microsoft.com/library/233578b8-dcc5-4f51-8e62-7cdcc2ff6b11)."},{"pos":[5572,5701],"content":"Applications should not modify the <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR<ept id=\"p1\">**</ept> structure directly, and instead should use the class methods provided.","source":"Applications should not modify the **SECURITY_DESCRIPTOR** structure directly, and instead should use the class methods provided."},{"pos":[5708,5908],"content":"For an introduction to the access control model in Windows, see <bpt id=\"p1\">[</bpt>Access Control<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa374860)</ept> in the <ph id=\"ph1\">[!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)]</ph>.","source":"For an introduction to the access control model in Windows, see [Access Control](http://msdn.microsoft.com/library/windows/desktop/aa374860) in the [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)]."},{"content":"Requirements","pos":[5917,5929]},{"pos":[5933,5958],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> atlsecurity.h","source":"**Header:** atlsecurity.h"},{"pos":[6013,6041],"content":"CSecurityDesc::CSecurityDesc"},{"content":"The constructor.","pos":[6045,6061]},{"content":"Parameters","pos":[6224,6234]},{"content":"The <ph id=\"ph1\">`CSecurityDesc`</ph> object or <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR<ept id=\"p1\">**</ept> structure to assign to the new <ph id=\"ph2\">`CSecurityDesc`</ph> object.","pos":[6247,6355],"source":" The `CSecurityDesc` object or **SECURITY_DESCRIPTOR** structure to assign to the new `CSecurityDesc` object."},{"content":"Remarks","pos":[6365,6372]},{"pos":[6376,6518],"content":"The <ph id=\"ph1\">`CSecurityDesc`</ph> object can optionally be created using a <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR<ept id=\"p1\">**</ept> structure or a previously defined <ph id=\"ph2\">`CSecurityDesc`</ph> object.","source":"The `CSecurityDesc` object can optionally be created using a **SECURITY_DESCRIPTOR** structure or a previously defined `CSecurityDesc` object."},{"pos":[6578,6607],"content":"CSecurityDesc::~CSecurityDesc"},{"content":"The destructor.","pos":[6611,6626]},{"content":"Remarks","pos":[6683,6690]},{"content":"The destructor frees all allocated resources.","pos":[6694,6739]},{"pos":[6791,6816],"content":"CSecurityDesc::FromString"},{"content":"Converts a string-format security descriptor into a valid, functional security descriptor.","pos":[6820,6910]},{"content":"Parameters","pos":[6975,6985]},{"content":"Pointer to a null-terminated string that contains the <bpt id=\"p1\">[</bpt>string-format security descriptor<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa379570)</ept> to be converted.","pos":[6999,7165],"source":" Pointer to a null-terminated string that contains the [string-format security descriptor](http://msdn.microsoft.com/library/windows/desktop/aa379570) to be converted."},{"content":"Return Value","pos":[7175,7187]},{"content":"Returns true on success.","pos":[7191,7215]},{"content":"Throws an exception on failure.","pos":[7216,7247]},{"content":"Remarks","pos":[7257,7264]},{"content":"The string can be created by using <bpt id=\"p1\">[</bpt>CSecurityDesc::ToString<ept id=\"p1\">](#csecuritydesc__tostring)</ept>.","pos":[7268,7355],"source":"The string can be created by using [CSecurityDesc::ToString](#csecuritydesc__tostring)."},{"content":"Converting the security descriptor into a string makes it easier to store and transmit.","pos":[7356,7443]},{"pos":[7450,7639],"content":"This method is only available with Windows 2000 and later because it calls <bpt id=\"p1\">[</bpt>ConvertStringSecurityDescriptorToSecurityDescriptor<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa376401)</ept>.","source":"This method is only available with Windows 2000 and later because it calls [ConvertStringSecurityDescriptorToSecurityDescriptor](http://msdn.microsoft.com/library/windows/desktop/aa376401)."},{"pos":[7691,7716],"content":"CSecurityDesc::GetControl"},{"content":"Retrieves control information from the security descriptor.","pos":[7720,7779]},{"content":"Parameters","pos":[7868,7878]},{"content":"psdc","pos":[7883,7887]},{"content":"Pointer to a <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR_CONTROL<ept id=\"p1\">**</ept> structure that receives the security descriptor's control information.","pos":[7892,8007],"source":" Pointer to a **SECURITY_DESCRIPTOR_CONTROL** structure that receives the security descriptor's control information."},{"content":"Return Value","pos":[8017,8029]},{"content":"Returns true if the method succeeds, false if it fails.","pos":[8033,8088]},{"content":"Remarks","pos":[8098,8105]},{"pos":[8109,8277],"content":"This method is only meaningful when using Windows 2000 or later, as it calls <bpt id=\"p1\">[</bpt>GetSecurityDescriptorControl<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa446647)</ept>.","source":"This method is only meaningful when using Windows 2000 or later, as it calls [GetSecurityDescriptorControl](http://msdn.microsoft.com/library/windows/desktop/aa446647)."},{"pos":[8326,8348],"content":"CSecurityDesc::GetDacl"},{"content":"Retrieves discretionary access-control list (DACL) information from the security descriptor.","pos":[8352,8444]},{"content":"Parameters","pos":[8575,8585]},{"content":"Pointer to an <ph id=\"ph1\">`CDacl`</ph> structure in which to store a copy of the security descriptor's DACL.","pos":[8600,8691],"source":" Pointer to an `CDacl` structure in which to store a copy of the security descriptor's DACL."},{"content":"If a discretionary <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept> exists, the method sets <ph id=\"ph1\">`pDacl`</ph> to the address of the security descriptor's discretionary <bpt id=\"p2\">**</bpt>ACL<ept id=\"p2\">**</ept>.","pos":[8692,8817],"source":" If a discretionary **ACL** exists, the method sets `pDacl` to the address of the security descriptor's discretionary **ACL**."},{"content":"If a discretionary <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept> does not exist, no value is stored.","pos":[8818,8880],"source":" If a discretionary **ACL** does not exist, no value is stored."},{"content":"Pointer to a value that indicates the presence of a discretionary <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept> in the specified security descriptor.","pos":[8902,9013],"source":" Pointer to a value that indicates the presence of a discretionary **ACL** in the specified security descriptor."},{"content":"If the security descriptor contains a discretionary <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept>, this parameter is set to true.","pos":[9014,9105],"source":" If the security descriptor contains a discretionary **ACL**, this parameter is set to true."},{"content":"If the security descriptor does not contain a discretionary <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept>, this parameter is set to false.","pos":[9106,9206],"source":" If the security descriptor does not contain a discretionary **ACL**, this parameter is set to false."},{"content":"Pointer to a flag set to the value of the SE_DACL_DEFAULTED flag in the <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR_CONTROL<ept id=\"p1\">**</ept> structure if a discretionary <bpt id=\"p2\">**</bpt>ACL<ept id=\"p2\">**</ept> exists for the security descriptor.","pos":[9230,9406],"source":" Pointer to a flag set to the value of the SE_DACL_DEFAULTED flag in the **SECURITY_DESCRIPTOR_CONTROL** structure if a discretionary **ACL** exists for the security descriptor."},{"content":"If this flag is true, the discretionary <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept> was retrieved by a default mechanism; if false, the discretionary <bpt id=\"p2\">**</bpt>ACL<ept id=\"p2\">**</ept> was explicitly specified by a user.","pos":[9407,9564],"source":" If this flag is true, the discretionary **ACL** was retrieved by a default mechanism; if false, the discretionary **ACL** was explicitly specified by a user."},{"content":"Return Value","pos":[9574,9586]},{"content":"Returns true if the method succeeds, false if it fails.","pos":[9590,9645]},{"pos":[9695,9718],"content":"CSecurityDesc::GetGroup"},{"content":"Retrieves the primary group information from the security descriptor.","pos":[9722,9791]},{"content":"Parameters","pos":[9893,9903]},{"content":"Pointer to a <bpt id=\"p1\">[</bpt>CSid<ept id=\"p1\">](../../atl/reference/csid-class.md)</ept> (security identifier) that receives a copy of the group stored in the CDacl.","pos":[9917,10048],"source":" Pointer to a [CSid](../../atl/reference/csid-class.md) (security identifier) that receives a copy of the group stored in the CDacl."},{"content":"Pointer to a flag set to the value of the SE_GROUP_DEFAULTED flag in the <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR_CONTROL<ept id=\"p1\">**</ept> structure when the method returns.","pos":[10072,10211],"source":" Pointer to a flag set to the value of the SE_GROUP_DEFAULTED flag in the **SECURITY_DESCRIPTOR_CONTROL** structure when the method returns."},{"content":"Return Value","pos":[10221,10233]},{"content":"Returns true if the method succeeds, false if it fails.","pos":[10237,10292]},{"pos":[10342,10365],"content":"CSecurityDesc::GetOwner"},{"content":"Retrieves owner informaton from the security descriptor.","pos":[10369,10425]},{"content":"Parameters","pos":[10527,10537]},{"content":"Pointer to a <bpt id=\"p1\">[</bpt>CSid<ept id=\"p1\">](../../atl/reference/csid-class.md)</ept> (security identifier) that receives a copy of the group stored in the CDacl.","pos":[10551,10682],"source":" Pointer to a [CSid](../../atl/reference/csid-class.md) (security identifier) that receives a copy of the group stored in the CDacl."},{"content":"Pointer to a flag set to the value of the SE_OWNER_DEFAULTED flag in the <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR_CONTROL<ept id=\"p1\">**</ept> structure when the method returns.","pos":[10706,10845],"source":" Pointer to a flag set to the value of the SE_OWNER_DEFAULTED flag in the **SECURITY_DESCRIPTOR_CONTROL** structure when the method returns."},{"content":"Return Value","pos":[10855,10867]},{"content":"Returns true if the method succeeds, false if it fails.","pos":[10871,10926]},{"pos":[10991,11029],"content":"CSecurityDesc::GetPSECURITY_DESCRIPTOR"},{"pos":[11033,11092],"content":"Returns a pointer to the <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR<ept id=\"p1\">**</ept> structure.","source":"Returns a pointer to the **SECURITY_DESCRIPTOR** structure."},{"content":"Return Value","pos":[11183,11195]},{"pos":[11199,11316],"content":"Returns a pointer to the <bpt id=\"p1\">[</bpt>SECURITY_DESCRIPTOR<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa379561)</ept> structure.","source":"Returns a pointer to the [SECURITY_DESCRIPTOR](http://msdn.microsoft.com/library/windows/desktop/aa379561) structure."},{"pos":[11365,11387],"content":"CSecurityDesc::GetSacl"},{"content":"Retrieves system access-control list (SACL) information from the security descriptor.","pos":[11391,11476]},{"content":"Parameters","pos":[11607,11617]},{"content":"Pointer to an <ph id=\"ph1\">`CSacl`</ph> structure in which to store a copy of the security descriptor's SACL.","pos":[11632,11723],"source":" Pointer to an `CSacl` structure in which to store a copy of the security descriptor's SACL."},{"content":"If a system <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept> exists, the method sets <ph id=\"ph1\">`pSacl`</ph> to the address of the security descriptor's system <bpt id=\"p2\">**</bpt>ACL<ept id=\"p2\">**</ept>.","pos":[11724,11835],"source":" If a system **ACL** exists, the method sets `pSacl` to the address of the security descriptor's system **ACL**."},{"content":"If a system <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept> does not exist, no value is stored.","pos":[11836,11891],"source":" If a system **ACL** does not exist, no value is stored."},{"content":"Pointer to a flag the method sets to indicate the presence of a system <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept> in the specified security descriptor.","pos":[11913,12029],"source":" Pointer to a flag the method sets to indicate the presence of a system **ACL** in the specified security descriptor."},{"content":"If the security descriptor contains a system <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept>, this parameter is set to true.","pos":[12030,12114],"source":" If the security descriptor contains a system **ACL**, this parameter is set to true."},{"content":"If the security descriptor does not contain a system <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept>, this parameter is set to false.","pos":[12115,12208],"source":" If the security descriptor does not contain a system **ACL**, this parameter is set to false."},{"content":"Pointer to a flag set to the value of the SE_SACL_DEFAULTED flag in the <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR_CONTROL<ept id=\"p1\">**</ept> structure if a system <bpt id=\"p2\">**</bpt>ACL<ept id=\"p2\">**</ept> exists for the security descriptor.","pos":[12232,12401],"source":" Pointer to a flag set to the value of the SE_SACL_DEFAULTED flag in the **SECURITY_DESCRIPTOR_CONTROL** structure if a system **ACL** exists for the security descriptor."},{"content":"Return Value","pos":[12411,12423]},{"content":"Returns true if the method succeeds, false if it fails.","pos":[12427,12482]},{"pos":[12543,12577],"content":"CSecurityDesc::IsDaclAutoInherited"},{"content":"Determines if the discretionary access-control list (DACL) is configured to support automatic propagation.","pos":[12581,12687]},{"content":"Return Value","pos":[12752,12764]},{"content":"Returns true if the security descriptor contains a DACL which is set up to support automatic propagation of inheritable access-control entries (ACEs) to existing child objects.","pos":[12768,12944]},{"content":"Returns false otherwise.","pos":[12945,12969]},{"content":"Remarks","pos":[12979,12986]},{"content":"The system sets this bit when it performs the automatic inheritance algorithm for the object and its existing child objects.","pos":[12990,13114]},{"pos":[13171,13201],"content":"CSecurityDesc::IsDaclDefaulted"},{"content":"Determines if the security descriptor is configured with a default discretionary access-control list (DACL).","pos":[13205,13313]},{"content":"Return Value","pos":[13374,13386]},{"content":"Returns true if the security descriptor contains a default DACL, false otherwise.","pos":[13390,13471]},{"content":"Remarks","pos":[13481,13488]},{"content":"This flag can affect how the system treats the DACL, with respect to access-control entry (ACE) inheritance.","pos":[13492,13600]},{"content":"For example, if an object's creator does not specify a DACL, the object receives the default DACL from the creator's access token.","pos":[13601,13731]},{"content":"The system ignores this flag if the SE_DACL_PRESENT flag is not set.","pos":[13732,13800]},{"content":"This flag is used to determine how the final DACL on the object is to be computed and is not stored physically in the security descriptor control of the securable object.","pos":[13807,13977]},{"pos":[13984,14067],"content":"To set this flag, use the <bpt id=\"p1\">[</bpt>CSecurityDesc::SetDacl<ept id=\"p1\">](#csecuritydesc__setdacl)</ept> method.","source":"To set this flag, use the [CSecurityDesc::SetDacl](#csecuritydesc__setdacl) method."},{"pos":[14122,14150],"content":"CSecurityDesc::IsDaclPresent"},{"content":"Determines if the security descriptor contains a discretionary access-control list (DACL).","pos":[14154,14244]},{"content":"Return Value","pos":[14303,14315]},{"content":"Returns true if the security descriptor contains a DACL, false otherwise.","pos":[14319,14392]},{"content":"Remarks","pos":[14402,14409]},{"content":"If this flag is not set, or if this flag is set and the DACL is NULL, the security descriptor allows full access to everyone.","pos":[14413,14538]},{"content":"This flag is used to hold the security information specified by a caller until the security descriptor is associated with a securable object.","pos":[14545,14686]},{"content":"Once the security descriptor is associated with a securable object, the SE_DACL_PRESENT flag is always set in the security descriptor control.","pos":[14687,14829]},{"pos":[14836,14919],"content":"To set this flag, use the <bpt id=\"p1\">[</bpt>CSecurityDesc::SetDacl<ept id=\"p1\">](#csecuritydesc__setdacl)</ept> method.","source":"To set this flag, use the [CSecurityDesc::SetDacl](#csecuritydesc__setdacl) method."},{"pos":[14976,15006],"content":"CSecurityDesc::IsDaclProtected"},{"content":"Determines if the discretionary access-control list (DACL) is configured to prevent modifications.","pos":[15010,15108]},{"content":"Return Value","pos":[15169,15181]},{"content":"Returns true if the DACL is configured to prevent the security descriptor from being modified by inheritable access-control entries (ACEs).","pos":[15185,15324]},{"content":"Returns false otherwise.","pos":[15325,15349]},{"content":"Remarks","pos":[15359,15366]},{"pos":[15370,15453],"content":"To set this flag, use the <bpt id=\"p1\">[</bpt>CSecurityDesc::SetDacl<ept id=\"p1\">](#csecuritydesc__setdacl)</ept> method.","source":"To set this flag, use the [CSecurityDesc::SetDacl](#csecuritydesc__setdacl) method."},{"content":"This method is only meaningful for Windows 2000 or later, as only Windows 2000 supports automatic propagation of inheritable ACEs.","pos":[15460,15590]},{"pos":[15648,15679],"content":"CSecurityDesc::IsGroupDefaulted"},{"content":"Determines if the security descriptor's group security identifier (SID) was set by default.","pos":[15683,15774]},{"content":"Return Value","pos":[15836,15848]},{"content":"Returns true if a default mechanism, rather than the original provider of the security descriptor, provided the security descriptor's group SID.","pos":[15852,15996]},{"content":"Returns false otherwise.","pos":[15997,16021]},{"content":"Remarks","pos":[16031,16038]},{"pos":[16042,16127],"content":"To set this flag, use the <bpt id=\"p1\">[</bpt>CSecurityDesc::SetGroup<ept id=\"p1\">](#csecuritydesc__setgroup)</ept> method.","source":"To set this flag, use the [CSecurityDesc::SetGroup](#csecuritydesc__setgroup) method."},{"pos":[16185,16216],"content":"CSecurityDesc::IsOwnerDefaulted"},{"content":"Determines if the security descriptor's owner security identifier (SID) was set by default.","pos":[16220,16311]},{"content":"Return Value","pos":[16373,16385]},{"content":"Returns true if a default mechanism, rather than the original provider of the security descriptor, provided the security descriptor's owner SID.","pos":[16389,16533]},{"content":"Returns false otherwise.","pos":[16534,16558]},{"content":"Remarks","pos":[16568,16575]},{"pos":[16579,16664],"content":"To set this flag, use the <bpt id=\"p1\">[</bpt>CSecurityDesc::SetOwner<ept id=\"p1\">](#csecuritydesc__setowner)</ept> method.","source":"To set this flag, use the [CSecurityDesc::SetOwner](#csecuritydesc__setowner) method."},{"pos":[16725,16759],"content":"CSecurityDesc::IsSaclAutoInherited"},{"content":"Determines if the system access-control list (SACL) is configured to support automatic propagation.","pos":[16763,16862]},{"content":"Return Value","pos":[16927,16939]},{"content":"Returns true if the security descriptor contains a SACL which is set up to support automatic propagation of inheritable access-control entries (ACEs) to existing child objects.","pos":[16943,17119]},{"content":"Returns false otherwise.","pos":[17120,17144]},{"content":"Remarks","pos":[17154,17161]},{"content":"The system sets this bit when it performs the automatic inheritance algorithm for the object and its existing child objects.","pos":[17165,17289]},{"pos":[17346,17376],"content":"CSecurityDesc::IsSaclDefaulted"},{"content":"Determines if the security descriptor is configured with a default system access-control list (SACL).","pos":[17380,17481]},{"content":"Return Value","pos":[17542,17554]},{"content":"Returns true if the security descriptor contains a default SACL, false otherwise.","pos":[17558,17639]},{"content":"Remarks","pos":[17649,17656]},{"content":"This flag can affect how the system treats the SACL, with respect to access-control entry (ACE) inheritance.","pos":[17660,17768]},{"content":"The system ignores this flag if the SE_SACL_PRESENT flag is not set.","pos":[17769,17837]},{"pos":[17844,17927],"content":"To set this flag, use the <bpt id=\"p1\">[</bpt>CSecurityDesc::SetSacl<ept id=\"p1\">](#csecuritydesc__setsacl)</ept> method.","source":"To set this flag, use the [CSecurityDesc::SetSacl](#csecuritydesc__setsacl) method."},{"pos":[17982,18010],"content":"CSecurityDesc::IsSaclPresent"},{"content":"Determines if the security descriptor contains a system access-control list (SACL).","pos":[18014,18097]},{"content":"Return Value","pos":[18156,18168]},{"content":"Returns true if the security descriptor contains a SACL, false otherwise.","pos":[18172,18245]},{"content":"Remarks","pos":[18255,18262]},{"pos":[18266,18349],"content":"To set this flag, use the <bpt id=\"p1\">[</bpt>CSecurityDesc::SetSacl<ept id=\"p1\">](#csecuritydesc__setsacl)</ept> method.","source":"To set this flag, use the [CSecurityDesc::SetSacl](#csecuritydesc__setsacl) method."},{"pos":[18406,18436],"content":"CSecurityDesc::IsSaclProtected"},{"content":"Determines if the system access-control list (SACL) is configured to prevent modifications.","pos":[18440,18531]},{"content":"Return Value","pos":[18592,18604]},{"content":"Returns true if the SACL is configured to prevent the security descriptor from being modified by inheritable access-control entries (ACEs).","pos":[18608,18747]},{"content":"Returns false otherwise.","pos":[18748,18772]},{"content":"Remarks","pos":[18782,18789]},{"pos":[18793,18876],"content":"To set this flag, use the <bpt id=\"p1\">[</bpt>CSecurityDesc::SetSacl<ept id=\"p1\">](#csecuritydesc__setsacl)</ept> method.","source":"To set this flag, use the [CSecurityDesc::SetSacl](#csecuritydesc__setsacl) method."},{"content":"This method is only meaningful for Windows 2000 or later, as only Windows 2000 supports automatic propagation of inheritable ACEs.","pos":[18883,19013]},{"pos":[19069,19098],"content":"CSecurityDesc::IsSelfRelative"},{"content":"Determines if the security descriptor is in self-relative format.","pos":[19102,19167]},{"content":"Return Value","pos":[19227,19239]},{"content":"Returns true if the security descriptor is in self-relative format with all the security information in a contiguous block of memory.","pos":[19243,19376]},{"content":"Returns false if the security descriptor is in absolute format.","pos":[19377,19440]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Absolute and Self-Relative Security Descriptors<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa374807)</ept>.","pos":[19441,19577],"source":" For more information, see [Absolute and Self-Relative Security Descriptors](http://msdn.microsoft.com/library/windows/desktop/aa374807)."},{"pos":[19631,19658],"content":"CSecurityDesc::MakeAbsolute"},{"content":"Call this method to convert the security descriptor to absolute format.","pos":[19662,19733]},{"content":"Return Value","pos":[19788,19800]},{"content":"Returns true if the method succeeds, false otherwise.","pos":[19804,19857]},{"content":"Remarks","pos":[19867,19874]},{"content":"A security descriptor in absolute format contains pointers to the information it contains, rather than the information itself.","pos":[19878,20004]},{"content":"A security descriptor in self-relative format contains the information in a contiguous block of memory.","pos":[20005,20108]},{"content":"In a self-relative security descriptor, a <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR<ept id=\"p1\">**</ept> structure always starts the information, but the security descriptor's other components can follow the structure in any order.","pos":[20109,20301],"source":" In a self-relative security descriptor, a **SECURITY_DESCRIPTOR** structure always starts the information, but the security descriptor's other components can follow the structure in any order."},{"content":"Instead of using memory addresses, the components of the self-relative security descriptor are identified by offsets from the beginning of the security descriptor.","pos":[20302,20465]},{"content":"This format is useful when a security descriptor must be stored on a disk or transmitted by means of a communications protocol.","pos":[20466,20593]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Absolute and Self-Relative Security Descriptors<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa374807)</ept>.","pos":[20594,20730],"source":" For more information, see [Absolute and Self-Relative Security Descriptors](http://msdn.microsoft.com/library/windows/desktop/aa374807)."},{"pos":[20788,20819],"content":"CSecurityDesc::MakeSelfRelative"},{"content":"Call this method to convert the security descriptor to self-relative format.","pos":[20823,20899]},{"content":"Return Value","pos":[20958,20970]},{"content":"Returns true if the method succeeds, false otherwise.","pos":[20974,21027]},{"content":"Remarks","pos":[21037,21044]},{"content":"A security descriptor in absolute format contains pointers to the information it contains, rather than containing the information itself.","pos":[21048,21185]},{"content":"A security descriptor in self-relative format contains the information in a contiguous block of memory.","pos":[21186,21289]},{"content":"In a self-relative security descriptor, a <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR<ept id=\"p1\">**</ept> structure always starts the information, but the security descriptor's other components can follow the structure in any order.","pos":[21290,21482],"source":" In a self-relative security descriptor, a **SECURITY_DESCRIPTOR** structure always starts the information, but the security descriptor's other components can follow the structure in any order."},{"content":"Instead of using memory addresses, the components of the security descriptor are identified by offsets from the beginning of the security descriptor.","pos":[21483,21632]},{"content":"This format is useful when a security descriptor must be stored on a disk or transmitted by means of a communications protocol.","pos":[21633,21760]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Absolute and Self-Relative Security Descriptors<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa374807)</ept>.","pos":[21761,21897],"source":" For more information, see [Absolute and Self-Relative Security Descriptors](http://msdn.microsoft.com/library/windows/desktop/aa374807)."},{"pos":[21950,21975],"content":"CSecurityDesc::operator ="},{"content":"Assignment operator.","pos":[21979,21999]},{"content":"Parameters","pos":[22161,22171]},{"content":"The <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR<ept id=\"p1\">**</ept> structure or <ph id=\"ph1\">`CSecurityDesc`</ph> object to assign to the <ph id=\"ph2\">`CSecurityDesc`</ph> object.","pos":[22184,22288],"source":" The **SECURITY_DESCRIPTOR** structure or `CSecurityDesc` object to assign to the `CSecurityDesc` object."},{"content":"Return Value","pos":[22298,22310]},{"pos":[22314,22357],"content":"Returns the updated <ph id=\"ph1\">`CSecurityDesc`</ph> object.","source":"Returns the updated `CSecurityDesc` object."},{"pos":[22439,22490],"content":"CSecurityDesc::operator const SECURITY_DESCRIPTOR *"},{"pos":[22494,22562],"content":"Casts a value to a pointer to the <bpt id=\"p1\">**</bpt>SECURITY_DESCRIPTOR<ept id=\"p1\">**</ept> structure.","source":"Casts a value to a pointer to the **SECURITY_DESCRIPTOR** structure."},{"content":"```operator const SECURITY_DESCRIPTOR *() const throw();","pos":[22568,22624]},{"content":"bool SetControl(SECURITY_DESCRIPTOR_CONTROL ControlBitsOfInterest,  SECURITY_DESCRIPTOR_CONTROL ControlBitsToSet) throw();","pos":[22766,22888]},{"pos":[23923,24005],"content":"inline void SetDacl(bool bPresent = true, bool bDefaulted = false) throw(...);","source":"inline void SetDacl(bool bPresent = true,\n    bool bDefaulted = false) throw(...);"},{"content":"bool SetGroup(const CSid&amp; Sid,  bool bDefaulted = false) throw(...);","pos":[25796,25864],"source":"bool SetGroup(const CSid& Sid,  bool bDefaulted = false) throw(...);"},{"content":"bool SetOwner(const CSid&amp; Sid,  bool bDefaulted = false) throw(...);","pos":[26848,26916],"source":"bool SetOwner(const CSid& Sid,  bool bDefaulted = false) throw(...);"},{"content":"bool SetSacl(const CSacl&amp; Sacl,  bool bDefaulted = false) throw(...);","pos":[27695,27764],"source":"bool SetSacl(const CSacl& Sacl,  bool bDefaulted = false) throw(...);"},{"pos":[28682,28881],"content":"bool ToString( CString* pstr,  SECURITY_INFORMATION si = OWNER_SECURITY_INFORMATION | GROUP_SECURITY_INFORMATION | DACL_SECURITY_INFORMATION | SACL_SECURITY_INFORMATION) const throw(...);","source":"bool ToString(\n    CString* pstr,  SECURITY_INFORMATION si = OWNER_SECURITY_INFORMATION |\n    GROUP_SECURITY_INFORMATION | DACL_SECURITY_INFORMATION |\n    SACL_SECURITY_INFORMATION) const throw(...);"}],"content":"---\ntitle: \"CSecurityDesc Class | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"reference\"\nf1_keywords: \n  - \"ATL::CSecurityDesc\"\n  - \"ATL.CSecurityDesc\"\n  - \"CSecurityDesc\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"CSecurityDesc class\"\nms.assetid: 3767a327-378f-4690-ba40-4d9f6a1f5ee4\ncaps.latest.revision: 24\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# CSecurityDesc Class\nThis class is a wrapper for the **SECURITY_DESCRIPTOR** structure.  \n  \n> [!IMPORTANT]\n>  This class and its members cannot be used in applications that execute in the Windows Runtime.  \n  \n## Syntax  \n  \n```\nclass CSecurityDesc\n```  \n  \n## Members  \n  \n### Public Constructors  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CSecurityDesc::CSecurityDesc](#csecuritydesc__csecuritydesc)|The constructor.|  \n|[CSecurityDesc::~CSecurityDesc](#csecuritydesc___dtorcsecuritydesc)|The destructor.|  \n  \n### Public Methods  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CSecurityDesc::FromString](#csecuritydesc__fromstring)|Converts a string-format security descriptor into a valid, functional security descriptor.|  \n|[CSecurityDesc::GetControl](#csecuritydesc__getcontrol)|Retrieves control information from the security descriptor.|  \n|[CSecurityDesc::GetDacl](#csecuritydesc__getdacl)|Retrieves discretionary access-control list (DACL) information from the security descriptor.|  \n|[CSecurityDesc::GetGroup](#csecuritydesc__getgroup)|Retrieves the primary group information from the security descriptor.|  \n|[CSecurityDesc::GetOwner](#csecuritydesc__getowner)|Retrieves owner informaton from the security descriptor.|  \n|[CSecurityDesc::GetPSECURITY_DESCRIPTOR](#csecuritydesc__getpsecurity_descriptor)|Returns a pointer to the **SECURITY_DESCRIPTOR** structure.|  \n|[CSecurityDesc::GetSacl](#csecuritydesc__getsacl)|Retrieves system access-control list (SACL) information from the security descriptor.|  \n|[CSecurityDesc::IsDaclAutoInherited](#csecuritydesc__isdaclautoinherited)|Determines if the DACL is configured to support automatic propagation.|  \n|[CSecurityDesc::IsDaclDefaulted](#csecuritydesc__isdacldefaulted)|Determines if the security descriptor is configured with a default DACL.|  \n|[CSecurityDesc::IsDaclPresent](#csecuritydesc__isdaclpresent)|Determines if the security descriptor contains a DACL.|  \n|[CSecurityDesc::IsDaclProtected](#csecuritydesc__isdaclprotected)|Determines if the DACL is configured to prevent modifications.|  \n|[CSecurityDesc::IsGroupDefaulted](#csecuritydesc__isgroupdefaulted)|Determines if the security descriptor's group security identifier (SID) was set by default.|  \n|[CSecurityDesc::IsOwnerDefaulted](#csecuritydesc__isownerdefaulted)|Determines if the security descriptor's owner SID was set by default.|  \n|[CSecurityDesc::IsSaclAutoInherited](#csecuritydesc__issaclautoinherited)|Determines if the SACL is configured to support automatic propagation.|  \n|[CSecurityDesc::IsSaclDefaulted](#csecuritydesc__issacldefaulted)|Determines if the security descriptor is configured with a default SACL.|  \n|[CSecurityDesc::IsSaclPresent](#csecuritydesc__issaclpresent)|Determines if the security descriptor contains a SACL.|  \n|[CSecurityDesc::IsSaclProtected](#csecuritydesc__issaclprotected)|Determines if the SACL is configured to prevent modifications.|  \n|[CSecurityDesc::IsSelfRelative](#csecuritydesc__isselfrelative)|Determines if the security descriptor is in self-relative format.|  \n|[CSecurityDesc::MakeAbsolute](#csecuritydesc__makeabsolute)|Call this method to convert the security descriptor to absolute format.|  \n|[CSecurityDesc::MakeSelfRelative](#csecuritydesc__makeselfrelative)|Call this method to convert the security descriptor to self-relative format.|  \n|[CSecurityDesc::SetControl](#csecuritydesc__setcontrol)|Sets the control bits of a security descriptor.|  \n|[CSecurityDesc::SetDacl](#csecuritydesc__setdacl)|Sets information in a DACL. If a DACL is already present in the security descriptor, it is replaced.|  \n|[CSecurityDesc::SetGroup](#csecuritydesc__setgroup)|Sets the primary group information of an absolute format security descriptor, replacing any primary group information already present.|  \n|[CSecurityDesc::SetOwner](#csecuritydesc__setowner)|Sets the owner information of an absolute format security descriptor, replacing any owner information already present.|  \n|[CSecurityDesc::SetSacl](#csecuritydesc__setsacl)|Sets information in a SACL. If a SACL is already present in the security descriptor, it is replaced.|  \n|[CSecurityDesc::ToString](#csecuritydesc__tostring)|Converts a security descriptor to a string format.|  \n  \n### Public Operators  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CSecurityDesc::operator const SECURITY_DESCRIPTOR *](#csecuritydesc__operator_const_security_descriptor__star)|Returns a pointer to the **SECURITY_DESCRIPTOR** structure.|  \n|[CSecurityDesc::operator =](#csecuritydesc__operator_eq)|Assignment operator.|  \n  \n## Remarks  \n The **SECURITY_DESCRIPTOR** structure contains the security information associated with an object. Applications use this structure to set and query an object's security status. See also [AtlGetSecurityDescriptor](http://msdn.microsoft.com/library/233578b8-dcc5-4f51-8e62-7cdcc2ff6b11).  \n  \n Applications should not modify the **SECURITY_DESCRIPTOR** structure directly, and instead should use the class methods provided.  \n  \n For an introduction to the access control model in Windows, see [Access Control](http://msdn.microsoft.com/library/windows/desktop/aa374860) in the [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  \n  \n## Requirements  \n **Header:** atlsecurity.h  \n  \n##  <a name=\"csecuritydesc__csecuritydesc\"></a>  CSecurityDesc::CSecurityDesc  \n The constructor.  \n  \n```\nCSecurityDesc() throw();\nCSecurityDesc(const CSecurityDesc& rhs) throw(...);\n\n    CSecurityDesc(const SECURITY_DESCRIPTOR& rhs) throw(...);\n```  \n  \n### Parameters  \n `rhs`  \n The `CSecurityDesc` object or **SECURITY_DESCRIPTOR** structure to assign to the new `CSecurityDesc` object.  \n  \n### Remarks  \n The `CSecurityDesc` object can optionally be created using a **SECURITY_DESCRIPTOR** structure or a previously defined `CSecurityDesc` object.  \n  \n##  <a name=\"csecuritydesc___dtorcsecuritydesc\"></a>  CSecurityDesc::~CSecurityDesc  \n The destructor.  \n  \n```\nvirtual ~CSecurityDesc() throw();\n```  \n  \n### Remarks  \n The destructor frees all allocated resources.  \n  \n##  <a name=\"csecuritydesc__fromstring\"></a>  CSecurityDesc::FromString  \n Converts a string-format security descriptor into a valid, functional security descriptor.  \n  \n```\nbool FromString(LPCTSTR pstr) throw(...);\n```  \n  \n### Parameters  \n `pstr`  \n Pointer to a null-terminated string that contains the [string-format security descriptor](http://msdn.microsoft.com/library/windows/desktop/aa379570) to be converted.  \n  \n### Return Value  \n Returns true on success. Throws an exception on failure.  \n  \n### Remarks  \n The string can be created by using [CSecurityDesc::ToString](#csecuritydesc__tostring). Converting the security descriptor into a string makes it easier to store and transmit.  \n  \n This method is only available with Windows 2000 and later because it calls [ConvertStringSecurityDescriptorToSecurityDescriptor](http://msdn.microsoft.com/library/windows/desktop/aa376401).  \n  \n##  <a name=\"csecuritydesc__getcontrol\"></a>  CSecurityDesc::GetControl  \n Retrieves control information from the security descriptor.  \n  \n```\nbool GetControl(SECURITY_DESCRIPTOR_CONTROL* psdc) const throw();\n```  \n  \n### Parameters  \n *psdc*  \n Pointer to a **SECURITY_DESCRIPTOR_CONTROL** structure that receives the security descriptor's control information.  \n  \n### Return Value  \n Returns true if the method succeeds, false if it fails.  \n  \n### Remarks  \n This method is only meaningful when using Windows 2000 or later, as it calls [GetSecurityDescriptorControl](http://msdn.microsoft.com/library/windows/desktop/aa446647).  \n  \n##  <a name=\"csecuritydesc__getdacl\"></a>  CSecurityDesc::GetDacl  \n Retrieves discretionary access-control list (DACL) information from the security descriptor.  \n  \n```\nbool GetDacl(\n    CDacl* pDacl,\n    bool* pbPresent = NULL,\n    bool* pbDefaulted = NULL) const throw(...);\n```  \n  \n### Parameters  \n `pDacl`  \n Pointer to an `CDacl` structure in which to store a copy of the security descriptor's DACL. If a discretionary **ACL** exists, the method sets `pDacl` to the address of the security descriptor's discretionary **ACL**. If a discretionary **ACL** does not exist, no value is stored.  \n  \n `pbPresent`  \n Pointer to a value that indicates the presence of a discretionary **ACL** in the specified security descriptor. If the security descriptor contains a discretionary **ACL**, this parameter is set to true. If the security descriptor does not contain a discretionary **ACL**, this parameter is set to false.  \n  \n `pbDefaulted`  \n Pointer to a flag set to the value of the SE_DACL_DEFAULTED flag in the **SECURITY_DESCRIPTOR_CONTROL** structure if a discretionary **ACL** exists for the security descriptor. If this flag is true, the discretionary **ACL** was retrieved by a default mechanism; if false, the discretionary **ACL** was explicitly specified by a user.  \n  \n### Return Value  \n Returns true if the method succeeds, false if it fails.  \n  \n##  <a name=\"csecuritydesc__getgroup\"></a>  CSecurityDesc::GetGroup  \n Retrieves the primary group information from the security descriptor.  \n  \n```\nbool GetGroup(\n    CSid* pSid,\n    bool* pbDefaulted = NULL) const throw(...);\n```  \n  \n### Parameters  \n `pSid`  \n Pointer to a [CSid](../../atl/reference/csid-class.md) (security identifier) that receives a copy of the group stored in the CDacl.  \n  \n `pbDefaulted`  \n Pointer to a flag set to the value of the SE_GROUP_DEFAULTED flag in the **SECURITY_DESCRIPTOR_CONTROL** structure when the method returns.  \n  \n### Return Value  \n Returns true if the method succeeds, false if it fails.  \n  \n##  <a name=\"csecuritydesc__getowner\"></a>  CSecurityDesc::GetOwner  \n Retrieves owner informaton from the security descriptor.  \n  \n```\nbool GetOwner(\n    CSid* pSid,\n    bool* pbDefaulted = NULL) const throw(...);\n```  \n  \n### Parameters  \n `pSid`  \n Pointer to a [CSid](../../atl/reference/csid-class.md) (security identifier) that receives a copy of the group stored in the CDacl.  \n  \n `pbDefaulted`  \n Pointer to a flag set to the value of the SE_OWNER_DEFAULTED flag in the **SECURITY_DESCRIPTOR_CONTROL** structure when the method returns.  \n  \n### Return Value  \n Returns true if the method succeeds, false if it fails.  \n  \n##  <a name=\"csecuritydesc__getpsecurity_descriptor\"></a>  CSecurityDesc::GetPSECURITY_DESCRIPTOR  \n Returns a pointer to the **SECURITY_DESCRIPTOR** structure.  \n  \n```\nconst SECURITY_DESCRIPTOR* GetPSECURITY_DESCRIPTOR() const throw();\n```  \n  \n### Return Value  \n Returns a pointer to the [SECURITY_DESCRIPTOR](http://msdn.microsoft.com/library/windows/desktop/aa379561) structure.  \n  \n##  <a name=\"csecuritydesc__getsacl\"></a>  CSecurityDesc::GetSacl  \n Retrieves system access-control list (SACL) information from the security descriptor.  \n  \n```\nbool GetSacl(\n    CSacl* pSacl,\n    bool* pbPresent = NULL,\n    bool* pbDefaulted = NULL) const throw(...);\n```  \n  \n### Parameters  \n `pSacl`  \n Pointer to an `CSacl` structure in which to store a copy of the security descriptor's SACL. If a system **ACL** exists, the method sets `pSacl` to the address of the security descriptor's system **ACL**. If a system **ACL** does not exist, no value is stored.  \n  \n `pbPresent`  \n Pointer to a flag the method sets to indicate the presence of a system **ACL** in the specified security descriptor. If the security descriptor contains a system **ACL**, this parameter is set to true. If the security descriptor does not contain a system **ACL**, this parameter is set to false.  \n  \n `pbDefaulted`  \n Pointer to a flag set to the value of the SE_SACL_DEFAULTED flag in the **SECURITY_DESCRIPTOR_CONTROL** structure if a system **ACL** exists for the security descriptor.  \n  \n### Return Value  \n Returns true if the method succeeds, false if it fails.  \n  \n##  <a name=\"csecuritydesc__isdaclautoinherited\"></a>  CSecurityDesc::IsDaclAutoInherited  \n Determines if the discretionary access-control list (DACL) is configured to support automatic propagation.  \n  \n```\nbool IsDaclAutoInherited() const throw();\n```  \n  \n### Return Value  \n Returns true if the security descriptor contains a DACL which is set up to support automatic propagation of inheritable access-control entries (ACEs) to existing child objects. Returns false otherwise.  \n  \n### Remarks  \n The system sets this bit when it performs the automatic inheritance algorithm for the object and its existing child objects.  \n  \n##  <a name=\"csecuritydesc__isdacldefaulted\"></a>  CSecurityDesc::IsDaclDefaulted  \n Determines if the security descriptor is configured with a default discretionary access-control list (DACL).  \n  \n```\nbool IsDaclDefaulted() const throw();\n```  \n  \n### Return Value  \n Returns true if the security descriptor contains a default DACL, false otherwise.  \n  \n### Remarks  \n This flag can affect how the system treats the DACL, with respect to access-control entry (ACE) inheritance. For example, if an object's creator does not specify a DACL, the object receives the default DACL from the creator's access token. The system ignores this flag if the SE_DACL_PRESENT flag is not set.  \n  \n This flag is used to determine how the final DACL on the object is to be computed and is not stored physically in the security descriptor control of the securable object.  \n  \n To set this flag, use the [CSecurityDesc::SetDacl](#csecuritydesc__setdacl) method.  \n  \n##  <a name=\"csecuritydesc__isdaclpresent\"></a>  CSecurityDesc::IsDaclPresent  \n Determines if the security descriptor contains a discretionary access-control list (DACL).  \n  \n```\nbool IsDaclPresent() const throw();\n```  \n  \n### Return Value  \n Returns true if the security descriptor contains a DACL, false otherwise.  \n  \n### Remarks  \n If this flag is not set, or if this flag is set and the DACL is NULL, the security descriptor allows full access to everyone.  \n  \n This flag is used to hold the security information specified by a caller until the security descriptor is associated with a securable object. Once the security descriptor is associated with a securable object, the SE_DACL_PRESENT flag is always set in the security descriptor control.  \n  \n To set this flag, use the [CSecurityDesc::SetDacl](#csecuritydesc__setdacl) method.  \n  \n##  <a name=\"csecuritydesc__isdaclprotected\"></a>  CSecurityDesc::IsDaclProtected  \n Determines if the discretionary access-control list (DACL) is configured to prevent modifications.  \n  \n```\nbool IsDaclProtected() const throw();\n```  \n  \n### Return Value  \n Returns true if the DACL is configured to prevent the security descriptor from being modified by inheritable access-control entries (ACEs). Returns false otherwise.  \n  \n### Remarks  \n To set this flag, use the [CSecurityDesc::SetDacl](#csecuritydesc__setdacl) method.  \n  \n This method is only meaningful for Windows 2000 or later, as only Windows 2000 supports automatic propagation of inheritable ACEs.  \n  \n##  <a name=\"csecuritydesc__isgroupdefaulted\"></a>  CSecurityDesc::IsGroupDefaulted  \n Determines if the security descriptor's group security identifier (SID) was set by default.  \n  \n```\nbool IsGroupDefaulted() const throw();\n```  \n  \n### Return Value  \n Returns true if a default mechanism, rather than the original provider of the security descriptor, provided the security descriptor's group SID. Returns false otherwise.  \n  \n### Remarks  \n To set this flag, use the [CSecurityDesc::SetGroup](#csecuritydesc__setgroup) method.  \n  \n##  <a name=\"csecuritydesc__isownerdefaulted\"></a>  CSecurityDesc::IsOwnerDefaulted  \n Determines if the security descriptor's owner security identifier (SID) was set by default.  \n  \n```\nbool IsOwnerDefaulted() const throw();\n```  \n  \n### Return Value  \n Returns true if a default mechanism, rather than the original provider of the security descriptor, provided the security descriptor's owner SID. Returns false otherwise.  \n  \n### Remarks  \n To set this flag, use the [CSecurityDesc::SetOwner](#csecuritydesc__setowner) method.  \n  \n##  <a name=\"csecuritydesc__issaclautoinherited\"></a>  CSecurityDesc::IsSaclAutoInherited  \n Determines if the system access-control list (SACL) is configured to support automatic propagation.  \n  \n```\nbool IsSaclAutoInherited() const throw();\n```  \n  \n### Return Value  \n Returns true if the security descriptor contains a SACL which is set up to support automatic propagation of inheritable access-control entries (ACEs) to existing child objects. Returns false otherwise.  \n  \n### Remarks  \n The system sets this bit when it performs the automatic inheritance algorithm for the object and its existing child objects.  \n  \n##  <a name=\"csecuritydesc__issacldefaulted\"></a>  CSecurityDesc::IsSaclDefaulted  \n Determines if the security descriptor is configured with a default system access-control list (SACL).  \n  \n```\nbool IsSaclDefaulted() const throw();\n```  \n  \n### Return Value  \n Returns true if the security descriptor contains a default SACL, false otherwise.  \n  \n### Remarks  \n This flag can affect how the system treats the SACL, with respect to access-control entry (ACE) inheritance. The system ignores this flag if the SE_SACL_PRESENT flag is not set.  \n  \n To set this flag, use the [CSecurityDesc::SetSacl](#csecuritydesc__setsacl) method.  \n  \n##  <a name=\"csecuritydesc__issaclpresent\"></a>  CSecurityDesc::IsSaclPresent  \n Determines if the security descriptor contains a system access-control list (SACL).  \n  \n```\nbool IsSaclPresent() const throw();\n```  \n  \n### Return Value  \n Returns true if the security descriptor contains a SACL, false otherwise.  \n  \n### Remarks  \n To set this flag, use the [CSecurityDesc::SetSacl](#csecuritydesc__setsacl) method.  \n  \n##  <a name=\"csecuritydesc__issaclprotected\"></a>  CSecurityDesc::IsSaclProtected  \n Determines if the system access-control list (SACL) is configured to prevent modifications.  \n  \n```\nbool IsSaclProtected() const throw();\n```  \n  \n### Return Value  \n Returns true if the SACL is configured to prevent the security descriptor from being modified by inheritable access-control entries (ACEs). Returns false otherwise.  \n  \n### Remarks  \n To set this flag, use the [CSecurityDesc::SetSacl](#csecuritydesc__setsacl) method.  \n  \n This method is only meaningful for Windows 2000 or later, as only Windows 2000 supports automatic propagation of inheritable ACEs.  \n  \n##  <a name=\"csecuritydesc__isselfrelative\"></a>  CSecurityDesc::IsSelfRelative  \n Determines if the security descriptor is in self-relative format.  \n  \n```\nbool IsSelfRelative() const throw();\n```  \n  \n### Return Value  \n Returns true if the security descriptor is in self-relative format with all the security information in a contiguous block of memory. Returns false if the security descriptor is in absolute format. For more information, see [Absolute and Self-Relative Security Descriptors](http://msdn.microsoft.com/library/windows/desktop/aa374807).  \n  \n##  <a name=\"csecuritydesc__makeabsolute\"></a>  CSecurityDesc::MakeAbsolute  \n Call this method to convert the security descriptor to absolute format.  \n  \n```\nbool MakeAbsolute() throw(...);\n```  \n  \n### Return Value  \n Returns true if the method succeeds, false otherwise.  \n  \n### Remarks  \n A security descriptor in absolute format contains pointers to the information it contains, rather than the information itself. A security descriptor in self-relative format contains the information in a contiguous block of memory. In a self-relative security descriptor, a **SECURITY_DESCRIPTOR** structure always starts the information, but the security descriptor's other components can follow the structure in any order. Instead of using memory addresses, the components of the self-relative security descriptor are identified by offsets from the beginning of the security descriptor. This format is useful when a security descriptor must be stored on a disk or transmitted by means of a communications protocol. For more information, see [Absolute and Self-Relative Security Descriptors](http://msdn.microsoft.com/library/windows/desktop/aa374807).  \n  \n##  <a name=\"csecuritydesc__makeselfrelative\"></a>  CSecurityDesc::MakeSelfRelative  \n Call this method to convert the security descriptor to self-relative format.  \n  \n```\nbool MakeSelfRelative() throw(...);\n```  \n  \n### Return Value  \n Returns true if the method succeeds, false otherwise.  \n  \n### Remarks  \n A security descriptor in absolute format contains pointers to the information it contains, rather than containing the information itself. A security descriptor in self-relative format contains the information in a contiguous block of memory. In a self-relative security descriptor, a **SECURITY_DESCRIPTOR** structure always starts the information, but the security descriptor's other components can follow the structure in any order. Instead of using memory addresses, the components of the security descriptor are identified by offsets from the beginning of the security descriptor. This format is useful when a security descriptor must be stored on a disk or transmitted by means of a communications protocol. For more information, see [Absolute and Self-Relative Security Descriptors](http://msdn.microsoft.com/library/windows/desktop/aa374807).  \n  \n##  <a name=\"csecuritydesc__operator_eq\"></a>  CSecurityDesc::operator =  \n Assignment operator.  \n  \n```\nCSecurityDesc& operator= (const SECURITY_DESCRIPTOR& rhs) throw(...);\n\n    CSecurityDesc& operator= (const CSecurityDesc& rhs) throw(...);\n```  \n  \n### Parameters  \n `rhs`  \n The **SECURITY_DESCRIPTOR** structure or `CSecurityDesc` object to assign to the `CSecurityDesc` object.  \n  \n### Return Value  \n Returns the updated `CSecurityDesc` object.  \n  \n##  <a name=\"csecuritydesc__operator_const_security_descriptor__star\"></a>  CSecurityDesc::operator const SECURITY_DESCRIPTOR *  \n Casts a value to a pointer to the **SECURITY_DESCRIPTOR** structure.  \n  \n```operator const SECURITY_DESCRIPTOR *() const throw();\n```  \n  \n##  <a name=\"csecuritydesc__setcontrol\"></a>  CSecurityDesc::SetControl  \n Sets the control bits of a security descriptor.  \n  \n```\nbool SetControl(SECURITY_DESCRIPTOR_CONTROL ControlBitsOfInterest,  SECURITY_DESCRIPTOR_CONTROL ControlBitsToSet) throw();\n```  \n  \n### Parameters  \n `ControlBitsOfInterest`  \n A **SECURITY_DESCRIPTOR_CONTROL** mask that indicates the control bits to set. For a list of the flags which can be set, see [SetSecurityDescriptorControl](http://msdn.microsoft.com/library/windows/desktop/aa379582\\(v=vs.85\\).aspx).  \n  \n `ControlBitsToSe`t  \n A `SECURITY_DESCRIPTOR_CONTROL` mask that indicates the new values for the control bits specified by the `ControlBitsOfInterest` mask. This parameter can be a combination of the flags listed for the `ControlBitsOfInterest` parameter.  \n  \n### Return Value  \n Returns true on success, false on failure.  \n  \n### Remarks  \n This method is available only on Windows 2000 and later, as it calls [SetSecurityDescriptorControl](http://msdn.microsoft.com/library/windows/desktop/aa379582\\(v=vs.85\\).aspx).  \n  \n##  <a name=\"csecuritydesc__setdacl\"></a>  CSecurityDesc::SetDacl  \n Sets information in a discretionary access-control list (DACL). If a DACL is already present in the security descriptor, it is replaced.  \n  \n```\ninline void SetDacl(bool bPresent = true,\n    bool bDefaulted = false) throw(...);\n\n    inline void SetDacl(const CDacl& Dacl,\n    bool bDefaulted = false) throw(...);\n```  \n  \n### Parameters  \n *Dacl*  \n Reference to a `CDacl` object specifying the DACL for the security descriptor. This parameter must not be NULL. To set a NULL DACL in the security descriptor, the first form of the method should be used with `bPresent` set to false.  \n  \n `bPresent`  \n Specifies a flag indicating the presence of a DACL in the security descriptor. If this parameter is true, the method sets the SE_DACL_PRESENT flag in the **SECURITY_DESCRIPTOR_CONTROL** structure and uses the values in the *Dacl* and `bDefaulted` parameters. If it is false, the method clears the SE_DACL_PRESENT flag, and `bDefaulted` is ignored.  \n  \n `bDefaulted`  \n Specifies a flag indicating the source of the DACL. If this flag is true, the DACL has been retrieved by some default mechanism. If false, the DACL has been explicitly specified by a user. The method stores this value in the SE_DACL_DEFAULTED flag of the **SECURITY_DESCRIPTOR_CONTROL** structure. If this parameter is not specified, the SE_DACL_DEFAULTED flag is cleared.  \n  \n### Return Value  \n Returns true on success, false on failure.  \n  \n### Remarks  \n There is an important difference between an empty and a nonexistent DACL. When a DACL is empty, it contains no access-control entries and no access rights have been explicitly granted. As a result, access to the object is implicitly denied. When an object has no DACL, on the other hand, no protection is assigned to the object, and any access request is granted.  \n  \n##  <a name=\"csecuritydesc__setgroup\"></a>  CSecurityDesc::SetGroup  \n Sets the primary group information of an absolute format security descriptor, replacing any primary group information already present.  \n  \n```\nbool SetGroup(const CSid& Sid,  bool bDefaulted = false) throw(...);\n```  \n  \n### Parameters  \n `Sid`  \n Reference to a [CSid](../../atl/reference/csid-class.md) object for the security descriptor's new primary group. This parameter must not be NULL. A security descriptor can be marked as not having a DACL or a SACL, but it must have a group and an owner, even it these are the NULL SID (which is a built-in SID with a special meaning).  \n  \n `bDefaulted`  \n Indicates whether the primary group information was derived from a default mechanism. If this value is true, it is default information, and the method stores this value as the SE_GROUP_DEFAULTED flag in the **SECURITY_DESCRIPTOR_CONTROL** structure. If this parameter is zero, the SE_GROUP_DEFAULTED flag is cleared.  \n  \n### Return Value  \n Returns true on success, false on failure.  \n  \n##  <a name=\"csecuritydesc__setowner\"></a>  CSecurityDesc::SetOwner  \n Sets the owner information of an absolute format security descriptor. It replaces any owner information already present.  \n  \n```\nbool SetOwner(const CSid& Sid,  bool bDefaulted = false) throw(...);\n```  \n  \n### Parameters  \n `Sid`  \n The [CSid](../../atl/reference/csid-class.md) object for the security descriptor's new primary owner. This parameter must not be NULL.  \n  \n `bDefaulted`  \n Indicates whether the owner information is derived from a default mechanism. If this value is true, it is default information. The method stores this value as the SE_OWNER_DEFAULTED flag in the **SECURITY_DESCRIPTOR_CONTROL** structure. If this parameter is zero, the SE_OWNER_DEFAULTED flag is cleared.  \n  \n### Return Value  \n Returns true on success, false on failure.  \n  \n##  <a name=\"csecuritydesc__setsacl\"></a>  CSecurityDesc::SetSacl  \n Sets information in a system access-control list (SACL). If a SACL is already present in the security descriptor, it is replaced.  \n  \n```\nbool SetSacl(const CSacl& Sacl,  bool bDefaulted = false) throw(...);\n```  \n  \n### Parameters  \n *Sacl*  \n Pointer to an `CSacl` object specifying the SACL for the security descriptor. This parameter must not be NULL, and must be a CSacl object. Unlike DACLs, there is no difference between NULL and an empty SACL, as SACL objects do not specify access rights, only auditing information.  \n  \n `bDefaulted`  \n Specifies a flag indicating the source of the SACL. If this flag is true, the SACL has been retrieved by some default mechanism. If false, the SACL has been explicitly specified by a user. The method stores this value in the SE_SACL_DEFAULTED flag of the **SECURITY_DESCRIPTOR_CONTROL** structure. If this parameter is not specified, the SE_SACL_DEFAULTED flag is cleared.  \n  \n### Return Value  \n Returns true on success, false on failure.  \n  \n##  <a name=\"csecuritydesc__tostring\"></a>  CSecurityDesc::ToString  \n Converts a security descriptor to a string format.  \n  \n```\nbool ToString(\n    CString* pstr,  SECURITY_INFORMATION si = OWNER_SECURITY_INFORMATION |\n    GROUP_SECURITY_INFORMATION | DACL_SECURITY_INFORMATION |\n    SACL_SECURITY_INFORMATION) const throw(...);\n```  \n  \n### Parameters  \n `pstr`  \n Pointer to a null-terminated string which will receive the [string-format security descriptor](http://msdn.microsoft.com/library/windows/desktop/aa379570).  \n  \n `si`  \n Specifies a combination of SECURITY_INFORMATION bit flags to indicate the components of the security descriptor to include in the output string.  \n  \n### Return Value  \n Returns true on success, false on failure.  \n  \n### Remarks  \n Once the security descriptor is in string format, it can more easily be stored or transmitted. Use the `CSecurityDesc::FromString` method to convert the string back into a security descriptor.  \n  \n The `si` parameter can contain the following SECURITY_INFORMATION flags:  \n  \n|Value|Meaning|  \n|-----------|-------------|  \n|OWNER_SECURITY_INFORMATION|Include the owner.|  \n|GROUP_SECURITY_INFORMATION|Include the primary group.|  \n|DACL_SECURITY_INFORMATION|Include the DACL.|  \n|SACL_SECURITY_INFORMATION|Include the SACL.|  \n  \n If the DACL is NULL and the SE_DACL_PRESENT control bit is set in the input security descriptor, the method fails.  \n  \n If the DACL is NULL and the SE_DACL_PRESENT control bit is not set in the input security descriptor, the resulting security descriptor string does not have a D: component. See [Security Descriptor String Format](http://msdn.microsoft.com/library/windows/desktop/aa379570) for more details.  \n  \n This method is only available with Windows 2000 and later, as it calls [ConvertStringSecurityDescriptorToSecurityDescriptor](http://msdn.microsoft.com/library/windows/desktop/aa376401).  \n  \n## See Also  \n [Security Sample](../../visual-cpp-samples.md)   \n [SECURITY_DESCRIPTOR](http://msdn.microsoft.com/library/windows/desktop/aa379561)   \n [Class Overview](../../atl/atl-class-overview.md)   \n [Security Global Functions](../../atl/reference/security-global-functions.md)\n"}