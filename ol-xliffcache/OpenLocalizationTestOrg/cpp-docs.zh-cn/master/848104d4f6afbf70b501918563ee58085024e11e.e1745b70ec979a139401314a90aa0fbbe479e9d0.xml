{"nodes":[{"pos":[12,51],"content":"setlocale, _wsetlocale | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"setlocale, _wsetlocale | Microsoft Docs","pos":[0,39]}]},{"content":"setlocale, _wsetlocale","pos":[1134,1156]},{"content":"Sets or retrieves the run-time locale.","pos":[1157,1195]},{"content":"Syntax","pos":[1204,1210]},{"content":"Parameters","pos":[1380,1390]},{"content":"Category affected by locale.","pos":[1408,1436]},{"content":"Locale specifier.","pos":[1455,1472]},{"content":"Return Value","pos":[1481,1493]},{"content":"If a valid <ph id=\"ph1\">`locale`</ph> and <ph id=\"ph2\">`category`</ph> are given, returns a pointer to the string associated with the specified <ph id=\"ph3\">`locale`</ph> and <ph id=\"ph4\">`category`</ph>.","pos":[1497,1629],"source":"If a valid `locale` and `category` are given, returns a pointer to the string associated with the specified `locale` and `category`."},{"content":"If the <ph id=\"ph1\">`locale`</ph> or <ph id=\"ph2\">`category`</ph> is not valid, returns a null pointer and the current locale settings of the program are not changed.","pos":[1630,1760],"source":" If the `locale` or `category` is not valid, returns a null pointer and the current locale settings of the program are not changed."},{"content":"For example, the call","pos":[1767,1788]},{"content":"sets all categories, returning only the string","pos":[1833,1879]},{"content":"You can copy the string returned by <ph id=\"ph1\">`setlocale`</ph> to restore that part of the program's locale information.","pos":[1900,2005],"source":"You can copy the string returned by `setlocale` to restore that part of the program's locale information."},{"content":"Global or thread local storage is used for the string returned by <ph id=\"ph1\">`setlocale`</ph>.","pos":[2006,2084],"source":" Global or thread local storage is used for the string returned by `setlocale`."},{"content":"Later calls to <ph id=\"ph1\">`setlocale`</ph> overwrite the string, which invalidates string pointers returned by earlier calls.","pos":[2085,2194],"source":" Later calls to `setlocale` overwrite the string, which invalidates string pointers returned by earlier calls."},{"content":"Remarks","pos":[2203,2210]},{"content":"Use the <ph id=\"ph1\">`setlocale`</ph> function to set, change, or query some or all of the current program locale information specified by <ph id=\"ph2\">`locale`</ph> and <ph id=\"ph3\">`category`</ph>.","pos":[2214,2359],"source":"Use the `setlocale` function to set, change, or query some or all of the current program locale information specified by `locale` and `category`."},{"content":"refers to the locality (country/region and language) for which you can customize certain aspects of your program.","pos":[2369,2482]},{"content":"Some locale-dependent categories include the formatting of dates and the display format for monetary values.","pos":[2483,2591]},{"content":"If you set <ph id=\"ph1\">`locale`</ph> to the default string for a language that has multiple forms supported on your computer, you should check the <ph id=\"ph2\">`setlocale`</ph> return value to see which language is in effect.","pos":[2592,2782],"source":" If you set `locale` to the default string for a language that has multiple forms supported on your computer, you should check the `setlocale` return value to see which language is in effect."},{"content":"For example, if you set <ph id=\"ph1\">`locale`</ph> to \"chinese\" the return value could be either \"chinese-simplified\" or \"chinese-traditional\".","pos":[2783,2908],"source":" For example, if you set `locale` to \"chinese\" the return value could be either \"chinese-simplified\" or \"chinese-traditional\"."},{"content":"is a wide-character version of <ph id=\"ph1\">`setlocale`</ph>; the <ph id=\"ph2\">`locale`</ph> argument and return value of <ph id=\"ph3\">`_wsetlocale`</ph> are wide-character strings.","pos":[2929,3056],"source":" is a wide-character version of `setlocale`; the `locale` argument and return value of `_wsetlocale` are wide-character strings."},{"content":"and <ph id=\"ph1\">`setlocale`</ph> behave identically otherwise.","pos":[3071,3116],"source":" and `setlocale` behave identically otherwise."},{"content":"Generic-Text Routine Mappings","pos":[3126,3155]},{"content":"TCHAR.H routine","pos":[3162,3177]},{"content":"_UNICODE &amp; _MBCS not defined","pos":[3178,3206],"source":"_UNICODE & _MBCS not defined"},{"content":"_MBCS defined","pos":[3207,3220]},{"content":"_UNICODE defined","pos":[3221,3237]},{"content":"The <ph id=\"ph1\">`category`</ph> argument specifies the parts of a program's locale information that are affected.","pos":[3409,3505],"source":"The `category` argument specifies the parts of a program's locale information that are affected."},{"content":"The macros used for <ph id=\"ph1\">`category`</ph> and the parts of the program they affect are as follows:","pos":[3506,3593],"source":" The macros used for `category` and the parts of the program they affect are as follows:"},{"content":"All categories in the following list.","pos":[3612,3649]},{"content":"The <ph id=\"ph1\">`strcoll`</ph>, <ph id=\"ph2\">`_stricoll`</ph>, <ph id=\"ph3\">`wcscoll`</ph>, <ph id=\"ph4\">`_wcsicoll`</ph>, <ph id=\"ph5\">`strxfrm`</ph>, <ph id=\"ph6\">`_strncoll`</ph>, <ph id=\"ph7\">`_strnicoll`</ph>, <ph id=\"ph8\">`_wcsncoll`</ph>, <ph id=\"ph9\">`_wcsnicoll`</ph>, and <ph id=\"ph10\">`wcsxfrm`</ph> functions.","pos":[3672,3813],"source":" The `strcoll`, `_stricoll`, `wcscoll`, `_wcsicoll`, `strxfrm`, `_strncoll`, `_strnicoll`, `_wcsncoll`, `_wcsnicoll`, and `wcsxfrm` functions."},{"content":"The character-handling functions (except <ph id=\"ph1\">`isdigit`</ph>, <ph id=\"ph2\">`isxdigit`</ph>, <ph id=\"ph3\">`mbstowcs`</ph>, and <ph id=\"ph4\">`mbtowc`</ph>, which are unaffected).","pos":[3834,3946],"source":" The character-handling functions (except `isdigit`, `isxdigit`, `mbstowcs`, and `mbtowc`, which are unaffected)."},{"content":"Monetary-formatting information returned by the <ph id=\"ph1\">`localeconv`</ph> function.","pos":[3970,4040],"source":" Monetary-formatting information returned by the `localeconv` function."},{"content":"Decimal-point character for the formatted output routines (such as <ph id=\"ph1\">`printf`</ph>), for the data-conversion routines, and for the non-monetary formatting information returned by <ph id=\"ph2\">`localeconv`</ph>.","pos":[4063,4248],"source":" Decimal-point character for the formatted output routines (such as `printf`), for the data-conversion routines, and for the non-monetary formatting information returned by `localeconv`."},{"content":"In addition to the decimal-point character, <ph id=\"ph1\">`LC_NUMERIC`</ph> also sets the thousands separator and the grouping control string returned by <bpt id=\"p1\">[</bpt>localeconv<ept id=\"p1\">](../../c-runtime-library/reference/localeconv.md)</ept>.","pos":[4249,4446],"source":" In addition to the decimal-point character, `LC_NUMERIC` also sets the thousands separator and the grouping control string returned by [localeconv](../../c-runtime-library/reference/localeconv.md)."},{"content":"The <ph id=\"ph1\">`strftime`</ph> and <ph id=\"ph2\">`wcsftime`</ph> functions.","pos":[4466,4506],"source":" The `strftime` and `wcsftime` functions."},{"content":"This function validates the category parameter.","pos":[4513,4560]},{"content":"If the category parameter is not one of the values given in the previous table, the invalid parameter handler is invoked, as described in <bpt id=\"p1\">[</bpt>Parameter Validation<ept id=\"p1\">](../../c-runtime-library/parameter-validation.md)</ept>.","pos":[4561,4771],"source":" If the category parameter is not one of the values given in the previous table, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md)."},{"content":"If execution is allowed to continue, the function sets <ph id=\"ph1\">`errno`</ph> to <ph id=\"ph2\">`EINVAL`</ph> and returns <ph id=\"ph3\">`NULL`</ph>.","pos":[4772,4866],"source":" If execution is allowed to continue, the function sets `errno` to `EINVAL` and returns `NULL`."},{"content":"The <ph id=\"ph1\">`locale`</ph> argument is a pointer to a string that specifies the locale.","pos":[4873,4946],"source":"The `locale` argument is a pointer to a string that specifies the locale."},{"content":"For information about the format of the <ph id=\"ph1\">`locale`</ph> argument, see <bpt id=\"p1\">[</bpt>Locale Names, Languages, and Country/Region Strings<ept id=\"p1\">](../../c-runtime-library/locale-names-languages-and-country-region-strings.md)</ept>.","pos":[4947,5142],"source":" For information about the format of the `locale` argument, see [Locale Names, Languages, and Country/Region Strings](../../c-runtime-library/locale-names-languages-and-country-region-strings.md)."},{"content":"If <ph id=\"ph1\">`locale`</ph> points to an empty string, the locale is the implementation-defined native environment.","pos":[5143,5242],"source":" If `locale` points to an empty string, the locale is the implementation-defined native environment."},{"content":"A value of <ph id=\"ph1\">`C`</ph> specifies the minimal ANSI conforming environment for C translation.","pos":[5243,5326],"source":" A value of `C` specifies the minimal ANSI conforming environment for C translation."},{"content":"The <ph id=\"ph1\">`C`</ph> locale assumes that all <ph id=\"ph2\">`char`</ph> data types are 1 byte and that their value is always less than 256.","pos":[5327,5433],"source":" The `C` locale assumes that all `char` data types are 1 byte and that their value is always less than 256."},{"content":"At program startup, the equivalent of the following statement is executed:","pos":[5440,5514]},{"content":"The <ph id=\"ph1\">`locale`</ph> argument can take a locale name, a language string, a language string and country/region code, a code page, or a language string, country/region code, and code page.","pos":[5555,5733],"source":"The `locale` argument can take a locale name, a language string, a language string and country/region code, a code page, or a language string, country/region code, and code page."},{"content":"The set of available locale names, languages, country/region codes, and code pages includes all those supported by the Windows NLS API except code pages that require more than two bytes per character, such as UTF-7 and UTF-8.","pos":[5734,5959]},{"content":"If you provide a code page value of UTF-7 or UTF-8, <ph id=\"ph1\">`setlocale`</ph> will fail, returning NULL.","pos":[5960,6050],"source":" If you provide a code page value of UTF-7 or UTF-8, `setlocale` will fail, returning NULL."},{"content":"The set of locale names supported by <ph id=\"ph1\">`setlocale`</ph> are described in <bpt id=\"p1\">[</bpt>Locale Names, Languages, and Country/Region Strings<ept id=\"p1\">](../../c-runtime-library/locale-names-languages-and-country-region-strings.md)</ept>.","pos":[6051,6249],"source":" The set of locale names supported by `setlocale` are described in [Locale Names, Languages, and Country/Region Strings](../../c-runtime-library/locale-names-languages-and-country-region-strings.md)."},{"content":"The set of language and country/region strings supported by <ph id=\"ph1\">`setlocale`</ph> are listed in <bpt id=\"p1\">[</bpt>Language Strings<ept id=\"p1\">](../../c-runtime-library/language-strings.md)</ept> and <bpt id=\"p2\">[</bpt>Country/Region Strings<ept id=\"p2\">](../../c-runtime-library/country-region-strings.md)</ept>.","pos":[6250,6480],"source":" The set of language and country/region strings supported by `setlocale` are listed in [Language Strings](../../c-runtime-library/language-strings.md) and [Country/Region Strings](../../c-runtime-library/country-region-strings.md)."},{"content":"We recommend the locale name form for performance and for maintainability of locale strings embedded in code or serialized to storage.","pos":[6481,6615]},{"content":"The locale name strings are less likely to be changed by an operating system update than the language and country/region name form.","pos":[6616,6747]},{"content":"A null pointer that's passed as the <ph id=\"ph1\">`locale`</ph> argument tells <ph id=\"ph2\">`setlocale`</ph> to query instead of to set the international environment.","pos":[6754,6883],"source":"A null pointer that's passed as the `locale` argument tells `setlocale` to query instead of to set the international environment."},{"content":"If the <ph id=\"ph1\">`locale`</ph> argument is a null pointer, the program's current locale setting is not changed.","pos":[6884,6980],"source":" If the `locale` argument is a null pointer, the program's current locale setting is not changed."},{"content":"Instead, <ph id=\"ph1\">`setlocale`</ph> returns a pointer to the string that's associated with the <ph id=\"ph2\">`category`</ph> of the thread's current locale.","pos":[6981,7103],"source":" Instead, `setlocale` returns a pointer to the string that's associated with the `category` of the thread's current locale."},{"content":"If the <ph id=\"ph1\">`category`</ph> argument is <ph id=\"ph2\">`LC_ALL`</ph>, the function returns a string that indicates the current setting of each category, separated by semicolons.","pos":[7104,7251],"source":" If the `category` argument is `LC_ALL`, the function returns a string that indicates the current setting of each category, separated by semicolons."},{"content":"For example, the sequence of calls","pos":[7252,7286]},{"content":"returns","pos":[7532,7539]},{"pos":[7635,7700],"content":"which is the string that's associated with the <ph id=\"ph1\">`LC_ALL`</ph> category.","source":"which is the string that's associated with the `LC_ALL` category."},{"content":"The following examples pertain to the <ph id=\"ph1\">`LC_ALL`</ph> category.","pos":[7707,7763],"source":"The following examples pertain to the `LC_ALL` category."},{"content":"Either of the strings \".OCP\" and \".ACP\" can be used instead of a code page number to specify use of the user-default OEM code page and user-default ANSI code page, respectively.","pos":[7764,7941]},{"content":"Sets the locale to the default, which is the user-default ANSI code page obtained from the operating system.","pos":[7978,8086]},{"content":"Explicitly sets the locale to the current OEM code page obtained from the operating system.","pos":[8127,8218]},{"content":"Sets the locale to the ANSI code page obtained from the operating system.","pos":[8259,8332]},{"content":"Sets the locale to the locale name that's indicated by <bpt id=\"p1\">*</bpt><ph id=\"ph1\">\\&lt;</ph>localename&gt;<ept id=\"p1\">*</ept>.","pos":[8381,8452],"source":" Sets the locale to the locale name that's indicated by *\\<localename>*."},{"content":"Sets the locale to the language and country/region indicated by <bpt id=\"p1\">*</bpt><ph id=\"ph1\">\\&lt;</ph>language&gt;<ept id=\"p1\">*</ept> and <bpt id=\"p2\">*</bpt><ph id=\"ph2\">\\&lt;</ph>country&gt;<ept id=\"p2\">*</ept>, together with the default code page obtained from the host operating system.","pos":[8509,8681],"source":" Sets the locale to the language and country/region indicated by *\\<language>* and *\\<country>*, together with the default code page obtained from the host operating system."},{"content":"Sets the locale to the language, country/region, and code page indicated by the <bpt id=\"p1\">*</bpt><ph id=\"ph1\">\\&lt;</ph>language&gt;<ept id=\"p1\">*</ept>, <bpt id=\"p2\">*</bpt><ph id=\"ph2\">\\&lt;</ph>country&gt;<ept id=\"p2\">*</ept>, and <bpt id=\"p3\">*</bpt>&lt;code_page&gt;<ept id=\"p3\">*</ept> strings.","pos":[8750,8885],"source":" Sets the locale to the language, country/region, and code page indicated by the *\\<language>*, *\\<country>*, and *<code_page>* strings."},{"content":"You can use various combinations of language, country/region, and code page.","pos":[8886,8962]},{"content":"For example, this call sets the locale to French Canada with code page 1252:","pos":[8963,9039]},{"content":"This call sets the locale to French Canada with the default ANSI code page:","pos":[9097,9172]},{"content":"This call sets the locale to French Canada with the default OEM code page:","pos":[9229,9303]},{"content":"Sets the locale to the language that's indicated by <bpt id=\"p1\">*</bpt><ph id=\"ph1\">\\&lt;</ph>language&gt;<ept id=\"p1\">*</ept>, and uses the default country/region for the specified language and the user-default ANSI code page for that country/region as obtained from the host operating system.","pos":[9400,9633],"source":" Sets the locale to the language that's indicated by *\\<language>*, and uses the default country/region for the specified language and the user-default ANSI code page for that country/region as obtained from the host operating system."},{"content":"For example, the following calls to <ph id=\"ph1\">`setlocale`</ph> are functionally equivalent:","pos":[9634,9710],"source":" For example, the following calls to `setlocale` are functionally equivalent:"},{"content":"We recommend the first form for performance and maintainability.","pos":[9854,9918]},{"content":"Sets the code page to the value indicated by <bpt id=\"p1\">*</bpt>&lt;code_page&gt;<ept id=\"p1\">*</ept>, together with the default country/region and language (as defined by the host operating system) for the specified code page.","pos":[9967,10151],"source":" Sets the code page to the value indicated by *<code_page>*, together with the default country/region and language (as defined by the host operating system) for the specified code page."},{"content":"The category must be either <ph id=\"ph1\">`LC_ALL`</ph> or <ph id=\"ph2\">`LC_CTYPE`</ph> to effect a change of code page.","pos":[10158,10241],"source":"The category must be either `LC_ALL` or `LC_CTYPE` to effect a change of code page."},{"content":"For example, if the default country/region and language of the host operating system are \"United States\" and \"English,\" the following two calls to <ph id=\"ph1\">`setlocale`</ph> are functionally equivalent:","pos":[10242,10429],"source":" For example, if the default country/region and language of the host operating system are \"United States\" and \"English,\" the following two calls to `setlocale` are functionally equivalent:"},{"pos":[10532,10714],"content":"For more information, see the <bpt id=\"p1\">[</bpt>setlocale<ept id=\"p1\">](../../preprocessor/setlocale.md)</ept> pragma directive in the <bpt id=\"p2\">[</bpt>C/C++ Preprocessor Reference<ept id=\"p2\">](../../preprocessor/c-cpp-preprocessor-reference.md)</ept>.","source":"For more information, see the [setlocale](../../preprocessor/setlocale.md) pragma directive in the [C/C++ Preprocessor Reference](../../preprocessor/c-cpp-preprocessor-reference.md)."},{"pos":[10721,10940],"content":"The function <bpt id=\"p1\">[</bpt>_configthreadlocale<ept id=\"p1\">](../../c-runtime-library/reference/configthreadlocale.md)</ept> is used to control whether <ph id=\"ph1\">`setlocale`</ph> affects the locale of all threads in a program or only the locale of the calling thread.","source":"The function [_configthreadlocale](../../c-runtime-library/reference/configthreadlocale.md) is used to control whether `setlocale` affects the locale of all threads in a program or only the locale of the calling thread."},{"content":"Requirements","pos":[10949,10961]},{"content":"Routine","pos":[10968,10975]},{"content":"Required header","pos":[10976,10991]},{"content":"locale.h&gt;","pos":[11050,11059],"source":"locale.h>"},{"content":"locale.h&gt; or <ph id=\"ph1\">\\&lt;</ph>wchar.h&gt;","pos":[11080,11103],"source":"locale.h> or \\<wchar.h>"},{"pos":[11111,11235],"content":"For additional compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept> in the Introduction.","source":"For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md) in the Introduction."},{"content":"Example","pos":[11244,11251]},{"content":".NET Framework Equivalent","pos":[14095,14120]},{"content":"System::Globalization::CultureInfo Class","pos":[14125,14165]},{"content":"See Also","pos":[14255,14263]},{"content":"Locale Names, Languages, and Country/Region Strings","pos":[14268,14319]},{"content":"_configthreadlocale","pos":[14404,14423]},{"content":"_create_locale, _wcreate_locale","pos":[14487,14518]},{"content":"Locale","pos":[14592,14598]},{"content":"localeconv","pos":[14640,14650]},{"content":"_mbclen, mblen, _mblen_l","pos":[14706,14730]},{"content":"strlen, wcslen, _mbslen, _mbslen_l, _mbstrlen, _mbstrlen_l","pos":[14796,14854]},{"content":"mbstowcs, _mbstowcs_l","pos":[14949,14970]},{"content":"mbtowc, _mbtowc_l","pos":[15035,15052]},{"content":"_setmbcp","pos":[15113,15121]},{"content":"strcoll Functions","pos":[15174,15191]},{"content":"strftime, wcsftime, _strftime_l, _wcsftime_l","pos":[15244,15288]},{"content":"strxfrm, wcsxfrm, _strxfrm_l, _wcsxfrm_l","pos":[15373,15413]},{"content":"wcstombs, _wcstombs_l","pos":[15494,15515]},{"content":"wctomb, _wctomb_l","pos":[15580,15597]}],"content":"---\ntitle: \"setlocale, _wsetlocale | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"_wsetlocale\"\n  - \"setlocale\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\n  - \"api-ms-win-crt-locale-l1-1-0.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"_wsetlocale\"\n  - \"_tsetlocale\"\n  - \"setlocale\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"wsetlocale function\"\n  - \"setlocale function\"\n  - \"tsetlocale function\"\n  - \"locales, defining\"\n  - \"_tsetlocale function\"\n  - \"defining locales\"\n  - \"_wsetlocale function\"\nms.assetid: 3ffb684e-5990-4202-9553-b5339af9520d\ncaps.latest.revision: 31\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# setlocale, _wsetlocale\nSets or retrieves the run-time locale.  \n  \n## Syntax  \n  \n```  \nchar *setlocale(  \n   int category,  \n   const char *locale   \n);  \nwchar_t *_wsetlocale(  \n   int category,  \n   const wchar_t *locale   \n);  \n```  \n  \n#### Parameters  \n `category`  \n Category affected by locale.  \n  \n `locale`  \n Locale specifier.  \n  \n## Return Value  \n If a valid `locale` and `category` are given, returns a pointer to the string associated with the specified `locale` and `category`. If the `locale` or `category` is not valid, returns a null pointer and the current locale settings of the program are not changed.  \n  \n For example, the call  \n  \n `setlocale( LC_ALL, \"en-US\" );`  \n  \n sets all categories, returning only the string  \n  \n `en-US`  \n  \n You can copy the string returned by `setlocale` to restore that part of the program's locale information. Global or thread local storage is used for the string returned by `setlocale`. Later calls to `setlocale` overwrite the string, which invalidates string pointers returned by earlier calls.  \n  \n## Remarks  \n Use the `setlocale` function to set, change, or query some or all of the current program locale information specified by `locale` and `category`. `locale` refers to the locality (country/region and language) for which you can customize certain aspects of your program. Some locale-dependent categories include the formatting of dates and the display format for monetary values. If you set `locale` to the default string for a language that has multiple forms supported on your computer, you should check the `setlocale` return value to see which language is in effect. For example, if you set `locale` to \"chinese\" the return value could be either \"chinese-simplified\" or \"chinese-traditional\".  \n  \n `_wsetlocale` is a wide-character version of `setlocale`; the `locale` argument and return value of `_wsetlocale` are wide-character strings. `_wsetlocale` and `setlocale` behave identically otherwise.  \n  \n### Generic-Text Routine Mappings  \n  \n|TCHAR.H routine|_UNICODE & _MBCS not defined|_MBCS defined|_UNICODE defined|  \n|---------------------|------------------------------------|--------------------|-----------------------|  \n|`_tsetlocale`|`setlocale`|`setlocale`|`_wsetlocale`|  \n  \n The `category` argument specifies the parts of a program's locale information that are affected. The macros used for `category` and the parts of the program they affect are as follows:  \n  \n `LC_ALL`  \n All categories in the following list.  \n  \n `LC_COLLATE`  \n The `strcoll`, `_stricoll`, `wcscoll`, `_wcsicoll`, `strxfrm`, `_strncoll`, `_strnicoll`, `_wcsncoll`, `_wcsnicoll`, and `wcsxfrm` functions.  \n  \n `LC_CTYPE`  \n The character-handling functions (except `isdigit`, `isxdigit`, `mbstowcs`, and `mbtowc`, which are unaffected).  \n  \n `LC_MONETARY`  \n Monetary-formatting information returned by the `localeconv` function.  \n  \n `LC_NUMERIC`  \n Decimal-point character for the formatted output routines (such as `printf`), for the data-conversion routines, and for the non-monetary formatting information returned by `localeconv`. In addition to the decimal-point character, `LC_NUMERIC` also sets the thousands separator and the grouping control string returned by [localeconv](../../c-runtime-library/reference/localeconv.md).  \n  \n `LC_TIME`  \n The `strftime` and `wcsftime` functions.  \n  \n This function validates the category parameter. If the category parameter is not one of the values given in the previous table, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md). If execution is allowed to continue, the function sets `errno` to `EINVAL` and returns `NULL`.  \n  \n The `locale` argument is a pointer to a string that specifies the locale. For information about the format of the `locale` argument, see [Locale Names, Languages, and Country/Region Strings](../../c-runtime-library/locale-names-languages-and-country-region-strings.md). If `locale` points to an empty string, the locale is the implementation-defined native environment. A value of `C` specifies the minimal ANSI conforming environment for C translation. The `C` locale assumes that all `char` data types are 1 byte and that their value is always less than 256.  \n  \n At program startup, the equivalent of the following statement is executed:  \n  \n `setlocale( LC_ALL, \"C\" );`  \n  \n The `locale` argument can take a locale name, a language string, a language string and country/region code, a code page, or a language string, country/region code, and code page. The set of available locale names, languages, country/region codes, and code pages includes all those supported by the Windows NLS API except code pages that require more than two bytes per character, such as UTF-7 and UTF-8. If you provide a code page value of UTF-7 or UTF-8, `setlocale` will fail, returning NULL. The set of locale names supported by `setlocale` are described in [Locale Names, Languages, and Country/Region Strings](../../c-runtime-library/locale-names-languages-and-country-region-strings.md). The set of language and country/region strings supported by `setlocale` are listed in [Language Strings](../../c-runtime-library/language-strings.md) and [Country/Region Strings](../../c-runtime-library/country-region-strings.md). We recommend the locale name form for performance and for maintainability of locale strings embedded in code or serialized to storage. The locale name strings are less likely to be changed by an operating system update than the language and country/region name form.  \n  \n A null pointer that's passed as the `locale` argument tells `setlocale` to query instead of to set the international environment. If the `locale` argument is a null pointer, the program's current locale setting is not changed. Instead, `setlocale` returns a pointer to the string that's associated with the `category` of the thread's current locale. If the `category` argument is `LC_ALL`, the function returns a string that indicates the current setting of each category, separated by semicolons. For example, the sequence of calls  \n  \n `// Set all categories and return \"en-US\"`  \n  \n `setlocale(LC_ALL, \"en-US\");`  \n  \n `// Set only the LC_MONETARY category and return \"fr-FR\"`  \n  \n `setlocale(LC_MONETARY, \"fr-FR\");`  \n  \n `printf(\"%s\\n\", setlocale(LC_ALL, NULL));`  \n  \n returns  \n  \n `LC_COLLATE=en-US;LC_CTYPE=en-US;LC_MONETARY=fr-FR;LC_NUMERIC=en-US;LC_TIME=en-US`  \n  \n which is the string that's associated with the `LC_ALL` category.  \n  \n The following examples pertain to the `LC_ALL` category. Either of the strings \".OCP\" and \".ACP\" can be used instead of a code page number to specify use of the user-default OEM code page and user-default ANSI code page, respectively.  \n  \n `setlocale( LC_ALL, \"\" );`  \n Sets the locale to the default, which is the user-default ANSI code page obtained from the operating system.  \n  \n `setlocale( LC_ALL, \".OCP\" );`  \n Explicitly sets the locale to the current OEM code page obtained from the operating system.  \n  \n `setlocale( LC_ALL, \".ACP\" );`  \n Sets the locale to the ANSI code page obtained from the operating system.  \n  \n `setlocale( LC_ALL, \"<localename>\" );`  \n Sets the locale to the locale name that's indicated by *\\<localename>*.  \n  \n `setlocale( LC_ALL, \"<language>_<country>\" );`  \n Sets the locale to the language and country/region indicated by *\\<language>* and *\\<country>*, together with the default code page obtained from the host operating system.  \n  \n `setlocale( LC_ALL, \"<language>_<country>.<code_page>\" );`  \n Sets the locale to the language, country/region, and code page indicated by the *\\<language>*, *\\<country>*, and *<code_page>* strings. You can use various combinations of language, country/region, and code page. For example, this call sets the locale to French Canada with code page 1252:  \n  \n `setlocale( LC_ALL, \"French_Canada.1252\" );`  \n  \n This call sets the locale to French Canada with the default ANSI code page:  \n  \n `setlocale( LC_ALL, \"French_Canada.ACP\" );`  \n  \n This call sets the locale to French Canada with the default OEM code page:  \n  \n `setlocale( LC_ALL, \"French_Canada.OCP\" );`  \n  \n `setlocale( LC_ALL, \"<language>\" );`  \n Sets the locale to the language that's indicated by *\\<language>*, and uses the default country/region for the specified language and the user-default ANSI code page for that country/region as obtained from the host operating system. For example, the following calls to `setlocale` are functionally equivalent:  \n  \n `setlocale( LC_ALL, \"en-US\" );`  \n  \n `setlocale( LC_ALL, \"English\" );`  \n  \n `setlocale( LC_ALL, \"English_United States.1252\" );`  \n  \n We recommend the first form for performance and maintainability.  \n  \n `setlocale( LC_ALL, \".<code_page>\" );`  \n Sets the code page to the value indicated by *<code_page>*, together with the default country/region and language (as defined by the host operating system) for the specified code page.  \n  \n The category must be either `LC_ALL` or `LC_CTYPE` to effect a change of code page. For example, if the default country/region and language of the host operating system are \"United States\" and \"English,\" the following two calls to `setlocale` are functionally equivalent:  \n  \n `setlocale( LC_ALL, \".1252\" );`  \n  \n `setlocale( LC_ALL, \"English_United States.1252\");`  \n  \n For more information, see the [setlocale](../../preprocessor/setlocale.md) pragma directive in the [C/C++ Preprocessor Reference](../../preprocessor/c-cpp-preprocessor-reference.md).  \n  \n The function [_configthreadlocale](../../c-runtime-library/reference/configthreadlocale.md) is used to control whether `setlocale` affects the locale of all threads in a program or only the locale of the calling thread.  \n  \n## Requirements  \n  \n|Routine|Required header|  \n|-------------|---------------------|  \n|`setlocale`|\\<locale.h>|  \n|`_wsetlocale`|\\<locale.h> or \\<wchar.h>|  \n  \n For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md) in the Introduction.  \n  \n## Example  \n  \n```css  \n// crt_setlocale.c  \n//   \n// This program demonstrates the use of setlocale when  \n// using two independent threads.  \n//  \n  \n#include <locale.h>  \n#include <process.h>  \n#include <windows.h>  \n#include <stdio.h>  \n#include <time.h>  \n  \n#define BUFF_SIZE 100  \n  \n// Retrieve the date in the current  \n// locale's format.  \nint get_date(unsigned char* str)  \n{  \n    __time64_t ltime;  \n    struct tm  thetime;  \n  \n    // Retrieve the current time  \n    _time64(&ltime);  \n    _gmtime64_s(&thetime, &ltime);  \n  \n    // Format the current time structure into a string  \n    // \"%#x\" is the long date representation in the  \n    // current locale  \n    if (!strftime((char *)str, BUFF_SIZE, \"%#x\",   \n                  (const struct tm *)&thetime))  \n    {  \n        printf(\"strftime failed!\\n\");  \n        return -1;  \n    }  \n    return 0;  \n}  \n  \n// This thread sets its locale to the argument  \n// and prints the date.  \nuintptr_t __stdcall SecondThreadFunc( void* pArguments )  \n{  \n    unsigned char str[BUFF_SIZE];  \n    char * locale = (char *)pArguments;  \n  \n    // Set the thread locale  \n    printf(\"The thread locale is now set to %s.\\n\",  \n           setlocale(LC_ALL, locale));  \n  \n    // Retrieve the date string from the helper function  \n    if (get_date(str) == 0)  \n    {  \n        printf(\"The date in %s locale is: '%s'\\n\", locale, str);  \n    }  \n  \n    _endthreadex( 0 );  \n    return 0;  \n}   \n  \n// The main thread sets the locale to English   \n// and then spawns a second thread (above) and prints the date.  \nint main()  \n{   \n    HANDLE          hThread;  \n    unsigned        threadID;  \n    unsigned char   str[BUFF_SIZE];  \n  \n    // Configure per-thread locale to cause all subsequently created   \n    // threads to have their own locale.  \n    _configthreadlocale(_ENABLE_PER_THREAD_LOCALE);  \n  \n    // Set the locale of the main thread to US English.  \n    printf(\"The thread locale is now set to %s.\\n\",  \n           setlocale(LC_ALL, \"en-US\"));  \n  \n    // Create the second thread with a German locale.  \n    // Our thread function takes an argument of the locale to use.  \n    hThread = (HANDLE)_beginthreadex( NULL, 0, &SecondThreadFunc,  \n                                      \"de-DE\", 0, &threadID );  \n  \n    if (get_date(str) == 0)  \n    {  \n        // Retrieve the date string from the helper function  \n        printf(\"The date in en-US locale is: '%s'\\n\\n\", str);  \n    }  \n  \n    // Wait for the created thread to finish.  \n    WaitForSingleObject( hThread, INFINITE );  \n  \n    // Destroy the thread object.  \n    CloseHandle( hThread );  \n}  \n```  \n  \n```Output  \nThe thread locale is now set to en-US.  \nThe time in en-US locale is: 'Wednesday, May 12, 2004'  \n  \nThe thread locale is now set to de-DE.  \nThe time in de-DE locale is: 'Mittwoch, 12. Mai 2004'  \n```  \n  \n## .NET Framework Equivalent  \n [System::Globalization::CultureInfo Class](https://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)  \n  \n## See Also  \n [Locale Names, Languages, and Country/Region Strings](../../c-runtime-library/locale-names-languages-and-country-region-strings.md)   \n [_configthreadlocale](../../c-runtime-library/reference/configthreadlocale.md)   \n [_create_locale, _wcreate_locale](../../c-runtime-library/reference/create-locale-wcreate-locale.md)   \n [Locale](../../c-runtime-library/locale.md)   \n [localeconv](../../c-runtime-library/reference/localeconv.md)   \n [_mbclen, mblen, _mblen_l](../../c-runtime-library/reference/mbclen-mblen-mblen-l.md)   \n [strlen, wcslen, _mbslen, _mbslen_l, _mbstrlen, _mbstrlen_l](../../c-runtime-library/reference/strlen-wcslen-mbslen-mbslen-l-mbstrlen-mbstrlen-l.md)   \n [mbstowcs, _mbstowcs_l](../../c-runtime-library/reference/mbstowcs-mbstowcs-l.md)   \n [mbtowc, _mbtowc_l](../../c-runtime-library/reference/mbtowc-mbtowc-l.md)   \n [_setmbcp](../../c-runtime-library/reference/setmbcp.md)   \n [strcoll Functions](../../c-runtime-library/strcoll-functions.md)   \n [strftime, wcsftime, _strftime_l, _wcsftime_l](../../c-runtime-library/reference/strftime-wcsftime-strftime-l-wcsftime-l.md)   \n [strxfrm, wcsxfrm, _strxfrm_l, _wcsxfrm_l](../../c-runtime-library/reference/strxfrm-wcsxfrm-strxfrm-l-wcsxfrm-l.md)   \n [wcstombs, _wcstombs_l](../../c-runtime-library/reference/wcstombs-wcstombs-l.md)   \n [wctomb, _wctomb_l](../../c-runtime-library/reference/wctomb-wctomb-l.md)"}