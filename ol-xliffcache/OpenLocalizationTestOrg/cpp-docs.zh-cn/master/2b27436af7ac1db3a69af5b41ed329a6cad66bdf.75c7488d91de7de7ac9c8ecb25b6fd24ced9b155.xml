{"nodes":[{"pos":[12,62],"content":"How to: Write a parallel_for Loop | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"How to: Write a parallel_for Loop | Microsoft Docs","pos":[0,50]}]},{"content":"How to: Write a parallel_for Loop","pos":[684,717]},{"pos":[718,881],"content":"This example demonstrates how to use <bpt id=\"p1\">[</bpt>concurrency::parallel_for<ept id=\"p1\">](reference/concurrency-namespace-functions.md#parallel_for)</ept> to compute the product of two matrices.","source":"This example demonstrates how to use [concurrency::parallel_for](reference/concurrency-namespace-functions.md#parallel_for) to compute the product of two matrices."},{"content":"Example","pos":[890,897]},{"pos":[901,1011],"content":"The following example shows the <ph id=\"ph1\">`matrix_multiply`</ph> function, which computes the product of two square matrices.","source":"The following example shows the `matrix_multiply` function, which computes the product of two square matrices."},{"pos":[1029,1062],"content":"concrt-parallel-matrix-multiply#1"},{"content":"Example","pos":[1151,1158]},{"pos":[1162,1309],"content":"The following example shows the <ph id=\"ph1\">`parallel_matrix_multiply`</ph> function, which uses the <ph id=\"ph2\">`parallel_for`</ph> algorithm to perform the outer loop in parallel.","source":"The following example shows the `parallel_matrix_multiply` function, which uses the `parallel_for` algorithm to perform the outer loop in parallel."},{"pos":[1327,1360],"content":"concrt-parallel-matrix-multiply#2"},{"content":"This example parallelizes the outer loop only because it performs enough work to benefit from the overhead for parallel processing.","pos":[1447,1578]},{"content":"If you parallelize the inner loop, you will not receive a gain in performance because the small amount of work that the inner loop performs does not overcome the overhead for parallel processing.","pos":[1579,1774]},{"content":"Therefore, parallelizing the outer loop only is the best way to maximize the benefits of concurrency on most systems.","pos":[1775,1892]},{"content":"Example","pos":[1901,1908]},{"pos":[1912,2054],"content":"The following more complete example compares the performance of the <ph id=\"ph1\">`matrix_multiply`</ph> function versus the <ph id=\"ph2\">`parallel_matrix_multiply`</ph> function.","source":"The following more complete example compares the performance of the `matrix_multiply` function versus the `parallel_matrix_multiply` function."},{"pos":[2072,2105],"content":"concrt-parallel-matrix-multiply#3"},{"content":"The following sample output is for a computer that has four processors.","pos":[2192,2263]},{"content":"Compiling the Code","pos":[2325,2343]},{"pos":[2347,2565],"content":"To compile the code, copy it and then paste it in a Visual Studio project, or paste it in a file that is named <ph id=\"ph1\">`parallel-matrix-multiply.cpp`</ph> and then run the following command in a Visual Studio Command Prompt window.","source":"To compile the code, copy it and then paste it in a Visual Studio project, or paste it in a file that is named `parallel-matrix-multiply.cpp` and then run the following command in a Visual Studio Command Prompt window."},{"content":"cl.exe /EHsc parallel-matrix-multiply.cpp","pos":[2574,2615]},{"content":"See Also","pos":[2626,2634]},{"content":"Parallel Algorithms","pos":[2639,2658]},{"content":"parallel_for Function","pos":[2711,2732]}],"content":"---\ntitle: \"How to: Write a parallel_for Loop | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"writing a parallel_for loop [Concurrency Runtime]\"\n  - \"parallel_for function, example\"\nms.assetid: adb4d64e-5514-4b70-8dcb-b9210e6b5a1c\ncaps.latest.revision: 15\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"ru-ru\"\n  - \"zh-cn\"\n  - \"zh-tw\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"tr-tr\"\n---\n# How to: Write a parallel_for Loop\nThis example demonstrates how to use [concurrency::parallel_for](reference/concurrency-namespace-functions.md#parallel_for) to compute the product of two matrices.  \n  \n## Example  \n The following example shows the `matrix_multiply` function, which computes the product of two square matrices.  \n  \n [!code-cpp[concrt-parallel-matrix-multiply#1](../../parallel/concrt/codesnippet/cpp/how-to-write-a-parallel-for-loop_1.cpp)]  \n  \n## Example  \n The following example shows the `parallel_matrix_multiply` function, which uses the `parallel_for` algorithm to perform the outer loop in parallel.  \n  \n [!code-cpp[concrt-parallel-matrix-multiply#2](../../parallel/concrt/codesnippet/cpp/how-to-write-a-parallel-for-loop_2.cpp)]  \n  \n This example parallelizes the outer loop only because it performs enough work to benefit from the overhead for parallel processing. If you parallelize the inner loop, you will not receive a gain in performance because the small amount of work that the inner loop performs does not overcome the overhead for parallel processing. Therefore, parallelizing the outer loop only is the best way to maximize the benefits of concurrency on most systems.  \n  \n## Example  \n The following more complete example compares the performance of the `matrix_multiply` function versus the `parallel_matrix_multiply` function.  \n  \n [!code-cpp[concrt-parallel-matrix-multiply#3](../../parallel/concrt/codesnippet/cpp/how-to-write-a-parallel-for-loop_3.cpp)]  \n  \n The following sample output is for a computer that has four processors.  \n  \n```Output  \nserial: 3853  \nparallel: 1311  \n```  \n  \n## Compiling the Code  \n To compile the code, copy it and then paste it in a Visual Studio project, or paste it in a file that is named `parallel-matrix-multiply.cpp` and then run the following command in a Visual Studio Command Prompt window.  \n  \n **cl.exe /EHsc parallel-matrix-multiply.cpp**  \n  \n## See Also  \n [Parallel Algorithms](../../parallel/concrt/parallel-algorithms.md)   \n [parallel_for Function](reference/concurrency-namespace-functions.md#parallel_for)\n\n\n"}