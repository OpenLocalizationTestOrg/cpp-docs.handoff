{"nodes":[{"pos":[12,40],"content":"-arch (x86) | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"-arch (x86) | Microsoft Docs","pos":[0,28]}]},{"content":"/arch (x86)","pos":[521,532]},{"content":"Specifies the architecture for code generation on x86.","pos":[533,587]},{"content":"Also see <bpt id=\"p1\">[</bpt>/arch (x64)<ept id=\"p1\">](../../build/reference/arch-x64.md)</ept> and <bpt id=\"p2\">[</bpt>/arch (ARM)<ept id=\"p2\">](../../build/reference/arch-arm.md)</ept>.","pos":[588,699],"source":" Also see [/arch (x64)](../../build/reference/arch-x64.md) and [/arch (ARM)](../../build/reference/arch-arm.md)."},{"content":"Syntax","pos":[708,714]},{"content":"Arguments","pos":[771,780]},{"content":"/arch:IA32","pos":[786,796]},{"content":"Specifies no enhanced instructions and also specifies x87 for floating-point calculations.","pos":[802,892]},{"content":"/arch:SSE","pos":[901,910]},{"content":"Enables the use of SSE instructions.","pos":[916,952]},{"content":"/arch:SSE2","pos":[961,971]},{"content":"Enables the use of SSE2 instructions.","pos":[977,1014]},{"content":"This is the default instruction on x86 platforms if no <bpt id=\"p1\">**</bpt>/arch<ept id=\"p1\">**</ept> option is specified.","pos":[1015,1100],"source":" This is the default instruction on x86 platforms if no **/arch** option is specified."},{"content":"/arch:AVX","pos":[1109,1118]},{"content":"Enables the use of Intel Advanced Vector Extensions instructions.","pos":[1124,1189]},{"content":"/arch:AVX2","pos":[1198,1208]},{"content":"Enables the use of Intel Advanced Vector Extensions 2 instructions.","pos":[1214,1281]},{"content":"Remarks","pos":[1290,1297]},{"content":"The SSE and SSE2 instructions exist on various Intel and AMD processors.","pos":[1301,1373]},{"content":"The AVX instructions exist on Intel Sandy Bridge processors and AMD Bulldozer processors.","pos":[1374,1463]},{"content":"AVX2 instructions are supported by Intel Haswell and Broadwell processors and AMD Excavator-based processors.","pos":[1464,1573]},{"content":"The <ph id=\"ph1\">`_M_IX86_FP`</ph>, <ph id=\"ph2\">`__AVX__`</ph> and <ph id=\"ph3\">`__AVX2__`</ph> macros indicate which, if any, <bpt id=\"p1\">**</bpt>/arch<ept id=\"p1\">**</ept> compiler option was used.","pos":[1580,1689],"source":"The `_M_IX86_FP`, `__AVX__` and `__AVX2__` macros indicate which, if any, **/arch** compiler option was used."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Predefined Macros<ept id=\"p1\">](../../preprocessor/predefined-macros.md)</ept>.","pos":[1690,1777],"source":" For more information, see [Predefined Macros](../../preprocessor/predefined-macros.md)."},{"content":"The <bpt id=\"p1\">**</bpt>/arch:AVX2<ept id=\"p1\">**</ept> option and <ph id=\"ph1\">`__AVX2__`</ph> macro were introduced in Visual Studio 2013 Update 2, version 12.0.34567.1.","pos":[1778,1894],"source":" The **/arch:AVX2** option and `__AVX2__` macro were introduced in Visual Studio 2013 Update 2, version 12.0.34567.1."},{"content":"The optimizer chooses when and how to use the SSE and SSE2 instructions when <bpt id=\"p1\">**</bpt>/arch<ept id=\"p1\">**</ept> is specified.","pos":[1901,2001],"source":"The optimizer chooses when and how to use the SSE and SSE2 instructions when **/arch** is specified."},{"content":"It uses SSE and SSE2 instructions for some scalar floating-point computations when it determines that it is faster to use the SSE/SSE2 instructions and registers instead of the x87 floating-point register stack.","pos":[2002,2213]},{"content":"As a result, your code may actually use a mixture of both x87 and SSE/SSE2 for floating-point computations.","pos":[2214,2321]},{"content":"Also, with <bpt id=\"p1\">**</bpt>/arch:SSE2<ept id=\"p1\">**</ept>, SSE2 instructions can be used for some 64-bit integer operations.","pos":[2322,2414],"source":" Also, with **/arch:SSE2**, SSE2 instructions can be used for some 64-bit integer operations."},{"content":"In addition to using the SSE and SSE2 instructions, the compiler also uses other instructions that are present on the processor revisions that support SSE and SSE2.","pos":[2421,2585]},{"content":"An example is the CMOV instruction that first appeared on the Pentium Pro revision of the Intel processors.","pos":[2586,2693]},{"pos":[2700,2882],"content":"Because the x86 compiler generates code that uses SSE2 instructions by default, you must specify <bpt id=\"p1\">**</bpt>/arch:IA32<ept id=\"p1\">**</ept> to disable generation of SSE and SSE2 instructions for x86 processors.","source":"Because the x86 compiler generates code that uses SSE2 instructions by default, you must specify **/arch:IA32** to disable generation of SSE and SSE2 instructions for x86 processors."},{"content":"<bpt id=\"p1\">**</bpt>/arch<ept id=\"p1\">**</ept> only affects code generation for native functions.","pos":[2889,2949],"source":"**/arch** only affects code generation for native functions."},{"content":"When you use <bpt id=\"p1\">[</bpt>/clr<ept id=\"p1\">](../../build/reference/clr-common-language-runtime-compilation.md)</ept> to compile, <bpt id=\"p2\">**</bpt>/arch<ept id=\"p2\">**</ept> has no effect on code generation for managed functions.","pos":[2950,3113],"source":" When you use [/clr](../../build/reference/clr-common-language-runtime-compilation.md) to compile, **/arch** has no effect on code generation for managed functions."},{"content":"<bpt id=\"p1\">**</bpt>/arch<ept id=\"p1\">**</ept> and <bpt id=\"p2\">[</bpt>/QIfist<ept id=\"p2\">](../../build/reference/qifist-suppress-ftol.md)</ept> cannot be used on the same compiland.","pos":[3120,3228],"source":"**/arch** and [/QIfist](../../build/reference/qifist-suppress-ftol.md) cannot be used on the same compiland."},{"content":"In particular, if you do not use <ph id=\"ph1\">`_controlfp`</ph> to modify the FP control word, then the run-time startup code sets the x87 FPU control word precision-control field to 53-bits.","pos":[3229,3402],"source":" In particular, if you do not use `_controlfp` to modify the FP control word, then the run-time startup code sets the x87 FPU control word precision-control field to 53-bits."},{"content":"Therefore, every float and double operation in an expression uses a 53-bit significand and a 15-bit exponent.","pos":[3403,3512]},{"content":"However, every SSE single-precision operation uses a 24-bit significand and an 8-bit exponent, and SSE2 double-precision operations use a 53-bit significand and an 11-bit exponent.","pos":[3513,3693]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>_control87, _controlfp, <ph id=\"ph1\">\\_</ph>_control87_2<ept id=\"p1\">](../../c-runtime-library/reference/control87-controlfp-control87-2.md)</ept>.","pos":[3694,3831],"source":" For more information, see [_control87, _controlfp, \\__control87_2](../../c-runtime-library/reference/control87-controlfp-control87-2.md)."},{"content":"These differences are possible in one expression tree, but not in cases where a user assignment is involved after each subexpression.","pos":[3832,3965]},{"content":"Consider the following:","pos":[3966,3989]},{"content":"Against:","pos":[4082,4090]},{"content":"To set this compiler option for AVX, AVX2, IA32, SSE, or SSE2 in Visual Studio","pos":[4307,4385]},{"content":"Open the <bpt id=\"p1\">**</bpt>Property Pages<ept id=\"p1\">**</ept> dialog box for the project.","pos":[4395,4450],"source":"Open the **Property Pages** dialog box for the project."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Working with Project Properties<ept id=\"p1\">](../../ide/working-with-project-properties.md)</ept>.","pos":[4451,4557],"source":" For more information, see [Working with Project Properties](../../ide/working-with-project-properties.md)."},{"pos":[4567,4625],"content":"Select the <bpt id=\"p1\">**</bpt>Configuration Properties<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>C/C++<ept id=\"p2\">**</ept> folder.","source":"Select the **Configuration Properties**, **C/C++** folder."},{"pos":[4635,4680],"content":"Select the <bpt id=\"p1\">**</bpt>Code Generation<ept id=\"p1\">**</ept> property page.","source":"Select the **Code Generation** property page."},{"pos":[4690,4746],"content":"Modify the <bpt id=\"p1\">**</bpt>Enable Enhanced Instruction Set<ept id=\"p1\">**</ept> property.","source":"Modify the **Enable Enhanced Instruction Set** property."},{"content":"To set this compiler option programmatically","pos":[4756,4800]},{"content":"See &lt;xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.EnableEnhancedInstructionSet%2A&gt;.","pos":[4810,4909],"source":"See <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.EnableEnhancedInstructionSet%2A>."},{"content":"See Also","pos":[4918,4926]},{"content":"/arch (Minimum CPU Architecture)","pos":[4931,4963]},{"content":"Compiler Options","pos":[5026,5042]},{"content":"Setting Compiler Options","pos":[5092,5116]}],"content":"---\ntitle: \"-arch (x86) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nms.assetid: 9dd5a75d-06e4-4674-aade-33228486078d\ncaps.latest.revision: 33\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# /arch (x86)\nSpecifies the architecture for code generation on x86. Also see [/arch (x64)](../../build/reference/arch-x64.md) and [/arch (ARM)](../../build/reference/arch-arm.md).  \n  \n## Syntax  \n  \n```  \n/arch:[IA32|SSE|SSE2|AVX|AVX2]  \n```  \n  \n## Arguments  \n **/arch:IA32**  \n Specifies no enhanced instructions and also specifies x87 for floating-point calculations.  \n  \n **/arch:SSE**  \n Enables the use of SSE instructions.  \n  \n **/arch:SSE2**  \n Enables the use of SSE2 instructions. This is the default instruction on x86 platforms if no **/arch** option is specified.  \n  \n **/arch:AVX**  \n Enables the use of Intel Advanced Vector Extensions instructions.  \n  \n **/arch:AVX2**  \n Enables the use of Intel Advanced Vector Extensions 2 instructions.  \n  \n## Remarks  \n The SSE and SSE2 instructions exist on various Intel and AMD processors. The AVX instructions exist on Intel Sandy Bridge processors and AMD Bulldozer processors. AVX2 instructions are supported by Intel Haswell and Broadwell processors and AMD Excavator-based processors.  \n  \n The `_M_IX86_FP`, `__AVX__` and `__AVX2__` macros indicate which, if any, **/arch** compiler option was used. For more information, see [Predefined Macros](../../preprocessor/predefined-macros.md). The **/arch:AVX2** option and `__AVX2__` macro were introduced in Visual Studio 2013 Update 2, version 12.0.34567.1.  \n  \n The optimizer chooses when and how to use the SSE and SSE2 instructions when **/arch** is specified. It uses SSE and SSE2 instructions for some scalar floating-point computations when it determines that it is faster to use the SSE/SSE2 instructions and registers instead of the x87 floating-point register stack. As a result, your code may actually use a mixture of both x87 and SSE/SSE2 for floating-point computations. Also, with **/arch:SSE2**, SSE2 instructions can be used for some 64-bit integer operations.  \n  \n In addition to using the SSE and SSE2 instructions, the compiler also uses other instructions that are present on the processor revisions that support SSE and SSE2. An example is the CMOV instruction that first appeared on the Pentium Pro revision of the Intel processors.  \n  \n Because the x86 compiler generates code that uses SSE2 instructions by default, you must specify **/arch:IA32** to disable generation of SSE and SSE2 instructions for x86 processors.  \n  \n **/arch** only affects code generation for native functions. When you use [/clr](../../build/reference/clr-common-language-runtime-compilation.md) to compile, **/arch** has no effect on code generation for managed functions.  \n  \n **/arch** and [/QIfist](../../build/reference/qifist-suppress-ftol.md) cannot be used on the same compiland. In particular, if you do not use `_controlfp` to modify the FP control word, then the run-time startup code sets the x87 FPU control word precision-control field to 53-bits. Therefore, every float and double operation in an expression uses a 53-bit significand and a 15-bit exponent. However, every SSE single-precision operation uses a 24-bit significand and an 8-bit exponent, and SSE2 double-precision operations use a 53-bit significand and an 11-bit exponent. For more information, see [_control87, _controlfp, \\__control87_2](../../c-runtime-library/reference/control87-controlfp-control87-2.md). These differences are possible in one expression tree, but not in cases where a user assignment is involved after each subexpression. Consider the following:  \n  \n```c  \n  \nr = f1 * f2 + d;  // Different results are possible on SSE/SSE2.  \n```  \n  \n Against:  \n  \n```c  \n  \nt = f1 * f2;   // Do f1 * f2, round to the type of t.  \nr = t + d;     // This should produce the same overall result   \n               // whether x87 stack is used or SSE/SSE2 is used.  \n```  \n  \n### To set this compiler option for AVX, AVX2, IA32, SSE, or SSE2 in Visual Studio  \n  \n1.  Open the **Property Pages** dialog box for the project. For more information, see [Working with Project Properties](../../ide/working-with-project-properties.md).  \n  \n2.  Select the **Configuration Properties**, **C/C++** folder.  \n  \n3.  Select the **Code Generation** property page.  \n  \n4.  Modify the **Enable Enhanced Instruction Set** property.  \n  \n### To set this compiler option programmatically  \n  \n-   See <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.EnableEnhancedInstructionSet%2A>.  \n  \n## See Also  \n [/arch (Minimum CPU Architecture)](../../build/reference/arch-minimum-cpu-architecture.md)   \n [Compiler Options](../../build/reference/compiler-options.md)   \n [Setting Compiler Options](../../build/reference/setting-compiler-options.md)"}