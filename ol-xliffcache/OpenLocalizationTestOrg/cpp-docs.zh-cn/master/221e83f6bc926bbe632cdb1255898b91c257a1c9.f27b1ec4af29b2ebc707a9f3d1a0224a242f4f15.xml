{"nodes":[{"pos":[12,46],"content":"WSADATA Structure | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"WSADATA Structure | Microsoft Docs","pos":[0,34]}]},{"content":"WSADATA Structure","pos":[601,618]},{"pos":[619,761],"content":"The <ph id=\"ph1\">`WSADATA`</ph> structure is used to store Windows Sockets initialization information returned by a call to the <ph id=\"ph2\">`AfxSocketInit`</ph> global function.","source":"The `WSADATA` structure is used to store Windows Sockets initialization information returned by a call to the `AfxSocketInit` global function."},{"content":"Syntax","pos":[770,776]},{"content":"Parameters","pos":[1063,1073]},{"content":"wVersion","pos":[1078,1086]},{"content":"The version of the Windows Sockets specification that the Windows Sockets DLL expects the caller to use.","pos":[1091,1195]},{"content":"wHighVersion","pos":[1203,1215]},{"content":"The highest version of the Windows Sockets specification that this DLL can support (also encoded as above).","pos":[1220,1327]},{"content":"Normally, this is the same as <bpt id=\"p1\">**</bpt>wVersion<ept id=\"p1\">**</ept>.","pos":[1328,1371],"source":" Normally, this is the same as **wVersion**."},{"content":"szDescription","pos":[1379,1392]},{"content":"A null-terminated ASCII string into which the Windows Sockets DLL copies a description of the Windows Sockets implementation, including vendor identification.","pos":[1397,1555]},{"content":"The text (up to 256 characters in length) can contain any characters, but vendors are cautioned against including control and formatting characters: the most likely use that an application will put this to is to display it (possibly truncated) in a status message.","pos":[1556,1820]},{"content":"szSystemStatus","pos":[1828,1842]},{"content":"A null-terminated ASCII string into which the Windows Sockets DLL copies relevant status or configuration information.","pos":[1847,1965]},{"content":"The Windows Sockets DLL should use this field only if the information might be useful to the user or support staff; it should not be considered as an extension of the <bpt id=\"p1\">**</bpt>szDescription<ept id=\"p1\">**</ept> field.","pos":[1966,2157],"source":" The Windows Sockets DLL should use this field only if the information might be useful to the user or support staff; it should not be considered as an extension of the **szDescription** field."},{"content":"iMaxSockets","pos":[2165,2176]},{"content":"The maximum number of sockets that a single process can potentially open.","pos":[2181,2254]},{"content":"A Windows Sockets implementation can provide a global pool of sockets for allocation to any process; alternately, it can allocate per-process resources for sockets.","pos":[2255,2419]},{"content":"The number can well reflect the way in which the Windows Sockets DLL or the networking software was configured.","pos":[2420,2531]},{"content":"Application writers can use this number as a crude indication of whether the Windows Sockets implementation is usable by the application.","pos":[2532,2669]},{"content":"For example, an X Windows server might check <bpt id=\"p1\">**</bpt>iMaxSockets<ept id=\"p1\">**</ept> when first started: if it is less than 8, the application would display an error message instructing the user to reconfigure the networking software.","pos":[2670,2880],"source":" For example, an X Windows server might check **iMaxSockets** when first started: if it is less than 8, the application would display an error message instructing the user to reconfigure the networking software."},{"content":"(This is a situation in which the <bpt id=\"p1\">**</bpt>szSystemStatus<ept id=\"p1\">**</ept> text might be used.) Obviously there is no guarantee that a particular application can actually allocate <bpt id=\"p2\">**</bpt>iMaxSockets<ept id=\"p2\">**</ept> sockets, since there can be other Windows Sockets applications in use.","pos":[2881,3125],"source":" (This is a situation in which the **szSystemStatus** text might be used.) Obviously there is no guarantee that a particular application can actually allocate **iMaxSockets** sockets, since there can be other Windows Sockets applications in use."},{"content":"iMaxUdpDg","pos":[3133,3142]},{"content":"The size in bytes of the largest User Datagram Protocol (UDP) datagram that can be sent or received by a Windows Sockets application.","pos":[3147,3280]},{"content":"If the implementation imposes no limit, <bpt id=\"p1\">**</bpt>iMaxUdpDg<ept id=\"p1\">**</ept> is zero.","pos":[3281,3343],"source":" If the implementation imposes no limit, **iMaxUdpDg** is zero."},{"content":"In many implementations of Berkeley sockets, there is an implicit limit of 8192 bytes on UDP datagrams (which are fragmented if necessary).","pos":[3344,3483]},{"content":"A Windows Sockets implementation can impose a limit based, for instance, on the allocation of fragment reassembly buffers.","pos":[3484,3606]},{"content":"The minimum value of <bpt id=\"p1\">**</bpt>iMaxUdpDg<ept id=\"p1\">**</ept> for a compliant Windows Sockets implementation is 512.","pos":[3607,3696],"source":" The minimum value of **iMaxUdpDg** for a compliant Windows Sockets implementation is 512."},{"content":"Note that regardless of the value of <bpt id=\"p1\">**</bpt>iMaxUdpDg<ept id=\"p1\">**</ept>, it is inadvisable to attempt to send a broadcast datagram that is larger than the Maximum Transmission Unit (MTU) for the network.","pos":[3697,3879],"source":" Note that regardless of the value of **iMaxUdpDg**, it is inadvisable to attempt to send a broadcast datagram that is larger than the Maximum Transmission Unit (MTU) for the network."},{"content":"(The Windows Sockets API does not provide a mechanism to discover the MTU, but it must be no less than 512 bytes.)","pos":[3880,3994]},{"content":"lpVendorInfo","pos":[4002,4014]},{"content":"A far pointer to a vendor-specific data structure.","pos":[4019,4069]},{"content":"The definition of this structure (if supplied) is beyond the scope of the Windows Sockets specification.","pos":[4070,4174]},{"pos":[4182,4423],"content":"[!NOTE]\n In MFC, the `WSADATA` structure is returned by the `AfxSocketInit` function, which you call in your `InitInstance` function. You can retrieve the structure and store it in your program if you need to use information from it later.","leadings":["","> "],"nodes":[{"content":" In MFC, the `WSADATA` structure is returned by the `AfxSocketInit` function, which you call in your `InitInstance` function. You can retrieve the structure and store it in your program if you need to use information from it later.","pos":[8,239],"nodes":[{"content":"In MFC, the <ph id=\"ph1\">`WSADATA`</ph> structure is returned by the <ph id=\"ph2\">`AfxSocketInit`</ph> function, which you call in your <ph id=\"ph3\">`InitInstance`</ph> function.","pos":[1,125],"source":" In MFC, the `WSADATA` structure is returned by the `AfxSocketInit` function, which you call in your `InitInstance` function."},{"content":"You can retrieve the structure and store it in your program if you need to use information from it later.","pos":[126,231]}]}]},{"content":"Requirements","pos":[4432,4444]},{"pos":[4448,4470],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> winsock2.h","source":"**Header:** winsock2.h"},{"content":"See Also","pos":[4479,4487]},{"content":"Structures, Styles, Callbacks, and Message Maps","pos":[4492,4539]},{"content":"AfxSocketInit","pos":[4615,4628]}],"content":"---\ntitle: \"WSADATA Structure | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"WSADATA\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"WSADATA structure\"\nms.assetid: 80cc60e5-f9ae-4290-8ed5-07003136627d\ncaps.latest.revision: 11\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# WSADATA Structure\nThe `WSADATA` structure is used to store Windows Sockets initialization information returned by a call to the `AfxSocketInit` global function.  \n  \n## Syntax  \n  \n```  \nstruct WSAData {  \n    WORD wVersion;  \n    WORD wHighVersion;  \n    char szDescription[WSADESCRIPTION_LEN+1];  \n    char szSystemStatus[WSASYSSTATUS_LEN+1];  \n    unsigned short iMaxSockets;  \n    unsigned short iMaxUdpDg;  \n    char FAR* lpVendorInfo;  \n};  \n```  \n  \n#### Parameters  \n *wVersion*  \n The version of the Windows Sockets specification that the Windows Sockets DLL expects the caller to use.  \n  \n *wHighVersion*  \n The highest version of the Windows Sockets specification that this DLL can support (also encoded as above). Normally, this is the same as **wVersion**.  \n  \n *szDescription*  \n A null-terminated ASCII string into which the Windows Sockets DLL copies a description of the Windows Sockets implementation, including vendor identification. The text (up to 256 characters in length) can contain any characters, but vendors are cautioned against including control and formatting characters: the most likely use that an application will put this to is to display it (possibly truncated) in a status message.  \n  \n *szSystemStatus*  \n A null-terminated ASCII string into which the Windows Sockets DLL copies relevant status or configuration information. The Windows Sockets DLL should use this field only if the information might be useful to the user or support staff; it should not be considered as an extension of the **szDescription** field.  \n  \n *iMaxSockets*  \n The maximum number of sockets that a single process can potentially open. A Windows Sockets implementation can provide a global pool of sockets for allocation to any process; alternately, it can allocate per-process resources for sockets. The number can well reflect the way in which the Windows Sockets DLL or the networking software was configured. Application writers can use this number as a crude indication of whether the Windows Sockets implementation is usable by the application. For example, an X Windows server might check **iMaxSockets** when first started: if it is less than 8, the application would display an error message instructing the user to reconfigure the networking software. (This is a situation in which the **szSystemStatus** text might be used.) Obviously there is no guarantee that a particular application can actually allocate **iMaxSockets** sockets, since there can be other Windows Sockets applications in use.  \n  \n *iMaxUdpDg*  \n The size in bytes of the largest User Datagram Protocol (UDP) datagram that can be sent or received by a Windows Sockets application. If the implementation imposes no limit, **iMaxUdpDg** is zero. In many implementations of Berkeley sockets, there is an implicit limit of 8192 bytes on UDP datagrams (which are fragmented if necessary). A Windows Sockets implementation can impose a limit based, for instance, on the allocation of fragment reassembly buffers. The minimum value of **iMaxUdpDg** for a compliant Windows Sockets implementation is 512. Note that regardless of the value of **iMaxUdpDg**, it is inadvisable to attempt to send a broadcast datagram that is larger than the Maximum Transmission Unit (MTU) for the network. (The Windows Sockets API does not provide a mechanism to discover the MTU, but it must be no less than 512 bytes.)  \n  \n *lpVendorInfo*  \n A far pointer to a vendor-specific data structure. The definition of this structure (if supplied) is beyond the scope of the Windows Sockets specification.  \n  \n> [!NOTE]\n>  In MFC, the `WSADATA` structure is returned by the `AfxSocketInit` function, which you call in your `InitInstance` function. You can retrieve the structure and store it in your program if you need to use information from it later.  \n  \n## Requirements  \n **Header:** winsock2.h  \n  \n## See Also  \n [Structures, Styles, Callbacks, and Message Maps](../../mfc/reference/structures-styles-callbacks-and-message-maps.md)   \n [AfxSocketInit](../../mfc/reference/application-information-and-management.md#afxsocketinit)\n\n"}