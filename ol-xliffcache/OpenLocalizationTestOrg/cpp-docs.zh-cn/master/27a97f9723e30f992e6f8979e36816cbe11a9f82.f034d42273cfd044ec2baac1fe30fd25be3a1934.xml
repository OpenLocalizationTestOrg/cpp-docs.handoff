{"nodes":[{"pos":[12,48],"content":"Asynchronous Agents | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Asynchronous Agents | Microsoft Docs","pos":[0,36]}]},{"content":"Asynchronous Agents","pos":[612,631]},{"content":"An <bpt id=\"p1\">*</bpt>asynchronous agent<ept id=\"p1\">*</ept> (or just <bpt id=\"p2\">*</bpt>agent<ept id=\"p2\">*</ept>) is an application component that works asynchronously with other agents to solve larger computing tasks.","pos":[632,778],"source":"An *asynchronous agent* (or just *agent*) is an application component that works asynchronously with other agents to solve larger computing tasks."},{"content":"Think of an agent as a task that has a set life cycle.","pos":[779,833]},{"content":"For example, one agent might read data from an input/output device (such as the keyboard, a file on disk, or a network connection) and another agent might perform action on that data as it becomes available.","pos":[834,1041]},{"content":"The first agent uses message passing to inform the second agent that more data is available.","pos":[1042,1134]},{"content":"The Concurrency Runtime task scheduler provides an efficient mechanism to enable agents to block and yield cooperatively without requiring less efficient preemption.","pos":[1135,1300]},{"content":"The Agents Library defines the <bpt id=\"p1\">[</bpt>concurrency::agent<ept id=\"p1\">](../../parallel/concrt/reference/agent-class.md)</ept> class to represent an asynchronous agent.","pos":[1308,1449],"source":"The Agents Library defines the [concurrency::agent](../../parallel/concrt/reference/agent-class.md) class to represent an asynchronous agent."},{"content":"is an abstract class that declares the virtual method <bpt id=\"p1\">[</bpt>concurrency::agent::run<ept id=\"p1\">](reference/agent-class.md#run)</ept>.","pos":[1458,1568],"source":" is an abstract class that declares the virtual method [concurrency::agent::run](reference/agent-class.md#run)."},{"content":"The <ph id=\"ph1\">`run`</ph> method executes the task that is performed by the agent.","pos":[1569,1635],"source":" The `run` method executes the task that is performed by the agent."},{"content":"Because <ph id=\"ph1\">`run`</ph> is abstract, you must implement this method in every class that you derive from <ph id=\"ph2\">`agent`</ph>.","pos":[1636,1738],"source":" Because `run` is abstract, you must implement this method in every class that you derive from `agent`."},{"content":"Agent Life Cycle","pos":[1747,1763]},{"content":"Agents have a set life cycle.","pos":[1767,1796]},{"content":"The <bpt id=\"p1\">[</bpt>concurrency::agent_status<ept id=\"p1\">](reference/concurrency-namespace-enums.md#agent_status)</ept> enumeration defines the various states of an agent.","pos":[1797,1935],"source":" The [concurrency::agent_status](reference/concurrency-namespace-enums.md#agent_status) enumeration defines the various states of an agent."},{"content":"The following illustration is a state diagram that shows how agents progress from one state to another.","pos":[1936,2039]},{"content":"In this illustration, solid lines represent methods that you call from your application; dotted lines represent methods that are called from the runtime.","pos":[2040,2193]},{"content":"Agent State Diagram","pos":[2202,2221]},{"pos":[2286,2361],"content":"The following table describes each state in the <ph id=\"ph1\">`agent_status`</ph> enumeration.","source":"The following table describes each state in the `agent_status` enumeration."},{"content":"Agent State","pos":[2368,2379]},{"content":"Description","pos":[2380,2391]},{"content":"The agent has not been scheduled for execution.","pos":[2452,2499]},{"content":"The runtime is scheduling the agent for execution.","pos":[2521,2571]},{"content":"The agent has started and is running.","pos":[2592,2629]},{"content":"The agent finished.","pos":[2647,2666]},{"pos":[2688,2749],"content":"The agent was canceled before it entered the <ph id=\"ph1\">`started`</ph> state.","source":"The agent was canceled before it entered the `started` state."},{"pos":[2773,2929],"content":"is the initial state of an agent, <ph id=\"ph1\">`agent_runnable`</ph> and <ph id=\"ph2\">`agent_started`</ph> are the active states, and <ph id=\"ph3\">`agent_done`</ph> and <ph id=\"ph4\">`agent_canceled`</ph> are the terminal states.","source":" is the initial state of an agent, `agent_runnable` and `agent_started` are the active states, and `agent_done` and `agent_canceled` are the terminal states."},{"content":"Use the <bpt id=\"p1\">[</bpt>concurrency::agent::status<ept id=\"p1\">](reference/agent-class.md#status)</ept> method to retrieve the current state of an <ph id=\"ph1\">`agent`</ph> object.","pos":[2936,3064],"source":"Use the [concurrency::agent::status](reference/agent-class.md#status) method to retrieve the current state of an `agent` object."},{"content":"Although the <ph id=\"ph1\">`status`</ph> method is concurrency-safe, the state of the agent can change by the time the <ph id=\"ph2\">`status`</ph> method returns.","pos":[3065,3189],"source":" Although the `status` method is concurrency-safe, the state of the agent can change by the time the `status` method returns."},{"content":"For example, an agent could be in the <ph id=\"ph1\">`agent_started`</ph> state when you call the <ph id=\"ph2\">`status`</ph> method, but moved to the <ph id=\"ph3\">`agent_done`</ph> state just after the <ph id=\"ph4\">`status`</ph> method returns.","pos":[3190,3360],"source":" For example, an agent could be in the `agent_started` state when you call the `status` method, but moved to the `agent_done` state just after the `status` method returns."},{"content":"Methods and Features","pos":[3370,3390]},{"content":"The following table shows some of the important methods that belong to the <ph id=\"ph1\">`agent`</ph> class.","pos":[3394,3483],"source":"The following table shows some of the important methods that belong to the `agent` class."},{"content":"For more information about all of the <ph id=\"ph1\">`agent`</ph> class methods, see <bpt id=\"p1\">[</bpt>agent Class<ept id=\"p1\">](../../parallel/concrt/reference/agent-class.md)</ept>.","pos":[3484,3611],"source":" For more information about all of the `agent` class methods, see [agent Class](../../parallel/concrt/reference/agent-class.md)."},{"content":"Method","pos":[3618,3624]},{"content":"Description","pos":[3625,3636]},{"content":"<bpt id=\"p1\">[</bpt>start<ept id=\"p1\">](reference/agent-class.md#start)</ept>|Schedules the <ph id=\"ph1\">`agent`</ph> object for execution and sets it to the <ph id=\"ph2\">`agent_runnable`</ph> state.|","pos":[3677,3803],"source":"[start](reference/agent-class.md#start)|Schedules the `agent` object for execution and sets it to the `agent_runnable` state.|"},{"content":"<bpt id=\"p1\">[</bpt>run<ept id=\"p1\">](reference/agent-class.md#run)</ept>|Executes the task that is to be performed by the <ph id=\"ph1\">`agent`</ph> object.|","pos":[3807,3908],"source":"[run](reference/agent-class.md#run)|Executes the task that is to be performed by the `agent` object.|"},{"content":"<bpt id=\"p1\">[</bpt>done<ept id=\"p1\">](reference/agent-class.md#done)</ept>|Moves an agent to the <ph id=\"ph1\">`agent_done`</ph> state.|","pos":[3912,3992],"source":"[done](reference/agent-class.md#done)|Moves an agent to the `agent_done` state.|"},{"content":"<bpt id=\"p1\">[</bpt>cancel<ept id=\"p1\">](../../parallel/concrt/cancellation-in-the-ppl.md#cancel)</ept>|If the agent was not started, this method cancels execution of the agent and sets it to the <ph id=\"ph1\">`agent_canceled`</ph> state.|","pos":[3996,4178],"source":"[cancel](../../parallel/concrt/cancellation-in-the-ppl.md#cancel)|If the agent was not started, this method cancels execution of the agent and sets it to the `agent_canceled` state.|"},{"content":"<bpt id=\"p1\">[</bpt>status<ept id=\"p1\">](reference/agent-class.md#status)</ept>|Retrieves the current state of the <ph id=\"ph1\">`agent`</ph> object.|","pos":[4182,4275],"source":"[status](reference/agent-class.md#status)|Retrieves the current state of the `agent` object.|"},{"content":"<bpt id=\"p1\">[</bpt>wait<ept id=\"p1\">](reference/agent-class.md#wait)</ept>|Waits for the <ph id=\"ph1\">`agent`</ph> object to enter the <ph id=\"ph2\">`agent_done`</ph> or <ph id=\"ph3\">`agent_canceled`</ph> state.|","pos":[4279,4399],"source":"[wait](reference/agent-class.md#wait)|Waits for the `agent` object to enter the `agent_done` or `agent_canceled` state.|"},{"content":"<bpt id=\"p1\">[</bpt>wait_for_all<ept id=\"p1\">](reference/agent-class.md#wait_for_all)</ept>|Waits for all provided <ph id=\"ph1\">`agent`</ph> objects to enter the <ph id=\"ph2\">`agent_done`</ph> or <ph id=\"ph3\">`agent_canceled`</ph> state.|","pos":[4403,4549],"source":"[wait_for_all](reference/agent-class.md#wait_for_all)|Waits for all provided `agent` objects to enter the `agent_done` or `agent_canceled` state.|"},{"content":"<bpt id=\"p1\">[</bpt>wait_for_one<ept id=\"p1\">](reference/agent-class.md#wait_for_one)</ept>|Waits for at least one of the provided <ph id=\"ph1\">`agent`</ph> objects to enter the <ph id=\"ph2\">`agent_done`</ph> or <ph id=\"ph3\">`agent_canceled`</ph> state.|","pos":[4553,4715],"source":"[wait_for_one](reference/agent-class.md#wait_for_one)|Waits for at least one of the provided `agent` objects to enter the `agent_done` or `agent_canceled` state.|"},{"content":"After you create an agent object, call the <bpt id=\"p1\">[</bpt>concurrency::agent::start<ept id=\"p1\">](reference/agent-class.md#start)</ept> method to schedule it for execution.","pos":[4722,4861],"source":"After you create an agent object, call the [concurrency::agent::start](reference/agent-class.md#start) method to schedule it for execution."},{"content":"The runtime calls the <ph id=\"ph1\">`run`</ph> method after it schedules the agent and sets it to the <ph id=\"ph2\">`agent_runnable`</ph> state.","pos":[4862,4968],"source":" The runtime calls the `run` method after it schedules the agent and sets it to the `agent_runnable` state."},{"content":"The runtime does not manage exceptions that are thrown by asynchronous agents.","pos":[4975,5053]},{"content":"For more information about exception handling and agents, see <bpt id=\"p1\">[</bpt>Exception Handling<ept id=\"p1\">](../../parallel/concrt/exception-handling-in-the-concurrency-runtime.md)</ept>.","pos":[5054,5209],"source":" For more information about exception handling and agents, see [Exception Handling](../../parallel/concrt/exception-handling-in-the-concurrency-runtime.md)."},{"content":"Example","pos":[5218,5225]},{"pos":[5229,5431],"content":"For an example that shows how to create a basic agent-based application, see <bpt id=\"p1\">[</bpt>Walkthrough: Creating an Agent-Based Application<ept id=\"p1\">](../../parallel/concrt/walkthrough-creating-an-agent-based-application.md)</ept>.","source":"For an example that shows how to create a basic agent-based application, see [Walkthrough: Creating an Agent-Based Application](../../parallel/concrt/walkthrough-creating-an-agent-based-application.md)."},{"content":"See Also","pos":[5440,5448]},{"content":"Asynchronous Agents Library","pos":[5453,5480]}],"content":"---\ntitle: \"Asynchronous Agents | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"asynchronous agents\"\n  - \"agents [Concurrency Runtime]\"\nms.assetid: 6cf6ccc6-87f1-4e14-af15-ea8ba58fef1a\ncaps.latest.revision: 15\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Asynchronous Agents\nAn *asynchronous agent* (or just *agent*) is an application component that works asynchronously with other agents to solve larger computing tasks. Think of an agent as a task that has a set life cycle. For example, one agent might read data from an input/output device (such as the keyboard, a file on disk, or a network connection) and another agent might perform action on that data as it becomes available. The first agent uses message passing to inform the second agent that more data is available. The Concurrency Runtime task scheduler provides an efficient mechanism to enable agents to block and yield cooperatively without requiring less efficient preemption.  \n  \n\n The Agents Library defines the [concurrency::agent](../../parallel/concrt/reference/agent-class.md) class to represent an asynchronous agent. `agent` is an abstract class that declares the virtual method [concurrency::agent::run](reference/agent-class.md#run). The `run` method executes the task that is performed by the agent. Because `run` is abstract, you must implement this method in every class that you derive from `agent`.  \n  \n## Agent Life Cycle  \n Agents have a set life cycle. The [concurrency::agent_status](reference/concurrency-namespace-enums.md#agent_status) enumeration defines the various states of an agent. The following illustration is a state diagram that shows how agents progress from one state to another. In this illustration, solid lines represent methods that you call from your application; dotted lines represent methods that are called from the runtime.  \n  \n ![Agent State Diagram](../../parallel/concrt/media/agentstate.png \"agentstate\")  \n  \n The following table describes each state in the `agent_status` enumeration.  \n  \n|Agent State|Description|  \n|-----------------|-----------------|  \n|`agent_created`|The agent has not been scheduled for execution.|  \n|`agent_runnable`|The runtime is scheduling the agent for execution.|  \n|`agent_started`|The agent has started and is running.|  \n|`agent_done`|The agent finished.|  \n|`agent_canceled`|The agent was canceled before it entered the `started` state.|  \n  \n `agent_created` is the initial state of an agent, `agent_runnable` and `agent_started` are the active states, and `agent_done` and `agent_canceled` are the terminal states.  \n  \n Use the [concurrency::agent::status](reference/agent-class.md#status) method to retrieve the current state of an `agent` object. Although the `status` method is concurrency-safe, the state of the agent can change by the time the `status` method returns. For example, an agent could be in the `agent_started` state when you call the `status` method, but moved to the `agent_done` state just after the `status` method returns.  \n\n  \n## Methods and Features  \n The following table shows some of the important methods that belong to the `agent` class. For more information about all of the `agent` class methods, see [agent Class](../../parallel/concrt/reference/agent-class.md).  \n  \n|Method|Description|  \n|------------|-----------------|  \n\n|[start](reference/agent-class.md#start)|Schedules the `agent` object for execution and sets it to the `agent_runnable` state.|  \n|[run](reference/agent-class.md#run)|Executes the task that is to be performed by the `agent` object.|  \n|[done](reference/agent-class.md#done)|Moves an agent to the `agent_done` state.|  \n|[cancel](../../parallel/concrt/cancellation-in-the-ppl.md#cancel)|If the agent was not started, this method cancels execution of the agent and sets it to the `agent_canceled` state.|  \n|[status](reference/agent-class.md#status)|Retrieves the current state of the `agent` object.|  \n|[wait](reference/agent-class.md#wait)|Waits for the `agent` object to enter the `agent_done` or `agent_canceled` state.|  \n|[wait_for_all](reference/agent-class.md#wait_for_all)|Waits for all provided `agent` objects to enter the `agent_done` or `agent_canceled` state.|  \n|[wait_for_one](reference/agent-class.md#wait_for_one)|Waits for at least one of the provided `agent` objects to enter the `agent_done` or `agent_canceled` state.|  \n  \n After you create an agent object, call the [concurrency::agent::start](reference/agent-class.md#start) method to schedule it for execution. The runtime calls the `run` method after it schedules the agent and sets it to the `agent_runnable` state.  \n  \n The runtime does not manage exceptions that are thrown by asynchronous agents. For more information about exception handling and agents, see [Exception Handling](../../parallel/concrt/exception-handling-in-the-concurrency-runtime.md).  \n  \n## Example  \n For an example that shows how to create a basic agent-based application, see [Walkthrough: Creating an Agent-Based Application](../../parallel/concrt/walkthrough-creating-an-agent-based-application.md).  \n  \n## See Also  \n [Asynchronous Agents Library](../../parallel/concrt/asynchronous-agents-library.md)\n\n"}