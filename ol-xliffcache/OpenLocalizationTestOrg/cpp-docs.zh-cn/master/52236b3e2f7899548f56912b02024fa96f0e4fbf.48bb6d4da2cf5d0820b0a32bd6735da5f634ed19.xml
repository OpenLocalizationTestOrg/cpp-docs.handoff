{"nodes":[{"pos":[12,68],"content":"-DRIVER (Windows NT Kernel Mode Driver) | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"-DRIVER (Windows NT Kernel Mode Driver) | Microsoft Docs","pos":[0,56]}]},{"content":"/DRIVER (Windows NT Kernel Mode Driver)","pos":[744,783]},{"content":"Remarks","pos":[828,835]},{"content":"Use the /DRIVER linker option to build a Windows NT kernel mode driver.","pos":[839,910]},{"content":"<bpt id=\"p1\">**</bpt>/DRIVER:UPONLY<ept id=\"p1\">**</ept> causes the linker to add the <bpt id=\"p2\">**</bpt>IMAGE_FILE_UP_SYSTEM_ONLY<ept id=\"p2\">**</ept> bit to the characteristics in the output header to specify that it is a uniprocessor (UP) driver.","pos":[917,1092],"source":"**/DRIVER:UPONLY** causes the linker to add the **IMAGE_FILE_UP_SYSTEM_ONLY** bit to the characteristics in the output header to specify that it is a uniprocessor (UP) driver."},{"content":"The operating system will refuse to load a UP driver on a multiprocessor (MP) system.","pos":[1093,1178]},{"pos":[1185,1324],"content":"<bpt id=\"p1\">**</bpt>/DRIVER:WDM<ept id=\"p1\">**</ept> causes the linker to set the <bpt id=\"p2\">**</bpt>IMAGE_DLLCHARACTERISTICS_WDM_DRIVER<ept id=\"p2\">**</ept> bit in the optional header's DllCharacteristics field.","source":"**/DRIVER:WDM** causes the linker to set the **IMAGE_DLLCHARACTERISTICS_WDM_DRIVER** bit in the optional header's DllCharacteristics field."},{"pos":[1331,1401],"content":"If <bpt id=\"p1\">**</bpt>/DRIVER<ept id=\"p1\">**</ept> is not specified, these bits are not set by the linker.","source":"If **/DRIVER** is not specified, these bits are not set by the linker."},{"pos":[1408,1436],"content":"If <bpt id=\"p1\">**</bpt>/DRIVER<ept id=\"p1\">**</ept> is specified:","source":"If **/DRIVER** is specified:"},{"pos":[1446,1552],"content":"/FIXED:NO is in effect (<bpt id=\"p1\">[</bpt>/FIXED (Fixed Base Address)<ept id=\"p1\">](../../build/reference/fixed-fixed-base-address.md)</ept>).","source":"/FIXED:NO is in effect ([/FIXED (Fixed Base Address)](../../build/reference/fixed-fixed-base-address.md))."},{"content":"The extension of the output file will be .sys.","pos":[1562,1608]},{"content":"Use <bpt id=\"p1\">**</bpt>/OUT<ept id=\"p1\">**</ept> to change the default filename and extension (<bpt id=\"p2\">[</bpt>/OUT (Output File Name)<ept id=\"p2\">](../../build/reference/out-output-file-name.md)</ept>).","pos":[1609,1742],"source":" Use **/OUT** to change the default filename and extension ([/OUT (Output File Name)](../../build/reference/out-output-file-name.md))."},{"content":"To set this linker option in the Visual Studio development environment","pos":[1752,1822]},{"content":"Open the project's <bpt id=\"p1\">**</bpt>Property Pages<ept id=\"p1\">**</ept> dialog box.","pos":[1832,1881],"source":"Open the project's **Property Pages** dialog box."},{"content":"For details, see <bpt id=\"p1\">[</bpt>Setting Visual C++ Project Properties<ept id=\"p1\">](../../ide/working-with-project-properties.md)</ept>.","pos":[1882,1985],"source":" For details, see [Setting Visual C++ Project Properties](../../ide/working-with-project-properties.md)."},{"pos":[1995,2023],"content":"Click the <bpt id=\"p1\">**</bpt>Linker<ept id=\"p1\">**</ept> folder.","source":"Click the **Linker** folder."},{"pos":[2033,2068],"content":"Click the <bpt id=\"p1\">**</bpt>System<ept id=\"p1\">**</ept> property page.","source":"Click the **System** property page."},{"pos":[2078,2109],"content":"Modify the <bpt id=\"p1\">**</bpt>Driver<ept id=\"p1\">**</ept> property.","source":"Modify the **Driver** property."},{"content":"To set this linker option programmatically","pos":[2119,2161]},{"pos":[2171,2238],"content":"See <ph id=\"ph1\">`P:Microsoft.VisualStudio.VCProjectEngine.VCLinkerTool.driver`</ph>.","source":"See `P:Microsoft.VisualStudio.VCProjectEngine.VCLinkerTool.driver`."},{"content":"See Also","pos":[2247,2255]},{"content":"Setting Linker Options","pos":[2260,2282]},{"content":"Linker Options","pos":[2338,2352]}],"content":"---\ntitle: \"-DRIVER (Windows NT Kernel Mode Driver) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"VC.Project.VCLinkerTool.driver\"\n  - \"/driver\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"kernel mode driver\"\n  - \"-DRIVER linker option\"\n  - \"DRIVER linker option\"\n  - \"/DRIVER linker option\"\nms.assetid: aeee8e28-5d97-40f5-ba16-9f370fe8a1b8\ncaps.latest.revision: 10\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# /DRIVER (Windows NT Kernel Mode Driver)\n```  \n/DRIVER[:UPONLY | :WDM]  \n```  \n  \n## Remarks  \n Use the /DRIVER linker option to build a Windows NT kernel mode driver.  \n  \n **/DRIVER:UPONLY** causes the linker to add the **IMAGE_FILE_UP_SYSTEM_ONLY** bit to the characteristics in the output header to specify that it is a uniprocessor (UP) driver. The operating system will refuse to load a UP driver on a multiprocessor (MP) system.  \n  \n **/DRIVER:WDM** causes the linker to set the **IMAGE_DLLCHARACTERISTICS_WDM_DRIVER** bit in the optional header's DllCharacteristics field.  \n  \n If **/DRIVER** is not specified, these bits are not set by the linker.  \n  \n If **/DRIVER** is specified:  \n  \n-   /FIXED:NO is in effect ([/FIXED (Fixed Base Address)](../../build/reference/fixed-fixed-base-address.md)).  \n  \n-   The extension of the output file will be .sys. Use **/OUT** to change the default filename and extension ([/OUT (Output File Name)](../../build/reference/out-output-file-name.md)).  \n  \n### To set this linker option in the Visual Studio development environment  \n  \n1.  Open the project's **Property Pages** dialog box. For details, see [Setting Visual C++ Project Properties](../../ide/working-with-project-properties.md).  \n  \n2.  Click the **Linker** folder.  \n  \n3.  Click the **System** property page.  \n  \n4.  Modify the **Driver** property.  \n  \n### To set this linker option programmatically  \n  \n1.  See `P:Microsoft.VisualStudio.VCProjectEngine.VCLinkerTool.driver`.  \n  \n## See Also  \n [Setting Linker Options](../../build/reference/setting-linker-options.md)   \n [Linker Options](../../build/reference/linker-options.md)"}