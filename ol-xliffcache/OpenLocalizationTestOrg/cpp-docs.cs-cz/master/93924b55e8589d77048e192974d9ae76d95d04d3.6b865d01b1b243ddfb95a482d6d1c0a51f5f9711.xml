{"nodes":[{"pos":[12,48],"content":"vscanf_s, vwscanf_s | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"vscanf_s, vwscanf_s | Microsoft Docs","pos":[0,36]}]},{"content":"vscanf_s, vwscanf_s","pos":[876,895]},{"content":"Reads formatted data from the standard input stream.","pos":[896,948]},{"content":"These versions of <bpt id=\"p1\">[</bpt>vscanf, vwscanf<ept id=\"p1\">](../../c-runtime-library/reference/vscanf-vwscanf.md)</ept> have security enhancements, as described in <bpt id=\"p2\">[</bpt>Security Features in the CRT<ept id=\"p2\">](../../c-runtime-library/security-features-in-the-crt.md)</ept>.","pos":[949,1170],"source":" These versions of [vscanf, vwscanf](../../c-runtime-library/reference/vscanf-vwscanf.md) have security enhancements, as described in [Security Features in the CRT](../../c-runtime-library/security-features-in-the-crt.md)."},{"content":"Syntax","pos":[1179,1185]},{"content":"Parameters","pos":[1350,1360]},{"content":"Format control string.","pos":[1376,1398]},{"content":"Variable argument list.","pos":[1418,1441]},{"content":"Return Value","pos":[1450,1462]},{"content":"Returns the number of fields successfully converted and assigned; the return value does not include fields that were read but not assigned.","pos":[1466,1605]},{"content":"A return value of 0 indicates that no fields were assigned.","pos":[1606,1665]},{"content":"The return value is <ph id=\"ph1\">`EOF`</ph> for an error, or if the end-of-file character or the end-of-string character is encountered in the first attempt to read a character.","pos":[1666,1825],"source":" The return value is `EOF` for an error, or if the end-of-file character or the end-of-string character is encountered in the first attempt to read a character."},{"content":"If <ph id=\"ph1\">`format`</ph> is a <ph id=\"ph2\">`NULL`</ph> pointer, the invalid parameter handler is invoked, as described in <bpt id=\"p1\">[</bpt>Parameter Validation<ept id=\"p1\">](../../c-runtime-library/parameter-validation.md)</ept>.","pos":[1826,1989],"source":" If `format` is a `NULL` pointer, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md)."},{"content":"If execution is allowed to continue, <ph id=\"ph1\">`vscanf_s`</ph> and <ph id=\"ph2\">`vwscanf_s`</ph> return <ph id=\"ph3\">`EOF`</ph> and set <ph id=\"ph4\">`errno`</ph> to <ph id=\"ph5\">`EINVAL`</ph>.","pos":[1990,2095],"source":" If execution is allowed to continue, `vscanf_s` and `vwscanf_s` return `EOF` and set `errno` to `EINVAL`."},{"pos":[2102,2273],"content":"For information about these and other error codes, see <bpt id=\"p1\">[</bpt>errno, _doserrno, _sys_errlist, and _sys_nerr<ept id=\"p1\">](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md)</ept>.","source":"For information about these and other error codes, see [errno, _doserrno, _sys_errlist, and _sys_nerr](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md)."},{"content":"Remarks","pos":[2282,2289]},{"content":"The <ph id=\"ph1\">`vscanf_s`</ph> function reads data from the standard input stream <ph id=\"ph2\">`stdin`</ph> and writes the data into the locations that are given by the <ph id=\"ph3\">`arglist`</ph> argument list.","pos":[2293,2452],"source":"The `vscanf_s` function reads data from the standard input stream `stdin` and writes the data into the locations that are given by the `arglist` argument list."},{"content":"Each argument in the list must be a pointer to a variable of a type that corresponds to a type specifier in <ph id=\"ph1\">`format`</ph>.","pos":[2453,2570],"source":" Each argument in the list must be a pointer to a variable of a type that corresponds to a type specifier in `format`."},{"content":"If copying occurs between strings that overlap, the behavior is undefined.","pos":[2571,2645]},{"content":"is a wide-character version of <ph id=\"ph1\">`vscanf_s`</ph>; the <ph id=\"ph2\">`format`</ph> argument to <ph id=\"ph3\">`vwscanf_s`</ph> is a wide-character string.","pos":[2664,2771],"source":" is a wide-character version of `vscanf_s`; the `format` argument to `vwscanf_s` is a wide-character string."},{"content":"and <ph id=\"ph1\">`vscanf_s`</ph> behave identically if the stream is opened in ANSI mode.","pos":[2784,2855],"source":" and `vscanf_s` behave identically if the stream is opened in ANSI mode."},{"content":"doesn't support input from a UNICODE stream.","pos":[2867,2911]},{"content":"Unlike <ph id=\"ph1\">`vscanf`</ph> and <ph id=\"ph2\">`vwscanf`</ph>, <ph id=\"ph3\">`vscanf_s`</ph> and <ph id=\"ph4\">`vwscanf_s`</ph> require the buffer size to be specified for all input parameters of type <ph id=\"ph5\">`c`</ph>, <ph id=\"ph6\">`C`</ph>, <ph id=\"ph7\">`s`</ph>, <ph id=\"ph8\">`S`</ph>, or string control sets that are enclosed in <ph id=\"ph9\">`[]`</ph>.","pos":[2918,3118],"source":"Unlike `vscanf` and `vwscanf`, `vscanf_s` and `vwscanf_s` require the buffer size to be specified for all input parameters of type `c`, `C`, `s`, `S`, or string control sets that are enclosed in `[]`."},{"content":"The buffer size in characters is passed as an additional parameter immediately following the pointer to the buffer or variable.","pos":[3119,3246]},{"content":"The buffer size in characters for a <ph id=\"ph1\">`wchar_t`</ph> string is not the same as the size in bytes.","pos":[3247,3337],"source":" The buffer size in characters for a `wchar_t` string is not the same as the size in bytes."},{"content":"The buffer size includes the terminating null.","pos":[3344,3390]},{"content":"You can use a width-specification field to ensure that the token that's read in will fit into the buffer.","pos":[3391,3496]},{"content":"If no width specification field is used, and the token read in is too big to fit in the buffer, nothing is written to that buffer.","pos":[3497,3627]},{"pos":[3635,3701],"content":"[!NOTE]\n The size parameter is of type `unsigned`, not `size_t`.","leadings":["","> "],"nodes":[{"content":"The size parameter is of type <ph id=\"ph1\">`unsigned`</ph>, not <ph id=\"ph2\">`size_t`</ph>.","pos":[9,64],"source":" The size parameter is of type `unsigned`, not `size_t`."}]},{"pos":[3708,3816],"content":"For more information, see <bpt id=\"p1\">[</bpt>scanf Width Specification<ept id=\"p1\">](../../c-runtime-library/scanf-width-specification.md)</ept>.","source":"For more information, see [scanf Width Specification](../../c-runtime-library/scanf-width-specification.md)."},{"content":"Generic-Text Routine Mappings","pos":[3826,3855]},{"content":"TCHAR.H routine","pos":[3862,3877]},{"content":"_UNICODE &amp; _MBCS not defined","pos":[3878,3906],"source":"_UNICODE & _MBCS not defined"},{"content":"_MBCS defined","pos":[3907,3920]},{"content":"_UNICODE defined","pos":[3921,3937]},{"pos":[4104,4271],"content":"For more information, see <bpt id=\"p1\">[</bpt>Format Specification Fields: scanf and wscanf Functions<ept id=\"p1\">](../../c-runtime-library/format-specification-fields-scanf-and-wscanf-functions.md)</ept>.","source":"For more information, see [Format Specification Fields: scanf and wscanf Functions](../../c-runtime-library/format-specification-fields-scanf-and-wscanf-functions.md)."},{"content":"Requirements","pos":[4280,4292]},{"content":"Routine","pos":[4299,4306]},{"content":"Required header","pos":[4307,4322]},{"content":"stdio.h&gt;","pos":[4380,4388],"source":"stdio.h>"},{"content":"stdio.h&gt; or <ph id=\"ph1\">\\&lt;</ph>wchar.h&gt;","pos":[4406,4428],"source":"stdio.h> or \\<wchar.h>"},{"content":"The console is not supported in <ph id=\"ph1\">[!INCLUDE[win8_appname_long](../../build/includes/win8_appname_long_md.md)]</ph> apps.","pos":[4436,4549],"source":"The console is not supported in [!INCLUDE[win8_appname_long](../../build/includes/win8_appname_long_md.md)] apps."},{"content":"The standard stream handles that are associated with the console—<ph id=\"ph1\">`stdin`</ph>, <ph id=\"ph2\">`stdout`</ph>, and <ph id=\"ph3\">`stderr`</ph>—must be redirected before C run-time functions can use them in <ph id=\"ph4\">[!INCLUDE[win8_appname_long](../../build/includes/win8_appname_long_md.md)]</ph> apps.","pos":[4550,4791],"source":" The standard stream handles that are associated with the console—`stdin`, `stdout`, and `stderr`—must be redirected before C run-time functions can use them in [!INCLUDE[win8_appname_long](../../build/includes/win8_appname_long_md.md)] apps."},{"content":"For additional compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept>.","pos":[4792,4896],"source":" For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md)."},{"content":"Example","pos":[4905,4912]},{"content":"When this program is given the input in the example, it produces this output:","pos":[6247,6324]},{"content":".NET Framework Equivalent","pos":[6600,6625]},{"content":"System::Console::Read","pos":[6636,6657]},{"content":"System::Console::ReadLine","pos":[6736,6761]},{"pos":[6843,6968],"content":"See also <ph id=\"ph1\">`Parse`</ph> methods, such as <bpt id=\"p1\">[</bpt>System::Double::Parse<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/system.double.parse.aspx)</ept>.","source":"See also `Parse` methods, such as [System::Double::Parse](https://msdn.microsoft.com/en-us/library/system.double.parse.aspx)."},{"content":"See Also","pos":[6977,6985]},{"content":"Floating-Point Support","pos":[6990,7012]},{"content":"Stream I/O","pos":[7070,7080]},{"content":"Locale","pos":[7126,7132]},{"content":"printf, _printf_l, wprintf, _wprintf_l","pos":[7174,7212]},{"content":"scanf, _scanf_l, wscanf, _wscanf_l","pos":[7291,7325]},{"content":"scanf_s, _scanf_s_l, wscanf_s, _wscanf_s_l","pos":[7400,7442]},{"content":"vscanf, vwscanf","pos":[7525,7540]}],"content":"---\ntitle: \"vscanf_s, vwscanf_s | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"vscanf_s\"\n  - \"vwscanf_s\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"_vtscanf_s\"\n  - \"vscanf_s\"\n  - \"vwscanf_s\"\ndev_langs: \n  - \"C++\"\nms.assetid: 23a1c383-5b01-4887-93ce-534a1e38ed93\ncaps.latest.revision: 6\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# vscanf_s, vwscanf_s\nReads formatted data from the standard input stream. These versions of [vscanf, vwscanf](../../c-runtime-library/reference/vscanf-vwscanf.md) have security enhancements, as described in [Security Features in the CRT](../../c-runtime-library/security-features-in-the-crt.md).  \n  \n## Syntax  \n  \n```  \nint vscanf_s(  \n   const char *format,  \n   va_list arglist  \n);   \nint vwscanf_s(  \n   const wchar_t *format,  \n   va_list arglist  \n);  \n```  \n  \n#### Parameters  \n `format`  \n Format control string.  \n  \n `arglist`  \n Variable argument list.  \n  \n## Return Value  \n Returns the number of fields successfully converted and assigned; the return value does not include fields that were read but not assigned. A return value of 0 indicates that no fields were assigned. The return value is `EOF` for an error, or if the end-of-file character or the end-of-string character is encountered in the first attempt to read a character. If `format` is a `NULL` pointer, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md). If execution is allowed to continue, `vscanf_s` and `vwscanf_s` return `EOF` and set `errno` to `EINVAL`.  \n  \n For information about these and other error codes, see [errno, _doserrno, _sys_errlist, and _sys_nerr](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md).  \n  \n## Remarks  \n The `vscanf_s` function reads data from the standard input stream `stdin` and writes the data into the locations that are given by the `arglist` argument list. Each argument in the list must be a pointer to a variable of a type that corresponds to a type specifier in `format`. If copying occurs between strings that overlap, the behavior is undefined.  \n  \n `vwscanf_s` is a wide-character version of `vscanf_s`; the `format` argument to `vwscanf_s` is a wide-character string. `vwscanf_s` and `vscanf_s` behave identically if the stream is opened in ANSI mode. `vscanf_s` doesn't support input from a UNICODE stream.  \n  \n Unlike `vscanf` and `vwscanf`, `vscanf_s` and `vwscanf_s` require the buffer size to be specified for all input parameters of type `c`, `C`, `s`, `S`, or string control sets that are enclosed in `[]`. The buffer size in characters is passed as an additional parameter immediately following the pointer to the buffer or variable. The buffer size in characters for a `wchar_t` string is not the same as the size in bytes.  \n  \n The buffer size includes the terminating null. You can use a width-specification field to ensure that the token that's read in will fit into the buffer. If no width specification field is used, and the token read in is too big to fit in the buffer, nothing is written to that buffer.  \n  \n> [!NOTE]\n>  The size parameter is of type `unsigned`, not `size_t`.  \n  \n For more information, see [scanf Width Specification](../../c-runtime-library/scanf-width-specification.md).  \n  \n### Generic-Text Routine Mappings  \n  \n|TCHAR.H routine|_UNICODE & _MBCS not defined|_MBCS defined|_UNICODE defined|  \n|---------------------|------------------------------------|--------------------|-----------------------|  \n|`_vtscanf_s`|`vscanf_s`|`vscanf_s`|`vwscanf_s`|  \n  \n For more information, see [Format Specification Fields: scanf and wscanf Functions](../../c-runtime-library/format-specification-fields-scanf-and-wscanf-functions.md).  \n  \n## Requirements  \n  \n|Routine|Required header|  \n|-------------|---------------------|  \n|`vscanf_s`|\\<stdio.h>|  \n|`wscanf_s`|\\<stdio.h> or \\<wchar.h>|  \n  \n The console is not supported in [!INCLUDE[win8_appname_long](../../build/includes/win8_appname_long_md.md)] apps. The standard stream handles that are associated with the console—`stdin`, `stdout`, and `stderr`—must be redirected before C run-time functions can use them in [!INCLUDE[win8_appname_long](../../build/includes/win8_appname_long_md.md)] apps. For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md).  \n  \n## Example  \n  \n```  \n// crt_vscanf_s.c  \n// compile with: /W3  \n// This program uses the vscanf_s and vwscanf_s functions  \n// to read formatted input.  \n  \n#include <stdio.h>  \n#include <stdarg.h>  \n#include <stdlib.h>  \n  \nint call_vscanf_s(char *format, ...)  \n{  \n    int result;  \n    va_list arglist;  \n    va_start(arglist, format);  \n    result = vscanf_s(format, arglist);  \n    va_end(arglist);  \n    return result;  \n}  \n  \nint call_vwscanf_s(wchar_t *format, ...)  \n{  \n    int result;  \n    va_list arglist;  \n    va_start(arglist, format);  \n    result = vwscanf_s(format, arglist);  \n    va_end(arglist);  \n    return result;  \n}  \n  \nint main( void )  \n{  \n    int   i, result;  \n    float fp;  \n    char  c, s[81];  \n    wchar_t wc, ws[81];  \n    result = call_vscanf_s(\"%d %f %c %C %s %S\", &i, &fp, &c, 1,  \n                           &wc, 1, s, _countof(s), ws, _countof(ws) );  \n    printf( \"The number of fields input is %d\\n\", result );  \n    printf( \"The contents are: %d %f %c %C %s %S\\n\", i, fp, c, wc, s, ws);  \n    result = call_vwscanf_s(L\"%d %f %hc %lc %S %ls\", &i, &fp, &c, 2,  \n                            &wc, 1, s, _countof(s), ws, _countof(ws) );  \n    wprintf( L\"The number of fields input is %d\\n\", result );  \n    wprintf( L\"The contents are: %d %f %C %c %hs %s\\n\", i, fp, c, wc, s, ws);  \n}  \n  \n```  \n  \n When this program is given the input in the example, it produces this output:  \n  \n `71 98.6 h z Byte characters`  \n  \n `36 92.3 y n Wide characters`  \n  \n```Output  \nThe number of fields input is 6  \nThe contents are: 71 98.599998 h z Byte characters  \nThe number of fields input is 6  \nThe contents are: 36 92.300003 y n Wide characters  \n```  \n  \n## .NET Framework Equivalent  \n  \n-   [System::Console::Read](https://msdn.microsoft.com/en-us/library/system.console.read.aspx)  \n  \n-   [System::Console::ReadLine](https://msdn.microsoft.com/en-us/library/system.console.readline.aspx)  \n  \n-   See also `Parse` methods, such as [System::Double::Parse](https://msdn.microsoft.com/en-us/library/system.double.parse.aspx).  \n  \n## See Also  \n [Floating-Point Support](../../c-runtime-library/floating-point-support.md)   \n [Stream I/O](../../c-runtime-library/stream-i-o.md)   \n [Locale](../../c-runtime-library/locale.md)   \n [printf, _printf_l, wprintf, _wprintf_l](../../c-runtime-library/reference/printf-printf-l-wprintf-wprintf-l.md)   \n [scanf, _scanf_l, wscanf, _wscanf_l](../../c-runtime-library/reference/scanf-scanf-l-wscanf-wscanf-l.md)   \n [scanf_s, _scanf_s_l, wscanf_s, _wscanf_s_l](../../c-runtime-library/reference/scanf-s-scanf-s-l-wscanf-s-wscanf-s-l.md)   \n [vscanf, vwscanf](../../c-runtime-library/reference/vscanf-vwscanf.md)"}