{"nodes":[{"pos":[12,40],"content":"Using wmain | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Using wmain | Microsoft Docs","pos":[0,28]}]},{"content":"Using wmain","pos":[572,583]},{"content":"Microsoft Specific","pos":[586,604]},{"content":"In the Unicode programming model, you can define a wide-character version of the <bpt id=\"p1\">**</bpt>main<ept id=\"p1\">**</ept> function.","pos":[613,712],"source":"In the Unicode programming model, you can define a wide-character version of the **main** function."},{"content":"Use <bpt id=\"p1\">**</bpt>wmain<ept id=\"p1\">**</ept> instead of <bpt id=\"p2\">**</bpt>main<ept id=\"p2\">**</ept> if you want to write portable code that adheres to the Unicode programming model.","pos":[713,828],"source":" Use **wmain** instead of **main** if you want to write portable code that adheres to the Unicode programming model."},{"content":"Syntax","pos":[837,843]},{"content":"Remarks","pos":[923,930]},{"content":"You declare formal parameters to <bpt id=\"p1\">**</bpt>wmain<ept id=\"p1\">**</ept> using a similar format to <bpt id=\"p2\">**</bpt>main<ept id=\"p2\">**</ept>.","pos":[934,1012],"source":"You declare formal parameters to **wmain** using a similar format to **main**."},{"content":"You can then pass wide-character arguments and, optionally, a wide-character environment pointer to the program.","pos":[1013,1125]},{"content":"The <ph id=\"ph1\">`argv`</ph> and <ph id=\"ph2\">`envp`</ph> parameters to <bpt id=\"p1\">**</bpt>wmain<ept id=\"p1\">**</ept> are of type <ph id=\"ph3\">`wchar_t*`</ph>.","pos":[1126,1195],"source":" The `argv` and `envp` parameters to **wmain** are of type `wchar_t*`."},{"content":"For example:","pos":[1196,1208]},{"content":"If your program uses a <bpt id=\"p1\">**</bpt>main<ept id=\"p1\">**</ept> function, the multibyte-character environment is created by the run-time library at program startup.","pos":[1215,1347],"source":"If your program uses a **main** function, the multibyte-character environment is created by the run-time library at program startup."},{"content":"A wide-character copy of the environment is created only when needed (for example, by a call to the <ph id=\"ph1\">`_wgetenv`</ph> or <ph id=\"ph2\">`_wputenv`</ph> functions).","pos":[1348,1484],"source":" A wide-character copy of the environment is created only when needed (for example, by a call to the `_wgetenv` or `_wputenv` functions)."},{"content":"On the first call to <ph id=\"ph1\">`_wputenv`</ph>, or on the first call to <ph id=\"ph2\">`_wgetenv`</ph> if an MBCS environment already exists, a corresponding wide-character string environment is created and is then pointed to by the <ph id=\"ph3\">`_wenviron`</ph> global variable, which is a wide-character version of the <ph id=\"ph4\">`_environ`</ph> global variable.","pos":[1485,1780],"source":" On the first call to `_wputenv`, or on the first call to `_wgetenv` if an MBCS environment already exists, a corresponding wide-character string environment is created and is then pointed to by the `_wenviron` global variable, which is a wide-character version of the `_environ` global variable."},{"content":"At this point, two copies of the environment (MBCS and Unicode) exist simultaneously and are maintained by the operating system throughout the life of the program.","pos":[1781,1944]},{"content":"Similarly, if your program uses a <bpt id=\"p1\">**</bpt>wmain<ept id=\"p1\">**</ept> function, a wide-character environment is created at program startup and is pointed to by the <ph id=\"ph1\">`_wenviron`</ph> global variable.","pos":[1951,2117],"source":"Similarly, if your program uses a **wmain** function, a wide-character environment is created at program startup and is pointed to by the `_wenviron` global variable."},{"content":"An MBCS (ASCII) environment is created on the first call to <ph id=\"ph1\">`_putenv`</ph> or <ph id=\"ph2\">`getenv`</ph>, and is pointed to by the <ph id=\"ph3\">`_environ`</ph> global variable.","pos":[2118,2253],"source":" An MBCS (ASCII) environment is created on the first call to `_putenv` or `getenv`, and is pointed to by the `_environ` global variable."},{"pos":[2260,2415],"content":"For more information on the MBCS environment, see <bpt id=\"p1\">[</bpt>Internationalization<ept id=\"p1\">](../c-runtime-library/internationalization.md)</ept> in the <bpt id=\"p2\">*</bpt>Run-Time Library Reference.<ept id=\"p2\">*</ept>","source":"For more information on the MBCS environment, see [Internationalization](../c-runtime-library/internationalization.md) in the *Run-Time Library Reference.*"},{"content":"END Microsoft Specific","pos":[2424,2446]},{"content":"See Also","pos":[2457,2465]},{"content":"main Function and Program Execution","pos":[2470,2505]}],"content":"---\ntitle: \"Using wmain | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"wmain function\"\nms.assetid: d0300812-adc4-40c6-bba3-b2da25468c80\ncaps.latest.revision: 11\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Using wmain\n**Microsoft Specific**  \n  \n In the Unicode programming model, you can define a wide-character version of the **main** function. Use **wmain** instead of **main** if you want to write portable code that adheres to the Unicode programming model.  \n  \n## Syntax  \n  \n```  \nwmain( int argc, wchar_t *argv[ ], wchar_t *envp[ ] )  \n```  \n  \n## Remarks  \n You declare formal parameters to **wmain** using a similar format to **main**. You can then pass wide-character arguments and, optionally, a wide-character environment pointer to the program. The `argv` and `envp` parameters to **wmain** are of type `wchar_t*`. For example:  \n  \n If your program uses a **main** function, the multibyte-character environment is created by the run-time library at program startup. A wide-character copy of the environment is created only when needed (for example, by a call to the `_wgetenv` or `_wputenv` functions). On the first call to `_wputenv`, or on the first call to `_wgetenv` if an MBCS environment already exists, a corresponding wide-character string environment is created and is then pointed to by the `_wenviron` global variable, which is a wide-character version of the `_environ` global variable. At this point, two copies of the environment (MBCS and Unicode) exist simultaneously and are maintained by the operating system throughout the life of the program.  \n  \n Similarly, if your program uses a **wmain** function, a wide-character environment is created at program startup and is pointed to by the `_wenviron` global variable. An MBCS (ASCII) environment is created on the first call to `_putenv` or `getenv`, and is pointed to by the `_environ` global variable.  \n  \n For more information on the MBCS environment, see [Internationalization](../c-runtime-library/internationalization.md) in the *Run-Time Library Reference.*  \n  \n **END Microsoft Specific**  \n  \n## See Also  \n [main Function and Program Execution](../c-language/main-function-and-program-execution.md)"}