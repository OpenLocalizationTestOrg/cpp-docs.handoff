{"nodes":[{"pos":[12,50],"content":"wctomb_s, _wctomb_s_l | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"wctomb_s, _wctomb_s_l | Microsoft Docs","pos":[0,38]}]},{"pos":[1170,1191],"content":"wctomb_s, _wctomb_s_l","linkify":"wctomb_s, _wctomb_s_l","nodes":[{"content":"wctomb_s, _wctomb_s_l","pos":[0,21]}]},{"content":"Converts a wide character to the corresponding multibyte character.","pos":[1192,1259]},{"content":"A version of <bpt id=\"p1\">[</bpt>wctomb, _wctomb_l<ept id=\"p1\">](../../c-runtime-library/reference/wctomb-wctomb-l.md)</ept> with security enhancements as described in <bpt id=\"p2\">[</bpt>Security Features in the CRT<ept id=\"p2\">](../../c-runtime-library/security-features-in-the-crt.md)</ept>.","pos":[1260,1478],"source":" A version of [wctomb, _wctomb_l](../../c-runtime-library/reference/wctomb-wctomb-l.md) with security enhancements as described in [Security Features in the CRT](../../c-runtime-library/security-features-in-the-crt.md)."},{"pos":[1487,1493],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1764,1774],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"[out] <ph id=\"ph1\">`pRetValue`</ph>","pos":[1778,1795],"source":"[out] `pRetValue`"},{"content":"The number of bytes, or a code indicating the result.","pos":[1799,1852]},{"content":"[out] <ph id=\"ph1\">`mbchar`</ph>","pos":[1859,1873],"source":"[out] `mbchar`"},{"content":"The address of a multibyte character.","pos":[1877,1914]},{"content":"[in] <ph id=\"ph1\">`sizeInBytes`</ph>","pos":[1921,1939],"source":"[in] `sizeInBytes`"},{"content":"Size of the buffer <ph id=\"ph1\">`mbchar`</ph>.","pos":[1943,1971],"source":" Size of the buffer `mbchar`."},{"content":"[in] <ph id=\"ph1\">`wchar`</ph>","pos":[1978,1990],"source":"[in] `wchar`"},{"content":"A wide character.","pos":[1994,2011]},{"content":"[in] <ph id=\"ph1\">`locale`</ph>","pos":[2018,2031],"source":"[in] `locale`"},{"content":"The locale to use.","pos":[2035,2053]},{"pos":[2062,2074],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"Zero if successful, an error code on failure.","pos":[2078,2123]},{"content":"Error Conditions","pos":[2130,2146]},{"content":"Return value","pos":[2176,2188]},{"content":"&gt;0","pos":[2288,2290],"source":">0"},{"content":"not modified","pos":[2300,2312]},{"content":"any","pos":[2317,2320]},{"content":"not modified","pos":[2341,2353]},{"content":"any","pos":[2358,2361]},{"content":"too small","pos":[2362,2371]},{"content":"not modified","pos":[2381,2393]},{"content":"If any of the above error conditions occurs, the invalid parameter handler is invoked, as described in <bpt id=\"p1\">[</bpt>Parameter Validation<ept id=\"p1\">](../../c-runtime-library/parameter-validation.md)</ept>.","pos":[2401,2576],"source":"If any of the above error conditions occurs, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md)."},{"content":"If execution is allowed to continue, <ph id=\"ph1\">`wctomb`</ph> returns <ph id=\"ph2\">`EINVAL`</ph> and sets <ph id=\"ph3\">`errno`</ph> to <ph id=\"ph4\">`EINVAL`</ph>.","pos":[2577,2669],"source":" If execution is allowed to continue, `wctomb` returns `EINVAL` and sets `errno` to `EINVAL`."},{"pos":[2678,2685],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">`wctomb_s`</ph> function converts its <ph id=\"ph2\">`wchar`</ph> argument to the corresponding multibyte character and stores the result at <ph id=\"ph3\">`mbchar`</ph>.","pos":[2689,2818],"source":"The `wctomb_s` function converts its `wchar` argument to the corresponding multibyte character and stores the result at `mbchar`."},{"content":"You can call the function from any point in any program.","pos":[2819,2875]},{"content":"If <ph id=\"ph1\">`wctomb_s`</ph> converts the wide character to a multibyte character, it puts the number of bytes (which is never greater than <ph id=\"ph2\">`MB_CUR_MAX`</ph>) in the wide character into the integer pointed to by <ph id=\"ph3\">`pRetValue`</ph>.","pos":[2882,3086],"source":"If `wctomb_s` converts the wide character to a multibyte character, it puts the number of bytes (which is never greater than `MB_CUR_MAX`) in the wide character into the integer pointed to by `pRetValue`."},{"content":"If <ph id=\"ph1\">`wchar`</ph> is the wide-character null character (L'\\0'), <ph id=\"ph2\">`wctomb_s`</ph> fills <ph id=\"ph3\">`pRetValue`</ph> with 1.","pos":[3087,3180],"source":" If `wchar` is the wide-character null character (L'\\0'), `wctomb_s` fills `pRetValue` with 1."},{"content":"If the target pointer <ph id=\"ph1\">`mbchar`</ph> is NULL, <ph id=\"ph2\">`wctomb_s`</ph> puts 0 in <ph id=\"ph3\">`pRetValue`</ph>.","pos":[3181,3254],"source":" If the target pointer `mbchar` is NULL, `wctomb_s` puts 0 in `pRetValue`."},{"content":"If the conversion is not possible in the current locale, <ph id=\"ph1\">`wctomb_s`</ph> puts –1 in <ph id=\"ph2\">`pRetValue`</ph>.","pos":[3255,3346],"source":" If the conversion is not possible in the current locale, `wctomb_s` puts –1 in `pRetValue`."},{"content":"<ph id=\"ph1\">`wctomb_s`</ph> uses the current locale for locale-dependent information; <ph id=\"ph2\">`_wctomb_s_l`</ph> is identical except that it uses the locale passed in instead.","pos":[3353,3498],"source":"`wctomb_s` uses the current locale for locale-dependent information; `_wctomb_s_l` is identical except that it uses the locale passed in instead."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Locale<ept id=\"p1\">](../../c-runtime-library/locale.md)</ept>.","pos":[3499,3569],"source":" For more information, see [Locale](../../c-runtime-library/locale.md)."},{"pos":[3578,3590],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"content":"Routine","pos":[3597,3604]},{"content":"Required header","pos":[3605,3620]},{"content":"<ph id=\"ph1\">\\&lt;</ph>stdlib.h&gt;","pos":[3676,3687],"source":"\\<stdlib.h>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>stdlib.h&gt;","pos":[3706,3717],"source":"\\<stdlib.h>"},{"pos":[3725,3849],"content":"For additional compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept> in the Introduction.","source":"For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md) in the Introduction."},{"pos":[3858,3865],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[3869,3932],"content":"This program illustrates the behavior of the <ph id=\"ph1\">`wctomb`</ph> function.","source":"This program illustrates the behavior of the `wctomb` function."},{"pos":[4451,4476],"content":".NET Framework Equivalent","linkify":".NET Framework Equivalent","nodes":[{"content":".NET Framework Equivalent","pos":[0,25]}]},{"content":"Not applicable.","pos":[4480,4495]},{"content":"To call the standard C function, use <ph id=\"ph1\">`PInvoke`</ph>.","pos":[4496,4543],"source":" To call the standard C function, use `PInvoke`."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Platform Invoke Examples<ept id=\"p1\">](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f)</ept>.","pos":[4544,4669],"source":" For more information, see [Platform Invoke Examples](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f)."},{"pos":[4678,4686],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Data Conversion<ept id=\"p1\">](../../c-runtime-library/data-conversion.md)</ept><ph id=\"ph1\"> </ph>","pos":[4690,4752],"source":"[Data Conversion](../../c-runtime-library/data-conversion.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Locale<ept id=\"p1\">](../../c-runtime-library/locale.md)</ept><ph id=\"ph1\"> </ph>","pos":[4755,4800],"source":" [Locale](../../c-runtime-library/locale.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_mbclen, mblen, _mblen_l<ept id=\"p1\">](../../c-runtime-library/reference/mbclen-mblen-mblen-l.md)</ept><ph id=\"ph1\"> </ph>","pos":[4803,4890],"source":" [_mbclen, mblen, _mblen_l](../../c-runtime-library/reference/mbclen-mblen-mblen-l.md) "},{"content":"<bpt id=\"p1\"> [</bpt>mbstowcs, _mbstowcs_l<ept id=\"p1\">](../../c-runtime-library/reference/mbstowcs-mbstowcs-l.md)</ept><ph id=\"ph1\"> </ph>","pos":[4893,4976],"source":" [mbstowcs, _mbstowcs_l](../../c-runtime-library/reference/mbstowcs-mbstowcs-l.md) "},{"content":"<bpt id=\"p1\"> [</bpt>mbtowc, _mbtowc_l<ept id=\"p1\">](../../c-runtime-library/reference/mbtowc-mbtowc-l.md)</ept><ph id=\"ph1\"> </ph>","pos":[4979,5054],"source":" [mbtowc, _mbtowc_l](../../c-runtime-library/reference/mbtowc-mbtowc-l.md) "},{"content":"<bpt id=\"p1\"> [</bpt>wcstombs, _wcstombs_l<ept id=\"p1\">](../../c-runtime-library/reference/wcstombs-wcstombs-l.md)</ept><ph id=\"ph1\"> </ph>","pos":[5057,5140],"source":" [wcstombs, _wcstombs_l](../../c-runtime-library/reference/wcstombs-wcstombs-l.md) "},{"content":"<bpt id=\"p1\"> [</bpt>WideCharToMultiByte<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/dd374130)</ept>","pos":[5143,5225],"source":" [WideCharToMultiByte](http://msdn.microsoft.com/library/windows/desktop/dd374130)"}],"content":"---\ntitle: \"wctomb_s, _wctomb_s_l | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"_wctomb_s_l\"\n  - \"wctomb_s\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\n  - \"api-ms-win-crt-convert-l1-1-0.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"wctomb_s\"\n  - \"_wctomb_s_l\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"wctomb_s function\"\n  - \"wctomb_s_l function\"\n  - \"string conversion, wide characters\"\n  - \"wide characters, converting\"\n  - \"_wctomb_s_l function\"\n  - \"characters, converting\"\n  - \"string conversion, multibyte character strings\"\nms.assetid: 7e94a888-deed-4dbd-b5e9-d4a0455538b8\ncaps.latest.revision: 18\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# wctomb_s, _wctomb_s_l\nConverts a wide character to the corresponding multibyte character. A version of [wctomb, _wctomb_l](../../c-runtime-library/reference/wctomb-wctomb-l.md) with security enhancements as described in [Security Features in the CRT](../../c-runtime-library/security-features-in-the-crt.md).  \n  \n## Syntax  \n  \n```  \nerrno_t wctomb_s(  \n   int *pRetValue,  \n   char *mbchar,  \n   size_t sizeInBytes,  \n   wchar_t wchar   \n);  \nerrno_t _wctomb_s_l(  \n   int *pRetValue,  \n   char *mbchar,  \n   size_t sizeInBytes,  \n   wchar_t wchar,  \n   _locale_t locale  \n);  \n```  \n  \n#### Parameters  \n [out] `pRetValue`  \n The number of bytes, or a code indicating the result.  \n  \n [out] `mbchar`  \n The address of a multibyte character.  \n  \n [in] `sizeInBytes`  \n Size of the buffer `mbchar`.  \n  \n [in] `wchar`  \n A wide character.  \n  \n [in] `locale`  \n The locale to use.  \n  \n## Return Value  \n Zero if successful, an error code on failure.  \n  \n Error Conditions  \n  \n|`mbchar`|`sizeInBytes`|Return value|`pRetValue`|  \n|--------------|-------------------|------------------|-----------------|  \n|`NULL`|>0|`EINVAL`|not modified|  \n|any|>`INT_MAX`|`EINVAL`|not modified|  \n|any|too small|`EINVAL`|not modified|  \n  \n If any of the above error conditions occurs, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md). If execution is allowed to continue, `wctomb` returns `EINVAL` and sets `errno` to `EINVAL`.  \n  \n## Remarks  \n The `wctomb_s` function converts its `wchar` argument to the corresponding multibyte character and stores the result at `mbchar`. You can call the function from any point in any program.  \n  \n If `wctomb_s` converts the wide character to a multibyte character, it puts the number of bytes (which is never greater than `MB_CUR_MAX`) in the wide character into the integer pointed to by `pRetValue`. If `wchar` is the wide-character null character (L'\\0'), `wctomb_s` fills `pRetValue` with 1. If the target pointer `mbchar` is NULL, `wctomb_s` puts 0 in `pRetValue`. If the conversion is not possible in the current locale, `wctomb_s` puts –1 in `pRetValue`.  \n  \n `wctomb_s` uses the current locale for locale-dependent information; `_wctomb_s_l` is identical except that it uses the locale passed in instead. For more information, see [Locale](../../c-runtime-library/locale.md).  \n  \n## Requirements  \n  \n|Routine|Required header|  \n|-------------|---------------------|  \n|`wctomb_s`|\\<stdlib.h>|  \n|`_wctomb_s_l`|\\<stdlib.h>|  \n  \n For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md) in the Introduction.  \n  \n## Example  \n This program illustrates the behavior of the `wctomb` function.  \n  \n```  \n// crt_wctomb_s.cpp  \n#include <stdio.h>  \n#include <stdlib.h>  \n  \nint main( void )  \n{  \n    int i;  \n    wchar_t wc = L'a';  \n    char *pmb = (char *)malloc( MB_CUR_MAX );  \n  \n    printf_s( \"Convert a wide character:\\n\" );  \n    wctomb_s( &i, pmb, MB_CUR_MAX, wc );  \n    printf_s( \"   Characters converted: %u\\n\", i );  \n    printf_s( \"   Multibyte character: %.1s\\n\\n\", pmb );  \n}  \n```  \n  \n```Output  \nConvert a wide character:  \n   Characters converted: 1  \n   Multibyte character: a  \n```  \n  \n## .NET Framework Equivalent  \n Not applicable. To call the standard C function, use `PInvoke`. For more information, see [Platform Invoke Examples](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f).  \n  \n## See Also  \n [Data Conversion](../../c-runtime-library/data-conversion.md)   \n [Locale](../../c-runtime-library/locale.md)   \n [_mbclen, mblen, _mblen_l](../../c-runtime-library/reference/mbclen-mblen-mblen-l.md)   \n [mbstowcs, _mbstowcs_l](../../c-runtime-library/reference/mbstowcs-mbstowcs-l.md)   \n [mbtowc, _mbtowc_l](../../c-runtime-library/reference/mbtowc-mbtowc-l.md)   \n [wcstombs, _wcstombs_l](../../c-runtime-library/reference/wcstombs-wcstombs-l.md)   \n [WideCharToMultiByte](http://msdn.microsoft.com/library/windows/desktop/dd374130)"}