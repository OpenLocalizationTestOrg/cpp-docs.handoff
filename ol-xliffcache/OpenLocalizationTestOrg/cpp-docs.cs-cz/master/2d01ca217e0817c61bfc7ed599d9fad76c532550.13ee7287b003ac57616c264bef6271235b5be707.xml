{"nodes":[{"pos":[12,58],"content":"Specifying Custom Build Tools | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Specifying Custom Build Tools | Microsoft Docs","pos":[0,46]}]},{"content":"Specifying Custom Build Tools","pos":[1153,1182]},{"content":"A <bpt id=\"p1\">*</bpt>custom build tool<ept id=\"p1\">*</ept> provides the build system with the information it needs to build specific input files.","pos":[1183,1291],"source":"A *custom build tool* provides the build system with the information it needs to build specific input files."},{"content":"A custom build tool specifies a command to run, a list of input files, a list of output files that are generated by the command, and an optional description of the tool.","pos":[1292,1461]},{"pos":[1468,1658],"content":"For general information about custom build tools and custom build steps, see <bpt id=\"p1\">[</bpt>Understanding Custom Build Steps and Build Events<ept id=\"p1\">](../ide/understanding-custom-build-steps-and-build-events.md)</ept>.","source":"For general information about custom build tools and custom build steps, see [Understanding Custom Build Steps and Build Events](../ide/understanding-custom-build-steps-and-build-events.md)."},{"content":"To specify a custom build tool","pos":[1668,1698]},{"content":"Open the project's <bpt id=\"p1\">**</bpt>Property Pages<ept id=\"p1\">**</ept> dialog box.","pos":[1708,1757],"source":"Open the project's **Property Pages** dialog box."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Setting Visual C++ Project Properties<ept id=\"p1\">](../ide/working-with-project-properties.md)</ept>.","pos":[1758,1867],"source":" For more information, see [Setting Visual C++ Project Properties](../ide/working-with-project-properties.md)."},{"content":"Click <bpt id=\"p1\">**</bpt>Configuration Properties<ept id=\"p1\">**</ept> to enable the <bpt id=\"p2\">**</bpt>Configuration<ept id=\"p2\">**</ept> box.","pos":[1877,1948],"source":"Click **Configuration Properties** to enable the **Configuration** box."},{"content":"In the <bpt id=\"p1\">**</bpt>Configuration<ept id=\"p1\">**</ept> box, select the configuration for which you want to specify a custom build tool.","pos":[1949,2054],"source":" In the **Configuration** box, select the configuration for which you want to specify a custom build tool."},{"pos":[2064,2138],"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, select the input file for the custom build tool.","source":"In **Solution Explorer**, select the input file for the custom build tool."},{"content":"If the <bpt id=\"p1\">**</bpt>Custom Build Tool<ept id=\"p1\">**</ept> folder does not appear, the file extension of the file you selected is associated with a default tool.","pos":[2149,2280],"source":"If the **Custom Build Tool** folder does not appear, the file extension of the file you selected is associated with a default tool."},{"content":"For example, the default tool for .c and .cpp files is the compiler.","pos":[2281,2349]},{"content":"To override a default tool setting, in the <bpt id=\"p1\">**</bpt>Configuration Properties<ept id=\"p1\">**</ept> node, in the <bpt id=\"p2\">**</bpt>General<ept id=\"p2\">**</ept> folder, in the <bpt id=\"p3\">**</bpt>Item Type<ept id=\"p3\">**</ept> property, click <bpt id=\"p4\">**</bpt>Custom Build Tool<ept id=\"p4\">**</ept>.","pos":[2350,2514],"source":" To override a default tool setting, in the **Configuration Properties** node, in the **General** folder, in the **Item Type** property, click **Custom Build Tool**."},{"content":"Click <bpt id=\"p1\">**</bpt>Apply<ept id=\"p1\">**</ept> and the <bpt id=\"p2\">**</bpt>Custom Build Tool<ept id=\"p2\">**</ept> node is displayed.","pos":[2515,2579],"source":" Click **Apply** and the **Custom Build Tool** node is displayed."},{"pos":[2589,2712],"content":"In the <bpt id=\"p1\">**</bpt>Custom Build Tool<ept id=\"p1\">**</ept> node, in the <bpt id=\"p2\">**</bpt>General<ept id=\"p2\">**</ept> folder, specify the properties associated with the custom build tool:","source":"In the **Custom Build Tool** node, in the **General** folder, specify the properties associated with the custom build tool:"},{"content":"In <bpt id=\"p1\">**</bpt>Additional Dependencies<ept id=\"p1\">**</ept>, specify any additional files beyond the one for which the custom build tool is being defined (the file associated with the custom build tool is implicitly considered an input to the tool).","pos":[2726,2946],"source":"In **Additional Dependencies**, specify any additional files beyond the one for which the custom build tool is being defined (the file associated with the custom build tool is implicitly considered an input to the tool)."},{"content":"Having additional input files is not a requirement for a custom build tool.","pos":[2947,3022]},{"content":"If you have more than one additional input, separate them with semicolons.","pos":[3023,3097]},{"content":"If an <bpt id=\"p1\">**</bpt>Additional Dependencies<ept id=\"p1\">**</ept> file's date is later than the input file, then the custom build tool is run.","pos":[3112,3222],"source":"If an **Additional Dependencies** file's date is later than the input file, then the custom build tool is run."},{"content":"If all of the <bpt id=\"p1\">**</bpt>Additional Dependencies<ept id=\"p1\">**</ept> files are older than the input file, and the input file is older than the <bpt id=\"p2\">**</bpt>Outputs<ept id=\"p2\">**</ept> property file, then the custom build tool is not run.","pos":[3223,3404],"source":" If all of the **Additional Dependencies** files are older than the input file, and the input file is older than the **Outputs** property file, then the custom build tool is not run."},{"content":"For example, suppose you have a custom build tool that takes MyInput.x as input and generates MyInput.cpp, and that MyInput.x includes a header file, MyHeader.h.","pos":[3419,3580]},{"content":"You can specify MyHeader.h as an input dependency to MyInput.x, and the build system will build MyInput.cpp when it is out-of-date with respect to MyInput.x or MyHeader.h.","pos":[3581,3752]},{"content":"Input dependencies can also ensure that your custom build tools run in the order you need them to.","pos":[3767,3865]},{"content":"In the preceding example, suppose that MyHeader.h is actually the output of a custom build tool.","pos":[3866,3962]},{"content":"Because MyHeader.h is a dependency of MyInput.x, the build system will first build Myheader.h before running the custom build tool on MyInput.x.","pos":[3963,4107]},{"content":"In <bpt id=\"p1\">**</bpt>Command Line<ept id=\"p1\">**</ept>, specify a command as if you were specifying it at the command prompt.","pos":[4121,4211],"source":"In **Command Line**, specify a command as if you were specifying it at the command prompt."},{"content":"Specify a valid command or batch file, and any required input or output files.","pos":[4212,4290]},{"content":"Specify the <bpt id=\"p1\">**</bpt>call<ept id=\"p1\">**</ept> batch command before the name of a batch file to guarantee that all subsequent commands are executed.","pos":[4291,4413],"source":" Specify the **call** batch command before the name of a batch file to guarantee that all subsequent commands are executed."},{"content":"Multiple input and output files can be specified symbolically with MSBuild macros.","pos":[4428,4510]},{"content":"specifying the location of files, or the names of sets of files, see <bpt id=\"p1\">[</bpt>Common Macros for Build Commands and Properties<ept id=\"p1\">](../ide/common-macros-for-build-commands-and-properties.md)</ept>.","pos":[4574,4752],"source":" specifying the location of files, or the names of sets of files, see [Common Macros for Build Commands and Properties](../ide/common-macros-for-build-commands-and-properties.md)."},{"content":"Because the '%' character is reserved by MSBuild, if you specify an environment variable replace each <bpt id=\"p1\">**</bpt><ph id=\"ph1\">%</ph><ept id=\"p1\">**</ept> escape character with the <bpt id=\"p2\">**</bpt>%25<ept id=\"p2\">**</ept> hexadecimal escape sequence.","pos":[4767,4937],"source":"Because the '%' character is reserved by MSBuild, if you specify an environment variable replace each **%** escape character with the **%25** hexadecimal escape sequence."},{"content":"For example, replace <bpt id=\"p1\">**</bpt>%WINDIR%<ept id=\"p1\">**</ept> with <bpt id=\"p2\">**</bpt>%25WINDIR%25<ept id=\"p2\">**</ept>.","pos":[4938,4994],"source":" For example, replace **%WINDIR%** with **%25WINDIR%25**."},{"content":"MSBuild replaces each <bpt id=\"p1\">**</bpt>%25<ept id=\"p1\">**</ept> sequence with the <bpt id=\"p2\">**</bpt><ph id=\"ph1\">%</ph><ept id=\"p2\">**</ept> character before it accesses the environment variable.","pos":[4995,5103],"source":" MSBuild replaces each **%25** sequence with the **%** character before it accesses the environment variable."},{"content":"In <bpt id=\"p1\">**</bpt>Description<ept id=\"p1\">**</ept>, type a descriptive message about this custom build tool.","pos":[5117,5193],"source":"In **Description**, type a descriptive message about this custom build tool."},{"content":"The message is printed to the <bpt id=\"p1\">**</bpt>Output<ept id=\"p1\">**</ept> window when the build system processes this tool.","pos":[5194,5284],"source":" The message is printed to the **Output** window when the build system processes this tool."},{"content":"In <bpt id=\"p1\">**</bpt>Outputs<ept id=\"p1\">**</ept>, specify the name of the output file.","pos":[5298,5350],"source":"In **Outputs**, specify the name of the output file."},{"content":"This is a required entry; without a value for this property, the custom build tool will not run.","pos":[5351,5447]},{"content":"If a custom build tool has more than one output, separate file names with a semicolon.","pos":[5448,5534]},{"content":"The name of the output file should be the same as it is specified in the <bpt id=\"p1\">**</bpt>Command Line<ept id=\"p1\">**</ept> property.","pos":[5549,5648],"source":"The name of the output file should be the same as it is specified in the **Command Line** property."},{"content":"The project build system will look for the file and check its date.","pos":[5649,5716]},{"content":"If the output file is newer than the input file or if the output file is not found, the custom build tool is run.","pos":[5717,5830]},{"content":"If all of the <bpt id=\"p1\">**</bpt>Additional Dependencies<ept id=\"p1\">**</ept> files are older than the input file, and the input file is older than the file specified in the <bpt id=\"p2\">**</bpt>Outputs<ept id=\"p2\">**</ept> property, the custom build tool is not run.","pos":[5831,6024],"source":" If all of the **Additional Dependencies** files are older than the input file, and the input file is older than the file specified in the **Outputs** property, the custom build tool is not run."},{"content":"If you want the build system to operate on an output file generated by the custom build tool, you must manually add it to the project.","pos":[6031,6165]},{"content":"The custom build tool will update the file during the build.","pos":[6166,6226]},{"content":"Example","pos":[6235,6242]},{"content":"Assume that you want to include in your project a file that is named parser.l.","pos":[6246,6324]},{"content":"You want a lexical analyzer to process parser.l to produce a .c file that has the same base name (parser.c).","pos":[6325,6433]},{"content":"First, you add parser.l and parser.c to the project.","pos":[6440,6492]},{"content":"If the files do not yet exist, you just add a reference to the files.","pos":[6493,6562]},{"content":"You create a custom build tool for parser.l and type the following in the <bpt id=\"p1\">**</bpt>Commands<ept id=\"p1\">**</ept> property:","pos":[6563,6659],"source":" You create a custom build tool for parser.l and type the following in the **Commands** property:"},{"content":"This command will run the lexical analyzer on parser.l and output parser.c to the project directory.","pos":[6717,6817]},{"pos":[6824,6872],"content":"In the <bpt id=\"p1\">**</bpt>Outputs<ept id=\"p1\">**</ept> property, type the following:","source":"In the **Outputs** property, type the following:"},{"content":"When you build the project, the build system compares the timestamps of parser.l and parser.c.","pos":[6912,7006]},{"content":"If parser.l is more recent, or if parser.c doesn't exist, the build system runs the value of the <bpt id=\"p1\">**</bpt>Command Line<ept id=\"p1\">**</ept> property to bring parser.c up to date.","pos":[7007,7159],"source":" If parser.l is more recent, or if parser.c doesn't exist, the build system runs the value of the **Command Line** property to bring parser.c up to date."},{"content":"Since parser.c was also added to the project, the build system then compiles parser.c.","pos":[7160,7246]},{"content":"See Also","pos":[7255,7263]},{"content":"Common Macros for Build Commands and Properties","pos":[7268,7315]},{"content":"Troubleshooting Build Customizations","pos":[7381,7417]}],"content":"---\ntitle: \"Specifying Custom Build Tools | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"VC.Project.VCCustomBuildTool.CustomBuildToolBeforeTargets\"\n  - \"VC.Project.VCCustomBuildTool.Outputs\"\n  - \"VC.Project.VCCustomBuildTool.Command\"\n  - \"VC.Project.VCCustomBuildTool.CommandLine\"\n  - \"VC.Project.VCCustomBuildTool.AdditionalDependencies\"\n  - \"VC.Project.VCCustomBuildTool.Message\"\n  - \"VC.Project.VCCustomBuildTool.CustomBuildToolAfterTargets\"\n  - \"VC.Project.VCCustomBuildTool.Description\"\n  - \"VC.Project.VCCustomBuildTool.AdditionalInputs\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"build tools (C++), specifying\"\n  - \"custom build tools (C++), specifying\"\n  - \"builds (C++), custom build tools\"\nms.assetid: e5161946-8002-418d-991e-219e6a8586f5\ncaps.latest.revision: 11\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Specifying Custom Build Tools\nA *custom build tool* provides the build system with the information it needs to build specific input files. A custom build tool specifies a command to run, a list of input files, a list of output files that are generated by the command, and an optional description of the tool.  \n  \n For general information about custom build tools and custom build steps, see [Understanding Custom Build Steps and Build Events](../ide/understanding-custom-build-steps-and-build-events.md).  \n  \n### To specify a custom build tool  \n  \n1.  Open the project's **Property Pages** dialog box. For more information, see [Setting Visual C++ Project Properties](../ide/working-with-project-properties.md).  \n  \n2.  Click **Configuration Properties** to enable the **Configuration** box. In the **Configuration** box, select the configuration for which you want to specify a custom build tool.  \n  \n3.  In **Solution Explorer**, select the input file for the custom build tool.  \n  \n     If the **Custom Build Tool** folder does not appear, the file extension of the file you selected is associated with a default tool. For example, the default tool for .c and .cpp files is the compiler. To override a default tool setting, in the **Configuration Properties** node, in the **General** folder, in the **Item Type** property, click **Custom Build Tool**. Click **Apply** and the **Custom Build Tool** node is displayed.  \n  \n4.  In the **Custom Build Tool** node, in the **General** folder, specify the properties associated with the custom build tool:  \n  \n    -   In **Additional Dependencies**, specify any additional files beyond the one for which the custom build tool is being defined (the file associated with the custom build tool is implicitly considered an input to the tool). Having additional input files is not a requirement for a custom build tool. If you have more than one additional input, separate them with semicolons.  \n  \n         If an **Additional Dependencies** file's date is later than the input file, then the custom build tool is run. If all of the **Additional Dependencies** files are older than the input file, and the input file is older than the **Outputs** property file, then the custom build tool is not run.  \n  \n         For example, suppose you have a custom build tool that takes MyInput.x as input and generates MyInput.cpp, and that MyInput.x includes a header file, MyHeader.h. You can specify MyHeader.h as an input dependency to MyInput.x, and the build system will build MyInput.cpp when it is out-of-date with respect to MyInput.x or MyHeader.h.  \n  \n         Input dependencies can also ensure that your custom build tools run in the order you need them to. In the preceding example, suppose that MyHeader.h is actually the output of a custom build tool. Because MyHeader.h is a dependency of MyInput.x, the build system will first build Myheader.h before running the custom build tool on MyInput.x.  \n  \n    -   In **Command Line**, specify a command as if you were specifying it at the command prompt. Specify a valid command or batch file, and any required input or output files. Specify the **call** batch command before the name of a batch file to guarantee that all subsequent commands are executed.  \n  \n         Multiple input and output files can be specified symbolically with MSBuild macros. [!INCLUDE[crabout](../build/reference/includes/crabout_md.md)] specifying the location of files, or the names of sets of files, see [Common Macros for Build Commands and Properties](../ide/common-macros-for-build-commands-and-properties.md).  \n  \n         Because the '%' character is reserved by MSBuild, if you specify an environment variable replace each **%** escape character with the **%25** hexadecimal escape sequence. For example, replace **%WINDIR%** with **%25WINDIR%25**. MSBuild replaces each **%25** sequence with the **%** character before it accesses the environment variable.  \n  \n    -   In **Description**, type a descriptive message about this custom build tool. The message is printed to the **Output** window when the build system processes this tool.  \n  \n    -   In **Outputs**, specify the name of the output file. This is a required entry; without a value for this property, the custom build tool will not run. If a custom build tool has more than one output, separate file names with a semicolon.  \n  \n         The name of the output file should be the same as it is specified in the **Command Line** property. The project build system will look for the file and check its date. If the output file is newer than the input file or if the output file is not found, the custom build tool is run. If all of the **Additional Dependencies** files are older than the input file, and the input file is older than the file specified in the **Outputs** property, the custom build tool is not run.  \n  \n If you want the build system to operate on an output file generated by the custom build tool, you must manually add it to the project. The custom build tool will update the file during the build.  \n  \n## Example  \n Assume that you want to include in your project a file that is named parser.l. You want a lexical analyzer to process parser.l to produce a .c file that has the same base name (parser.c).  \n  \n First, you add parser.l and parser.c to the project. If the files do not yet exist, you just add a reference to the files. You create a custom build tool for parser.l and type the following in the **Commands** property:  \n  \n```  \nlexer %(FullPath) .\\%(Filename).c  \n```  \n  \n This command will run the lexical analyzer on parser.l and output parser.c to the project directory.  \n  \n In the **Outputs** property, type the following:  \n  \n```  \n.\\%(Filename).c  \n```  \n  \n When you build the project, the build system compares the timestamps of parser.l and parser.c. If parser.l is more recent, or if parser.c doesn't exist, the build system runs the value of the **Command Line** property to bring parser.c up to date. Since parser.c was also added to the project, the build system then compiles parser.c.  \n  \n## See Also  \n [Common Macros for Build Commands and Properties](../ide/common-macros-for-build-commands-and-properties.md)   \n [Troubleshooting Build Customizations](../ide/troubleshooting-build-customizations.md)"}