{"nodes":[{"pos":[12,74],"content":"-GT (Support Fiber-Safe Thread-Local Storage) | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"-GT (Support Fiber-Safe Thread-Local Storage) | Microsoft Docs","pos":[0,62]}]},{"content":"/GT (Support Fiber-Safe Thread-Local Storage)","pos":[904,949]},{"pos":[950,1076],"content":"Supports fiber safety for data allocated using static thread-local storage, that is, data allocated with <ph id=\"ph1\">`__declspec(thread)`</ph>.","source":"Supports fiber safety for data allocated using static thread-local storage, that is, data allocated with `__declspec(thread)`."},{"content":"Syntax","pos":[1085,1091]},{"content":"Remarks","pos":[1121,1128]},{"content":"Data declared with <ph id=\"ph1\">`__declspec(thread)`</ph> is referenced through a thread-local storage (TLS) array.","pos":[1132,1229],"source":"Data declared with `__declspec(thread)` is referenced through a thread-local storage (TLS) array."},{"content":"The TLS array is an array of addresses that the system maintains for each thread.","pos":[1230,1311]},{"content":"Each address in this array gives the location of thread-local storage data.","pos":[1312,1387]},{"content":"A fiber is a lightweight object that consists of a stack and a register context and can be scheduled on various threads.","pos":[1394,1514]},{"content":"A fiber can run on any thread.","pos":[1515,1545]},{"content":"Because a fiber may get swapped out and restarted later on a different thread, the address of the TLS array must not be cached or optimized as a common subexpression across a function call (see the <bpt id=\"p1\">[</bpt>/Og (Global Optimizations)<ept id=\"p1\">](../../build/reference/og-global-optimizations.md)</ept> option for details).","pos":[1546,1843],"source":" Because a fiber may get swapped out and restarted later on a different thread, the address of the TLS array must not be cached or optimized as a common subexpression across a function call (see the [/Og (Global Optimizations)](../../build/reference/og-global-optimizations.md) option for details)."},{"content":"<bpt id=\"p1\">**</bpt>/GT<ept id=\"p1\">**</ept> prevents such optimizations.","pos":[1844,1880],"source":"**/GT** prevents such optimizations."},{"content":"To set this compiler option in the Visual Studio development environment","pos":[1890,1962]},{"content":"Open the project's <bpt id=\"p1\">**</bpt>Property Pages<ept id=\"p1\">**</ept> dialog box.","pos":[1972,2021],"source":"Open the project's **Property Pages** dialog box."},{"content":"For details, see <bpt id=\"p1\">[</bpt>Working with Project Properties<ept id=\"p1\">](../../ide/working-with-project-properties.md)</ept>.","pos":[2022,2119],"source":" For details, see [Working with Project Properties](../../ide/working-with-project-properties.md)."},{"pos":[2129,2156],"content":"Click the <bpt id=\"p1\">**</bpt>C/C++<ept id=\"p1\">**</ept> folder.","source":"Click the **C/C++** folder."},{"pos":[2166,2207],"content":"Click the <bpt id=\"p1\">**</bpt>Optimization<ept id=\"p1\">**</ept> property page.","source":"Click the **Optimization** property page."},{"pos":[2217,2273],"content":"Modify the <bpt id=\"p1\">**</bpt>Enable Fiber-safe Optimizations<ept id=\"p1\">**</ept> property.","source":"Modify the **Enable Fiber-safe Optimizations** property."},{"content":"To set this compiler option programmatically","pos":[2283,2327]},{"content":"See &lt;xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.EnableFiberSafeOptimizations%2A&gt;.","pos":[2337,2436],"source":"See <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.EnableFiberSafeOptimizations%2A>."},{"content":"See Also","pos":[2445,2453]},{"content":"Compiler Options","pos":[2458,2474]},{"content":"Setting Compiler Options","pos":[2524,2548]}],"content":"---\ntitle: \"-GT (Support Fiber-Safe Thread-Local Storage) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"VC.Project.VCCLCompilerTool.EnableFiberSafeOptimizations\"\n  - \"/gt\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"/GT compiler option [C++]\"\n  - \"GT compiler option [C++]\"\n  - \"thread-local storage\"\n  - \"static thread-local storage and fiber safety\"\n  - \"-GT compiler option [C++]\"\n  - \"fiber-safe static thread-local storage compiler option [C++]\"\nms.assetid: 071fec79-c701-432b-9970-457344133159\ncaps.latest.revision: 10\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# /GT (Support Fiber-Safe Thread-Local Storage)\nSupports fiber safety for data allocated using static thread-local storage, that is, data allocated with `__declspec(thread)`.  \n  \n## Syntax  \n  \n```  \n/GT  \n```  \n  \n## Remarks  \n Data declared with `__declspec(thread)` is referenced through a thread-local storage (TLS) array. The TLS array is an array of addresses that the system maintains for each thread. Each address in this array gives the location of thread-local storage data.  \n  \n A fiber is a lightweight object that consists of a stack and a register context and can be scheduled on various threads. A fiber can run on any thread. Because a fiber may get swapped out and restarted later on a different thread, the address of the TLS array must not be cached or optimized as a common subexpression across a function call (see the [/Og (Global Optimizations)](../../build/reference/og-global-optimizations.md) option for details). **/GT** prevents such optimizations.  \n  \n### To set this compiler option in the Visual Studio development environment  \n  \n1.  Open the project's **Property Pages** dialog box. For details, see [Working with Project Properties](../../ide/working-with-project-properties.md).  \n  \n2.  Click the **C/C++** folder.  \n  \n3.  Click the **Optimization** property page.  \n  \n4.  Modify the **Enable Fiber-safe Optimizations** property.  \n  \n### To set this compiler option programmatically  \n  \n-   See <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.EnableFiberSafeOptimizations%2A>.  \n  \n## See Also  \n [Compiler Options](../../build/reference/compiler-options.md)   \n [Setting Compiler Options](../../build/reference/setting-compiler-options.md)"}