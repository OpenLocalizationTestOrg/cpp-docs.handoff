{"nodes":[{"pos":[12,47],"content":"restrict (C++ AMP) | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"restrict (C++ AMP) | Microsoft Docs","pos":[0,35]}]},{"content":"restrict (C++ AMP)","pos":[635,653]},{"content":"The restriction specifier can be applied to function and lambda declarations.","pos":[654,731]},{"content":"It enforces restrictions on the code in the function and on the behavior of the function in applications that use the C++ Accelerated Massive Parallelism (C++ AMP) runtime.","pos":[732,904]},{"pos":[912,1062],"content":"[!NOTE]\n For information about the `restrict` keyword that is part of the `__declspec` storage-class attributes, see [restrict](../cpp/restrict.md).","leadings":["","> "],"nodes":[{"content":"For information about the <ph id=\"ph1\">`restrict`</ph> keyword that is part of the <ph id=\"ph2\">`__declspec`</ph> storage-class attributes, see <bpt id=\"p1\">[</bpt>restrict<ept id=\"p1\">](../cpp/restrict.md)</ept>.","pos":[9,148],"source":" For information about the `restrict` keyword that is part of the `__declspec` storage-class attributes, see [restrict](../cpp/restrict.md)."}]},{"pos":[1069,1117],"content":"The <ph id=\"ph1\">`restrict`</ph> clause takes the following forms:","source":"The `restrict` clause takes the following forms:"},{"content":"Clause","pos":[1124,1130]},{"content":"Description","pos":[1131,1142]},{"content":"The function can use the full C++ language.","pos":[1198,1241]},{"content":"Only other functions that are declared by using restrict(cpu) functions can call the function.","pos":[1242,1336]},{"content":"The function can only use the subset of the C++ language that C++ AMP can accelerate.","pos":[1357,1442]},{"pos":[1447,1497],"content":"A sequence of <ph id=\"ph1\">`restrict(cpu)`</ph> and <ph id=\"ph2\">`restrict(amp)`</ph>.","source":"A sequence of `restrict(cpu)` and `restrict(amp)`."},{"content":"The function must adhere to the limitations of both <ph id=\"ph1\">`restrict(cpu)`</ph> and   <ph id=\"ph2\">`restrict(amp)`</ph>.","pos":[1498,1588],"source":"The function must adhere to the limitations of both `restrict(cpu)` and   `restrict(amp)`."},{"content":"The function can be called by functions that are declared by using <ph id=\"ph1\">`restrict(cpu)`</ph>,  <ph id=\"ph2\">`restrict(amp)`</ph>, <ph id=\"ph3\">`restrict(cpu, amp)`</ph>, or <ph id=\"ph4\">`restrict(amp, cpu)`</ph>.","pos":[1589,1737],"source":" The function can be called by functions that are declared by using `restrict(cpu)`,  `restrict(amp)`, `restrict(cpu, amp)`, or `restrict(amp, cpu)`."},{"content":"The form <ph id=\"ph1\">`restrict(A) restrict(B)`</ph> can be written as <ph id=\"ph2\">`restrict(A,B)`</ph>.","pos":[1750,1819],"source":" The form `restrict(A) restrict(B)` can be written as `restrict(A,B)`."},{"content":"Remarks","pos":[1829,1836]},{"content":"The <ph id=\"ph1\">`restrict`</ph> keyword is a contextual keyword.","pos":[1840,1887],"source":"The `restrict` keyword is a contextual keyword."},{"content":"The restriction specifiers, <ph id=\"ph1\">`cpu`</ph> and <ph id=\"ph2\">`amp`</ph> are not reserved words.","pos":[1888,1955],"source":" The restriction specifiers, `cpu` and `amp` are not reserved words."},{"content":"The list of specifiers is not extensible.","pos":[1956,1997]},{"content":"A function that does not have a <ph id=\"ph1\">`restrict`</ph> clause is the same as a function that has the <ph id=\"ph2\">`restrict(cpu)`</ph> clause.","pos":[1998,2110],"source":" A function that does not have a `restrict` clause is the same as a function that has the `restrict(cpu)` clause."},{"pos":[2117,2194],"content":"A function that has the <ph id=\"ph1\">`restrict(amp)`</ph> clause has the following limitations:","source":"A function that has the `restrict(amp)` clause has the following limitations:"},{"pos":[2204,2278],"content":"The function can call only functions that have the <ph id=\"ph1\">`restrict(amp)`</ph> clause.","source":"The function can call only functions that have the `restrict(amp)` clause."},{"content":"The function must be inlinable.","pos":[2288,2319]},{"content":"The function can declare only <ph id=\"ph1\">`int`</ph>, <ph id=\"ph2\">`unsigned int`</ph>, <ph id=\"ph3\">`float`</ph>, and <ph id=\"ph4\">`double`</ph> variables, and classes and structures that contain only these types.","pos":[2329,2472],"source":"The function can declare only `int`, `unsigned int`, `float`, and `double` variables, and classes and structures that contain only these types."},{"content":"is also allowed, but it must be 4-byte-aligned if you use it in a compound type.","pos":[2480,2560]},{"content":"Lambda functions cannot capture by reference and cannot capture pointers.","pos":[2570,2643]},{"content":"References and single-indirection pointers are supported only as local variables, function arguments, and return types.","pos":[2653,2772]},{"content":"The following are not allowed:","pos":[2782,2812]},{"content":"Recursion.","pos":[2826,2836]},{"pos":[2850,2921],"content":"Variables declared with the <bpt id=\"p1\">[</bpt>volatile<ept id=\"p1\">](../cpp/volatile-cpp.md)</ept> keyword.","source":"Variables declared with the [volatile](../cpp/volatile-cpp.md) keyword."},{"content":"Virtual functions.","pos":[2935,2953]},{"content":"Pointers to functions.","pos":[2967,2989]},{"content":"Pointers to member functions.","pos":[3003,3032]},{"content":"Pointers in structures.","pos":[3046,3069]},{"content":"Pointers to pointers.","pos":[3083,3104]},{"pos":[3125,3136],"content":"statements."},{"content":"Labeled statements.","pos":[3150,3169]},{"pos":[3188,3221],"content":", <ph id=\"ph1\">`catch`</ph>, or <ph id=\"ph2\">`throw`</ph> statements.","source":", `catch`, or `throw` statements."},{"content":"Global variables.","pos":[3235,3252]},{"content":"Static variables.","pos":[3266,3283]},{"content":"Use <bpt id=\"p1\">[</bpt>tile_static Keyword<ept id=\"p1\">](../cpp/tile-static-keyword.md)</ept> instead.","pos":[3284,3349],"source":" Use [tile_static Keyword](../cpp/tile-static-keyword.md) instead."},{"pos":[3378,3384],"content":"casts."},{"pos":[3398,3420],"content":"The <ph id=\"ph1\">`typeid`</ph> operator.","source":"The `typeid` operator."},{"content":"asm declarations.","pos":[3434,3451]},{"content":"Varargs.","pos":[3465,3473]},{"pos":[3480,3604],"content":"For a discussion of function limitations, see <bpt id=\"p1\">[</bpt>restrict(amp) Restrictions<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkId=251089)</ept>.","source":"For a discussion of function limitations, see [restrict(amp) Restrictions](http://go.microsoft.com/fwlink/p/?LinkId=251089)."},{"content":"Example","pos":[3613,3620]},{"pos":[3624,3689],"content":"The following example shows how to use the <ph id=\"ph1\">`restrict(amp)`</ph>clause.","source":"The following example shows how to use the `restrict(amp)`clause."},{"content":"See Also","pos":[4178,4186]},{"content":"C++ AMP (C++ Accelerated Massive Parallelism)","pos":[4191,4236]}],"content":"---\ntitle: \"restrict (C++ AMP) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"language-reference\"\nf1_keywords: \n  - \"cpu_CPP\"\n  - \"amp_CPP\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"restrict clause (C++ AMP)\"\nms.assetid: 07d3291f-7edf-456b-8828-283ac8673661\ncaps.latest.revision: 22\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# restrict (C++ AMP)\nThe restriction specifier can be applied to function and lambda declarations. It enforces restrictions on the code in the function and on the behavior of the function in applications that use the C++ Accelerated Massive Parallelism (C++ AMP) runtime.  \n  \n> [!NOTE]\n>  For information about the `restrict` keyword that is part of the `__declspec` storage-class attributes, see [restrict](../cpp/restrict.md).  \n  \n The `restrict` clause takes the following forms:  \n  \n|Clause|Description|  \n|------------|-----------------|  \n|`restrict(cpu)`|The function can use the full C++ language. Only other functions that are declared by using restrict(cpu) functions can call the function.|  \n|`restrict(amp)`|The function can only use the subset of the C++ language that C++ AMP can accelerate.|  \n|A sequence of `restrict(cpu)` and `restrict(amp)`.|The function must adhere to the limitations of both `restrict(cpu)` and   `restrict(amp)`. The function can be called by functions that are declared by using `restrict(cpu)`,  `restrict(amp)`, `restrict(cpu, amp)`, or `restrict(amp, cpu)`.<br /><br /> The form `restrict(A) restrict(B)` can be written as `restrict(A,B)`.|  \n  \n## Remarks  \n The `restrict` keyword is a contextual keyword. The restriction specifiers, `cpu` and `amp` are not reserved words. The list of specifiers is not extensible. A function that does not have a `restrict` clause is the same as a function that has the `restrict(cpu)` clause.  \n  \n A function that has the `restrict(amp)` clause has the following limitations:  \n  \n-   The function can call only functions that have the `restrict(amp)` clause.  \n  \n-   The function must be inlinable.  \n  \n-   The function can declare only `int`, `unsigned int`, `float`, and `double` variables, and classes and structures that contain only these types. `bool` is also allowed, but it must be 4-byte-aligned if you use it in a compound type.  \n  \n-   Lambda functions cannot capture by reference and cannot capture pointers.  \n  \n-   References and single-indirection pointers are supported only as local variables, function arguments, and return types.  \n  \n-   The following are not allowed:  \n  \n    -   Recursion.  \n  \n    -   Variables declared with the [volatile](../cpp/volatile-cpp.md) keyword.  \n  \n    -   Virtual functions.  \n  \n    -   Pointers to functions.  \n  \n    -   Pointers to member functions.  \n  \n    -   Pointers in structures.  \n  \n    -   Pointers to pointers.  \n  \n    -   `goto` statements.  \n  \n    -   Labeled statements.  \n  \n    -   `try`, `catch`, or `throw` statements.  \n  \n    -   Global variables.  \n  \n    -   Static variables. Use [tile_static Keyword](../cpp/tile-static-keyword.md) instead.  \n  \n    -   `dynamic_cast` casts.  \n  \n    -   The `typeid` operator.  \n  \n    -   asm declarations.  \n  \n    -   Varargs.  \n  \n For a discussion of function limitations, see [restrict(amp) Restrictions](http://go.microsoft.com/fwlink/p/?LinkId=251089).  \n  \n## Example  \n The following example shows how to use the `restrict(amp)`clause.  \n  \n```  \n  \nvoid functionAmp() restrict(amp) {}   \nvoid functionNonAmp() {}   \n  \nvoid callFunctions() restrict(amp)   \n{   \n    // int is allowed.  \n    int x;  \n    // long long int is not allowed in an amp-restricted function. This generates a compiler error.  \n    // long long int y;   \n  \n    // Calling an amp-restricted function is allowed.  \n    functionAmp();   \n  \n    // Calling a non-amp-restricted function is not allowed.  \n    // functionNonAmp();   \n  \n}  \n```  \n  \n## See Also  \n [C++ AMP (C++ Accelerated Massive Parallelism)](../parallel/amp/cpp-amp-cpp-accelerated-massive-parallelism.md)"}