{"nodes":[{"pos":[12,49],"content":"Compiler Error C3104 | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Compiler Error C3104 | Microsoft Docs","pos":[0,37]}]},{"content":"Compiler Error C3104","pos":[598,618]},{"content":"illegal attribute argument","pos":[619,645]},{"content":"You specified an invalid argument to an attribute.","pos":[652,702]},{"pos":[709,831],"content":"See <bpt id=\"p1\">[</bpt>Attribute Parameter Types<ept id=\"p1\">](../../windows/attribute-parameter-types-cpp-component-extensions.md)</ept> for more information.","source":"See [Attribute Parameter Types](../../windows/attribute-parameter-types-cpp-component-extensions.md) for more information."},{"content":"This error can be generated as a result of compiler conformance work that was done for Visual C++ 2005: when passing managed arrays to custom attributes, the type of the array is no longer deduced from the aggregate initialization list.","pos":[838,1074]},{"content":"The compiler now requires you to specify the type of the array as well as the initializer list.","pos":[1075,1170]},{"content":"Example","pos":[1179,1186]},{"content":"The following sample generates C3104.","pos":[1190,1227]},{"content":"Example","pos":[1663,1670]},{"content":"The following sample generates C3104.","pos":[1674,1711]}],"content":"---\ntitle: \"Compiler Error C3104 | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"error-reference\"\nf1_keywords: \n  - \"C3104\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"C3104\"\nms.assetid: b5648d47-e5d3-4b45-a3c0-f46e04eae731\ncaps.latest.revision: 14\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Compiler Error C3104\nillegal attribute argument  \n  \n You specified an invalid argument to an attribute.  \n  \n See [Attribute Parameter Types](../../windows/attribute-parameter-types-cpp-component-extensions.md) for more information.  \n  \n This error can be generated as a result of compiler conformance work that was done for Visual C++ 2005: when passing managed arrays to custom attributes, the type of the array is no longer deduced from the aggregate initialization list. The compiler now requires you to specify the type of the array as well as the initializer list.  \n  \n## Example  \n The following sample generates C3104.  \n  \n```  \n// C3104a.cpp  \n// compile with: /clr /c  \nusing namespace System;  \n  \n[AttributeUsage(AttributeTargets::Class)]  \npublic ref struct ABC : public Attribute {  \n   ABC(array<int>^){}  \n   array<double> ^ param;  \n};  \n  \n[ABC( {1,2,3}, param = {2.71, 3.14})]   // C3104  \n// try the following line instead  \n// [ABC( gcnew array<int> {1,2,3}, param = gcnew array<double>{2.71, 3.14})]   \nref struct AStruct{};  \n```  \n  \n## Example  \n The following sample generates C3104.  \n  \n```  \n// C3104b.cpp  \n// compile with: /clr /c  \n// C3104 expected  \nusing namespace System;  \n  \nint func() {  \n   return 0;   \n}  \n  \n[attribute(All)]  \nref class A {  \npublic:   \n   A(int) {}  \n};  \n  \n// Delete the following 2 lines to resolve.  \n[A(func())]  \nref class B {};  \n  \n// OK  \n[A(0)]  \nref class B {};  \n```  \n"}