{"nodes":[{"pos":[12,56],"content":"_searchenv_s, _wsearchenv_s | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"_searchenv_s, _wsearchenv_s | Microsoft Docs","pos":[0,44]}]},{"pos":[1358,1385],"content":"_searchenv_s, _wsearchenv_s","linkify":"_searchenv_s, _wsearchenv_s","nodes":[{"content":"_searchenv_s, _wsearchenv_s","pos":[0,27]}]},{"content":"Searches for a file by using environment paths.","pos":[1386,1433]},{"content":"These versions of <bpt id=\"p1\">[</bpt>_searchenv, _wsearchenv<ept id=\"p1\">](../../c-runtime-library/reference/searchenv-wsearchenv.md)</ept> have security enhancements, as described in <bpt id=\"p2\">[</bpt>Security Features in the CRT<ept id=\"p2\">](../../c-runtime-library/security-features-in-the-crt.md)</ept>.","pos":[1434,1669],"source":" These versions of [_searchenv, _wsearchenv](../../c-runtime-library/reference/searchenv-wsearchenv.md) have security enhancements, as described in [Security Features in the CRT](../../c-runtime-library/security-features-in-the-crt.md)."},{"pos":[1677,1897],"content":"[!IMPORTANT]\n This API cannot be used in applications that execute in the Windows Runtime. For more information, see [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx).","leadings":["","> "],"nodes":[{"content":" This API cannot be used in applications that execute in the Windows Runtime. For more information, see [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx).","pos":[13,218],"nodes":[{"content":"This API cannot be used in applications that execute in the Windows Runtime.","pos":[1,77]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>CRT functions not supported with /ZW<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx)</ept>.","pos":[78,205],"source":" For more information, see [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx)."}]}]},{"pos":[1906,1912],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[2516,2526],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"[in] <ph id=\"ph1\">`filename`</ph>","pos":[2530,2545],"source":"[in] `filename`"},{"content":"Name of the file to search for.","pos":[2549,2580]},{"content":"[in] <ph id=\"ph1\">`varname`</ph>","pos":[2587,2601],"source":"[in] `varname`"},{"content":"Environment to search.","pos":[2605,2627]},{"content":"[out] <ph id=\"ph1\">`pathname`</ph>","pos":[2634,2650],"source":"[out] `pathname`"},{"content":"Buffer to store the complete path.","pos":[2654,2688]},{"content":"[in] <ph id=\"ph1\">`numberOfElements`</ph>","pos":[2695,2718],"source":"[in] `numberOfElements`"},{"content":"Size of the <ph id=\"ph1\">`pathname`</ph>buffer.","pos":[2722,2751],"source":" Size of the `pathname`buffer."},{"pos":[2760,2772],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"Zero if successful; an error code on failure.","pos":[2776,2821]},{"pos":[2828,2891],"content":"If <ph id=\"ph1\">`filename`</ph> is an empty string, the return value is <ph id=\"ph2\">`ENOENT`</ph>.","source":"If `filename` is an empty string, the return value is `ENOENT`."},{"pos":[2901,2917],"content":"Error Conditions","linkify":"Error Conditions","nodes":[{"content":"Error Conditions","pos":[0,16]}]},{"content":"Return value","pos":[2975,2987]},{"pos":[2988,3010],"content":"Contents of <ph id=\"ph1\">`pathname`</ph>","source":"Contents of `pathname`"},{"content":"any","pos":[3142,3145]},{"content":"any","pos":[3146,3149]},{"content":"any","pos":[3157,3160]},{"content":"n/a","pos":[3170,3173]},{"content":"any","pos":[3185,3188]},{"content":"any","pos":[3189,3192]},{"content":"any","pos":[3193,3196]},{"content":"not changed","pos":[3206,3217]},{"content":"any","pos":[3222,3225]},{"content":"any","pos":[3226,3229]},{"content":"any","pos":[3230,3233]},{"content":"&lt;= 0","pos":[3234,3238],"source":"<= 0"},{"content":"not changed","pos":[3248,3259]},{"content":"If any of these error conditions occurs, the invalid parameter handler is invoked, as described in <bpt id=\"p1\">[</bpt>Parameter Validation<ept id=\"p1\">](../../c-runtime-library/parameter-validation.md)</ept>.","pos":[3267,3438],"source":"If any of these error conditions occurs, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md)."},{"content":"If execution is allowed to continue, these functions set <ph id=\"ph1\">`errno`</ph> to <ph id=\"ph2\">`EINVAL`</ph> and return <ph id=\"ph3\">`EINVAL`</ph>.","pos":[3439,3536],"source":" If execution is allowed to continue, these functions set `errno` to `EINVAL` and return `EINVAL`."},{"pos":[3545,3552],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">`_searchenv_s`</ph> routine searches for the target file in the specified domain.","pos":[3556,3636],"source":"The `_searchenv_s` routine searches for the target file in the specified domain."},{"content":"The <ph id=\"ph1\">`varname`</ph> variable can be any environment or user-defined variable that specifies a list of directory paths, such as <ph id=\"ph2\">`PATH`</ph>, <ph id=\"ph3\">`LIB`</ph>, and <ph id=\"ph4\">`INCLUDE`</ph>.","pos":[3637,3787],"source":" The `varname` variable can be any environment or user-defined variable that specifies a list of directory paths, such as `PATH`, `LIB`, and `INCLUDE`."},{"content":"Because <ph id=\"ph1\">`_searchenv_s`</ph> is case-sensitive, <ph id=\"ph2\">`varname`</ph> should match the case of the environment variable.","pos":[3788,3890],"source":" Because `_searchenv_s` is case-sensitive, `varname` should match the case of the environment variable."},{"content":"If <ph id=\"ph1\">`varname`</ph> does not match the name of an environment variable defined in the process's environment, the function returns zero and the <ph id=\"ph2\">`pathname`</ph> variable is unchanged.","pos":[3891,4060],"source":" If `varname` does not match the name of an environment variable defined in the process's environment, the function returns zero and the `pathname` variable is unchanged."},{"content":"The routine searches first for the file in the current working directory.","pos":[4067,4140]},{"content":"If it does not find the file, it looks next through the directories specified by the environment variable.","pos":[4141,4247]},{"content":"If the target file is in one of those directories, the newly created path is copied into <ph id=\"ph1\">`pathname`</ph>.","pos":[4248,4348],"source":" If the target file is in one of those directories, the newly created path is copied into `pathname`."},{"content":"If the <ph id=\"ph1\">`filename`</ph> file is not found, <ph id=\"ph2\">`pathname`</ph> contains an empty null-terminated string.","pos":[4349,4438],"source":" If the `filename` file is not found, `pathname` contains an empty null-terminated string."},{"content":"The <ph id=\"ph1\">`pathname`</ph> buffer should be at least <ph id=\"ph2\">`_MAX_PATH`</ph> characters long to accommodate the full length of the constructed path name.","pos":[4445,4574],"source":"The `pathname` buffer should be at least `_MAX_PATH` characters long to accommodate the full length of the constructed path name."},{"content":"Otherwise, <ph id=\"ph1\">`_searchenv_s`</ph> might overrun the <ph id=\"ph2\">`pathname`</ph> buffer resulting in unexpected behavior.","pos":[4575,4670],"source":" Otherwise, `_searchenv_s` might overrun the `pathname` buffer resulting in unexpected behavior."},{"content":"<ph id=\"ph1\">`_wsearchenv_s`</ph> is a wide-character version of <ph id=\"ph2\">`_searchenv_s`</ph>; the arguments to <ph id=\"ph3\">`_wsearchenv_s`</ph> are wide-character strings.","pos":[4677,4800],"source":"`_wsearchenv_s` is a wide-character version of `_searchenv_s`; the arguments to `_wsearchenv_s` are wide-character strings."},{"content":"<ph id=\"ph1\">`_wsearchenv_s`</ph> and <ph id=\"ph2\">`_searchenv_s`</ph> behave identically otherwise.","pos":[4801,4865],"source":"`_wsearchenv_s` and `_searchenv_s` behave identically otherwise."},{"content":"In C++, using these functions is simplified by template overloads; the overloads can infer buffer length automatically (eliminating the need to specify a size argument) and they can automatically replace older, non-secure functions with their newer, secure counterparts.","pos":[4872,5142]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Secure Template Overloads<ept id=\"p1\">](../../c-runtime-library/secure-template-overloads.md)</ept>.","pos":[5143,5251],"source":" For more information, see [Secure Template Overloads](../../c-runtime-library/secure-template-overloads.md)."},{"pos":[5261,5290],"content":"Generic-Text Routine Mappings","linkify":"Generic-Text Routine Mappings","nodes":[{"content":"Generic-Text Routine Mappings","pos":[0,29]}]},{"content":"Tchar.h routine","pos":[5297,5312]},{"content":"_UNICODE and _MBCS not defined","pos":[5313,5343]},{"content":"_MBCS defined","pos":[5344,5357]},{"content":"_UNICODE defined","pos":[5358,5374]},{"pos":[5560,5572],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"content":"Routine","pos":[5579,5586]},{"content":"Required header","pos":[5587,5602]},{"content":"<ph id=\"ph1\">\\&lt;</ph>stdlib.h&gt;","pos":[5662,5673],"source":"\\<stdlib.h>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>stdlib.h&gt; or <ph id=\"ph2\">\\&lt;</ph>wchar.h&gt;","pos":[5694,5719],"source":"\\<stdlib.h> or \\<wchar.h>"},{"pos":[5727,5825],"content":"For more compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept>.","source":"For more compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md)."},{"pos":[5834,5841],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[6666,6691],"content":".NET Framework Equivalent","linkify":".NET Framework Equivalent","nodes":[{"content":".NET Framework Equivalent","pos":[0,25]}]},{"content":"Not applicable.","pos":[6695,6710]},{"content":"To call the standard C function, use <ph id=\"ph1\">`PInvoke`</ph>.","pos":[6711,6758],"source":" To call the standard C function, use `PInvoke`."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Platform Invoke Examples<ept id=\"p1\">](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f)</ept>.","pos":[6759,6884],"source":" For more information, see [Platform Invoke Examples](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f)."},{"pos":[6893,6901],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Directory Control<ept id=\"p1\">](../../c-runtime-library/directory-control.md)</ept><ph id=\"ph1\"> </ph>","pos":[6905,6971],"source":"[Directory Control](../../c-runtime-library/directory-control.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_searchenv, _wsearchenv<ept id=\"p1\">](../../c-runtime-library/reference/searchenv-wsearchenv.md)</ept><ph id=\"ph1\"> </ph>","pos":[6974,7060],"source":" [_searchenv, _wsearchenv](../../c-runtime-library/reference/searchenv-wsearchenv.md) "},{"content":"<bpt id=\"p1\"> [</bpt>getenv, _wgetenv<ept id=\"p1\">](../../c-runtime-library/reference/getenv-wgetenv.md)</ept><ph id=\"ph1\"> </ph>","pos":[7063,7136],"source":" [getenv, _wgetenv](../../c-runtime-library/reference/getenv-wgetenv.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_putenv, _wputenv<ept id=\"p1\">](../../c-runtime-library/reference/putenv-wputenv.md)</ept>","pos":[7139,7212],"source":" [_putenv, _wputenv](../../c-runtime-library/reference/putenv-wputenv.md)"}],"content":"---\ntitle: \"_searchenv_s, _wsearchenv_s | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"_wsearchenv_s\"\n  - \"_searchenv_s\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\n  - \"api-ms-win-crt-environment-l1-1-0.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"_searchenv_s\"\n  - \"_wsearchenv_s\"\n  - \"wsearchenv_s\"\n  - \"searchenv_s\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"tsearchenv_s function\"\n  - \"files [C++], finding\"\n  - \"buffers [C++], buffer overruns\"\n  - \"environment paths, searching for files\"\n  - \"wsearchenv_s function\"\n  - \"searchenv_s function\"\n  - \"_tsearchenv_s function\"\n  - \"buffer overruns\"\n  - \"buffers [C++], avoiding overruns\"\n  - \"_wsearchenv_s function\"\n  - \"_searchenv_s function\"\n  - \"environment paths\"\nms.assetid: 47f9fc29-250e-4c09-b52e-9e9f0ef395ca\ncaps.latest.revision: 32\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# _searchenv_s, _wsearchenv_s\nSearches for a file by using environment paths. These versions of [_searchenv, _wsearchenv](../../c-runtime-library/reference/searchenv-wsearchenv.md) have security enhancements, as described in [Security Features in the CRT](../../c-runtime-library/security-features-in-the-crt.md).  \n  \n> [!IMPORTANT]\n>  This API cannot be used in applications that execute in the Windows Runtime. For more information, see [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx).  \n  \n## Syntax  \n  \n```  \nerrno_t _searchenv_s(  \n   const char *filename,  \n   const char *varname,  \n   char *pathname,  \n   size_t numberOfElements  \n);  \nerrno_t _wsearchenv_s(  \n   const wchar_t *filename,  \n   const wchar_t *varname,  \n   wchar_t *pathname,  \n   size_t numberOfElements  \n);  \ntemplate <size_t size>  \nerrno_t _searchenv_s(  \n   const char *filename,  \n   const char *varname,  \n   char (&pathname)[size]  \n); // C++ only  \ntemplate <size_t size>  \nerrno_t _wsearchenv_s(  \n   const wchar_t *filename,  \n   const wchar_t *varname,  \n   wchar_t (&pathname)[size]  \n); // C++ only  \n```  \n  \n#### Parameters  \n [in] `filename`  \n Name of the file to search for.  \n  \n [in] `varname`  \n Environment to search.  \n  \n [out] `pathname`  \n Buffer to store the complete path.  \n  \n [in] `numberOfElements`  \n Size of the `pathname`buffer.  \n  \n## Return Value  \n Zero if successful; an error code on failure.  \n  \n If `filename` is an empty string, the return value is `ENOENT`.  \n  \n### Error Conditions  \n  \n|`filename`|`varname`|`pathname`|`numberOfElements`|Return value|Contents of `pathname`|  \n|----------------|---------------|----------------|------------------------|------------------|----------------------------|  \n|any|any|`NULL`|any|`EINVAL`|n/a|  \n|`NULL`|any|any|any|`EINVAL`|not changed|  \n|any|any|any|<= 0|`EINVAL`|not changed|  \n  \n If any of these error conditions occurs, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md). If execution is allowed to continue, these functions set `errno` to `EINVAL` and return `EINVAL`.  \n  \n## Remarks  \n The `_searchenv_s` routine searches for the target file in the specified domain. The `varname` variable can be any environment or user-defined variable that specifies a list of directory paths, such as `PATH`, `LIB`, and `INCLUDE`. Because `_searchenv_s` is case-sensitive, `varname` should match the case of the environment variable. If `varname` does not match the name of an environment variable defined in the process's environment, the function returns zero and the `pathname` variable is unchanged.  \n  \n The routine searches first for the file in the current working directory. If it does not find the file, it looks next through the directories specified by the environment variable. If the target file is in one of those directories, the newly created path is copied into `pathname`. If the `filename` file is not found, `pathname` contains an empty null-terminated string.  \n  \n The `pathname` buffer should be at least `_MAX_PATH` characters long to accommodate the full length of the constructed path name. Otherwise, `_searchenv_s` might overrun the `pathname` buffer resulting in unexpected behavior.  \n  \n `_wsearchenv_s` is a wide-character version of `_searchenv_s`; the arguments to `_wsearchenv_s` are wide-character strings. `_wsearchenv_s` and `_searchenv_s` behave identically otherwise.  \n  \n In C++, using these functions is simplified by template overloads; the overloads can infer buffer length automatically (eliminating the need to specify a size argument) and they can automatically replace older, non-secure functions with their newer, secure counterparts. For more information, see [Secure Template Overloads](../../c-runtime-library/secure-template-overloads.md).  \n  \n### Generic-Text Routine Mappings  \n  \n|Tchar.h routine|_UNICODE and _MBCS not defined|_MBCS defined|_UNICODE defined|  \n|---------------------|--------------------------------------|--------------------|-----------------------|  \n|`_tsearchenv_s`|`_searchenv_s`|`_searchenv_s`|`_wsearchenv_s`|  \n  \n## Requirements  \n  \n|Routine|Required header|  \n|-------------|---------------------|  \n|`_searchenv_s`|\\<stdlib.h>|  \n|`_wsearchenv_s`|\\<stdlib.h> or \\<wchar.h>|  \n  \n For more compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md).  \n  \n## Example  \n  \n```  \n// crt_searchenv_s.c  \n/* This program searches for a file in  \n * a directory specified by an environment variable.  \n */  \n  \n#include <stdlib.h>  \n#include <stdio.h>  \n  \nint main( void )  \n{  \n   char pathbuffer[_MAX_PATH];  \n   char searchfile[] = \"CL.EXE\";  \n   char envvar[] = \"PATH\";  \n   errno_t err;  \n  \n   /* Search for file in PATH environment variable: */  \n   err = _searchenv_s( searchfile, envvar, pathbuffer, _MAX_PATH );  \n   if (err != 0)  \n   {  \n      printf(\"Error searching the path. Error code: %d\\n\", err);  \n   }  \n   if( *pathbuffer != '\\0' )  \n      printf( \"Path for %s:\\n%s\\n\", searchfile, pathbuffer );  \n   else  \n      printf( \"%s not found\\n\", searchfile );  \n}  \n```  \n  \n```Output  \nPath for CL.EXE:  \nC:\\Program Files\\Microsoft Visual Studio 2010\\VC\\BIN\\CL.EXE  \n```  \n  \n## .NET Framework Equivalent  \n Not applicable. To call the standard C function, use `PInvoke`. For more information, see [Platform Invoke Examples](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f).  \n  \n## See Also  \n [Directory Control](../../c-runtime-library/directory-control.md)   \n [_searchenv, _wsearchenv](../../c-runtime-library/reference/searchenv-wsearchenv.md)   \n [getenv, _wgetenv](../../c-runtime-library/reference/getenv-wgetenv.md)   \n [_putenv, _wputenv](../../c-runtime-library/reference/putenv-wputenv.md)"}