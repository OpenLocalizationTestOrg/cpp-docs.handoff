{"nodes":[{"pos":[12,36],"content":"oalias | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"oalias | Microsoft Docs","pos":[0,23]}]},{"content":"noalias","pos":[669,676]},{"content":"Microsoft Specific","pos":[679,697]},{"pos":[716,893],"content":"means that a function call does not modify or reference visible global state and only modifies the memory pointed to <ph id=\"ph1\">`directly`</ph> by pointer parameters (first-level indirections).","source":" means that a function call does not modify or reference visible global state and only modifies the memory pointed to `directly` by pointer parameters (first-level indirections)."},{"content":"If a function is annotated as <ph id=\"ph1\">`noalias`</ph>, the optimizer can assume that, in addition to the parameters themselves, only first-level indirections of pointer parameters are referenced or modified inside the function.","pos":[900,1113],"source":"If a function is annotated as `noalias`, the optimizer can assume that, in addition to the parameters themselves, only first-level indirections of pointer parameters are referenced or modified inside the function."},{"content":"The visible global state is the set of all data that is not defined or referenced outside of the compilation scope, and their address is not taken.","pos":[1114,1261]},{"content":"The compilation scope is all source files (<bpt id=\"p1\">[</bpt>/LTCG (Link-time Code Generation)<ept id=\"p1\">](../build/reference/ltcg-link-time-code-generation.md)</ept> builds) or a single source file (non-<bpt id=\"p2\">**</bpt>/LTCG<ept id=\"p2\">**</ept> build).","pos":[1262,1449],"source":" The compilation scope is all source files ([/LTCG (Link-time Code Generation)](../build/reference/ltcg-link-time-code-generation.md) builds) or a single source file (non-**/LTCG** build)."},{"content":"Example","pos":[1458,1465]},{"content":"The following sample demonstrates using <ph id=\"ph1\">`__declspec(restrict)`</ph> and <ph id=\"ph2\">`__declspec(noalias)`</ph>.","pos":[1469,1558],"source":"The following sample demonstrates using `__declspec(restrict)` and `__declspec(noalias)`."},{"content":"Normally, memory returned from <ph id=\"ph1\">`malloc`</ph> is <ph id=\"ph2\">`restrict`</ph> and <ph id=\"ph3\">`noalias`</ph> because the CRT headers are decorated appropriately.","pos":[1559,1679],"source":" Normally, memory returned from `malloc` is `restrict` and `noalias` because the CRT headers are decorated appropriately."},{"content":"However, in this example, the pointers <ph id=\"ph1\">`mempool`</ph> and <ph id=\"ph2\">`memptr`</ph> are global so the compiler has no assurance that the memory is not subject to aliasing.","pos":[1686,1835],"source":"However, in this example, the pointers `mempool` and `memptr` are global so the compiler has no assurance that the memory is not subject to aliasing."},{"content":"Decorating the functions that return pointers with <ph id=\"ph1\">`__declspec(restrict)`</ph> tells the compiler that the memory pointed to by the return value is not aliased.","pos":[1836,1991],"source":" Decorating the functions that return pointers with `__declspec(restrict)` tells the compiler that the memory pointed to by the return value is not aliased."},{"pos":[1998,2214],"content":"Decorating the function in the example that accesses memory with <ph id=\"ph1\">`__declspec(noalias)`</ph> tells the compiler that this function does not interfere with the global state except through the pointers in its parameter list.","source":"Decorating the function in the example that accesses memory with `__declspec(noalias)` tells the compiler that this function does not interfere with the global state except through the pointers in its parameter list."},{"content":"See Also","pos":[3456,3464]},{"content":"__declspec","pos":[3469,3479]},{"content":"Keywords","pos":[3506,3514]}],"content":"---\ntitle: \"noalias | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"language-reference\"\nf1_keywords: \n  - \"noalias\"\n  - \"noalias_cpp\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"noalias __declspec keyword\"\n  - \"__declspec keyword [C++], noalias\"\nms.assetid: efafa8b0-7f39-4edc-a81e-d287ae882c9b\ncaps.latest.revision: 12\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# noalias\n**Microsoft Specific**  \n  \n `noalias` means that a function call does not modify or reference visible global state and only modifies the memory pointed to `directly` by pointer parameters (first-level indirections).  \n  \n If a function is annotated as `noalias`, the optimizer can assume that, in addition to the parameters themselves, only first-level indirections of pointer parameters are referenced or modified inside the function. The visible global state is the set of all data that is not defined or referenced outside of the compilation scope, and their address is not taken. The compilation scope is all source files ([/LTCG (Link-time Code Generation)](../build/reference/ltcg-link-time-code-generation.md) builds) or a single source file (non-**/LTCG** build).  \n  \n## Example  \n The following sample demonstrates using `__declspec(restrict)` and `__declspec(noalias)`. Normally, memory returned from `malloc` is `restrict` and `noalias` because the CRT headers are decorated appropriately.  \n  \n However, in this example, the pointers `mempool` and `memptr` are global so the compiler has no assurance that the memory is not subject to aliasing. Decorating the functions that return pointers with `__declspec(restrict)` tells the compiler that the memory pointed to by the return value is not aliased.  \n  \n Decorating the function in the example that accesses memory with `__declspec(noalias)` tells the compiler that this function does not interfere with the global state except through the pointers in its parameter list.  \n  \n```  \n// declspec_noalias.c   \n#include <stdio.h>  \n#include <stdlib.h>  \n  \n#define M 800  \n#define N 600  \n#define P 700  \n  \nfloat * mempool, * memptr;  \n  \n__declspec(restrict) float * ma(int size)  \n{  \n    float * retval;  \n    retval = memptr;  \n    memptr += size;  \n    return retval;  \n}  \n  \n__declspec(restrict) float * init(int m, int n)  \n{  \n    float * a;  \n    int i, j;  \n    int k=1;  \n  \n    a = ma(m * n);  \n    if (!a) exit(1);  \n    for (i=0; i<m; i++)  \n        for (j=0; j<n; j++)  \n            a[i*n+j] = 0.1/k++;  \n    return a;  \n}  \n  \n__declspec(noalias) void multiply(float * a, float * b, float * c)  \n{  \n    int i, j, k;  \n  \n    for (j=0; j<P; j++)  \n        for (i=0; i<M; i++)  \n            for (k=0; k<N; k++)  \n                c[i * P + j] =   \n                          a[i * N + k] *   \n                          b[k * P + j];  \n}  \n  \nint main()  \n{  \n    float * a, * b, * c;  \n  \n    mempool = (float *) malloc(sizeof(float) * (M*N + N*P + M*P));  \n  \n    if (!mempool)   \n    {  \n        puts(\"ERROR: Malloc returned null\");  \n        exit(1);  \n    }  \n  \n    memptr = mempool;  \n    a = init(M, N);  \n    b = init(N, P);  \n    c = init(M, P);  \n  \n    multiply(a, b, c);  \n}  \n```  \n  \n## See Also  \n [__declspec](../cpp/declspec.md)   \n [Keywords](../cpp/keywords-cpp.md)"}