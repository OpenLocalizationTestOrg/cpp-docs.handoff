{"nodes":[{"pos":[12,47],"content":"CFtpFileFind Class | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"CFtpFileFind Class | Microsoft Docs","pos":[0,35]}]},{"content":"CFtpFileFind Class","pos":[636,654]},{"content":"Aids in Internet file searches of FTP servers.","pos":[655,701]},{"content":"Syntax","pos":[710,716]},{"content":"Members","pos":[780,787]},{"content":"Public Constructors","pos":[797,816]},{"content":"Name","pos":[823,827]},{"content":"Description","pos":[828,839]},{"content":"CFtpFileFind::CFtpFileFind","pos":[878,904]},{"pos":[935,970],"content":"Constructs a <ph id=\"ph1\">`CFtpFileFind`</ph> object.","source":"Constructs a `CFtpFileFind` object."},{"content":"Public Methods","pos":[981,995]},{"content":"Name","pos":[1002,1006]},{"content":"Description","pos":[1007,1018]},{"content":"CFtpFileFind::FindFile","pos":[1057,1079]},{"content":"Finds a file on a FTP server.","pos":[1106,1135]},{"content":"CFtpFileFind::FindNextFile","pos":[1141,1167]},{"pos":[1198,1282],"content":"Continues a file search from a previous call to <bpt id=\"p1\">[</bpt>FindFile<ept id=\"p1\">](#cftpfilefind__findfile)</ept>.","source":"Continues a file search from a previous call to [FindFile](#cftpfilefind__findfile)."},{"content":"CFtpFileFind::GetFileURL","pos":[1288,1312]},{"content":"Gets the URL, including path, of the found file.","pos":[1341,1389]},{"content":"Remarks","pos":[1399,1406]},{"pos":[1425,1554],"content":"includes member functions that begin a search, locate a file, and return the URL or other descriptive information about the file."},{"content":"Other MFC classes designed for Internet and local file searched include <bpt id=\"p1\">[</bpt>CGopherFileFind<ept id=\"p1\">](../../mfc/reference/cgopherfilefind-class.md)</ept> and <bpt id=\"p2\">[</bpt>CFileFind<ept id=\"p2\">](../../mfc/reference/cfilefind-class.md)</ept>.","pos":[1561,1753],"source":"Other MFC classes designed for Internet and local file searched include [CGopherFileFind](../../mfc/reference/cgopherfilefind-class.md) and [CFileFind](../../mfc/reference/cfilefind-class.md)."},{"content":"Together with <ph id=\"ph1\">`CFtpFileFind`</ph>, these classes provide a seamless mechanism for the client to find specific files, regardless of the server protocol or file type (either a local machine or a remote server).","pos":[1754,1957],"source":" Together with `CFtpFileFind`, these classes provide a seamless mechanism for the client to find specific files, regardless of the server protocol or file type (either a local machine or a remote server)."},{"content":"Note that there is no MFC class for searching on HTTP servers because HTTP does not support the direct file manipulation required for searches.","pos":[1958,2101]},{"pos":[2108,2292],"content":"For more information about how to use <ph id=\"ph1\">`CFtpFileFind`</ph> and the other WinInet classes, see the article <bpt id=\"p1\">[</bpt>Internet Programming with WinInet<ept id=\"p1\">](../../mfc/win32-internet-extensions-wininet.md)</ept>.","source":"For more information about how to use `CFtpFileFind` and the other WinInet classes, see the article [Internet Programming with WinInet](../../mfc/win32-internet-extensions-wininet.md)."},{"content":"Example","pos":[2301,2308]},{"content":"The following code demonstrates how to enumerate all files in the current directory of the FTP server.","pos":[2312,2414]},{"pos":[2432,2448],"content":"NVC_MFCWinInet#8"},{"content":"Inheritance Hierarchy","pos":[2511,2532]},{"content":"CObject","pos":[2537,2544]},{"content":"CFileFind","pos":[2591,2600]},{"content":"Requirements","pos":[2671,2683]},{"pos":[2687,2708],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> afxinet.h","source":"**Header:** afxinet.h"},{"pos":[2761,2787],"content":"CFtpFileFind::CFtpFileFind"},{"pos":[2791,2859],"content":"This member function is called to construct a <ph id=\"ph1\">`CFtpFileFind`</ph> object.","source":"This member function is called to construct a `CFtpFileFind` object."},{"content":"Parameters","pos":[2972,2982]},{"content":"A pointer to a <ph id=\"ph1\">`CFtpConnection`</ph> object.","pos":[3003,3042],"source":" A pointer to a `CFtpConnection` object."},{"content":"You can obtain an FTP connection by calling <bpt id=\"p1\">[</bpt>CInternetSession::GetFtpConnection<ept id=\"p1\">](../../mfc/reference/cinternetsession-class.md#cinternetsession__getftpconnection)</ept>.","pos":[3043,3206],"source":" You can obtain an FTP connection by calling [CInternetSession::GetFtpConnection](../../mfc/reference/cinternetsession-class.md#cinternetsession__getftpconnection)."},{"content":"The context identifier for the <ph id=\"ph1\">`CFtpFileFind`</ph> object.","pos":[3228,3281],"source":" The context identifier for the `CFtpFileFind` object."},{"content":"See <bpt id=\"p1\">**</bpt>Remarks<ept id=\"p1\">**</ept> for more information about this parameter.","pos":[3282,3340],"source":" See **Remarks** for more information about this parameter."},{"content":"Remarks","pos":[3350,3357]},{"content":"The default value for <ph id=\"ph1\">`dwContext`</ph> is sent by MFC to the <ph id=\"ph2\">`CFtpFileFind`</ph> object from the <bpt id=\"p1\">[</bpt>CInternetSession<ept id=\"p1\">](../../mfc/reference/cinternetsession-class.md)</ept> object that created the <ph id=\"ph3\">`CFtpFileFind`</ph> object.","pos":[3361,3560],"source":"The default value for `dwContext` is sent by MFC to the `CFtpFileFind` object from the [CInternetSession](../../mfc/reference/cinternetsession-class.md) object that created the `CFtpFileFind` object."},{"content":"You can override the default to set the context identifier to a value of your choosing.","pos":[3561,3648]},{"content":"The context identifier is returned to <bpt id=\"p1\">[</bpt>CInternetSession::OnStatusCallback<ept id=\"p1\">](../../mfc/reference/cinternetsession-class.md#cinternetsession__onstatuscallback)</ept> to provide status on the object with which it is identified.","pos":[3649,3866],"source":" The context identifier is returned to [CInternetSession::OnStatusCallback](../../mfc/reference/cinternetsession-class.md#cinternetsession__onstatuscallback) to provide status on the object with which it is identified."},{"content":"See the article <bpt id=\"p1\">[</bpt>Internet First Steps: WinInet<ept id=\"p1\">](../../mfc/wininet-basics.md)</ept> for more information about the context identifier.","pos":[3867,3994],"source":" See the article [Internet First Steps: WinInet](../../mfc/wininet-basics.md) for more information about the context identifier."},{"content":"Example","pos":[4004,4011]},{"pos":[4016,4112],"content":"See the example in the <bpt id=\"p1\">[</bpt>CFtpFileFind<ept id=\"p1\">](../../mfc/reference/cftpfilefind-class.md)</ept> class overview.","source":"See the example in the [CFtpFileFind](../../mfc/reference/cftpfilefind-class.md) class overview."},{"pos":[4161,4183],"content":"CFtpFileFind::FindFile"},{"content":"Call this member function to find an FTP file.","pos":[4187,4233]},{"content":"Parameters","pos":[4355,4365]},{"content":"A pointer to a string containing the name of the file to find.","pos":[4383,4445]},{"content":"If <bpt id=\"p1\">**</bpt>NULL<ept id=\"p1\">**</ept>, the call will perform a wildcard search (*).","pos":[4446,4503],"source":" If **NULL**, the call will perform a wildcard search (*)."},{"content":"The flags describing how to handle this session.","pos":[4523,4571]},{"content":"These flags can be combined with the bitwise OR operator (&amp;#124;) and are as follows:","pos":[4572,4657],"source":" These flags can be combined with the bitwise OR operator (&#124;) and are as follows:"},{"content":"INTERNET_FLAG_RELOAD   Get the data from the wire even if it is locally cached.","pos":[4667,4746]},{"content":"This is the default flag.","pos":[4747,4772]},{"content":"INTERNET_FLAG_DONT_CACHE   Do not cache the data, either locally or in any gateways.","pos":[4782,4866]},{"pos":[4876,5045],"content":"INTERNET_FLAG_RAW_DATA   Override the default to return the raw data ( <bpt id=\"p1\">[</bpt>WIN32_FIND_DATA<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa365740)</ept> structures for FTP).","source":"INTERNET_FLAG_RAW_DATA   Override the default to return the raw data ( [WIN32_FIND_DATA](http://msdn.microsoft.com/library/windows/desktop/aa365740) structures for FTP)."},{"content":"INTERNET_FLAG_SECURE   Secures transactions on the wire with Secure Sockets Layer or PCT.","pos":[5055,5144]},{"content":"This flag is applicable to HTTP requests only.","pos":[5145,5191]},{"pos":[5201,5373],"content":"INTERNET_FLAG_EXISTING_CONNECT   If possible, reuse the existing connections to the server for new <bpt id=\"p1\">**</bpt>FindFile<ept id=\"p1\">**</ept> requests instead of creating a new session for each request.","source":"INTERNET_FLAG_EXISTING_CONNECT   If possible, reuse the existing connections to the server for new **FindFile** requests instead of creating a new session for each request."},{"content":"Return Value","pos":[5383,5395]},{"content":"Nonzero if successful; otherwise 0.","pos":[5399,5434]},{"content":"To get extended error information, call the Win32 function <bpt id=\"p1\">[</bpt>GetLastError<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/ms679360)</ept>.","pos":[5435,5569],"source":" To get extended error information, call the Win32 function [GetLastError](http://msdn.microsoft.com/library/windows/desktop/ms679360)."},{"content":"Remarks","pos":[5579,5586]},{"pos":[5590,5739],"content":"After calling <bpt id=\"p1\">**</bpt>FindFile<ept id=\"p1\">**</ept> to retrieve the first FTP file, you can call <bpt id=\"p2\">[</bpt>FindNextFile<ept id=\"p2\">](#cftpfilefind__findnextfile)</ept> to retrieve subsequent FTP files.","source":"After calling **FindFile** to retrieve the first FTP file, you can call [FindNextFile](#cftpfilefind__findnextfile) to retrieve subsequent FTP files."},{"content":"Example","pos":[5749,5756]},{"pos":[5761,5857],"content":"See the example in the <bpt id=\"p1\">[</bpt>CFtpFileFind<ept id=\"p1\">](../../mfc/reference/cftpfilefind-class.md)</ept> class overview.","source":"See the example in the [CFtpFileFind](../../mfc/reference/cftpfilefind-class.md) class overview."},{"pos":[5910,5936],"content":"CFtpFileFind::FindNextFile"},{"pos":[5940,6069],"content":"Call this member function to continue a file search begun with a call to the <bpt id=\"p1\">[</bpt>FindFile<ept id=\"p1\">](#cftpfilefind__findfile)</ept> member function.","source":"Call this member function to continue a file search begun with a call to the [FindFile](#cftpfilefind__findfile) member function."},{"content":"Return Value","pos":[6123,6135]},{"content":"Nonzero if there are more files; zero if the file found is the last one in the directory or if an error occurred.","pos":[6139,6252]},{"content":"To get extended error information, call the Win32 function <bpt id=\"p1\">[</bpt>GetLastError<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/ms679360)</ept>.","pos":[6253,6387],"source":" To get extended error information, call the Win32 function [GetLastError](http://msdn.microsoft.com/library/windows/desktop/ms679360)."},{"content":"If the file found is the last file in the directory, or if no matching files can be found, the <ph id=\"ph1\">`GetLastError`</ph> function returns ERROR_NO_MORE_FILES.","pos":[6388,6535],"source":" If the file found is the last file in the directory, or if no matching files can be found, the `GetLastError` function returns ERROR_NO_MORE_FILES."},{"content":"Remarks","pos":[6545,6552]},{"pos":[6556,6732],"content":"You must call this function at least once before calling any attribute function (see <bpt id=\"p1\">[</bpt>CFileFind::FindNextFile<ept id=\"p1\">](../../mfc/reference/cfilefind-class.md#cfilefind__findnextfile)</ept>).","source":"You must call this function at least once before calling any attribute function (see [CFileFind::FindNextFile](../../mfc/reference/cfilefind-class.md#cfilefind__findnextfile))."},{"pos":[6754,6854],"content":"wraps the Win32 function <bpt id=\"p1\">[</bpt>FindNextFile<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa364428)</ept>.","source":" wraps the Win32 function [FindNextFile](http://msdn.microsoft.com/library/windows/desktop/aa364428)."},{"content":"Example","pos":[6864,6871]},{"pos":[6876,6972],"content":"See the example in the <bpt id=\"p1\">[</bpt>CFtpFileFind<ept id=\"p1\">](../../mfc/reference/cftpfilefind-class.md)</ept> class overview.","source":"See the example in the [CFtpFileFind](../../mfc/reference/cftpfilefind-class.md) class overview."},{"pos":[7023,7047],"content":"CFtpFileFind::GetFileURL"},{"content":"Call this member function to get the URL of the specified file.","pos":[7051,7114]},{"content":"Return Value","pos":[7170,7182]},{"content":"The file and path of the Universal Resource Locator (URL).","pos":[7186,7244]},{"content":"Remarks","pos":[7254,7261]},{"pos":[7278,7471],"content":"is similar to the member function <bpt id=\"p1\">[</bpt>CFileFind::GetFilePath<ept id=\"p1\">](../../mfc/reference/cfilefind-class.md#cfilefind__getfilepath)</ept>, except that it returns the URL in the form <ph id=\"ph1\">`ftp://moose/dir/file.txt`</ph>.","source":" is similar to the member function [CFileFind::GetFilePath](../../mfc/reference/cfilefind-class.md#cfilefind__getfilepath), except that it returns the URL in the form `ftp://moose/dir/file.txt`."},{"content":"See Also","pos":[7480,7488]},{"content":"CFileFind Class","pos":[7493,7508]},{"content":"Hierarchy Chart","pos":[7555,7570]},{"content":"CGopherFileFind Class","pos":[7607,7628]},{"content":"CInternetFile Class","pos":[7681,7700]},{"content":"CGopherFile Class","pos":[7751,7768]},{"content":"CHttpFile Class","pos":[7817,7832]}],"content":"---\ntitle: \"CFtpFileFind Class | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"reference\"\nf1_keywords: \n  - \"CFtpFileFind\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"CFtpFileFind class\"\n  - \"file searches [C++]\"\nms.assetid: 9667cf01-657f-4b11-b9db-f11e5a7b4e4c\ncaps.latest.revision: 23\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# CFtpFileFind Class\nAids in Internet file searches of FTP servers.  \n  \n## Syntax  \n  \n```  \nclass CFtpFileFind : public CFileFind  \n```  \n  \n## Members  \n  \n### Public Constructors  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CFtpFileFind::CFtpFileFind](#cftpfilefind__cftpfilefind)|Constructs a `CFtpFileFind` object.|  \n  \n### Public Methods  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CFtpFileFind::FindFile](#cftpfilefind__findfile)|Finds a file on a FTP server.|  \n|[CFtpFileFind::FindNextFile](#cftpfilefind__findnextfile)|Continues a file search from a previous call to [FindFile](#cftpfilefind__findfile).|  \n|[CFtpFileFind::GetFileURL](#cftpfilefind__getfileurl)|Gets the URL, including path, of the found file.|  \n  \n## Remarks  \n `CFtpFileFind` includes member functions that begin a search, locate a file, and return the URL or other descriptive information about the file.  \n  \n Other MFC classes designed for Internet and local file searched include [CGopherFileFind](../../mfc/reference/cgopherfilefind-class.md) and [CFileFind](../../mfc/reference/cfilefind-class.md). Together with `CFtpFileFind`, these classes provide a seamless mechanism for the client to find specific files, regardless of the server protocol or file type (either a local machine or a remote server). Note that there is no MFC class for searching on HTTP servers because HTTP does not support the direct file manipulation required for searches.  \n  \n For more information about how to use `CFtpFileFind` and the other WinInet classes, see the article [Internet Programming with WinInet](../../mfc/win32-internet-extensions-wininet.md).  \n  \n## Example  \n The following code demonstrates how to enumerate all files in the current directory of the FTP server.  \n  \n [!code-cpp[NVC_MFCWinInet#8](../../mfc/codesnippet/cpp/cftpfilefind-class_1.cpp)]  \n  \n## Inheritance Hierarchy  \n [CObject](../../mfc/reference/cobject-class.md)  \n  \n [CFileFind](../../mfc/reference/cfilefind-class.md)  \n  \n `CFtpFileFind`  \n  \n## Requirements  \n **Header:** afxinet.h  \n  \n##  <a name=\"cftpfilefind__cftpfilefind\"></a>  CFtpFileFind::CFtpFileFind  \n This member function is called to construct a `CFtpFileFind` object.  \n  \n```  \nexplicit CFtpFileFind(\n    CFtpConnection* pConnection,  \n    DWORD_PTR dwContext = 1);\n```  \n  \n### Parameters  \n `pConnection`  \n A pointer to a `CFtpConnection` object. You can obtain an FTP connection by calling [CInternetSession::GetFtpConnection](../../mfc/reference/cinternetsession-class.md#cinternetsession__getftpconnection).  \n  \n `dwContext`  \n The context identifier for the `CFtpFileFind` object. See **Remarks** for more information about this parameter.  \n  \n### Remarks  \n The default value for `dwContext` is sent by MFC to the `CFtpFileFind` object from the [CInternetSession](../../mfc/reference/cinternetsession-class.md) object that created the `CFtpFileFind` object. You can override the default to set the context identifier to a value of your choosing. The context identifier is returned to [CInternetSession::OnStatusCallback](../../mfc/reference/cinternetsession-class.md#cinternetsession__onstatuscallback) to provide status on the object with which it is identified. See the article [Internet First Steps: WinInet](../../mfc/wininet-basics.md) for more information about the context identifier.  \n  \n### Example  \n  See the example in the [CFtpFileFind](../../mfc/reference/cftpfilefind-class.md) class overview.  \n  \n##  <a name=\"cftpfilefind__findfile\"></a>  CFtpFileFind::FindFile  \n Call this member function to find an FTP file.  \n  \n```  \nvirtual BOOL FindFile(\n    LPCTSTR pstrName = NULL,  \n    DWORD dwFlags = INTERNET_FLAG_RELOAD);\n```  \n  \n### Parameters  \n `pstrName`  \n A pointer to a string containing the name of the file to find. If **NULL**, the call will perform a wildcard search (*).  \n  \n `dwFlags`  \n The flags describing how to handle this session. These flags can be combined with the bitwise OR operator (&#124;) and are as follows:  \n  \n-   INTERNET_FLAG_RELOAD   Get the data from the wire even if it is locally cached. This is the default flag.  \n  \n-   INTERNET_FLAG_DONT_CACHE   Do not cache the data, either locally or in any gateways.  \n  \n-   INTERNET_FLAG_RAW_DATA   Override the default to return the raw data ( [WIN32_FIND_DATA](http://msdn.microsoft.com/library/windows/desktop/aa365740) structures for FTP).  \n  \n-   INTERNET_FLAG_SECURE   Secures transactions on the wire with Secure Sockets Layer or PCT. This flag is applicable to HTTP requests only.  \n  \n-   INTERNET_FLAG_EXISTING_CONNECT   If possible, reuse the existing connections to the server for new **FindFile** requests instead of creating a new session for each request.  \n  \n### Return Value  \n Nonzero if successful; otherwise 0. To get extended error information, call the Win32 function [GetLastError](http://msdn.microsoft.com/library/windows/desktop/ms679360).  \n  \n### Remarks  \n After calling **FindFile** to retrieve the first FTP file, you can call [FindNextFile](#cftpfilefind__findnextfile) to retrieve subsequent FTP files.  \n  \n### Example  \n  See the example in the [CFtpFileFind](../../mfc/reference/cftpfilefind-class.md) class overview.  \n  \n##  <a name=\"cftpfilefind__findnextfile\"></a>  CFtpFileFind::FindNextFile  \n Call this member function to continue a file search begun with a call to the [FindFile](#cftpfilefind__findfile) member function.  \n  \n```  \nvirtual BOOL FindNextFile();\n```  \n  \n### Return Value  \n Nonzero if there are more files; zero if the file found is the last one in the directory or if an error occurred. To get extended error information, call the Win32 function [GetLastError](http://msdn.microsoft.com/library/windows/desktop/ms679360). If the file found is the last file in the directory, or if no matching files can be found, the `GetLastError` function returns ERROR_NO_MORE_FILES.  \n  \n### Remarks  \n You must call this function at least once before calling any attribute function (see [CFileFind::FindNextFile](../../mfc/reference/cfilefind-class.md#cfilefind__findnextfile)).  \n  \n `FindNextFile` wraps the Win32 function [FindNextFile](http://msdn.microsoft.com/library/windows/desktop/aa364428).  \n  \n### Example  \n  See the example in the [CFtpFileFind](../../mfc/reference/cftpfilefind-class.md) class overview.  \n  \n##  <a name=\"cftpfilefind__getfileurl\"></a>  CFtpFileFind::GetFileURL  \n Call this member function to get the URL of the specified file.  \n  \n```  \nCString GetFileURL() const;\n\n \n```  \n  \n### Return Value  \n The file and path of the Universal Resource Locator (URL).  \n  \n### Remarks  \n `GetFileURL` is similar to the member function [CFileFind::GetFilePath](../../mfc/reference/cfilefind-class.md#cfilefind__getfilepath), except that it returns the URL in the form `ftp://moose/dir/file.txt`.  \n  \n## See Also  \n [CFileFind Class](../../mfc/reference/cfilefind-class.md)   \n [Hierarchy Chart](../../mfc/hierarchy-chart.md)   \n [CGopherFileFind Class](../../mfc/reference/cgopherfilefind-class.md)   \n [CInternetFile Class](../../mfc/reference/cinternetfile-class.md)   \n [CGopherFile Class](../../mfc/reference/cgopherfile-class.md)   \n [CHttpFile Class](../../mfc/reference/chttpfile-class.md)\n"}