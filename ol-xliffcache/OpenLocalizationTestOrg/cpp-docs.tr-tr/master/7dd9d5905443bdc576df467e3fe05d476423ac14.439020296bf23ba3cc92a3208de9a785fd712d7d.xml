{"nodes":[{"pos":[12,75],"content":"Alternatives to the Document-View Architecture | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Alternatives to the Document-View Architecture | Microsoft Docs","pos":[0,63]}]},{"content":"Alternatives to the Document/View Architecture","pos":[691,737]},{"content":"MFC applications normally use the document/view architecture to manage information, file formats, and the visual representation of data to users.","pos":[738,883]},{"content":"For the majority of desktop applications, the document/view architecture is an appropriate and efficient application architecture.","pos":[884,1014]},{"content":"This architecture separates data from viewing and, in most cases, simplifies your application and reduces redundant code.","pos":[1015,1136]},{"content":"However, the document/view architecture is not appropriate for some situations.","pos":[1143,1222]},{"content":"Consider these examples:","pos":[1223,1247]},{"content":"If you are porting an application written in C for Windows, you might want to complete your port before adding document/view support to your application.","pos":[1257,1410]},{"content":"If you are writing a lightweight utility, you might find that you can do without the document/view architecture.","pos":[1420,1532]},{"content":"If your original code already mixes data management with data viewing, moving the code to the document/view model is not worth the effort because you must separate the two.","pos":[1542,1714]},{"content":"You might prefer to leave the code as is.","pos":[1715,1756]},{"content":"To create an application that does not use the document/view architecture, clear the <bpt id=\"p1\">**</bpt>Document/View architecture support<ept id=\"p1\">**</ept> check box in step 1 of the MFC Application Wizard.","pos":[1763,1937],"source":"To create an application that does not use the document/view architecture, clear the **Document/View architecture support** check box in step 1 of the MFC Application Wizard."},{"content":"See <bpt id=\"p1\">[</bpt>MFC Application Wizard<ept id=\"p1\">](../mfc/reference/mfc-application-wizard.md)</ept> for details.","pos":[1938,2023],"source":" See [MFC Application Wizard](../mfc/reference/mfc-application-wizard.md) for details."},{"pos":[2031,2260],"content":"[!NOTE]\n Dialog-based applications produced by the MFC Application Wizard do not use the document/view architecture, so the **Document/View architecture support** check box is disabled if you select the dialog application type.","leadings":["","> "],"nodes":[{"content":"Dialog-based applications produced by the MFC Application Wizard do not use the document/view architecture, so the <bpt id=\"p1\">**</bpt>Document/View architecture support<ept id=\"p1\">**</ept> check box is disabled if you select the dialog application type.","pos":[9,227],"source":" Dialog-based applications produced by the MFC Application Wizard do not use the document/view architecture, so the **Document/View architecture support** check box is disabled if you select the dialog application type."}]},{"content":"The Visual C++ wizards, as well as the source and dialog editors, work with the generated application just as they would with any other Wizard-generated application.","pos":[2267,2432]},{"content":"The application can support toolbars, scrollbars, and a status bar, and has an <bpt id=\"p1\">**</bpt>About<ept id=\"p1\">**</ept> box.","pos":[2433,2526],"source":" The application can support toolbars, scrollbars, and a status bar, and has an **About** box."},{"content":"Your application will not register any document templates, and it will not contain a document class.","pos":[2527,2627]},{"content":"Note that your generated application has a view class, <bpt id=\"p1\">**</bpt>CChildView<ept id=\"p1\">**</ept>, derived from <ph id=\"ph1\">`CWnd`</ph>.","pos":[2634,2725],"source":"Note that your generated application has a view class, **CChildView**, derived from `CWnd`."},{"content":"MFC creates and positions one instance of the view class within the frame windows created by your application.","pos":[2726,2836]},{"content":"MFC still enforces using a view window, because it simplifies positioning and managing the application's content.","pos":[2837,2950]},{"content":"You can add painting code to the <ph id=\"ph1\">`OnPaint`</ph> member of this class.","pos":[2951,3015],"source":" You can add painting code to the `OnPaint` member of this class."},{"content":"Your code should add scrollbars to the view rather than to the frame.","pos":[3016,3085]},{"content":"Because the document/view architecture provided by MFC is responsible for implementing many of an application's basic features, its absence in your project means that you are responsible for implementing many important features of your application:","pos":[3092,3340]},{"content":"As provided by the MFC Application Wizard, the menu for your application contains only <ph id=\"ph1\">`New`</ph> and <ph id=\"ph2\">`Exit`</ph> commands on the <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept> menu.","pos":[3350,3484],"source":"As provided by the MFC Application Wizard, the menu for your application contains only `New` and `Exit` commands on the **File** menu."},{"content":"(The <ph id=\"ph1\">`New`</ph> command is supported only for MDI applications, not SDI applications without Document/View support.) The generated menu resource will not support an MRU (most recently used) list.","pos":[3485,3675],"source":" (The `New` command is supported only for MDI applications, not SDI applications without Document/View support.) The generated menu resource will not support an MRU (most recently used) list."},{"content":"You must add handler functions and implementations for any commands that your application will support, including <bpt id=\"p1\">**</bpt>Open<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Save<ept id=\"p2\">**</ept> on the <bpt id=\"p3\">**</bpt>File<ept id=\"p3\">**</ept> menu.","pos":[3685,3842],"source":"You must add handler functions and implementations for any commands that your application will support, including **Open** and **Save** on the **File** menu."},{"content":"MFC normally provides code to support these features, but that support is tightly bound to the document/view architecture.","pos":[3843,3965]},{"content":"The toolbar for your application, if you requested one, will be minimal.","pos":[3975,4047]},{"content":"It is strongly recommended that you use the MFC Application Wizard to create applications without the document/view architecture, because the wizard guarantees a correct MFC architecture.","pos":[4054,4241]},{"content":"However, if you must avoid using the wizard, here are several approaches for bypassing the document/view architecture in your code:","pos":[4242,4373]},{"content":"Treat the document as an unused appendage and implement your data management code in the view class, as suggested above.","pos":[4383,4503]},{"content":"Overhead for the document is relatively low.","pos":[4504,4548]},{"content":"A single <bpt id=\"p1\">[</bpt>CDocument<ept id=\"p1\">](../mfc/reference/cdocument-class.md)</ept> object incurs a small amount of overhead by itself, plus the small overhead of <bpt id=\"p2\">**</bpt>CDocument<ept id=\"p2\">**</ept>'s base classes, <bpt id=\"p3\">[</bpt>CCmdTarget<ept id=\"p3\">](../mfc/reference/ccmdtarget-class.md)</ept> and <bpt id=\"p4\">[</bpt>CObject<ept id=\"p4\">](../mfc/reference/cobject-class.md)</ept>.","pos":[4549,4816],"source":" A single [CDocument](../mfc/reference/cdocument-class.md) object incurs a small amount of overhead by itself, plus the small overhead of **CDocument**'s base classes, [CCmdTarget](../mfc/reference/ccmdtarget-class.md) and [CObject](../mfc/reference/cobject-class.md)."},{"content":"Both of the latter classes are small.","pos":[4817,4854]},{"pos":[4865,4891],"content":"Declared in <bpt id=\"p1\">**</bpt>CDocument<ept id=\"p1\">**</ept>:","source":"Declared in **CDocument**:"},{"pos":[4905,4927],"content":"Two <ph id=\"ph1\">`CString`</ph> objects.","source":"Two `CString` objects."},{"pos":[4941,4957],"content":"Three <bpt id=\"p1\">**</bpt>BOOL<ept id=\"p1\">**</ept>s.","source":"Three **BOOL**s."},{"pos":[4971,4998],"content":"One <ph id=\"ph1\">`CDocTemplate`</ph> pointer.","source":"One `CDocTemplate` pointer."},{"pos":[5012,5081],"content":"One <ph id=\"ph1\">`CPtrList`</ph> object, which contains a list of the document's views.","source":"One `CPtrList` object, which contains a list of the document's views."},{"content":"Additionally, the document requires the amount of time to create the document object, its view objects, a frame window, and a document template object.","pos":[5092,5243]},{"content":"Treat both the document and view as unused appendages.","pos":[5253,5307]},{"content":"Put your data management and drawing code in the frame window rather than the view.","pos":[5308,5391]},{"content":"This approach is closer to the C-language programming model.","pos":[5392,5452]},{"content":"Override the parts of the MFC framework that create the document and view to eliminate creating them at all.","pos":[5462,5570]},{"content":"The document creation process begins with a call to <ph id=\"ph1\">`CWinApp::AddDocTemplate`</ph>.","pos":[5571,5649],"source":" The document creation process begins with a call to `CWinApp::AddDocTemplate`."},{"content":"Eliminate that call from your application class's <ph id=\"ph1\">`InitInstance`</ph> member function and, instead, create a frame window in <ph id=\"ph2\">`InitInstance`</ph> yourself.","pos":[5650,5794],"source":" Eliminate that call from your application class's `InitInstance` member function and, instead, create a frame window in `InitInstance` yourself."},{"content":"Put your data management code in your frame window class.","pos":[5795,5852]},{"content":"The document/view creation process is illustrated in <bpt id=\"p1\">[</bpt>Document/View Creation<ept id=\"p1\">](../mfc/document-view-creation.md)</ept>.","pos":[5853,5965],"source":" The document/view creation process is illustrated in [Document/View Creation](../mfc/document-view-creation.md)."},{"content":"This is more work and requires a deeper understanding of the framework, but it frees you entirely of the document/view overhead.","pos":[5966,6094]},{"pos":[6101,6337],"content":"The article <bpt id=\"p1\">[</bpt>MFC: Using Database Classes Without Documents and Views<ept id=\"p1\">](../data/mfc-using-database-classes-without-documents-and-views.md)</ept> gives more concrete examples of document/view alternatives in the context of database applications.","source":"The article [MFC: Using Database Classes Without Documents and Views](../data/mfc-using-database-classes-without-documents-and-views.md) gives more concrete examples of document/view alternatives in the context of database applications."},{"content":"See Also","pos":[6346,6354]},{"content":"Document/View Architecture","pos":[6359,6385]}],"content":"---\ntitle: \"Alternatives to the Document-View Architecture | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"documents, applications without\"\n  - \"CDocument class, space requirements\"\n  - \"views, applications without\"\nms.assetid: 2c22f352-a137-45ce-9971-c142173496fb\ncaps.latest.revision: 9\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Alternatives to the Document/View Architecture\nMFC applications normally use the document/view architecture to manage information, file formats, and the visual representation of data to users. For the majority of desktop applications, the document/view architecture is an appropriate and efficient application architecture. This architecture separates data from viewing and, in most cases, simplifies your application and reduces redundant code.  \n  \n However, the document/view architecture is not appropriate for some situations. Consider these examples:  \n  \n-   If you are porting an application written in C for Windows, you might want to complete your port before adding document/view support to your application.  \n  \n-   If you are writing a lightweight utility, you might find that you can do without the document/view architecture.  \n  \n-   If your original code already mixes data management with data viewing, moving the code to the document/view model is not worth the effort because you must separate the two. You might prefer to leave the code as is.  \n  \n To create an application that does not use the document/view architecture, clear the **Document/View architecture support** check box in step 1 of the MFC Application Wizard. See [MFC Application Wizard](../mfc/reference/mfc-application-wizard.md) for details.  \n  \n> [!NOTE]\n>  Dialog-based applications produced by the MFC Application Wizard do not use the document/view architecture, so the **Document/View architecture support** check box is disabled if you select the dialog application type.  \n  \n The Visual C++ wizards, as well as the source and dialog editors, work with the generated application just as they would with any other Wizard-generated application. The application can support toolbars, scrollbars, and a status bar, and has an **About** box. Your application will not register any document templates, and it will not contain a document class.  \n  \n Note that your generated application has a view class, **CChildView**, derived from `CWnd`. MFC creates and positions one instance of the view class within the frame windows created by your application. MFC still enforces using a view window, because it simplifies positioning and managing the application's content. You can add painting code to the `OnPaint` member of this class. Your code should add scrollbars to the view rather than to the frame.  \n  \n Because the document/view architecture provided by MFC is responsible for implementing many of an application's basic features, its absence in your project means that you are responsible for implementing many important features of your application:  \n  \n-   As provided by the MFC Application Wizard, the menu for your application contains only `New` and `Exit` commands on the **File** menu. (The `New` command is supported only for MDI applications, not SDI applications without Document/View support.) The generated menu resource will not support an MRU (most recently used) list.  \n  \n-   You must add handler functions and implementations for any commands that your application will support, including **Open** and **Save** on the **File** menu. MFC normally provides code to support these features, but that support is tightly bound to the document/view architecture.  \n  \n-   The toolbar for your application, if you requested one, will be minimal.  \n  \n It is strongly recommended that you use the MFC Application Wizard to create applications without the document/view architecture, because the wizard guarantees a correct MFC architecture. However, if you must avoid using the wizard, here are several approaches for bypassing the document/view architecture in your code:  \n  \n-   Treat the document as an unused appendage and implement your data management code in the view class, as suggested above. Overhead for the document is relatively low. A single [CDocument](../mfc/reference/cdocument-class.md) object incurs a small amount of overhead by itself, plus the small overhead of **CDocument**'s base classes, [CCmdTarget](../mfc/reference/ccmdtarget-class.md) and [CObject](../mfc/reference/cobject-class.md). Both of the latter classes are small.  \n  \n     Declared in **CDocument**:  \n  \n    -   Two `CString` objects.  \n  \n    -   Three **BOOL**s.  \n  \n    -   One `CDocTemplate` pointer.  \n  \n    -   One `CPtrList` object, which contains a list of the document's views.  \n  \n     Additionally, the document requires the amount of time to create the document object, its view objects, a frame window, and a document template object.  \n  \n-   Treat both the document and view as unused appendages. Put your data management and drawing code in the frame window rather than the view. This approach is closer to the C-language programming model.  \n  \n-   Override the parts of the MFC framework that create the document and view to eliminate creating them at all. The document creation process begins with a call to `CWinApp::AddDocTemplate`. Eliminate that call from your application class's `InitInstance` member function and, instead, create a frame window in `InitInstance` yourself. Put your data management code in your frame window class. The document/view creation process is illustrated in [Document/View Creation](../mfc/document-view-creation.md). This is more work and requires a deeper understanding of the framework, but it frees you entirely of the document/view overhead.  \n  \n The article [MFC: Using Database Classes Without Documents and Views](../data/mfc-using-database-classes-without-documents-and-views.md) gives more concrete examples of document/view alternatives in the context of database applications.  \n  \n## See Also  \n [Document/View Architecture](../mfc/document-view-architecture.md)\n\n"}