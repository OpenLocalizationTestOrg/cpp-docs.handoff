{"nodes":[{"pos":[12,86],"content":"Consistency Rules for Per-File Use of Precompiled Headers | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Consistency Rules for Per-File Use of Precompiled Headers | Microsoft Docs","pos":[0,74]}]},{"content":"Consistency Rules for Per-File Use of Precompiled Headers","pos":[709,766]},{"pos":[767,910],"content":"The <bpt id=\"p1\">[</bpt>/Yu<ept id=\"p1\">](../../build/reference/yu-use-precompiled-header-file.md)</ept> compiler option lets you specify which precompiled header (PCH) file to use.","source":"The [/Yu](../../build/reference/yu-use-precompiled-header-file.md) compiler option lets you specify which precompiled header (PCH) file to use."},{"content":"When you use a PCH, the compiler assumes the same compilation environment — using consistent compiler options, pragmas, and so on — that was in effect when you created the PCH, unless you specify otherwise.","pos":[917,1123]},{"content":"If the compiler detects an inconsistency, it issues a warning and identifies the inconsistency where possible.","pos":[1124,1234]},{"content":"Such warnings do not necessarily indicate a problem with the PCH; they simply warn you of possible conflicts.","pos":[1235,1344]},{"content":"Consistency requirements for PCHs are described in the following sections.","pos":[1345,1419]},{"content":"Compiler Option Consistency","pos":[1428,1455]},{"content":"The following compiler options can trigger an inconsistency warning when using a PCH:","pos":[1459,1544]},{"content":"Macros created using the Preprocessor (/D) option must be the same between the compilation that created the PCH and the current compilation.","pos":[1554,1694]},{"content":"The state of defined constants is not checked, but unpredictable results can occur if these change.","pos":[1695,1794]},{"content":"PCHs do not work with the /E and /EP options.","pos":[1804,1849]},{"content":"PCHs must be created using either the Generate Browse Info (/FR) option or the Exclude Local Variables (/Fr) option before subsequent compilations that use the PCH can use these options.","pos":[1859,2045]},{"content":"C 7.0-Compatible (/Z7)","pos":[2054,2076]},{"content":"If this option is in effect when the PCH is created, subsequent compilations that use the PCH can use the debugging information.","pos":[2080,2208]},{"content":"If the C 7.0-Compatible (/Z7) option is not in effect when the PCH is created, subsequent compilations that use the PCH and /Z7 trigger a warning.","pos":[2215,2361]},{"content":"The debugging information is placed in the current .obj file, and local symbols defined in the PCH are not available to the debugger.","pos":[2362,2495]},{"content":"Include Path Consistency","pos":[2504,2528]},{"content":"A PCH does not contain information about the include path that was in effect when it was created.","pos":[2532,2629]},{"content":"When you use a .pch file, the compiler always uses the include path specified in the current compilation.","pos":[2630,2735]},{"content":"Source File Consistency","pos":[2744,2767]},{"content":"When you specify the Use Precompiled Header File (/Yu) option, the compiler ignores all preprocessor directives (including pragmas) that appear in the source code that will be precompiled.","pos":[2771,2959]},{"content":"The compilation specified by such preprocessor directives must be the same as the compilation used for the Create Precompiled Header File (/Yc) option.","pos":[2960,3111]},{"content":"Pragma Consistency","pos":[3120,3138]},{"content":"Pragmas processed during the creation of a PCH usually affect the file with which the PCH is subsequently used.","pos":[3142,3253]},{"content":"The comment and message pragmas do not affect the remainder of the compilation.","pos":[3254,3333]},{"content":"The following pragmas are retained as part of a PCH, and affect the remainder of a compilation that uses the PCH.","pos":[3340,3453]},{"content":"alloc_text","pos":[3477,3487]},{"content":"include_alias","pos":[3488,3501]},{"content":"pack","pos":[3502,3506]},{"content":"auto_inline","pos":[3511,3522]},{"content":"init_seg","pos":[3523,3531]},{"content":"pointers_to_members","pos":[3532,3551]},{"content":"check_stack","pos":[3556,3567]},{"content":"inline_depth","pos":[3568,3580]},{"content":"setlocale","pos":[3581,3590]},{"content":"code_seg","pos":[3595,3603]},{"content":"inline_recursion","pos":[3604,3620]},{"content":"vtordisp","pos":[3621,3629]},{"content":"data_seg","pos":[3634,3642]},{"content":"intrinsic","pos":[3643,3652]},{"content":"warning","pos":[3653,3660]},{"content":"function","pos":[3665,3673]},{"content":"optimize","pos":[3674,3682]},{"content":"See Also","pos":[3693,3701]},{"content":"Precompiled Header Consistency Rules","pos":[3706,3742]},{"content":"/Yu (Use Precompiled Header File)","pos":[3812,3845]},{"content":"Compiler Options","pos":[3909,3925]}],"content":"---\ntitle: \"Consistency Rules for Per-File Use of Precompiled Headers | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"precompiled header files, consistency rules\"\n  - \"PCH files, consistency rules\"\n  - \".pch files, consistency rules\"\nms.assetid: afd49365-48bc-41f4-b700-fe8297b944a1\ncaps.latest.revision: 6\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Consistency Rules for Per-File Use of Precompiled Headers\nThe [/Yu](../../build/reference/yu-use-precompiled-header-file.md) compiler option lets you specify which precompiled header (PCH) file to use.  \n  \n When you use a PCH, the compiler assumes the same compilation environment — using consistent compiler options, pragmas, and so on — that was in effect when you created the PCH, unless you specify otherwise. If the compiler detects an inconsistency, it issues a warning and identifies the inconsistency where possible. Such warnings do not necessarily indicate a problem with the PCH; they simply warn you of possible conflicts. Consistency requirements for PCHs are described in the following sections.  \n  \n## Compiler Option Consistency  \n The following compiler options can trigger an inconsistency warning when using a PCH:  \n  \n-   Macros created using the Preprocessor (/D) option must be the same between the compilation that created the PCH and the current compilation. The state of defined constants is not checked, but unpredictable results can occur if these change.  \n  \n-   PCHs do not work with the /E and /EP options.  \n  \n-   PCHs must be created using either the Generate Browse Info (/FR) option or the Exclude Local Variables (/Fr) option before subsequent compilations that use the PCH can use these options.  \n  \n## C 7.0-Compatible (/Z7)  \n If this option is in effect when the PCH is created, subsequent compilations that use the PCH can use the debugging information.  \n  \n If the C 7.0-Compatible (/Z7) option is not in effect when the PCH is created, subsequent compilations that use the PCH and /Z7 trigger a warning. The debugging information is placed in the current .obj file, and local symbols defined in the PCH are not available to the debugger.  \n  \n## Include Path Consistency  \n A PCH does not contain information about the include path that was in effect when it was created. When you use a .pch file, the compiler always uses the include path specified in the current compilation.  \n  \n## Source File Consistency  \n When you specify the Use Precompiled Header File (/Yu) option, the compiler ignores all preprocessor directives (including pragmas) that appear in the source code that will be precompiled. The compilation specified by such preprocessor directives must be the same as the compilation used for the Create Precompiled Header File (/Yc) option.  \n  \n## Pragma Consistency  \n Pragmas processed during the creation of a PCH usually affect the file with which the PCH is subsequently used. The comment and message pragmas do not affect the remainder of the compilation.  \n  \n The following pragmas are retained as part of a PCH, and affect the remainder of a compilation that uses the PCH.  \n  \n||||  \n|-|-|-|  \n|alloc_text|include_alias|pack|  \n|auto_inline|init_seg|pointers_to_members|  \n|check_stack|inline_depth|setlocale|  \n|code_seg|inline_recursion|vtordisp|  \n|data_seg|intrinsic|warning|  \n|function|optimize||  \n  \n## See Also  \n [Precompiled Header Consistency Rules](../../build/reference/precompiled-header-consistency-rules.md)   \n [/Yu (Use Precompiled Header File)](../../build/reference/yu-use-precompiled-header-file.md)   \n [Compiler Options](../../build/reference/compiler-options.md)"}