{"nodes":[{"pos":[12,56],"content":"Memory Management: Examples | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Memory Management: Examples | Microsoft Docs","pos":[0,44]}]},{"content":"Memory Management: Examples","pos":[1153,1180]},{"content":"This article describes how MFC performs frame allocations and heap allocations for each of the three typical kinds of memory allocations:","pos":[1181,1318]},{"content":"An array of bytes","pos":[1329,1346]},{"content":"A data structure","pos":[1398,1414]},{"content":"An object","pos":[1465,1474]},{"pos":[1570,1601],"content":"Allocation of an Array of Bytes"},{"content":"To allocate an array of bytes on the frame","pos":[1612,1654]},{"content":"Define the array as shown by the following code.","pos":[1664,1712]},{"content":"The array is automatically deleted and its memory reclaimed when the array variable exits its scope.","pos":[1713,1813]},{"pos":[1835,1854],"content":"NVC_MFC_Utilities#1"},{"content":"To allocate an array of bytes (or any primitive data type) on the heap","pos":[1924,1994]},{"pos":[2004,2073],"content":"Use the <bpt id=\"p1\">**</bpt>new<ept id=\"p1\">**</ept> operator with the array syntax shown in this example:","source":"Use the **new** operator with the array syntax shown in this example:"},{"pos":[2095,2114],"content":"NVC_MFC_Utilities#2"},{"content":"To deallocate the arrays from the heap","pos":[2184,2222]},{"pos":[2232,2271],"content":"Use the <bpt id=\"p1\">**</bpt>delete<ept id=\"p1\">**</ept> operator as follows:","source":"Use the **delete** operator as follows:"},{"pos":[2293,2312],"content":"NVC_MFC_Utilities#3"},{"pos":[2433,2463],"content":"Allocation of a Data Structure"},{"content":"To allocate a data structure on the frame","pos":[2474,2515]},{"content":"Define the structure variable as follows:","pos":[2525,2566]},{"pos":[2588,2607],"content":"NVC_MFC_Utilities#4"},{"content":"The memory occupied by the structure is reclaimed when it exits its scope.","pos":[2677,2751]},{"content":"To allocate data structures on the heap","pos":[2762,2801]},{"pos":[2811,2933],"content":"Use <bpt id=\"p1\">**</bpt>new<ept id=\"p1\">**</ept> to allocate data structures on the heap and <bpt id=\"p2\">**</bpt>delete<ept id=\"p2\">**</ept> to deallocate them, as shown by the following examples:","source":"Use **new** to allocate data structures on the heap and **delete** to deallocate them, as shown by the following examples:"},{"pos":[2955,2974],"content":"NVC_MFC_Utilities#5"},{"pos":[3088,3111],"content":"Allocation of an Object"},{"content":"To allocate an object on the frame","pos":[3122,3156]},{"content":"Declare the object as follows:","pos":[3166,3196]},{"pos":[3218,3237],"content":"NVC_MFC_Utilities#6"},{"content":"The destructor for the object is automatically invoked when the object exits its scope.","pos":[3307,3394]},{"content":"To allocate an object on the heap","pos":[3405,3438]},{"content":"Use the <bpt id=\"p1\">**</bpt>new<ept id=\"p1\">**</ept> operator, which returns a pointer to the object, to allocate objects on the heap.","pos":[3448,3545],"source":"Use the **new** operator, which returns a pointer to the object, to allocate objects on the heap."},{"content":"Use the <bpt id=\"p1\">**</bpt>delete<ept id=\"p1\">**</ept> operator to delete them.","pos":[3546,3589],"source":" Use the **delete** operator to delete them."},{"pos":[3600,3695],"content":"The following heap and frame examples assume that the <ph id=\"ph1\">`CPerson`</ph> constructor takes no arguments.","source":"The following heap and frame examples assume that the `CPerson` constructor takes no arguments."},{"pos":[3717,3736],"content":"NVC_MFC_Utilities#7"},{"pos":[3806,3914],"content":"If the argument for the <ph id=\"ph1\">`CPerson`</ph> constructor is a pointer to <ph id=\"ph2\">`char`</ph>, the statement for frame allocation is:","source":"If the argument for the `CPerson` constructor is a pointer to `char`, the statement for frame allocation is:"},{"pos":[3936,3955],"content":"NVC_MFC_Utilities#8"},{"content":"The statement for heap allocation is:","pos":[4025,4062]},{"pos":[4084,4103],"content":"NVC_MFC_Utilities#9"},{"content":"See Also","pos":[4171,4179]},{"content":"Memory Management: Heap Allocation","pos":[4184,4218]}],"content":"---\ntitle: \"Memory Management: Examples | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"objects [C++], memory allocation\"\n  - \"data structures [C++]\"\n  - \"arrays [C++], allocating resources\"\n  - \"objects [C++], allocating memory\"\n  - \"data structures [C++], allocating memory\"\n  - \"examples [MFC], memory allocation\"\n  - \"heap allocation, examples\"\n  - \"memory allocation [C++], arrays\"\n  - \"MFC [C++], memory management\"\n  - \"struct memory allocation\"\n  - \"types [C++], memory allocation\"\n  - \"memory allocation [C++], objects\"\n  - \"memory allocation [C++], examples\"\n  - \"arrays [C++], memory management\"\n  - \"frame allocation\"\n  - \"memory allocation [C++], data structures\"\nms.assetid: f10240f8-b698-4c83-9288-97a54318930b\ncaps.latest.revision: 12\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Memory Management: Examples\nThis article describes how MFC performs frame allocations and heap allocations for each of the three typical kinds of memory allocations:  \n  \n-   [An array of bytes](#_core_allocation_of_an_array_of_bytes)  \n  \n-   [A data structure](#_core_allocation_of_a_data_structure)  \n  \n-   [An object](#_core_allocation_of_an_object)  \n  \n##  <a name=\"_core_allocation_of_an_array_of_bytes\"></a> Allocation of an Array of Bytes  \n  \n#### To allocate an array of bytes on the frame  \n  \n1.  Define the array as shown by the following code. The array is automatically deleted and its memory reclaimed when the array variable exits its scope.  \n  \n     [!code-cpp[NVC_MFC_Utilities#1](../mfc/codesnippet/cpp/memory-management-examples_1.cpp)]  \n  \n#### To allocate an array of bytes (or any primitive data type) on the heap  \n  \n1.  Use the **new** operator with the array syntax shown in this example:  \n  \n     [!code-cpp[NVC_MFC_Utilities#2](../mfc/codesnippet/cpp/memory-management-examples_2.cpp)]  \n  \n#### To deallocate the arrays from the heap  \n  \n1.  Use the **delete** operator as follows:  \n  \n     [!code-cpp[NVC_MFC_Utilities#3](../mfc/codesnippet/cpp/memory-management-examples_3.cpp)]  \n  \n##  <a name=\"_core_allocation_of_a_data_structure\"></a> Allocation of a Data Structure  \n  \n#### To allocate a data structure on the frame  \n  \n1.  Define the structure variable as follows:  \n  \n     [!code-cpp[NVC_MFC_Utilities#4](../mfc/codesnippet/cpp/memory-management-examples_4.cpp)]  \n  \n     The memory occupied by the structure is reclaimed when it exits its scope.  \n  \n#### To allocate data structures on the heap  \n  \n1.  Use **new** to allocate data structures on the heap and **delete** to deallocate them, as shown by the following examples:  \n  \n     [!code-cpp[NVC_MFC_Utilities#5](../mfc/codesnippet/cpp/memory-management-examples_5.cpp)]  \n  \n##  <a name=\"_core_allocation_of_an_object\"></a> Allocation of an Object  \n  \n#### To allocate an object on the frame  \n  \n1.  Declare the object as follows:  \n  \n     [!code-cpp[NVC_MFC_Utilities#6](../mfc/codesnippet/cpp/memory-management-examples_6.cpp)]  \n  \n     The destructor for the object is automatically invoked when the object exits its scope.  \n  \n#### To allocate an object on the heap  \n  \n1.  Use the **new** operator, which returns a pointer to the object, to allocate objects on the heap. Use the **delete** operator to delete them.  \n  \n     The following heap and frame examples assume that the `CPerson` constructor takes no arguments.  \n  \n     [!code-cpp[NVC_MFC_Utilities#7](../mfc/codesnippet/cpp/memory-management-examples_7.cpp)]  \n  \n     If the argument for the `CPerson` constructor is a pointer to `char`, the statement for frame allocation is:  \n  \n     [!code-cpp[NVC_MFC_Utilities#8](../mfc/codesnippet/cpp/memory-management-examples_8.cpp)]  \n  \n     The statement for heap allocation is:  \n  \n     [!code-cpp[NVC_MFC_Utilities#9](../mfc/codesnippet/cpp/memory-management-examples_9.cpp)]  \n  \n## See Also  \n [Memory Management: Heap Allocation](../mfc/memory-management-heap-allocation.md)\n\n"}