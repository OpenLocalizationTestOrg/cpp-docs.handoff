{"nodes":[{"pos":[12,44],"content":"_sopen, _wsopen | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"_sopen, _wsopen | Microsoft Docs","pos":[0,32]}]},{"pos":[1138,1153],"content":"_sopen, _wsopen","linkify":"_sopen, _wsopen","nodes":[{"content":"_sopen, _wsopen","pos":[0,15]}]},{"content":"Opens a file for sharing.","pos":[1154,1179]},{"content":"More-secure versions of these functions are available—see <bpt id=\"p1\">[</bpt>_sopen_s, _wsopen_s<ept id=\"p1\">](../../c-runtime-library/reference/sopen-s-wsopen-s.md)</ept>.","pos":[1180,1315],"source":" More-secure versions of these functions are available—see [_sopen_s, _wsopen_s](../../c-runtime-library/reference/sopen-s-wsopen-s.md)."},{"pos":[1324,1330],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1558,1568],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"File name.","pos":[1586,1596]},{"content":"The kind of operations allowed.","pos":[1614,1645]},{"content":"The kind of sharing allowed.","pos":[1664,1692]},{"content":"Permission setting.","pos":[1710,1729]},{"pos":[1738,1750],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"Each of these functions returns a file descriptor for the opened file.","pos":[1754,1824]},{"content":"If <ph id=\"ph1\">`filename`</ph> or <ph id=\"ph2\">`oflag`</ph> is a <ph id=\"ph3\">`NULL`</ph> pointer, or if <ph id=\"ph4\">`oflag`</ph> or <ph id=\"ph5\">`shflag`</ph> is not within a valid range of values, the invalid parameter handler is invoked, as described in <bpt id=\"p1\">[</bpt>Parameter Validation<ept id=\"p1\">](../../c-runtime-library/parameter-validation.md)</ept>.","pos":[1831,2072],"source":"If `filename` or `oflag` is a `NULL` pointer, or if `oflag` or `shflag` is not within a valid range of values, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md)."},{"content":"If execution is allowed to continue, these functions return -1 and set <ph id=\"ph1\">`errno`</ph> to one of the following values.","pos":[2073,2183],"source":" If execution is allowed to continue, these functions return -1 and set `errno` to one of the following values."},{"content":"The given path is a directory, or the file is read-only, but an open-for-writing operation was attempted.","pos":[2202,2307]},{"content":"<ph id=\"ph1\"> `_O_CREAT`</ph> and <ph id=\"ph2\">`_O_EXCL`</ph> flags were specified, but <ph id=\"ph3\">`filename`</ph> already exists.","pos":[2325,2403],"source":" `_O_CREAT` and `_O_EXCL` flags were specified, but `filename` already exists."},{"content":"Invalid <ph id=\"ph1\">`oflag`</ph> or <ph id=\"ph2\">`shflag`</ph> argument.","pos":[2422,2459],"source":" Invalid `oflag` or `shflag` argument."},{"content":"No more file descriptors are available.","pos":[2478,2517]},{"content":"File or path is not found.","pos":[2536,2562]},{"pos":[2569,2746],"content":"For more information about these and other return codes, see <bpt id=\"p1\">[</bpt>_doserrno, errno, _sys_errlist, and _sys_nerr<ept id=\"p1\">](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md)</ept>.","source":"For more information about these and other return codes, see [_doserrno, errno, _sys_errlist, and _sys_nerr](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md)."},{"pos":[2755,2762],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">`_sopen`</ph> function opens the file specified by <ph id=\"ph2\">`filename`</ph> and prepares the file for shared reading or writing, as defined by <ph id=\"ph3\">`oflag`</ph> and <ph id=\"ph4\">`shflag`</ph>.","pos":[2766,2915],"source":"The `_sopen` function opens the file specified by `filename` and prepares the file for shared reading or writing, as defined by `oflag` and `shflag`."},{"content":"<ph id=\"ph1\">`_wsopen`</ph> is a wide-character version of <ph id=\"ph2\">`_sopen`</ph>; the <ph id=\"ph3\">`filename`</ph> argument to <ph id=\"ph4\">`_wsopen`</ph> is a wide-character string.","pos":[2916,3031],"source":"`_wsopen` is a wide-character version of `_sopen`; the `filename` argument to `_wsopen` is a wide-character string."},{"content":"<ph id=\"ph1\">`_wsopen`</ph> and <ph id=\"ph2\">`_sopen`</ph> behave identically otherwise.","pos":[3032,3084],"source":"`_wsopen` and `_sopen` behave identically otherwise."},{"pos":[3094,3123],"content":"Generic-Text Routine Mappings","linkify":"Generic-Text Routine Mappings","nodes":[{"content":"Generic-Text Routine Mappings","pos":[0,29]}]},{"content":"Tchar.h routine","pos":[3130,3145]},{"content":"_UNICODE and _MBCS not defined","pos":[3146,3176]},{"content":"_MBCS defined","pos":[3177,3190]},{"content":"_UNICODE defined","pos":[3191,3207]},{"content":"The integer expression <ph id=\"ph1\">`oflag`</ph> is formed by combining one or more of the following manifest constants, which are defined in <ph id=\"ph2\">\\&lt;</ph>fcntl.h&gt;.","pos":[3367,3502],"source":"The integer expression `oflag` is formed by combining one or more of the following manifest constants, which are defined in \\<fcntl.h>."},{"content":"When two or more constants form the argument <ph id=\"ph1\">`oflag`</ph>, they are combined with the bitwise-OR operator ( <ph id=\"ph2\">`|`</ph> ).","pos":[3503,3612],"source":" When two or more constants form the argument `oflag`, they are combined with the bitwise-OR operator ( `|` )."},{"content":"Repositions a file pointer to the end of the file before every write operation.","pos":[3634,3713]},{"content":"Opens a file in binary (untranslated) mode.","pos":[3735,3778]},{"content":"(See <bpt id=\"p1\">[</bpt>fopen<ept id=\"p1\">](../../c-runtime-library/reference/fopen-wfopen.md)</ept> for a description of binary mode.)","pos":[3779,3877],"source":" (See [fopen](../../c-runtime-library/reference/fopen-wfopen.md) for a description of binary mode.)"},{"content":"Creates a file and opens it for writing.","pos":[3898,3938]},{"content":"Has no effect if the file specified by <ph id=\"ph1\">`filename`</ph> exists.","pos":[3939,3996],"source":" Has no effect if the file specified by `filename` exists."},{"content":"The <ph id=\"ph1\">`pmode`</ph> argument is required when <ph id=\"ph2\">`_O_CREAT`</ph> is specified.","pos":[3997,4059],"source":" The `pmode` argument is required when `_O_CREAT` is specified."},{"content":"Creates a file as temporary and if possible does not flush to disk.","pos":[4097,4164]},{"content":"The <ph id=\"ph1\">`pmode`</ph> argument is required when <ph id=\"ph2\">`_O_CREAT`</ph> is specified.","pos":[4165,4227],"source":" The `pmode` argument is required when `_O_CREAT` is specified."},{"content":"Creates a file as temporary; the file is deleted when the last file descriptor is closed.","pos":[4263,4352]},{"content":"The <ph id=\"ph1\">`pmode`</ph> argument is required when <ph id=\"ph2\">`_O_CREAT`</ph> is specified.","pos":[4353,4415],"source":" The `pmode` argument is required when `_O_CREAT` is specified."},{"content":"Returns an error value if a file specified by <ph id=\"ph1\">`filename`</ph> exists.","pos":[4446,4510],"source":" Returns an error value if a file specified by `filename` exists."},{"content":"Applies only when used with <ph id=\"ph1\">`_O_CREAT`</ph>.","pos":[4511,4550],"source":" Applies only when used with `_O_CREAT`."},{"content":"Prevents creation of a shared file descriptor.","pos":[4575,4621]},{"content":"Specifies primarily random access from disk.","pos":[4643,4687]},{"content":"Opens a file for reading only.","pos":[4709,4739]},{"content":"Cannot be specified with <ph id=\"ph1\">`_O_RDWR`</ph> or <ph id=\"ph2\">`_O_WRONLY`</ph>.","pos":[4740,4790],"source":" Cannot be specified with `_O_RDWR` or `_O_WRONLY`."},{"content":"Opens a file for both reading and writing.","pos":[4810,4852]},{"content":"Cannot be specified with <ph id=\"ph1\">`_O_RDONLY`</ph> or <ph id=\"ph2\">`_O_WRONLY`</ph>.","pos":[4853,4905],"source":" Cannot be specified with `_O_RDONLY` or `_O_WRONLY`."},{"content":"Specifies primarily sequential access from disk.","pos":[4931,4979]},{"content":"Opens a file in text (translated) mode.","pos":[4999,5038]},{"content":"(For more information, see <bpt id=\"p1\">[</bpt>Text and Binary Mode File I/O<ept id=\"p1\">](../../c-runtime-library/text-and-binary-mode-file-i-o.md)</ept> and <bpt id=\"p2\">[</bpt>fopen<ept id=\"p2\">](../../c-runtime-library/reference/fopen-wfopen.md)</ept>.)","pos":[5039,5220],"source":" (For more information, see [Text and Binary Mode File I/O](../../c-runtime-library/text-and-binary-mode-file-i-o.md) and [fopen](../../c-runtime-library/reference/fopen-wfopen.md).)"},{"content":"Opens a file and truncates it to zero length; the file must have write permission.","pos":[5241,5323]},{"content":"Cannot be specified with <ph id=\"ph1\">`_O_RDONLY`</ph>.","pos":[5324,5361],"source":" Cannot be specified with `_O_RDONLY`."},{"content":"<ph id=\"ph1\">`_O_TRUNC`</ph> used with <ph id=\"ph2\">`_O_CREAT`</ph> opens an existing file or creates a file.","pos":[5362,5435],"source":"`_O_TRUNC` used with `_O_CREAT` opens an existing file or creates a file."},{"pos":[5443,5518],"content":"[!NOTE]\n The `_O_TRUNC` flag destroys the contents of the specified file.","leadings":["","> "],"nodes":[{"content":"The <ph id=\"ph1\">`_O_TRUNC`</ph> flag destroys the contents of the specified file.","pos":[9,73],"source":" The `_O_TRUNC` flag destroys the contents of the specified file."}]},{"content":"Opens a file for writing only.","pos":[5540,5570]},{"content":"Cannot be specified with <ph id=\"ph1\">`_O_RDONLY`</ph> or <ph id=\"ph2\">`_O_RDWR`</ph>.","pos":[5571,5621],"source":" Cannot be specified with `_O_RDONLY` or `_O_RDWR`."},{"content":"Opens a file in Unicode UTF-16 mode.","pos":[5644,5680]},{"content":"Opens a file in Unicode UTF-8 mode.","pos":[5702,5737]},{"content":"Opens a file in Unicode mode.","pos":[5758,5787]},{"content":"To specify the file access mode, you must specify either <ph id=\"ph1\">`_O_RDONLY`</ph>, <ph id=\"ph2\">`_O_RDWR`</ph>, or <ph id=\"ph3\">`_O_WRONLY`</ph>.","pos":[5794,5890],"source":"To specify the file access mode, you must specify either `_O_RDONLY`, `_O_RDWR`, or `_O_WRONLY`."},{"content":"There is no default value for the access mode.","pos":[5891,5937]},{"content":"When a file is opened in Unicode mode by using <ph id=\"ph1\">`_O_WTEXT`</ph>, <ph id=\"ph2\">`_O_U8TEXT`</ph>, or <ph id=\"ph3\">`_O_U16TEXT`</ph>, input functions translate the data that's read from the file into UTF-16 data stored as type <ph id=\"ph4\">`wchar_t`</ph>.","pos":[5944,6136],"source":"When a file is opened in Unicode mode by using `_O_WTEXT`, `_O_U8TEXT`, or `_O_U16TEXT`, input functions translate the data that's read from the file into UTF-16 data stored as type `wchar_t`."},{"content":"Functions that write to a file opened in Unicode mode expect buffers that contain UTF-16 data stored as type <ph id=\"ph1\">`wchar_t`</ph>.","pos":[6137,6256],"source":" Functions that write to a file opened in Unicode mode expect buffers that contain UTF-16 data stored as type `wchar_t`."},{"content":"If the file is encoded as UTF-8, then UTF-16 data is translated into UTF-8 when it is written, and the file's UTF-8-encoded content is translated into UTF-16 when it is read.","pos":[6257,6431]},{"content":"An attempt to read or write an odd number of bytes in Unicode mode causes a parameter validation error.","pos":[6432,6535]},{"content":"To read or write data that's stored in your program as UTF-8, use a text or binary file mode instead of a Unicode mode.","pos":[6536,6655]},{"content":"You are responsible for any required encoding translation.","pos":[6656,6714]},{"content":"If <ph id=\"ph1\">`_sopen`</ph> is called with <ph id=\"ph2\">`_O_WRONLY | _O_APPEND`</ph> (append mode) and <ph id=\"ph3\">`_O_WTEXT`</ph>, <ph id=\"ph4\">`_O_U16TEXT`</ph>, or <ph id=\"ph5\">`_O_U8TEXT`</ph>, it first tries to open the file for reading and writing, read the BOM, then reopen it for writing only.","pos":[6721,6935],"source":"If `_sopen` is called with `_O_WRONLY | _O_APPEND` (append mode) and `_O_WTEXT`, `_O_U16TEXT`, or `_O_U8TEXT`, it first tries to open the file for reading and writing, read the BOM, then reopen it for writing only."},{"content":"If opening the file for reading and writing fails, it opens the file for writing only and uses the default value for the Unicode mode setting.","pos":[6936,7078]},{"pos":[7085,7219],"content":"The argument <ph id=\"ph1\">`shflag`</ph> is a constant expression consisting of one of the following manifest constants, which are defined in <ph id=\"ph2\">\\&lt;</ph>share.h&gt;.","source":"The argument `shflag` is a constant expression consisting of one of the following manifest constants, which are defined in \\<share.h>."},{"content":"Denies read and write access to a file.","pos":[7242,7281]},{"content":"Denies write access to a file.","pos":[7304,7334]},{"content":"Denies read access to a file.","pos":[7357,7386]},{"content":"Permits read and write access.","pos":[7409,7439]},{"content":"The <ph id=\"ph1\">`pmode`</ph> argument is required only when <ph id=\"ph2\">`_O_CREAT`</ph> is specified.","pos":[7446,7513],"source":"The `pmode` argument is required only when `_O_CREAT` is specified."},{"content":"If the file does not exist, <ph id=\"ph1\">`pmode`</ph> specifies the file's permission settings, which are set when the new file is closed the first time.","pos":[7514,7649],"source":" If the file does not exist, `pmode` specifies the file's permission settings, which are set when the new file is closed the first time."},{"content":"Otherwise, <ph id=\"ph1\">`pmode`</ph> is ignored.","pos":[7650,7680],"source":" Otherwise, `pmode` is ignored."},{"content":"<ph id=\"ph1\">`pmode`</ph> is an integer expression that contains one or both of the manifest constants <ph id=\"ph2\">`_S_IWRITE`</ph> and <ph id=\"ph3\">`_S_IREAD`</ph>, which are defined in <ph id=\"ph4\">\\&lt;</ph>sys\\stat.h&gt;.","pos":[7681,7829],"source":"`pmode` is an integer expression that contains one or both of the manifest constants `_S_IWRITE` and `_S_IREAD`, which are defined in \\<sys\\stat.h>."},{"content":"When both constants are given, they are combined with the bitwise-OR operator.","pos":[7830,7908]},{"content":"The meaning of <ph id=\"ph1\">`pmode`</ph> is as follows.","pos":[7909,7946],"source":" The meaning of `pmode` is as follows."},{"content":"Writing permitted.","pos":[7968,7986]},{"content":"Reading permitted.","pos":[8007,8025]},{"content":"Reading and writing permitted.","pos":[8058,8088]},{"content":"If write permission is not given, the file is read-only.","pos":[8095,8151]},{"content":"In the Windows operating system, all files are readable; it is not possible to give write-only permission.","pos":[8152,8258]},{"content":"Therefore, the modes <ph id=\"ph1\">`_S_IWRITE`</ph> and <ph id=\"ph2\">`_S_IREAD | _S_IWRITE`</ph> are equivalent.","pos":[8259,8334],"source":" Therefore, the modes `_S_IWRITE` and `_S_IREAD | _S_IWRITE` are equivalent."},{"content":"<ph id=\"ph1\">`_sopen`</ph> applies the current file-permission mask to <ph id=\"ph2\">`pmode`</ph> before the permissions are set.","pos":[8341,8433],"source":"`_sopen` applies the current file-permission mask to `pmode` before the permissions are set."},{"content":"(See <bpt id=\"p1\">[</bpt>_umask<ept id=\"p1\">](../../c-runtime-library/reference/umask.md)</ept>.)","pos":[8434,8493],"source":" (See [_umask](../../c-runtime-library/reference/umask.md).)"},{"pos":[8502,8514],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"content":"Routine","pos":[8521,8528]},{"content":"Required header","pos":[8529,8544]},{"content":"Optional header","pos":[8545,8560]},{"content":"<ph id=\"ph1\">\\&lt;</ph>io.h&gt;","pos":[8636,8643],"source":"\\<io.h>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>fcntl.h&gt;, <ph id=\"ph2\">\\&lt;</ph>sys\\types.h&gt;, <ph id=\"ph3\">\\&lt;</ph>sys\\stat.h&gt;, <ph id=\"ph4\">\\&lt;</ph>share.h&gt;","pos":[8644,8697],"source":"\\<fcntl.h>, \\<sys\\types.h>, \\<sys\\stat.h>, \\<share.h>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>io.h&gt; or <ph id=\"ph2\">\\&lt;</ph>wchar.h&gt;","pos":[8712,8733],"source":"\\<io.h> or \\<wchar.h>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>fcntl.h&gt;, <ph id=\"ph2\">\\&lt;</ph>sys\\types.h&gt;, <ph id=\"ph3\">\\&lt;</ph>sys\\stat.h&gt;, <ph id=\"ph4\">\\&lt;</ph>share.h&gt;","pos":[8734,8787],"source":"\\<fcntl.h>, \\<sys\\types.h>, \\<sys\\stat.h>, \\<share.h>"},{"pos":[8795,8893],"content":"For more compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept>.","source":"For more compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md)."},{"pos":[8902,8909],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[8913,8990],"content":"See the example for <bpt id=\"p1\">[</bpt>_locking<ept id=\"p1\">](../../c-runtime-library/reference/locking.md)</ept>.","source":"See the example for [_locking](../../c-runtime-library/reference/locking.md)."},{"pos":[8999,9024],"content":".NET Framework Equivalent","linkify":".NET Framework Equivalent","nodes":[{"content":".NET Framework Equivalent","pos":[0,25]}]},{"content":"Not applicable.","pos":[9028,9043]},{"content":"To call the standard C function, use <ph id=\"ph1\">`PInvoke`</ph>.","pos":[9044,9091],"source":" To call the standard C function, use `PInvoke`."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Platform Invoke Examples<ept id=\"p1\">](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f)</ept>.","pos":[9092,9217],"source":" For more information, see [Platform Invoke Examples](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f)."},{"pos":[9226,9234],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Low-Level I/O<ept id=\"p1\">](../../c-runtime-library/low-level-i-o.md)</ept><ph id=\"ph1\"> </ph>","pos":[9238,9296],"source":"[Low-Level I/O](../../c-runtime-library/low-level-i-o.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_close<ept id=\"p1\">](../../c-runtime-library/reference/close.md)</ept><ph id=\"ph1\"> </ph>","pos":[9299,9353],"source":" [_close](../../c-runtime-library/reference/close.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_creat, _wcreat<ept id=\"p1\">](../../c-runtime-library/reference/creat-wcreat.md)</ept><ph id=\"ph1\"> </ph>","pos":[9356,9426],"source":" [_creat, _wcreat](../../c-runtime-library/reference/creat-wcreat.md) "},{"content":"<bpt id=\"p1\"> [</bpt>fopen, _wfopen<ept id=\"p1\">](../../c-runtime-library/reference/fopen-wfopen.md)</ept><ph id=\"ph1\"> </ph>","pos":[9429,9498],"source":" [fopen, _wfopen](../../c-runtime-library/reference/fopen-wfopen.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_fsopen, _wfsopen<ept id=\"p1\">](../../c-runtime-library/reference/fsopen-wfsopen.md)</ept><ph id=\"ph1\"> </ph>","pos":[9501,9575],"source":" [_fsopen, _wfsopen](../../c-runtime-library/reference/fsopen-wfsopen.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_open, _wopen<ept id=\"p1\">](../../c-runtime-library/reference/open-wopen.md)</ept>","pos":[9578,9643],"source":" [_open, _wopen](../../c-runtime-library/reference/open-wopen.md)"}],"content":"---\ntitle: \"_sopen, _wsopen | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"_sopen\"\n  - \"_wsopen\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\n  - \"api-ms-win-crt-stdio-l1-1-0.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"_wsopen\"\n  - \"wsopen\"\n  - \"_sopen\"\n  - \"_tsopen\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"sopen function\"\n  - \"sharing files\"\n  - \"opening files, for sharing\"\n  - \"_sopen function\"\n  - \"wsopen function\"\n  - \"files [C++], opening\"\n  - \"files [C++], sharing\"\n  - \"_wsopen function\"\nms.assetid: a9d4cccf-06e9-414d-96fa-453fca88cc1f\ncaps.latest.revision: 21\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# _sopen, _wsopen\nOpens a file for sharing. More-secure versions of these functions are available—see [_sopen_s, _wsopen_s](../../c-runtime-library/reference/sopen-s-wsopen-s.md).  \n  \n## Syntax  \n  \n```  \nint _sopen(  \n   const char *filename,  \n   int oflag,  \n   int shflag [,  \n   int pmode ]   \n);  \nint _wsopen(  \n   const wchar_t *filename,  \n   int oflag,  \n   int shflag [,  \n   int pmode ]   \n);  \n```  \n  \n#### Parameters  \n `filename`  \n File name.  \n  \n `oflag`  \n The kind of operations allowed.  \n  \n `shflag`  \n The kind of sharing allowed.  \n  \n `pmode`  \n Permission setting.  \n  \n## Return Value  \n Each of these functions returns a file descriptor for the opened file.  \n  \n If `filename` or `oflag` is a `NULL` pointer, or if `oflag` or `shflag` is not within a valid range of values, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md). If execution is allowed to continue, these functions return -1 and set `errno` to one of the following values.  \n  \n `EACCES`  \n The given path is a directory, or the file is read-only, but an open-for-writing operation was attempted.  \n  \n `EEXIST`  \n `_O_CREAT` and `_O_EXCL` flags were specified, but `filename` already exists.  \n  \n `EINVAL`  \n Invalid `oflag` or `shflag` argument.  \n  \n `EMFILE`  \n No more file descriptors are available.  \n  \n `ENOENT`  \n File or path is not found.  \n  \n For more information about these and other return codes, see [_doserrno, errno, _sys_errlist, and _sys_nerr](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md).  \n  \n## Remarks  \n The `_sopen` function opens the file specified by `filename` and prepares the file for shared reading or writing, as defined by `oflag` and `shflag`. `_wsopen` is a wide-character version of `_sopen`; the `filename` argument to `_wsopen` is a wide-character string. `_wsopen` and `_sopen` behave identically otherwise.  \n  \n### Generic-Text Routine Mappings  \n  \n|Tchar.h routine|_UNICODE and _MBCS not defined|_MBCS defined|_UNICODE defined|  \n|---------------------|--------------------------------------|--------------------|-----------------------|  \n|`_tsopen`|`_sopen`|`_sopen`|`_wsopen`|  \n  \n The integer expression `oflag` is formed by combining one or more of the following manifest constants, which are defined in \\<fcntl.h>. When two or more constants form the argument `oflag`, they are combined with the bitwise-OR operator ( `|` ).  \n  \n `_O_APPEND`  \n Repositions a file pointer to the end of the file before every write operation.  \n  \n `_O_BINARY`  \n Opens a file in binary (untranslated) mode. (See [fopen](../../c-runtime-library/reference/fopen-wfopen.md) for a description of binary mode.)  \n  \n `_O_CREAT`  \n Creates a file and opens it for writing. Has no effect if the file specified by `filename` exists. The `pmode` argument is required when `_O_CREAT` is specified.  \n  \n `_O_CREAT | _O_SHORT_LIVED`  \n Creates a file as temporary and if possible does not flush to disk. The `pmode` argument is required when `_O_CREAT` is specified.  \n  \n `_O_CREAT | _O_TEMPORARY`  \n Creates a file as temporary; the file is deleted when the last file descriptor is closed. The `pmode` argument is required when `_O_CREAT` is specified.  \n  \n `_O_CREAT | _O_EXCL`  \n Returns an error value if a file specified by `filename` exists. Applies only when used with `_O_CREAT`.  \n  \n `_O_NOINHERIT`  \n Prevents creation of a shared file descriptor.  \n  \n `_O_RANDOM`  \n Specifies primarily random access from disk.  \n  \n `_O_RDONLY`  \n Opens a file for reading only. Cannot be specified with `_O_RDWR` or `_O_WRONLY`.  \n  \n `_O_RDWR`  \n Opens a file for both reading and writing. Cannot be specified with `_O_RDONLY` or `_O_WRONLY`.  \n  \n `_O_SEQUENTIAL`  \n Specifies primarily sequential access from disk.  \n  \n `_O_TEXT`  \n Opens a file in text (translated) mode. (For more information, see [Text and Binary Mode File I/O](../../c-runtime-library/text-and-binary-mode-file-i-o.md) and [fopen](../../c-runtime-library/reference/fopen-wfopen.md).)  \n  \n `_O_TRUNC`  \n Opens a file and truncates it to zero length; the file must have write permission. Cannot be specified with `_O_RDONLY`. `_O_TRUNC` used with `_O_CREAT` opens an existing file or creates a file.  \n  \n> [!NOTE]\n>  The `_O_TRUNC` flag destroys the contents of the specified file.  \n  \n `_O_WRONLY`  \n Opens a file for writing only. Cannot be specified with `_O_RDONLY` or `_O_RDWR`.  \n  \n `_O_U16TEXT`  \n Opens a file in Unicode UTF-16 mode.  \n  \n `_O_U8TEXT`  \n Opens a file in Unicode UTF-8 mode.  \n  \n `_O_WTEXT`  \n Opens a file in Unicode mode.  \n  \n To specify the file access mode, you must specify either `_O_RDONLY`, `_O_RDWR`, or `_O_WRONLY`. There is no default value for the access mode.  \n  \n When a file is opened in Unicode mode by using `_O_WTEXT`, `_O_U8TEXT`, or `_O_U16TEXT`, input functions translate the data that's read from the file into UTF-16 data stored as type `wchar_t`. Functions that write to a file opened in Unicode mode expect buffers that contain UTF-16 data stored as type `wchar_t`. If the file is encoded as UTF-8, then UTF-16 data is translated into UTF-8 when it is written, and the file's UTF-8-encoded content is translated into UTF-16 when it is read. An attempt to read or write an odd number of bytes in Unicode mode causes a parameter validation error. To read or write data that's stored in your program as UTF-8, use a text or binary file mode instead of a Unicode mode. You are responsible for any required encoding translation.  \n  \n If `_sopen` is called with `_O_WRONLY | _O_APPEND` (append mode) and `_O_WTEXT`, `_O_U16TEXT`, or `_O_U8TEXT`, it first tries to open the file for reading and writing, read the BOM, then reopen it for writing only. If opening the file for reading and writing fails, it opens the file for writing only and uses the default value for the Unicode mode setting.  \n  \n The argument `shflag` is a constant expression consisting of one of the following manifest constants, which are defined in \\<share.h>.  \n  \n `_SH_DENYRW`  \n Denies read and write access to a file.  \n  \n `_SH_DENYWR`  \n Denies write access to a file.  \n  \n `_SH_DENYRD`  \n Denies read access to a file.  \n  \n `_SH_DENYNO`  \n Permits read and write access.  \n  \n The `pmode` argument is required only when `_O_CREAT` is specified. If the file does not exist, `pmode` specifies the file's permission settings, which are set when the new file is closed the first time. Otherwise, `pmode` is ignored. `pmode` is an integer expression that contains one or both of the manifest constants `_S_IWRITE` and `_S_IREAD`, which are defined in \\<sys\\stat.h>. When both constants are given, they are combined with the bitwise-OR operator. The meaning of `pmode` is as follows.  \n  \n `_S_IWRITE`  \n Writing permitted.  \n  \n `_S_IREAD`  \n Reading permitted.  \n  \n `_S_IREAD | _S_IWRITE`  \n Reading and writing permitted.  \n  \n If write permission is not given, the file is read-only. In the Windows operating system, all files are readable; it is not possible to give write-only permission. Therefore, the modes `_S_IWRITE` and `_S_IREAD | _S_IWRITE` are equivalent.  \n  \n `_sopen` applies the current file-permission mask to `pmode` before the permissions are set. (See [_umask](../../c-runtime-library/reference/umask.md).)  \n  \n## Requirements  \n  \n|Routine|Required header|Optional header|  \n|-------------|---------------------|---------------------|  \n|`_sopen`|\\<io.h>|\\<fcntl.h>, \\<sys\\types.h>, \\<sys\\stat.h>, \\<share.h>|  \n|`_wsopen`|\\<io.h> or \\<wchar.h>|\\<fcntl.h>, \\<sys\\types.h>, \\<sys\\stat.h>, \\<share.h>|  \n  \n For more compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md).  \n  \n## Example  \n See the example for [_locking](../../c-runtime-library/reference/locking.md).  \n  \n## .NET Framework Equivalent  \n Not applicable. To call the standard C function, use `PInvoke`. For more information, see [Platform Invoke Examples](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f).  \n  \n## See Also  \n [Low-Level I/O](../../c-runtime-library/low-level-i-o.md)   \n [_close](../../c-runtime-library/reference/close.md)   \n [_creat, _wcreat](../../c-runtime-library/reference/creat-wcreat.md)   \n [fopen, _wfopen](../../c-runtime-library/reference/fopen-wfopen.md)   \n [_fsopen, _wfsopen](../../c-runtime-library/reference/fsopen-wfsopen.md)   \n [_open, _wopen](../../c-runtime-library/reference/open-wopen.md)"}