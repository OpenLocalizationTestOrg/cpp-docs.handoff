{"nodes":[{"pos":[12,63],"content":"A.5   Using the critical Directive | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"A.5   Using the critical Directive | Microsoft Docs","pos":[0,51]}]},{"content":"A.5   Using the critical Directive","pos":[543,577]},{"content":"The following example includes several <ph id=\"ph1\">`critical`</ph> directives (<bpt id=\"p1\">[</bpt>Section 2.6.2<ept id=\"p1\">](../../parallel/openmp/2-6-2-critical-construct.md)</ept> on page 18).","pos":[578,719],"source":"The following example includes several `critical` directives ([Section 2.6.2](../../parallel/openmp/2-6-2-critical-construct.md) on page 18)."},{"content":"The example illustrates a queuing model in which a task is dequeued and worked on.","pos":[720,802]},{"content":"To guard against multiple threads dequeuing the same task, the dequeuing operation must be in a <ph id=\"ph1\">`critical`</ph> section.","pos":[803,918],"source":" To guard against multiple threads dequeuing the same task, the dequeuing operation must be in a `critical` section."},{"content":"Because the two queues in this example are independent, they are protected by <ph id=\"ph1\">`critical`</ph> directives with different names, <bpt id=\"p1\">*</bpt>xaxis<ept id=\"p1\">*</ept> and <bpt id=\"p2\">*</bpt>yaxis<ept id=\"p2\">*</ept>.","pos":[919,1061],"source":" Because the two queues in this example are independent, they are protected by `critical` directives with different names, *xaxis* and *yaxis*."}],"content":"---\ntitle: \"A.5   Using the critical Directive | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nms.assetid: 14423018-25b9-4f98-92f2-34c9b0ac0ce0\ncaps.latest.revision: 8\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# A.5   Using the critical Directive\nThe following example includes several `critical` directives ([Section 2.6.2](../../parallel/openmp/2-6-2-critical-construct.md) on page 18). The example illustrates a queuing model in which a task is dequeued and worked on. To guard against multiple threads dequeuing the same task, the dequeuing operation must be in a `critical` section. Because the two queues in this example are independent, they are protected by `critical` directives with different names, *xaxis* and *yaxis*.  \n  \n```  \n#pragma omp parallel shared(x, y) private(x_next, y_next)  \n{  \n    #pragma omp critical ( xaxis )  \n        x_next = dequeue(x);  \n    work(x_next);  \n    #pragma omp critical ( yaxis )  \n        y_next = dequeue(y);  \n    work(y_next);  \n}  \n```"}