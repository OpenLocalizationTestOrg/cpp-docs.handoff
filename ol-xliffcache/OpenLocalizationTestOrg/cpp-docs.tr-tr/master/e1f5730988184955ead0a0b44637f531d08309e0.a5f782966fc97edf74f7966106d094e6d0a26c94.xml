{"nodes":[{"pos":[12,73],"content":"A Portrait of the Document-View Architecture | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"A Portrait of the Document-View Architecture | Microsoft Docs","pos":[0,61]}]},{"content":"A Portrait of the Document/View Architecture","pos":[992,1036]},{"content":"Documents and views are paired in a typical MFC application.","pos":[1037,1097]},{"content":"Data is stored in the document, but the view has privileged access to the data.","pos":[1098,1177]},{"content":"The separation of document from view separates the storage and maintenance of data from its display.","pos":[1178,1278]},{"content":"Gaining Access to Document Data from the View","pos":[1287,1332]},{"content":"The view accesses its document's data either with the <bpt id=\"p1\">[</bpt>GetDocument<ept id=\"p1\">](../mfc/reference/cview-class.md#cview__getdocument)</ept> function, which returns a pointer to the document, or by making the view class a C++ <ph id=\"ph1\">`friend`</ph> of the document class.","pos":[1336,1572],"source":"The view accesses its document's data either with the [GetDocument](../mfc/reference/cview-class.md#cview__getdocument) function, which returns a pointer to the document, or by making the view class a C++ `friend` of the document class."},{"content":"The view then uses its access to the data to obtain the data when it is ready to draw or otherwise manipulate it.","pos":[1573,1686]},{"content":"For example, from the view's <bpt id=\"p1\">[</bpt>OnDraw<ept id=\"p1\">](../mfc/reference/cview-class.md#cview__ondraw)</ept> member function, the view uses <bpt id=\"p2\">**</bpt>GetDocument<ept id=\"p2\">**</ept> to obtain a document pointer.","pos":[1693,1854],"source":"For example, from the view's [OnDraw](../mfc/reference/cview-class.md#cview__ondraw) member function, the view uses **GetDocument** to obtain a document pointer."},{"content":"Then it uses that pointer to access a <ph id=\"ph1\">`CString`</ph> data member in the document.","pos":[1855,1931],"source":" Then it uses that pointer to access a `CString` data member in the document."},{"content":"The view passes the string to the <ph id=\"ph1\">`TextOut`</ph> function.","pos":[1932,1985],"source":" The view passes the string to the `TextOut` function."},{"content":"To see the code for this example, see <bpt id=\"p1\">[</bpt>Drawing in a View<ept id=\"p1\">](../mfc/drawing-in-a-view.md)</ept>.","pos":[1986,2073],"source":" To see the code for this example, see [Drawing in a View](../mfc/drawing-in-a-view.md)."},{"content":"User Input to the View","pos":[2082,2104]},{"content":"The view might also interpret a mouse click within itself as either selection or editing of data.","pos":[2108,2205]},{"content":"Similarly it might interpret keystrokes as data entry or editing.","pos":[2206,2271]},{"content":"Suppose the user types a string in a view that manages text.","pos":[2272,2332]},{"content":"The view obtains a pointer to the document and uses the pointer to pass the new data to the document, which stores it in some data structure.","pos":[2333,2474]},{"content":"Updating Multiple Views of the Same Document","pos":[2483,2527]},{"content":"In an application with multiple views of the same document — such as a splitter window in a text editor — the view first passes the new data to the document.","pos":[2531,2688]},{"content":"Then it calls the document's <bpt id=\"p1\">[</bpt>UpdateAllViews<ept id=\"p1\">](../mfc/reference/cdocument-class.md#cdocument__updateallviews)</ept> member function, which tells all views of the document to update themselves, reflecting the new data.","pos":[2689,2899],"source":" Then it calls the document's [UpdateAllViews](../mfc/reference/cdocument-class.md#cdocument__updateallviews) member function, which tells all views of the document to update themselves, reflecting the new data."},{"content":"This synchronizes the views.","pos":[2900,2928]},{"content":"What do you want to know more about","pos":[2938,2973]},{"content":"Advantages of the document/view architecture","pos":[2984,3028]},{"content":"Alternatives to the document/view architecture","pos":[3096,3142]},{"content":"See Also","pos":[3210,3218]},{"content":"Document/View Architecture","pos":[3223,3249]}],"content":"---\ntitle: \"A Portrait of the Document-View Architecture | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"documents, views\"\n  - \"multiple views, updating from document\"\n  - \"document/view architecture\"\n  - \"views, and user input\"\n  - \"documents, accessing data from view\"\n  - \"views, updating\"\n  - \"input, view class\"\n  - \"documents, multiple views\"\n  - \"document/view architecture, accessing data from view\"\n  - \"document/view architecture, about document/view architecture\"\n  - \"views, accessing document data from\"\nms.assetid: 4e7f65dc-b166-45d8-bcd5-9bb0d399b946\ncaps.latest.revision: 9\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# A Portrait of the Document/View Architecture\nDocuments and views are paired in a typical MFC application. Data is stored in the document, but the view has privileged access to the data. The separation of document from view separates the storage and maintenance of data from its display.  \n  \n## Gaining Access to Document Data from the View  \n The view accesses its document's data either with the [GetDocument](../mfc/reference/cview-class.md#cview__getdocument) function, which returns a pointer to the document, or by making the view class a C++ `friend` of the document class. The view then uses its access to the data to obtain the data when it is ready to draw or otherwise manipulate it.  \n  \n For example, from the view's [OnDraw](../mfc/reference/cview-class.md#cview__ondraw) member function, the view uses **GetDocument** to obtain a document pointer. Then it uses that pointer to access a `CString` data member in the document. The view passes the string to the `TextOut` function. To see the code for this example, see [Drawing in a View](../mfc/drawing-in-a-view.md).  \n  \n## User Input to the View  \n The view might also interpret a mouse click within itself as either selection or editing of data. Similarly it might interpret keystrokes as data entry or editing. Suppose the user types a string in a view that manages text. The view obtains a pointer to the document and uses the pointer to pass the new data to the document, which stores it in some data structure.  \n  \n## Updating Multiple Views of the Same Document  \n In an application with multiple views of the same document — such as a splitter window in a text editor — the view first passes the new data to the document. Then it calls the document's [UpdateAllViews](../mfc/reference/cdocument-class.md#cdocument__updateallviews) member function, which tells all views of the document to update themselves, reflecting the new data. This synchronizes the views.  \n  \n### What do you want to know more about  \n  \n-   [Advantages of the document/view architecture](../mfc/advantages-of-the-document-view-architecture.md)  \n  \n-   [Alternatives to the document/view architecture](../mfc/alternatives-to-the-document-view-architecture.md)  \n  \n## See Also  \n [Document/View Architecture](../mfc/document-view-architecture.md)\n\n"}