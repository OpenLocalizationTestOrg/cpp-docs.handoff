{"nodes":[{"pos":[12,38],"content":"selectany | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"selectany | Microsoft Docs","pos":[0,26]}]},{"content":"selectany","pos":[678,687]},{"content":"Microsoft Specific","pos":[690,708]},{"content":"Tells the compiler that the declared global data item (variable or object) is a pick-any COMDAT (a packaged function).","pos":[717,835]},{"content":"Syntax","pos":[844,850]},{"content":"Remarks","pos":[914,921]},{"content":"At link time, if multiple definitions of a COMDAT are seen, the linker picks one and discards the rest.","pos":[925,1028]},{"content":"If the linker option <bpt id=\"p1\">[</bpt>/OPT:REF<ept id=\"p1\">](../build/reference/opt-optimizations.md)</ept> (Optimizations) is selected, then COMDAT elimination will occur to remove all the unreferenced data items in the linker output.","pos":[1029,1229],"source":" If the linker option [/OPT:REF](../build/reference/opt-optimizations.md) (Optimizations) is selected, then COMDAT elimination will occur to remove all the unreferenced data items in the linker output."},{"content":"Constructors and assignment by global function or static methods in the declaration do not create a reference and will not prevent /OPT:REF elimination.","pos":[1236,1388]},{"content":"Side effects from such code should not be depended on when no other references to the data exist.","pos":[1389,1486]},{"pos":[1493,1617],"content":"For dynamically initialized, global objects, <ph id=\"ph1\">`selectany`</ph> will discard an unreferenced object's initialization code, as well.","source":"For dynamically initialized, global objects, `selectany` will discard an unreferenced object's initialization code, as well."},{"content":"A global data item can normally be initialized only once in an EXE or DLL project.","pos":[1624,1706]},{"content":"can be used in initializing global data defined by headers, when the same header appears in more than one source file.","pos":[1719,1837]},{"content":"is available in both the C and C++ compilers.","pos":[1850,1895]},{"pos":[1903,2024],"content":"[!NOTE]\n `selectany` can only be applied to the actual initialization of global data items that are externally visible.","leadings":["","> "],"nodes":[{"content":"can only be applied to the actual initialization of global data items that are externally visible.","pos":[21,119]}]},{"content":"Example","pos":[2033,2040]},{"pos":[2044,2097],"content":"This code shows how to use the <ph id=\"ph1\">`selectany`</ph> attribute:","source":"This code shows how to use the `selectany` attribute:"},{"content":"Example","pos":[2917,2924]},{"content":"This code shows how to use the <ph id=\"ph1\">`selectany`</ph> attribute to ensure data COMDAT folding when you also use the <bpt id=\"p1\">[</bpt>/OPT:ICF<ept id=\"p1\">](../build/reference/opt-optimizations.md)</ept> linker option.","pos":[2928,3099],"source":"This code shows how to use the `selectany` attribute to ensure data COMDAT folding when you also use the [/OPT:ICF](../build/reference/opt-optimizations.md) linker option."},{"content":"Note that data must be marked with <ph id=\"ph1\">`selectany`</ph> and placed in a <bpt id=\"p1\">**</bpt>const<ept id=\"p1\">**</ept> (readonly) section.","pos":[3100,3192],"source":" Note that data must be marked with `selectany` and placed in a **const** (readonly) section."},{"content":"You must explicitly specify the read-only section.","pos":[3193,3243]},{"content":"END Microsoft Specific","pos":[3504,3526]},{"content":"See Also","pos":[3537,3545]},{"content":"__declspec","pos":[3550,3560]},{"content":"Keywords","pos":[3587,3595]}],"content":"---\ntitle: \"selectany | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"language-reference\"\nf1_keywords: \n  - \"selectany_cpp\"\n  - \"selectany\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"__declspec keyword [C++], selectany\"\n  - \"selectany __declspec keyword\"\nms.assetid: 9c353017-5a42-4f50-b741-bd13da1ce84d\ncaps.latest.revision: 7\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# selectany\n**Microsoft Specific**  \n  \n Tells the compiler that the declared global data item (variable or object) is a pick-any COMDAT (a packaged function).  \n  \n## Syntax  \n  \n```  \n  \n__declspec( selectany ) declarator  \n```  \n  \n## Remarks  \n At link time, if multiple definitions of a COMDAT are seen, the linker picks one and discards the rest. If the linker option [/OPT:REF](../build/reference/opt-optimizations.md) (Optimizations) is selected, then COMDAT elimination will occur to remove all the unreferenced data items in the linker output.  \n  \n Constructors and assignment by global function or static methods in the declaration do not create a reference and will not prevent /OPT:REF elimination. Side effects from such code should not be depended on when no other references to the data exist.  \n  \n For dynamically initialized, global objects, `selectany` will discard an unreferenced object's initialization code, as well.  \n  \n A global data item can normally be initialized only once in an EXE or DLL project. `selectany` can be used in initializing global data defined by headers, when the same header appears in more than one source file. `selectany` is available in both the C and C++ compilers.  \n  \n> [!NOTE]\n>  `selectany` can only be applied to the actual initialization of global data items that are externally visible.  \n  \n## Example  \n This code shows how to use the `selectany` attribute:  \n  \n```  \n//Correct - x1 is initialized and externally visible   \n__declspec(selectany) int x1=1;  \n  \n//Incorrect - const is by default static in C++, so   \n//x2 is not visible externally (This is OK in C, since  \n//const is not by default static in C)  \nconst __declspec(selectany) int x2 =2;  \n  \n//Correct - x3 is extern const, so externally visible  \nextern const __declspec(selectany) int x3=3;  \n  \n//Correct - x4 is extern const, so it is externally visible  \nextern const int x4;  \nconst __declspec(selectany) int x4=4;  \n  \n//Incorrect - __declspec(selectany) is applied to the uninitialized  \n//declaration of x5  \nextern __declspec(selectany) int x5;  \n  \n// OK: dynamic initialization of global object  \nclass X {  \npublic:  \nX(int i){i++;};  \nint i;  \n};  \n  \n__declspec(selectany) X x(1);  \n```  \n  \n## Example  \n This code shows how to use the `selectany` attribute to ensure data COMDAT folding when you also use the [/OPT:ICF](../build/reference/opt-optimizations.md) linker option. Note that data must be marked with `selectany` and placed in a **const** (readonly) section. You must explicitly specify the read-only section.  \n  \n```  \n// selectany2.cpp  \n// in the following lines, const marks the variables as read only  \n__declspec(selectany) extern const int ix = 5;  \n__declspec(selectany) extern const int jx = 5;  \nint main() {  \n   int ij;  \n   ij = ix + jx;  \n}  \n```  \n  \n **END Microsoft Specific**  \n  \n## See Also  \n [__declspec](../cpp/declspec.md)   \n [Keywords](../cpp/keywords-cpp.md)"}