{"nodes":[{"pos":[12,34],"content":"__asm | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"__asm | Microsoft Docs","pos":[0,22]}]},{"content":"__asm","pos":[647,652]},{"content":"Microsoft Specific","pos":[655,673]},{"content":"The <ph id=\"ph1\">`__asm`</ph> keyword invokes the inline assembler and can appear wherever a C or C++ statement is legal.","pos":[682,785],"source":"The `__asm` keyword invokes the inline assembler and can appear wherever a C or C++ statement is legal."},{"content":"It cannot appear by itself.","pos":[786,813]},{"content":"It must be followed by an assembly instruction, a group of instructions enclosed in braces, or, at the very least, an empty pair of braces.","pos":[814,953]},{"content":"The term \"<ph id=\"ph1\">`__asm`</ph> block\" here refers to any instruction or group of instructions, whether or not in braces.","pos":[954,1061],"source":" The term \"`__asm` block\" here refers to any instruction or group of instructions, whether or not in braces."},{"pos":[1069,1310],"content":"[!NOTE]\n Visual C++ support for the Standard C++ `asm` keyword is limited to the fact that the compiler will not generate an error on the keyword. However, an `asm` block will not generate any meaningful code. Use `__asm` instead of `asm`.","leadings":["","> "],"nodes":[{"content":" Visual C++ support for the Standard C++ `asm` keyword is limited to the fact that the compiler will not generate an error on the keyword. However, an `asm` block will not generate any meaningful code. Use `__asm` instead of `asm`.","pos":[8,239],"nodes":[{"content":"Visual C++ support for the Standard C++ <ph id=\"ph1\">`asm`</ph> keyword is limited to the fact that the compiler will not generate an error on the keyword.","pos":[1,138],"source":" Visual C++ support for the Standard C++ `asm` keyword is limited to the fact that the compiler will not generate an error on the keyword."},{"content":"However, an <ph id=\"ph1\">`asm`</ph> block will not generate any meaningful code.","pos":[139,201],"source":" However, an `asm` block will not generate any meaningful code."},{"content":"Use <ph id=\"ph1\">`__asm`</ph> instead of <ph id=\"ph2\">`asm`</ph>.","pos":[202,231],"source":" Use `__asm` instead of `asm`."}]}]},{"content":"Syntax:","pos":[1317,1324]},{"pos":[1331,1365],"content":"__asm <bpt id=\"p1\">*</bpt>assembly-instruction<ept id=\"p1\">*</ept> [ ; ]","source":"__asm *assembly-instruction* [ ; ]"},{"pos":[1372,1415],"content":"__asm { <bpt id=\"p1\">*</bpt>assembly-instruction-list<ept id=\"p1\">*</ept> } [ ; ]","source":"__asm { *assembly-instruction-list* } [ ; ]"},{"content":"Grammar","pos":[1424,1431]},{"pos":[1471,1474],"content":"opt"},{"pos":[1525,1528],"content":"opt"},{"content":"<bpt id=\"p1\">*</bpt>assembly-instruction-list<ept id=\"p1\">*</ept>:","pos":[1535,1563],"source":"*assembly-instruction-list*:"},{"content":"opt","pos":[1593,1596]},{"pos":[1661,1664],"content":"opt"},{"content":"If used without braces, the <ph id=\"ph1\">`__asm`</ph> keyword means that the rest of the line is an assembly-language statement.","pos":[1671,1781],"source":"If used without braces, the `__asm` keyword means that the rest of the line is an assembly-language statement."},{"content":"If used with braces, it means that each line between the braces is an assembly-language statement.","pos":[1782,1880]},{"content":"For compatibility with previous versions, <ph id=\"ph1\">`_asm`</ph> is a synonym for <ph id=\"ph2\">`__asm`</ph>.","pos":[1881,1955],"source":" For compatibility with previous versions, `_asm` is a synonym for `__asm`."},{"pos":[1962,2065],"content":"Since the <ph id=\"ph1\">`__asm`</ph> keyword is a statement separator, you can put assembly instructions on the same line.","source":"Since the `__asm` keyword is a statement separator, you can put assembly instructions on the same line."},{"content":"Before Visual C++ 2005, the instruction","pos":[2072,2111]},{"pos":[2147,2285],"content":"did not cause native code to be generated when compiled with <bpt id=\"p1\">**</bpt>/clr<ept id=\"p1\">**</ept>; the compiler translated the instruction to a CLR break instruction.","source":"did not cause native code to be generated when compiled with **/clr**; the compiler translated the instruction to a CLR break instruction."},{"content":"now results in native code generation for the function.","pos":[2306,2361]},{"content":"If you want a function to cause a break point in your code and if you want that function compiled to MSIL, use <bpt id=\"p1\">[</bpt>__debugbreak<ept id=\"p1\">](../../intrinsics/debugbreak.md)</ept>.","pos":[2362,2520],"source":" If you want a function to cause a break point in your code and if you want that function compiled to MSIL, use [__debugbreak](../../intrinsics/debugbreak.md)."},{"content":"Example","pos":[2529,2536]},{"pos":[2540,2613],"content":"The following code fragment is a simple <ph id=\"ph1\">`__asm`</ph> block enclosed in braces:","source":"The following code fragment is a simple `__asm` block enclosed in braces:"},{"pos":[2700,2773],"content":"Alternatively, you can put <ph id=\"ph1\">`__asm`</ph> in front of each assembly instruction:","source":"Alternatively, you can put `__asm` in front of each assembly instruction:"},{"pos":[2855,2965],"content":"Because the <ph id=\"ph1\">`__asm`</ph> keyword is a statement separator, you can also put assembly instructions on the same line:","source":"Because the `__asm` keyword is a statement separator, you can also put assembly instructions on the same line:"},{"content":"All three examples generate the same code, but the first style (enclosing the <ph id=\"ph1\">`__asm`</ph> block in braces) has some advantages.","pos":[3047,3170],"source":"All three examples generate the same code, but the first style (enclosing the `__asm` block in braces) has some advantages."},{"content":"The braces clearly separate assembly code from C or C++ code and avoid needless repetition of the <ph id=\"ph1\">`__asm`</ph> keyword.","pos":[3171,3285],"source":" The braces clearly separate assembly code from C or C++ code and avoid needless repetition of the `__asm` keyword."},{"content":"Braces can also prevent ambiguities.","pos":[3286,3322]},{"content":"If you want to put a C or C++ statement on the same line as an <ph id=\"ph1\">`__asm`</ph> block, you must enclose the block in braces.","pos":[3323,3438],"source":" If you want to put a C or C++ statement on the same line as an `__asm` block, you must enclose the block in braces."},{"content":"Without the braces, the compiler cannot tell where assembly code stops and C or C++ statements begin.","pos":[3439,3540]},{"content":"Finally, because the text in braces has the same format as ordinary MASM text, you can easily cut and paste text from existing MASM source files.","pos":[3541,3686]},{"content":"Unlike braces in C and C++, the braces enclosing an <ph id=\"ph1\">`__asm`</ph> block don't affect variable scope.","pos":[3693,3787],"source":"Unlike braces in C and C++, the braces enclosing an `__asm` block don't affect variable scope."},{"content":"You can also nest <ph id=\"ph1\">`__asm`</ph> blocks; nesting does not affect variable scope.","pos":[3788,3861],"source":" You can also nest `__asm` blocks; nesting does not affect variable scope."},{"content":"END Microsoft Specific","pos":[3870,3892]},{"content":"See Also","pos":[3903,3911]},{"content":"Keywords","pos":[3916,3924]},{"content":"Inline Assembler","pos":[3958,3974]}],"content":"---\ntitle: \"__asm | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"__asm\"\n  - \"__asm_cpp\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"__asm keyword [C++], vs. asm blocks\"\n  - \"__asm keyword [C++]\"\nms.assetid: 77ff3bc9-a492-4b5e-85e1-fa4e414e79cd\ncaps.latest.revision: 14\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# __asm\n**Microsoft Specific**  \n  \n The `__asm` keyword invokes the inline assembler and can appear wherever a C or C++ statement is legal. It cannot appear by itself. It must be followed by an assembly instruction, a group of instructions enclosed in braces, or, at the very least, an empty pair of braces. The term \"`__asm` block\" here refers to any instruction or group of instructions, whether or not in braces.  \n  \n> [!NOTE]\n>  Visual C++ support for the Standard C++ `asm` keyword is limited to the fact that the compiler will not generate an error on the keyword. However, an `asm` block will not generate any meaningful code. Use `__asm` instead of `asm`.  \n  \n Syntax:  \n  \n __asm *assembly-instruction* [ ; ]  \n  \n __asm { *assembly-instruction-list* } [ ; ]  \n  \n## Grammar  \n `__asm`  `assembly-instruction`  `;`opt  \n  \n `__asm {`  `assembly-instruction-list`  `};`opt  \n  \n *assembly-instruction-list*:  \n `assembly-instruction` `;`opt  \n  \n `assembly-instruction` `;` `assembly-instruction-list` `;`opt  \n  \n If used without braces, the `__asm` keyword means that the rest of the line is an assembly-language statement. If used with braces, it means that each line between the braces is an assembly-language statement. For compatibility with previous versions, `_asm` is a synonym for `__asm`.  \n  \n Since the `__asm` keyword is a statement separator, you can put assembly instructions on the same line.  \n  \n Before Visual C++ 2005, the instruction  \n  \n```  \n__asm int 3  \n```  \n  \n did not cause native code to be generated when compiled with **/clr**; the compiler translated the instruction to a CLR break instruction.  \n  \n `__asm int 3` now results in native code generation for the function. If you want a function to cause a break point in your code and if you want that function compiled to MSIL, use [__debugbreak](../../intrinsics/debugbreak.md).  \n  \n## Example  \n The following code fragment is a simple `__asm` block enclosed in braces:  \n  \n```  \n__asm {  \n   mov al, 2  \n   mov dx, 0xD007  \n   out dx, al  \n}  \n```  \n  \n Alternatively, you can put `__asm` in front of each assembly instruction:  \n  \n```  \n__asm mov al, 2  \n__asm mov dx, 0xD007  \n__asm out dx, al  \n```  \n  \n Because the `__asm` keyword is a statement separator, you can also put assembly instructions on the same line:  \n  \n```  \n__asm mov al, 2   __asm mov dx, 0xD007   __asm out dx, al  \n```  \n  \n All three examples generate the same code, but the first style (enclosing the `__asm` block in braces) has some advantages. The braces clearly separate assembly code from C or C++ code and avoid needless repetition of the `__asm` keyword. Braces can also prevent ambiguities. If you want to put a C or C++ statement on the same line as an `__asm` block, you must enclose the block in braces. Without the braces, the compiler cannot tell where assembly code stops and C or C++ statements begin. Finally, because the text in braces has the same format as ordinary MASM text, you can easily cut and paste text from existing MASM source files.  \n  \n Unlike braces in C and C++, the braces enclosing an `__asm` block don't affect variable scope. You can also nest `__asm` blocks; nesting does not affect variable scope.  \n  \n **END Microsoft Specific**  \n  \n## See Also  \n [Keywords](../../cpp/keywords-cpp.md)   \n [Inline Assembler](../../assembler/inline/inline-assembler.md)"}