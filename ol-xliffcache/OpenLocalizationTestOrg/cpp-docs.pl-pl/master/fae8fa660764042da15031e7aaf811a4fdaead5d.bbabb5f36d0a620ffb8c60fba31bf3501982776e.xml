{"nodes":[{"pos":[12,56],"content":"Using wmain Instead of main | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Using wmain Instead of main | Microsoft Docs","pos":[0,44]}]},{"content":"Using wmain Instead of main","pos":[647,674]},{"content":"Microsoft Specific","pos":[678,696]},{"content":"In the Unicode programming model, you can define a wide-character version of the <bpt id=\"p1\">**</bpt>main<ept id=\"p1\">**</ept> function.","pos":[700,799],"source":"In the Unicode programming model, you can define a wide-character version of the **main** function."},{"content":"Use <bpt id=\"p1\">**</bpt>wmain<ept id=\"p1\">**</ept> instead of <bpt id=\"p2\">**</bpt>main<ept id=\"p2\">**</ept> if you want to write portable code that adheres to the Unicode specification.","pos":[800,911],"source":" Use **wmain** instead of **main** if you want to write portable code that adheres to the Unicode specification."},{"content":"You declare formal parameters to <bpt id=\"p1\">**</bpt>wmain<ept id=\"p1\">**</ept> using a similar format to <bpt id=\"p2\">**</bpt>main<ept id=\"p2\">**</ept>.","pos":[918,996],"source":"You declare formal parameters to **wmain** using a similar format to **main**."},{"content":"You can then pass wide-character arguments and, optionally, a wide-character environment pointer to the program.","pos":[997,1109]},{"content":"The <ph id=\"ph1\">`argv`</ph> and <ph id=\"ph2\">`envp`</ph> parameters to <bpt id=\"p1\">**</bpt>wmain<ept id=\"p1\">**</ept> are of type <ph id=\"ph3\">`wchar_t*`</ph>.","pos":[1110,1179],"source":" The `argv` and `envp` parameters to **wmain** are of type `wchar_t*`."},{"content":"If your program uses a <bpt id=\"p1\">**</bpt>main<ept id=\"p1\">**</ept> function, the multibyte-character environment is created by the operating system at program startup.","pos":[1186,1318],"source":"If your program uses a **main** function, the multibyte-character environment is created by the operating system at program startup."},{"content":"A wide-character copy of the environment is created only when needed (for example, by a call to the <bpt id=\"p1\">[</bpt>_wgetenv<ept id=\"p1\">](../c-runtime-library/reference/getenv-wgetenv.md)</ept> or <bpt id=\"p2\">[</bpt>_wputenv<ept id=\"p2\">](../c-runtime-library/reference/putenv-wputenv.md)</ept> functions).","pos":[1319,1555],"source":" A wide-character copy of the environment is created only when needed (for example, by a call to the [_wgetenv](../c-runtime-library/reference/getenv-wgetenv.md) or [_wputenv](../c-runtime-library/reference/putenv-wputenv.md) functions)."},{"content":"On the first call to <ph id=\"ph1\">`_wputenv`</ph>, or on the first call to <ph id=\"ph2\">`_wgetenv`</ph> if an MBCS environment already exists, a corresponding wide-character string environment is created and is then pointed to by the <ph id=\"ph3\">`_wenviron`</ph> global variable, which is a wide-character version of the <ph id=\"ph4\">`_environ`</ph> global variable.","pos":[1556,1851],"source":" On the first call to `_wputenv`, or on the first call to `_wgetenv` if an MBCS environment already exists, a corresponding wide-character string environment is created and is then pointed to by the `_wenviron` global variable, which is a wide-character version of the `_environ` global variable."},{"content":"At this point, two copies of the environment (MBCS and Unicode) exist simultaneously and are maintained by the operating system throughout the life of the program.","pos":[1852,2015]},{"pos":[2022,2211],"content":"Similarly, if your program uses a <bpt id=\"p1\">**</bpt>wmain<ept id=\"p1\">**</ept> function, an MBCS (ASCII) environment is created on the first call to <ph id=\"ph1\">`_putenv`</ph> or <ph id=\"ph2\">`getenv`</ph>, and is pointed to by the <ph id=\"ph3\">`_environ`</ph> global variable.","source":"Similarly, if your program uses a **wmain** function, an MBCS (ASCII) environment is created on the first call to `_putenv` or `getenv`, and is pointed to by the `_environ` global variable."},{"pos":[2218,2413],"content":"For more information on the MBCS environment, see <bpt id=\"p1\">[</bpt>Single-byte and Multibyte Character Sets<ept id=\"p1\">](../c-runtime-library/single-byte-and-multibyte-character-sets.md)</ept> in the <bpt id=\"p2\">*</bpt>Run-Time Library Reference.<ept id=\"p2\">*</ept>","source":"For more information on the MBCS environment, see [Single-byte and Multibyte Character Sets](../c-runtime-library/single-byte-and-multibyte-character-sets.md) in the *Run-Time Library Reference.*"},{"content":"END Microsoft Specific","pos":[2422,2444]},{"content":"See Also","pos":[2453,2461]},{"content":"main: Program Startup","pos":[2466,2487]}],"content":"---\ntitle: \"Using wmain Instead of main | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"language-reference\"\nf1_keywords: \n  - \"wmain\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"main function, vs. wmain\"\n  - \"wmain function\"\nms.assetid: 7abb1257-b85c-413a-b913-d45b1582a71d\ncaps.latest.revision: 8\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Using wmain Instead of main\n## Microsoft Specific  \n In the Unicode programming model, you can define a wide-character version of the **main** function. Use **wmain** instead of **main** if you want to write portable code that adheres to the Unicode specification.  \n  \n You declare formal parameters to **wmain** using a similar format to **main**. You can then pass wide-character arguments and, optionally, a wide-character environment pointer to the program. The `argv` and `envp` parameters to **wmain** are of type `wchar_t*`.  \n  \n If your program uses a **main** function, the multibyte-character environment is created by the operating system at program startup. A wide-character copy of the environment is created only when needed (for example, by a call to the [_wgetenv](../c-runtime-library/reference/getenv-wgetenv.md) or [_wputenv](../c-runtime-library/reference/putenv-wputenv.md) functions). On the first call to `_wputenv`, or on the first call to `_wgetenv` if an MBCS environment already exists, a corresponding wide-character string environment is created and is then pointed to by the `_wenviron` global variable, which is a wide-character version of the `_environ` global variable. At this point, two copies of the environment (MBCS and Unicode) exist simultaneously and are maintained by the operating system throughout the life of the program.  \n  \n Similarly, if your program uses a **wmain** function, an MBCS (ASCII) environment is created on the first call to `_putenv` or `getenv`, and is pointed to by the `_environ` global variable.  \n  \n For more information on the MBCS environment, see [Single-byte and Multibyte Character Sets](../c-runtime-library/single-byte-and-multibyte-character-sets.md) in the *Run-Time Library Reference.*  \n  \n## END Microsoft Specific  \n  \n## See Also  \n [main: Program Startup](../cpp/main-program-startup.md)"}