{"nodes":[{"pos":[12,46],"content":"CDialogImpl Class | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"CDialogImpl Class | Microsoft Docs","pos":[0,34]}]},{"pos":[676,693],"content":"CDialogImpl Class","linkify":"CDialogImpl Class","nodes":[{"content":"CDialogImpl Class","pos":[0,17]}]},{"content":"This class provides methods for creating a modal or modeless dialog box.","pos":[694,766]},{"pos":[774,884],"content":"[!IMPORTANT]\n This class and its members cannot be used in applications that execute in the Windows Runtime.","leadings":["","> "],"nodes":[{"content":"This class and its members cannot be used in applications that execute in the Windows Runtime.","pos":[14,108]}]},{"pos":[893,899],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1056,1066],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"Your class, derived from <ph id=\"ph1\">`CDialogImpl`</ph>.","pos":[1077,1116],"source":" Your class, derived from `CDialogImpl`."},{"content":"<bpt id=\"p1\">*</bpt>TBase<ept id=\"p1\">*</ept>","pos":[1123,1130],"source":"*TBase*"},{"content":"The base class of your new class.","pos":[1134,1167]},{"content":"The default base class is <bpt id=\"p1\">[</bpt>CWindow<ept id=\"p1\">](../../atl/reference/cwindow-class.md)</ept>.","pos":[1168,1242],"source":" The default base class is [CWindow](../../atl/reference/cwindow-class.md)."},{"pos":[1251,1258],"content":"Members","linkify":"Members","nodes":[{"content":"Members","pos":[0,7]}]},{"pos":[1268,1275],"content":"Methods","linkify":"Methods","nodes":[{"content":"Methods","pos":[0,7]}]},{"pos":[1296,1326],"content":"<bpt id=\"p1\">[</bpt>Create<ept id=\"p1\">](#cdialogimpl__create)</ept>","source":"[Create](#cdialogimpl__create)"},{"content":"Creates a modeless dialog box.","pos":[1327,1357]},{"pos":[1362,1406],"content":"<bpt id=\"p1\">[</bpt>DestroyWindow<ept id=\"p1\">](#cdialogimpl__destroywindow)</ept>","source":"[DestroyWindow](#cdialogimpl__destroywindow)"},{"content":"Destroys a modeless dialog box.","pos":[1407,1438]},{"pos":[1443,1475],"content":"<bpt id=\"p1\">[</bpt>DoModal<ept id=\"p1\">](#cdialogimpl__domodal)</ept>","source":"[DoModal](#cdialogimpl__domodal)"},{"content":"Creates a modal dialog box.","pos":[1476,1503]},{"pos":[1508,1544],"content":"<bpt id=\"p1\">[</bpt>EndDialog<ept id=\"p1\">](#cdialogimpl__enddialog)</ept>","source":"[EndDialog](#cdialogimpl__enddialog)"},{"content":"Destroys a modal dialog box.","pos":[1545,1573]},{"pos":[1584,1608],"content":"CDialogImplBaseT Methods","linkify":"CDialogImplBaseT Methods","nodes":[{"content":"CDialogImplBaseT Methods","pos":[0,24]}]},{"pos":[1629,1673],"content":"<bpt id=\"p1\">[</bpt>GetDialogProc<ept id=\"p1\">](#cdialogimpl__getdialogproc)</ept>","source":"[GetDialogProc](#cdialogimpl__getdialogproc)"},{"content":"Returns the current dialog box procedure.","pos":[1674,1715]},{"pos":[1720,1764],"content":"<bpt id=\"p1\">[</bpt>MapDialogRect<ept id=\"p1\">](#cdialogimpl__mapdialogrect)</ept>","source":"[MapDialogRect](#cdialogimpl__mapdialogrect)"},{"content":"Maps the dialog-box units of the specified rectangle to screen units (pixels).","pos":[1765,1843]},{"pos":[1848,1894],"content":"<bpt id=\"p1\">[</bpt>OnFinalMessage<ept id=\"p1\">](#cdialogimpl__onfinalmessage)</ept>","source":"[OnFinalMessage](#cdialogimpl__onfinalmessage)"},{"pos":[1895,1961],"content":"Called after receiving the last message, typically <ph id=\"ph1\">`WM_NCDESTROY`</ph>.","source":"Called after receiving the last message, typically `WM_NCDESTROY`."},{"pos":[1972,1988],"content":"Static Functions","linkify":"Static Functions","nodes":[{"content":"Static Functions","pos":[0,16]}]},{"pos":[2009,2047],"content":"<bpt id=\"p1\">[</bpt>DialogProc<ept id=\"p1\">](#cdialogimpl__dialogproc)</ept>","source":"[DialogProc](#cdialogimpl__dialogproc)"},{"content":"Processes messages sent to the dialog box.","pos":[2048,2090]},{"pos":[2095,2143],"content":"<bpt id=\"p1\">[</bpt>StartDialogProc<ept id=\"p1\">](#cdialogimpl__startdialogproc)</ept>","source":"[StartDialogProc](#cdialogimpl__startdialogproc)"},{"content":"Called when the first message is received to process messages sent to the dialog box.","pos":[2144,2229]},{"pos":[2239,2246],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"With <ph id=\"ph1\">`CDialogImpl`</ph> you can create a modal or modeless dialog box.","pos":[2250,2315],"source":"With `CDialogImpl` you can create a modal or modeless dialog box."},{"content":"<ph id=\"ph1\">`CDialogImpl`</ph> provides the dialog box procedure, which uses the default message map to direct messages to the appropriate handlers.","pos":[2316,2447],"source":"`CDialogImpl` provides the dialog box procedure, which uses the default message map to direct messages to the appropriate handlers."},{"pos":[2454,2562],"content":"The base class destructor <bpt id=\"p1\">**</bpt>~CWindowImplRoot<ept id=\"p1\">**</ept> ensures that the window is gone before destroying the object.","source":"The base class destructor **~CWindowImplRoot** ensures that the window is gone before destroying the object."},{"pos":[2569,2665],"content":"<ph id=\"ph1\">`CDialogImpl`</ph> derives from <bpt id=\"p1\">**</bpt>CDialogImplBaseT<ept id=\"p1\">**</ept>, which in turn derives from <bpt id=\"p2\">**</bpt>CWindowImplRoot<ept id=\"p2\">**</ept>.","source":"`CDialogImpl` derives from **CDialogImplBaseT**, which in turn derives from **CWindowImplRoot**."},{"pos":[2673,2861],"content":"[!NOTE]\n Your class must define an **IDD** member that specifies the dialog template resource ID. For example, the ATL Project Wizard automatically adds the following line to your class:","leadings":["","> "],"nodes":[{"content":" Your class must define an **IDD** member that specifies the dialog template resource ID. For example, the ATL Project Wizard automatically adds the following line to your class:","pos":[8,186],"nodes":[{"content":"Your class must define an <bpt id=\"p1\">**</bpt>IDD<ept id=\"p1\">**</ept> member that specifies the dialog template resource ID.","pos":[1,89],"source":" Your class must define an **IDD** member that specifies the dialog template resource ID."},{"content":"For example, the ATL Project Wizard automatically adds the following line to your class:","pos":[90,178]}]}]},{"pos":[2868,2950],"content":"<bpt id=\"p1\">[!code-cpp</bpt><bpt id=\"p2\">[</bpt>NVC_ATL_Windowing#41<ept id=\"p2\">](../../atl/codesnippet/cpp/cdialogimpl-class_1.h)</ept><ept id=\"p1\">]</ept>","source":"[!code-cpp[NVC_ATL_Windowing#41](../../atl/codesnippet/cpp/cdialogimpl-class_1.h)]"},{"pos":[2957,3032],"content":"where <ph id=\"ph1\">`MyDlg`</ph> is the <bpt id=\"p1\">**</bpt>Short name<ept id=\"p1\">**</ept> entered in the wizard's <bpt id=\"p2\">**</bpt>Names<ept id=\"p2\">**</ept> page.","source":"where `MyDlg` is the **Short name** entered in the wizard's **Names** page."},{"content":"For more information about","pos":[3039,3065]},{"content":"See","pos":[3066,3069]},{"content":"Creating controls","pos":[3121,3138]},{"pos":[3139,3204],"content":"<bpt id=\"p1\">[</bpt>ATL Tutorial<ept id=\"p1\">](../../atl/active-template-library-atl-tutorial.md)</ept>","source":"[ATL Tutorial](../../atl/active-template-library-atl-tutorial.md)"},{"content":"Using dialog boxes in ATL","pos":[3209,3234]},{"pos":[3235,3288],"content":"<bpt id=\"p1\">[</bpt>ATL Window Classes<ept id=\"p1\">](../../atl/atl-window-classes.md)</ept>","source":"[ATL Window Classes](../../atl/atl-window-classes.md)"},{"content":"ATL Project Wizard","pos":[3293,3311]},{"pos":[3312,3385],"content":"<bpt id=\"p1\">[</bpt>Creating an ATL Project<ept id=\"p1\">](../../atl/reference/creating-an-atl-project.md)</ept>","source":"[Creating an ATL Project](../../atl/reference/creating-an-atl-project.md)"},{"content":"Dialog boxes","pos":[3390,3402]},{"pos":[3403,3558],"content":"<bpt id=\"p1\">[</bpt>Dialog Boxes<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/ms632588)</ept> and subsequent topics in the <ph id=\"ph1\">[!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)]</ph>","source":"[Dialog Boxes](http://msdn.microsoft.com/library/windows/desktop/ms632588) and subsequent topics in the [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)]"},{"pos":[3568,3580],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"pos":[3584,3604],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> atlwin.h","source":"**Header:** atlwin.h"},{"pos":[3614,3669],"content":"<bpt id=\"p1\">&lt;a name=\"cdialogimpl__create\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDialogImpl::Create","linkify":"<a name=\"cdialogimpl__create\"></a>  CDialogImpl::Create","source":"<a name=\"cdialogimpl__create\"></a>  CDialogImpl::Create"},{"content":"Creates a modeless dialog box.","pos":[3673,3703]},{"pos":[3886,3896],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"[in] The handle to the owner window.","pos":[3916,3952]},{"content":"<bpt id=\"p1\">**</bpt>RECT&amp;<ept id=\"p1\">**</ept> <ph id=\"ph1\">`rect`</ph>","pos":[3959,3975],"source":"**RECT&** `rect`"},{"content":"[in] A <bpt id=\"p1\">[</bpt>RECT<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/dd162897)</ept> structure specifying the dialog's size and position.","pos":[3979,4105],"source":" [in] A [RECT](http://msdn.microsoft.com/library/windows/desktop/dd162897) structure specifying the dialog's size and position."},{"content":"[in] Specifies the value to pass to the dialog box in the <bpt id=\"p1\">**</bpt>lParam<ept id=\"p1\">**</ept> parameter of the <bpt id=\"p2\">**</bpt>WM_INITDIALOG<ept id=\"p2\">**</ept> message.","pos":[4129,4241],"source":" [in] Specifies the value to pass to the dialog box in the **lParam** parameter of the **WM_INITDIALOG** message."},{"pos":[4251,4263],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"The handle to the newly created dialog box.","pos":[4267,4310]},{"pos":[4320,4327],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"This dialog box is automatically attached to the <ph id=\"ph1\">`CDialogImpl`</ph> object.","pos":[4331,4401],"source":"This dialog box is automatically attached to the `CDialogImpl` object."},{"content":"To create a modal dialog box, call <bpt id=\"p1\">[</bpt>DoModal<ept id=\"p1\">](#cdialogimpl__domodal)</ept>.","pos":[4402,4470],"source":" To create a modal dialog box, call [DoModal](#cdialogimpl__domodal)."},{"content":"The second override above is used only with <bpt id=\"p1\">[</bpt>CComControl<ept id=\"p1\">](../../atl/reference/ccomcontrol-class.md)</ept>.","pos":[4471,4571],"source":" The second override above is used only with [CComControl](../../atl/reference/ccomcontrol-class.md)."},{"pos":[4581,4650],"content":"<bpt id=\"p1\">&lt;a name=\"cdialogimpl__destroywindow\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDialogImpl::DestroyWindow","linkify":"<a name=\"cdialogimpl__destroywindow\"></a>  CDialogImpl::DestroyWindow","source":"<a name=\"cdialogimpl__destroywindow\"></a>  CDialogImpl::DestroyWindow"},{"content":"Destroys a modeless dialog box.","pos":[4654,4685]},{"pos":[4737,4749],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"pos":[4753,4828],"content":"<bpt id=\"p1\">**</bpt>TRUE<ept id=\"p1\">**</ept> if the dialog box was successfully destroyed; otherwise <bpt id=\"p2\">**</bpt>FALSE<ept id=\"p2\">**</ept>.","source":"**TRUE** if the dialog box was successfully destroyed; otherwise **FALSE**."},{"pos":[4838,4845],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[4849,4932],"content":"Returns <bpt id=\"p1\">**</bpt>TRUE<ept id=\"p1\">**</ept> if the dialog box was successfully destroyed; otherwise <bpt id=\"p2\">**</bpt>FALSE<ept id=\"p2\">**</ept>.","source":"Returns **TRUE** if the dialog box was successfully destroyed; otherwise **FALSE**."},{"pos":[4942,5005],"content":"<bpt id=\"p1\">&lt;a name=\"cdialogimpl__dialogproc\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDialogImpl::DialogProc","linkify":"<a name=\"cdialogimpl__dialogproc\"></a>  CDialogImpl::DialogProc","source":"<a name=\"cdialogimpl__dialogproc\"></a>  CDialogImpl::DialogProc"},{"content":"This static function implements the dialog box procedure.","pos":[5009,5066]},{"pos":[5207,5217],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"[in] The handle to the dialog box.","pos":[5231,5265]},{"content":"[in] The message sent to the dialog box.","pos":[5282,5322]},{"content":"[in] Additional message-specific information.","pos":[5341,5386]},{"content":"[in] Additional message-specific information.","pos":[5405,5450]},{"pos":[5460,5472],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"pos":[5476,5535],"content":"<bpt id=\"p1\">**</bpt>TRUE<ept id=\"p1\">**</ept> if the message is processed; otherwise, <bpt id=\"p2\">**</bpt>FALSE<ept id=\"p2\">**</ept>.","source":"**TRUE** if the message is processed; otherwise, **FALSE**."},{"pos":[5545,5552],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[5556,5645],"content":"<ph id=\"ph1\">`DialogProc`</ph> uses the default message map to direct messages to the appropriate handlers.","source":"`DialogProc` uses the default message map to direct messages to the appropriate handlers."},{"pos":[5652,5737],"content":"You can override <ph id=\"ph1\">`DialogProc`</ph> to provide a different mechanism for handling messages.","source":"You can override `DialogProc` to provide a different mechanism for handling messages."},{"pos":[5747,5804],"content":"<bpt id=\"p1\">&lt;a name=\"cdialogimpl__domodal\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDialogImpl::DoModal","linkify":"<a name=\"cdialogimpl__domodal\"></a>  CDialogImpl::DoModal","source":"<a name=\"cdialogimpl__domodal\"></a>  CDialogImpl::DoModal"},{"content":"Creates a modal dialog box.","pos":[5808,5835]},{"pos":[5960,5970],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"[in] The handle to the owner window.","pos":[5990,6026]},{"content":"The default value is the return value of the <bpt id=\"p1\">[</bpt>GetActiveWindow<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/ms646292)</ept> Win32 function.","pos":[6027,6165],"source":" The default value is the return value of the [GetActiveWindow](http://msdn.microsoft.com/library/windows/desktop/ms646292) Win32 function."},{"content":"[in] Specifies the value to pass to the dialog box in the <bpt id=\"p1\">**</bpt>lParam<ept id=\"p1\">**</ept> parameter of the <bpt id=\"p2\">**</bpt>WM_INITDIALOG<ept id=\"p2\">**</ept> message.","pos":[6189,6301],"source":" [in] Specifies the value to pass to the dialog box in the **lParam** parameter of the **WM_INITDIALOG** message."},{"pos":[6311,6323],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"If successful, the value of the <ph id=\"ph1\">`nRetCode`</ph> parameter specified in the call to <bpt id=\"p1\">[</bpt>EndDialog<ept id=\"p1\">](#cdialogimpl__enddialog)</ept>.","pos":[6327,6442],"source":"If successful, the value of the `nRetCode` parameter specified in the call to [EndDialog](#cdialogimpl__enddialog)."},{"content":"Otherwise, -1.","pos":[6443,6457]},{"pos":[6467,6474],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[6478,6548],"content":"This dialog box is automatically attached to the <ph id=\"ph1\">`CDialogImpl`</ph> object.","source":"This dialog box is automatically attached to the `CDialogImpl` object."},{"pos":[6555,6624],"content":"To create a modeless dialog box, call <bpt id=\"p1\">[</bpt>Create<ept id=\"p1\">](#cdialogimpl__create)</ept>.","source":"To create a modeless dialog box, call [Create](#cdialogimpl__create)."},{"pos":[6634,6695],"content":"<bpt id=\"p1\">&lt;a name=\"cdialogimpl__enddialog\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDialogImpl::EndDialog","linkify":"<a name=\"cdialogimpl__enddialog\"></a>  CDialogImpl::EndDialog","source":"<a name=\"cdialogimpl__enddialog\"></a>  CDialogImpl::EndDialog"},{"content":"Destroys a modal dialog box.","pos":[6699,6727]},{"pos":[6787,6797],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"[in] The value to be returned by <bpt id=\"p1\">[</bpt>CDialogImpl::DoModal<ept id=\"p1\">](#cdialogimpl__domodal)</ept>.","pos":[6815,6894],"source":" [in] The value to be returned by [CDialogImpl::DoModal](#cdialogimpl__domodal)."},{"pos":[6904,6916],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"pos":[6920,6982],"content":"<bpt id=\"p1\">**</bpt>TRUE<ept id=\"p1\">**</ept> if the dialog box is destroyed; otherwise, <bpt id=\"p2\">**</bpt>FALSE<ept id=\"p2\">**</ept>.","source":"**TRUE** if the dialog box is destroyed; otherwise, **FALSE**."},{"pos":[6992,6999],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"<ph id=\"ph1\">`EndDialog`</ph> must be called through the dialog procedure.","pos":[7003,7059],"source":"`EndDialog` must be called through the dialog procedure."},{"content":"After the dialog box is destroyed, Windows uses the value of <ph id=\"ph1\">`nRetCode`</ph> as the return value for <ph id=\"ph2\">`DoModal`</ph>, which created the dialog box.","pos":[7060,7196],"source":" After the dialog box is destroyed, Windows uses the value of `nRetCode` as the return value for `DoModal`, which created the dialog box."},{"pos":[7204,7372],"content":"[!NOTE]\n Do not call `EndDialog` to destroy a modeless dialog box. Call [CWindow::DestroyWindow](../../atl/reference/cwindow-class.md#cwindow__destroywindow) instead.","leadings":["","> "],"nodes":[{"content":" Do not call `EndDialog` to destroy a modeless dialog box. Call [CWindow::DestroyWindow](../../atl/reference/cwindow-class.md#cwindow__destroywindow) instead.","pos":[8,166],"nodes":[{"content":"Do not call <ph id=\"ph1\">`EndDialog`</ph> to destroy a modeless dialog box.","pos":[1,58],"source":" Do not call `EndDialog` to destroy a modeless dialog box."},{"content":"Call <bpt id=\"p1\">[</bpt>CWindow::DestroyWindow<ept id=\"p1\">](../../atl/reference/cwindow-class.md#cwindow__destroywindow)</ept> instead.","pos":[59,158],"source":" Call [CWindow::DestroyWindow](../../atl/reference/cwindow-class.md#cwindow__destroywindow) instead."}]}]},{"pos":[7382,7451],"content":"<bpt id=\"p1\">&lt;a name=\"cdialogimpl__getdialogproc\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDialogImpl::GetDialogProc","linkify":"<a name=\"cdialogimpl__getdialogproc\"></a>  CDialogImpl::GetDialogProc","source":"<a name=\"cdialogimpl__getdialogproc\"></a>  CDialogImpl::GetDialogProc"},{"pos":[7455,7510],"content":"Returns <ph id=\"ph1\">`DialogProc`</ph>, the current dialog box procedure.","source":"Returns `DialogProc`, the current dialog box procedure."},{"pos":[7573,7585],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"The current dialog box procedure.","pos":[7589,7622]},{"pos":[7632,7639],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"Override this method to replace the dialog procedure with your own.","pos":[7643,7710]},{"pos":[7720,7789],"content":"<bpt id=\"p1\">&lt;a name=\"cdialogimpl__mapdialogrect\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDialogImpl::MapDialogRect","linkify":"<a name=\"cdialogimpl__mapdialogrect\"></a>  CDialogImpl::MapDialogRect","source":"<a name=\"cdialogimpl__mapdialogrect\"></a>  CDialogImpl::MapDialogRect"},{"content":"Converts (maps) the dialog-box units of the specified rectangle to screen units (pixels).","pos":[7793,7882]},{"pos":[7947,7957],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"Points to a <ph id=\"ph1\">`CRect`</ph> object or <bpt id=\"p1\">[</bpt>RECT<ept id=\"p1\">](../../mfc/reference/rect-structure1.md)</ept> structure that is to receive the client coordinates of the update that encloses the update region.","pos":[7973,8148],"source":" Points to a `CRect` object or [RECT](../../mfc/reference/rect-structure1.md) structure that is to receive the client coordinates of the update that encloses the update region."},{"pos":[8158,8170],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"Nonzero if the update succeeds; 0 if the update fails.","pos":[8174,8228]},{"content":"To get extended error information, call <ph id=\"ph1\">`GetLastError`</ph>.","pos":[8229,8284],"source":" To get extended error information, call `GetLastError`."},{"pos":[8294,8301],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[8305,8512],"content":"The function replaces the coordinates in the specified <ph id=\"ph1\">`RECT`</ph> structure with the converted coordinates, which allows the structure to be used to create a dialog box or position a control within a dialog box.","source":"The function replaces the coordinates in the specified `RECT` structure with the converted coordinates, which allows the structure to be used to create a dialog box or position a control within a dialog box."},{"pos":[8522,8593],"content":"<bpt id=\"p1\">&lt;a name=\"cdialogimpl__onfinalmessage\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDialogImpl::OnFinalMessage","linkify":"<a name=\"cdialogimpl__onfinalmessage\"></a>  CDialogImpl::OnFinalMessage","source":"<a name=\"cdialogimpl__onfinalmessage\"></a>  CDialogImpl::OnFinalMessage"},{"pos":[8597,8664],"content":"Called after receiving the last message (typically <ph id=\"ph1\">`WM_NCDESTROY`</ph>).","source":"Called after receiving the last message (typically `WM_NCDESTROY`)."},{"pos":[8734,8744],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"[in] A handle to the window being destroyed.","pos":[8758,8802]},{"pos":[8812,8819],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[8823,8943],"content":"Note that if you want to automatically delete your object upon the window destruction, you can call <ph id=\"ph1\">`delete this;`</ph> here.","source":"Note that if you want to automatically delete your object upon the window destruction, you can call `delete this;` here."},{"pos":[8953,9026],"content":"<bpt id=\"p1\">&lt;a name=\"cdialogimpl__startdialogproc\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDialogImpl::StartDialogProc","linkify":"<a name=\"cdialogimpl__startdialogproc\"></a>  CDialogImpl::StartDialogProc","source":"<a name=\"cdialogimpl__startdialogproc\"></a>  CDialogImpl::StartDialogProc"},{"content":"Called only once, when the first message is received, to process messages sent to the dialog box.","pos":[9030,9127]},{"pos":[9273,9283],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"[in] The handle to the dialog box.","pos":[9297,9331]},{"content":"[in] The message sent to the dialog box.","pos":[9348,9388]},{"content":"[in] Additional message-specific information.","pos":[9407,9452]},{"content":"[in] Additional message-specific information.","pos":[9471,9516]},{"pos":[9526,9538],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"The window procedure.","pos":[9542,9563]},{"pos":[9573,9580],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[9584,9699],"content":"After the initial call to <ph id=\"ph1\">`StartDialogProc`</ph>, <ph id=\"ph2\">`DialogProc`</ph> is set as a dialog procedure, and further calls go there.","source":"After the initial call to `StartDialogProc`, `DialogProc` is set as a dialog procedure, and further calls go there."},{"pos":[9708,9716],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>BEGIN_MSG_MAP<ept id=\"p1\">](http://msdn.microsoft.com/library/8bbb5af9-18b1-48c6-880e-166f599ee554)</ept><ph id=\"ph1\"> </ph>","pos":[9720,9808],"source":"[BEGIN_MSG_MAP](http://msdn.microsoft.com/library/8bbb5af9-18b1-48c6-880e-166f599ee554) "},{"content":"<bpt id=\"p1\"> [</bpt>Class Overview<ept id=\"p1\">](../../atl/atl-class-overview.md)</ept>","pos":[9811,9861],"source":" [Class Overview](../../atl/atl-class-overview.md)"}],"content":"---\ntitle: \"CDialogImpl Class | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"reference\"\nf1_keywords: \n  - \"CDialogImpl\"\n  - \"ATL.CDialogImpl\"\n  - \"ATL::CDialogImpl\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"dialog boxes, ATL\"\n  - \"CDialogImpl class\"\nms.assetid: d430bc7b-8a28-4ad3-9507-277bdd2c2c2e\ncaps.latest.revision: 25\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# CDialogImpl Class\nThis class provides methods for creating a modal or modeless dialog box.  \n  \n> [!IMPORTANT]\n>  This class and its members cannot be used in applications that execute in the Windows Runtime.  \n  \n## Syntax  \n  \n```  \n \ntemplate <class T,  \n    class TBase = CWindow>  \n    class ATL_NO_VTABLE CDialogImpl :  \n    public CDialogImplBaseT<TBase>  \n \n```  \n  \n#### Parameters  \n `T`  \n Your class, derived from `CDialogImpl`.  \n  \n *TBase*  \n The base class of your new class. The default base class is [CWindow](../../atl/reference/cwindow-class.md).  \n  \n## Members  \n  \n### Methods  \n  \n|||  \n|-|-|  \n|[Create](#cdialogimpl__create)|Creates a modeless dialog box.|  \n|[DestroyWindow](#cdialogimpl__destroywindow)|Destroys a modeless dialog box.|  \n|[DoModal](#cdialogimpl__domodal)|Creates a modal dialog box.|  \n|[EndDialog](#cdialogimpl__enddialog)|Destroys a modal dialog box.|  \n  \n### CDialogImplBaseT Methods  \n  \n|||  \n|-|-|  \n|[GetDialogProc](#cdialogimpl__getdialogproc)|Returns the current dialog box procedure.|  \n|[MapDialogRect](#cdialogimpl__mapdialogrect)|Maps the dialog-box units of the specified rectangle to screen units (pixels).|  \n|[OnFinalMessage](#cdialogimpl__onfinalmessage)|Called after receiving the last message, typically `WM_NCDESTROY`.|  \n  \n### Static Functions  \n  \n|||  \n|-|-|  \n|[DialogProc](#cdialogimpl__dialogproc)|Processes messages sent to the dialog box.|  \n|[StartDialogProc](#cdialogimpl__startdialogproc)|Called when the first message is received to process messages sent to the dialog box.|  \n  \n## Remarks  \n With `CDialogImpl` you can create a modal or modeless dialog box. `CDialogImpl` provides the dialog box procedure, which uses the default message map to direct messages to the appropriate handlers.  \n  \n The base class destructor **~CWindowImplRoot** ensures that the window is gone before destroying the object.  \n  \n `CDialogImpl` derives from **CDialogImplBaseT**, which in turn derives from **CWindowImplRoot**.  \n  \n> [!NOTE]\n>  Your class must define an **IDD** member that specifies the dialog template resource ID. For example, the ATL Project Wizard automatically adds the following line to your class:  \n  \n [!code-cpp[NVC_ATL_Windowing#41](../../atl/codesnippet/cpp/cdialogimpl-class_1.h)]  \n  \n where `MyDlg` is the **Short name** entered in the wizard's **Names** page.  \n  \n|For more information about|See|  \n|--------------------------------|---------|  \n|Creating controls|[ATL Tutorial](../../atl/active-template-library-atl-tutorial.md)|  \n|Using dialog boxes in ATL|[ATL Window Classes](../../atl/atl-window-classes.md)|  \n|ATL Project Wizard|[Creating an ATL Project](../../atl/reference/creating-an-atl-project.md)|  \n|Dialog boxes|[Dialog Boxes](http://msdn.microsoft.com/library/windows/desktop/ms632588) and subsequent topics in the [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)]|  \n  \n## Requirements  \n **Header:** atlwin.h  \n  \n##  <a name=\"cdialogimpl__create\"></a>  CDialogImpl::Create  \n Creates a modeless dialog box.  \n  \n```  \n \nHWND Create(\n    HWND hWndParent,  \n    LPARAM dwInitParam = NULL);\n\n    HWND Create(\n    HWND hWndParent,  \n    RECT&, \n    LPARAM dwInitParam = NULL);\n\n \n```  \n  \n### Parameters  \n `hWndParent`  \n [in] The handle to the owner window.  \n  \n **RECT&** `rect`  \n [in] A [RECT](http://msdn.microsoft.com/library/windows/desktop/dd162897) structure specifying the dialog's size and position.  \n  \n `dwInitParam`  \n [in] Specifies the value to pass to the dialog box in the **lParam** parameter of the **WM_INITDIALOG** message.  \n  \n### Return Value  \n The handle to the newly created dialog box.  \n  \n### Remarks  \n This dialog box is automatically attached to the `CDialogImpl` object. To create a modal dialog box, call [DoModal](#cdialogimpl__domodal). The second override above is used only with [CComControl](../../atl/reference/ccomcontrol-class.md).  \n  \n##  <a name=\"cdialogimpl__destroywindow\"></a>  CDialogImpl::DestroyWindow  \n Destroys a modeless dialog box.  \n  \n```  \n \nBOOL DestroyWindow();\n\n \n```  \n  \n### Return Value  \n **TRUE** if the dialog box was successfully destroyed; otherwise **FALSE**.  \n  \n### Remarks  \n Returns **TRUE** if the dialog box was successfully destroyed; otherwise **FALSE**.  \n  \n##  <a name=\"cdialogimpl__dialogproc\"></a>  CDialogImpl::DialogProc  \n This static function implements the dialog box procedure.  \n  \n```  \n \nstatic LRESULT CALLBACK DialogProc(\n    HWND hWnd,  \n    UINT uMsg,  \n    WPARAM wParam,  \n    LPARAM lParam);\n\n \n```  \n  \n### Parameters  \n `hWnd`  \n [in] The handle to the dialog box.  \n  \n `uMsg`  \n [in] The message sent to the dialog box.  \n  \n `wParam`  \n [in] Additional message-specific information.  \n  \n `lParam`  \n [in] Additional message-specific information.  \n  \n### Return Value  \n **TRUE** if the message is processed; otherwise, **FALSE**.  \n  \n### Remarks  \n `DialogProc` uses the default message map to direct messages to the appropriate handlers.  \n  \n You can override `DialogProc` to provide a different mechanism for handling messages.  \n  \n##  <a name=\"cdialogimpl__domodal\"></a>  CDialogImpl::DoModal  \n Creates a modal dialog box.  \n  \n```  \n \nINT_PTR DoModal(\n    HWND hWndParent = ::GetActiveWindow(),   \n    LPARAM dwInitParam = NULL);\n\n \n```  \n  \n### Parameters  \n `hWndParent`  \n [in] The handle to the owner window. The default value is the return value of the [GetActiveWindow](http://msdn.microsoft.com/library/windows/desktop/ms646292) Win32 function.  \n  \n `dwInitParam`  \n [in] Specifies the value to pass to the dialog box in the **lParam** parameter of the **WM_INITDIALOG** message.  \n  \n### Return Value  \n If successful, the value of the `nRetCode` parameter specified in the call to [EndDialog](#cdialogimpl__enddialog). Otherwise, -1.  \n  \n### Remarks  \n This dialog box is automatically attached to the `CDialogImpl` object.  \n  \n To create a modeless dialog box, call [Create](#cdialogimpl__create).  \n  \n##  <a name=\"cdialogimpl__enddialog\"></a>  CDialogImpl::EndDialog  \n Destroys a modal dialog box.  \n  \n```  \n \nBOOL EndDialog(int nRetCode);\n\n \n```  \n  \n### Parameters  \n `nRetCode`  \n [in] The value to be returned by [CDialogImpl::DoModal](#cdialogimpl__domodal).  \n  \n### Return Value  \n **TRUE** if the dialog box is destroyed; otherwise, **FALSE**.  \n  \n### Remarks  \n `EndDialog` must be called through the dialog procedure. After the dialog box is destroyed, Windows uses the value of `nRetCode` as the return value for `DoModal`, which created the dialog box.  \n  \n> [!NOTE]\n>  Do not call `EndDialog` to destroy a modeless dialog box. Call [CWindow::DestroyWindow](../../atl/reference/cwindow-class.md#cwindow__destroywindow) instead.  \n  \n##  <a name=\"cdialogimpl__getdialogproc\"></a>  CDialogImpl::GetDialogProc  \n Returns `DialogProc`, the current dialog box procedure.  \n  \n```  \n \nvirtual WNDPROC GetDialogProc();\n\n \n```  \n  \n### Return Value  \n The current dialog box procedure.  \n  \n### Remarks  \n Override this method to replace the dialog procedure with your own.  \n  \n##  <a name=\"cdialogimpl__mapdialogrect\"></a>  CDialogImpl::MapDialogRect  \n Converts (maps) the dialog-box units of the specified rectangle to screen units (pixels).  \n  \n```  \n \nBOOL MapDialogRect(LPRECT lpRect);\n\n \n```  \n  \n### Parameters  \n `lpRect`  \n Points to a `CRect` object or [RECT](../../mfc/reference/rect-structure1.md) structure that is to receive the client coordinates of the update that encloses the update region.  \n  \n### Return Value  \n Nonzero if the update succeeds; 0 if the update fails. To get extended error information, call `GetLastError`.  \n  \n### Remarks  \n The function replaces the coordinates in the specified `RECT` structure with the converted coordinates, which allows the structure to be used to create a dialog box or position a control within a dialog box.  \n  \n##  <a name=\"cdialogimpl__onfinalmessage\"></a>  CDialogImpl::OnFinalMessage  \n Called after receiving the last message (typically `WM_NCDESTROY`).  \n  \n```  \n \nvirtual void OnFinalMessage(HWND hWnd);\n\n \n```  \n  \n### Parameters  \n `hWnd`  \n [in] A handle to the window being destroyed.  \n  \n### Remarks  \n Note that if you want to automatically delete your object upon the window destruction, you can call `delete this;` here.  \n  \n##  <a name=\"cdialogimpl__startdialogproc\"></a>  CDialogImpl::StartDialogProc  \n Called only once, when the first message is received, to process messages sent to the dialog box.  \n  \n```  \n \nstatic LRESULT CALLBACK StartDialogProc(\n    HWND hWnd,  \n    UINT uMsg,  \n    WPARAM wParam,  \n    LPARAM lParam);\n\n \n```  \n  \n### Parameters  \n `hWnd`  \n [in] The handle to the dialog box.  \n  \n `uMsg`  \n [in] The message sent to the dialog box.  \n  \n `wParam`  \n [in] Additional message-specific information.  \n  \n `lParam`  \n [in] Additional message-specific information.  \n  \n### Return Value  \n The window procedure.  \n  \n### Remarks  \n After the initial call to `StartDialogProc`, `DialogProc` is set as a dialog procedure, and further calls go there.  \n  \n## See Also  \n [BEGIN_MSG_MAP](http://msdn.microsoft.com/library/8bbb5af9-18b1-48c6-880e-166f599ee554)   \n [Class Overview](../../atl/atl-class-overview.md)"}