{"nodes":[{"pos":[12,45],"content":"Batch-Mode Rules | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Batch-Mode Rules | Microsoft Docs","pos":[0,33]}]},{"content":"Batch-Mode Rules","pos":[657,673]},{"content":"Batch-mode inference rules provide only one invocation of the inference rule when N commands go through this inference rule.","pos":[741,865]},{"content":"Without batch-mode inference rules, it would require N commands to be invoked.","pos":[866,944]},{"content":"N is the number of dependents that trigger the inference rule.","pos":[945,1007]},{"content":"Makefiles that contain batch-mode inference rules must use NMAKE version 1.62 or higher.","pos":[1014,1102]},{"content":"To check the NMAKE version, run the _NMAKE_VER macro available with NMAKE version 1.62 or higher.","pos":[1103,1200]},{"content":"This macro returns a string representing the Visual C++ product version.","pos":[1201,1273]},{"content":"The only syntactical difference from the standard inference rule is that the batch-mode inference rule is terminated with a double colon (::).","pos":[1280,1422]},{"pos":[1430,1586],"content":"[!NOTE]\n The tool being invoked must be able to handle multiple files. The batch-mode inference rule must use `$<` as the macro to access dependent files.","leadings":["","> "],"nodes":[{"content":" The tool being invoked must be able to handle multiple files. The batch-mode inference rule must use `$<` as the macro to access dependent files.","pos":[8,154],"nodes":[{"content":"The tool being invoked must be able to handle multiple files.","pos":[1,62]},{"content":"The batch-mode inference rule must use <ph id=\"ph1\">`$&lt;`</ph> as the macro to access dependent files.","pos":[63,146],"source":" The batch-mode inference rule must use `$<` as the macro to access dependent files."}]}]},{"content":"The batch-mode inference rules can speed up the build process.","pos":[1593,1655]},{"content":"It is faster to supply files to the compiler in batch, because the compiler driver is invoked only once.","pos":[1656,1760]},{"content":"For example, the C and C++ compiler performs better when handling a set of files because it can remain memory resident during the process.","pos":[1761,1899]},{"content":"The following example shows how to use batch-mode inference rules:","pos":[1906,1972]},{"content":"NMAKE produces the following output without batch-mode inference rules:","pos":[2335,2406]},{"content":"NMAKE produces the following result with the batch-mode inference rules:","pos":[2807,2879]},{"content":"See Also","pos":[3206,3214]},{"content":"Inference Rules","pos":[3219,3234]}],"content":"---\ntitle: \"Batch-Mode Rules | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"inference rules in NMAKE\"\n  - \"NMAKE program, inference rules\"\n  - \"batch-mode inference rules in NMAKE\"\nms.assetid: 0650b547-ef19-4455-9bba-fa567dcf88f2\ncaps.latest.revision: 7\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Batch-Mode Rules\n```  \n{frompath}.fromext{topath}.toext::  \n   commands  \n```  \n  \n Batch-mode inference rules provide only one invocation of the inference rule when N commands go through this inference rule. Without batch-mode inference rules, it would require N commands to be invoked. N is the number of dependents that trigger the inference rule.  \n  \n Makefiles that contain batch-mode inference rules must use NMAKE version 1.62 or higher. To check the NMAKE version, run the _NMAKE_VER macro available with NMAKE version 1.62 or higher. This macro returns a string representing the Visual C++ product version.  \n  \n The only syntactical difference from the standard inference rule is that the batch-mode inference rule is terminated with a double colon (::).  \n  \n> [!NOTE]\n>  The tool being invoked must be able to handle multiple files. The batch-mode inference rule must use `$<` as the macro to access dependent files.  \n  \n The batch-mode inference rules can speed up the build process. It is faster to supply files to the compiler in batch, because the compiler driver is invoked only once. For example, the C and C++ compiler performs better when handling a set of files because it can remain memory resident during the process.  \n  \n The following example shows how to use batch-mode inference rules:  \n  \n```  \n#  \n# sample makefile to illustrate batch-mode inference rules  \n#  \nO = .  \nS = .  \nObjs = $O/foo1.obj $O/foo2.obj $O/foo2.obj $O/foo3.obj $O/foo4.obj  \nCFLAGS = -nologo  \n  \nall : $(Objs)  \n  \n!ifdef NOBatch  \n{$S}.cpp{$O}.obj:  \n!else  \n{$S}.cpp{$O}.obj::  \n!endif  \n   $(CC) $(CFLAGS) -Fd$O\\ -c $<  \n  \n$(Objs) :  \n  \n#end of makefile  \n```  \n  \n NMAKE produces the following output without batch-mode inference rules:  \n  \n```  \nE:\\tmp> nmake -f test.mak -a NOBatch=1  \n  \nMicrosoft (R) Program Maintenance Utility   Version 7.00.0000  \nCopyright (C) Microsoft Corp 1988-2001. All rights reserved.  \n        cl -nologo -Fd.\\ -c .\\foo1.cpp  \nfoo1.cpp  \n        cl -nologo -Fd.\\ -c .\\foo2.cpp  \nfoo2.cpp  \n        cl -nologo -Fd.\\ -c .\\foo3.cpp  \nfoo3.cpp  \n        cl -nologo -Fd.\\ -c .\\foo4.cpp  \nfoo4.cpp  \n```  \n  \n NMAKE produces the following result with the batch-mode inference rules:  \n  \n```  \nE:\\tmp> nmake -f test.mak -a  \n  \nMicrosoft (R) Program Maintenance Utility   Version 7.00.0000  \nCopyright (C) Microsoft Corp 1988-2001. All rights reserved.  \n  \n        cl -nologo -Fd.\\ -c .\\foo1.cpp .\\foo2.cpp .\\foo3.cpp .\\foo4.cpp  \nfoo1.cpp  \nfoo2.cpp  \nfoo3.cpp  \nfoo4.cpp  \nGenerating Code...  \n```  \n  \n## See Also  \n [Inference Rules](../build/inference-rules.md)"}