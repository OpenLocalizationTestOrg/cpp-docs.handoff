{"nodes":[{"pos":[12,37],"content":"_setmode | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"_setmode | Microsoft Docs","pos":[0,25]}]},{"pos":[1067,1075],"content":"_setmode","linkify":"_setmode","nodes":[{"content":"_setmode","pos":[0,8]}]},{"content":"Sets the file translation mode.","pos":[1076,1107]},{"pos":[1116,1122],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1198,1208],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"File descriptor.","pos":[1220,1236]},{"content":"New translation mode.","pos":[1253,1274]},{"pos":[1283,1295],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"If successful, returns the previous translation mode.","pos":[1299,1352]},{"content":"If invalid parameters are passed to this function, the invalid-parameter handler is invoked, as described in <bpt id=\"p1\">[</bpt>Parameter Validation<ept id=\"p1\">](../../c-runtime-library/parameter-validation.md)</ept>.","pos":[1359,1540],"source":"If invalid parameters are passed to this function, the invalid-parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md)."},{"content":"If execution is allowed to continue, this function returns –1 and sets <ph id=\"ph1\">`errno`</ph> to either <ph id=\"ph2\">`EBADF`</ph>, which indicates an invalid file descriptor, or <ph id=\"ph3\">`EINVAL`</ph>, which indicates an invalid <ph id=\"ph4\">`mode`</ph> argument.","pos":[1541,1739],"source":" If execution is allowed to continue, this function returns –1 and sets `errno` to either `EBADF`, which indicates an invalid file descriptor, or `EINVAL`, which indicates an invalid `mode` argument."},{"pos":[1746,1923],"content":"For more information about these and other return codes, see <bpt id=\"p1\">[</bpt>_doserrno, errno, _sys_errlist, and _sys_nerr<ept id=\"p1\">](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md)</ept>.","source":"For more information about these and other return codes, see [_doserrno, errno, _sys_errlist, and _sys_nerr](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md)."},{"pos":[1932,1939],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">`_setmode`</ph> function sets to <ph id=\"ph2\">`mode`</ph> the translation mode of the file given by <ph id=\"ph3\">`fd`</ph>.","pos":[1943,2029],"source":"The `_setmode` function sets to `mode` the translation mode of the file given by `fd`."},{"content":"Passing <ph id=\"ph1\">`_O_TEXT`</ph> as <ph id=\"ph2\">`mode`</ph> sets text (that is, translated) mode.","pos":[2030,2095],"source":" Passing `_O_TEXT` as `mode` sets text (that is, translated) mode."},{"content":"Carriage return–line feed (CR-LF) combinations are translated into a single line feed character on input.","pos":[2096,2201]},{"content":"Line feed characters are translated into CR-LF combinations on output.","pos":[2202,2272]},{"content":"Passing <ph id=\"ph1\">`_O_BINARY`</ph> sets binary (untranslated) mode, in which these translations are suppressed.","pos":[2273,2369],"source":" Passing `_O_BINARY` sets binary (untranslated) mode, in which these translations are suppressed."},{"content":"You can also pass <ph id=\"ph1\">`_O_U16TEXT`</ph>, <ph id=\"ph2\">`_O_U8TEXT`</ph>, or _<ph id=\"ph3\">`O_WTEXT`</ph> to enable Unicode mode, as demonstrated in the second example later in this document.","pos":[2376,2520],"source":"You can also pass `_O_U16TEXT`, `_O_U8TEXT`, or _`O_WTEXT` to enable Unicode mode, as demonstrated in the second example later in this document."},{"content":"<ph id=\"ph1\">`_setmode`</ph> is typically used to modify the default translation mode of <ph id=\"ph2\">`stdin`</ph> and <ph id=\"ph3\">`stdout`</ph>, but you can use it on any file.","pos":[2521,2645],"source":"`_setmode` is typically used to modify the default translation mode of `stdin` and `stdout`, but you can use it on any file."},{"content":"If you apply <ph id=\"ph1\">`_setmode`</ph> to the file descriptor for a stream, call <ph id=\"ph2\">`_setmode`</ph> before you perform any input or output operations on the stream.","pos":[2646,2787],"source":" If you apply `_setmode` to the file descriptor for a stream, call `_setmode` before you perform any input or output operations on the stream."},{"pos":[2795,3123],"content":"[!CAUTION]\n If you write data to a file stream, explicitly flush the code by using [fflush](../../c-runtime-library/reference/fflush.md) before you use `_setmode` to change the mode. If you do not flush the code, you might get unexpected behavior. If you have not written data to the stream, you do not have to flush the code.","leadings":["","> "],"nodes":[{"content":" If you write data to a file stream, explicitly flush the code by using [fflush](../../c-runtime-library/reference/fflush.md) before you use `_setmode` to change the mode. If you do not flush the code, you might get unexpected behavior. If you have not written data to the stream, you do not have to flush the code.","pos":[11,326],"nodes":[{"content":"If you write data to a file stream, explicitly flush the code by using <bpt id=\"p1\">[</bpt>fflush<ept id=\"p1\">](../../c-runtime-library/reference/fflush.md)</ept> before you use <ph id=\"ph1\">`_setmode`</ph> to change the mode.","pos":[1,171],"source":" If you write data to a file stream, explicitly flush the code by using [fflush](../../c-runtime-library/reference/fflush.md) before you use `_setmode` to change the mode."},{"content":"If you do not flush the code, you might get unexpected behavior.","pos":[172,236]},{"content":"If you have not written data to the stream, you do not have to flush the code.","pos":[237,315]}]}]},{"pos":[3132,3144],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"content":"Routine","pos":[3151,3158]},{"content":"Required header","pos":[3159,3174]},{"content":"Optional Headers","pos":[3175,3191]},{"content":"<ph id=\"ph1\">\\&lt;</ph>io.h&gt;","pos":[3270,3277],"source":"\\<io.h>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>fcntl.h&gt;","pos":[3278,3288],"source":"\\<fcntl.h>"},{"pos":[3296,3394],"content":"For more compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept>.","source":"For more compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md)."},{"pos":[3403,3410],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[3951,3958],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[4422,4447],"content":".NET Framework Equivalent","linkify":".NET Framework Equivalent","nodes":[{"content":".NET Framework Equivalent","pos":[0,25]}]},{"pos":[4457,4559],"content":"<bpt id=\"p1\">[</bpt>System::IO::BinaryReader Class<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/system.io.binaryreader.aspx)</ept>","source":"[System::IO::BinaryReader Class](https://msdn.microsoft.com/en-us/library/system.io.binaryreader.aspx)"},{"pos":[4569,4667],"content":"<bpt id=\"p1\">[</bpt>System::IO::TextReader Class<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/system.io.textreader.aspx)</ept>","source":"[System::IO::TextReader Class](https://msdn.microsoft.com/en-us/library/system.io.textreader.aspx)"},{"pos":[4676,4684],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>File Handling<ept id=\"p1\">](../../c-runtime-library/file-handling.md)</ept><ph id=\"ph1\"> </ph>","pos":[4688,4746],"source":"[File Handling](../../c-runtime-library/file-handling.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_creat, _wcreat<ept id=\"p1\">](../../c-runtime-library/reference/creat-wcreat.md)</ept><ph id=\"ph1\"> </ph>","pos":[4749,4819],"source":" [_creat, _wcreat](../../c-runtime-library/reference/creat-wcreat.md) "},{"content":"<bpt id=\"p1\"> [</bpt>fopen, _wfopen<ept id=\"p1\">](../../c-runtime-library/reference/fopen-wfopen.md)</ept><ph id=\"ph1\"> </ph>","pos":[4822,4891],"source":" [fopen, _wfopen](../../c-runtime-library/reference/fopen-wfopen.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_open, _wopen<ept id=\"p1\">](../../c-runtime-library/reference/open-wopen.md)</ept><ph id=\"ph1\"> </ph>","pos":[4894,4960],"source":" [_open, _wopen](../../c-runtime-library/reference/open-wopen.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_set_fmode<ept id=\"p1\">](../../c-runtime-library/reference/set-fmode.md)</ept>","pos":[4963,5024],"source":" [_set_fmode](../../c-runtime-library/reference/set-fmode.md)"}],"content":"---\ntitle: \"_setmode | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"_setmode\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\n  - \"api-ms-win-crt-stdio-l1-1-0.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"_setmode\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"Unicode [C++], console output\"\n  - \"files [C++], modes\"\n  - \"_setmode function\"\n  - \"file translation [C++], setting mode\"\n  - \"files [C++], translation\"\n  - \"setmode function\"\nms.assetid: 996ff7cb-11d1-43f4-9810-f6097182642a\ncaps.latest.revision: 23\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# _setmode\nSets the file translation mode.  \n  \n## Syntax  \n  \n```  \nint _setmode (  \n   int fd,  \n   int mode   \n);  \n```  \n  \n#### Parameters  \n `fd`  \n File descriptor.  \n  \n `mode`  \n New translation mode.  \n  \n## Return Value  \n If successful, returns the previous translation mode.  \n  \n If invalid parameters are passed to this function, the invalid-parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md). If execution is allowed to continue, this function returns –1 and sets `errno` to either `EBADF`, which indicates an invalid file descriptor, or `EINVAL`, which indicates an invalid `mode` argument.  \n  \n For more information about these and other return codes, see [_doserrno, errno, _sys_errlist, and _sys_nerr](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md).  \n  \n## Remarks  \n The `_setmode` function sets to `mode` the translation mode of the file given by `fd`. Passing `_O_TEXT` as `mode` sets text (that is, translated) mode. Carriage return–line feed (CR-LF) combinations are translated into a single line feed character on input. Line feed characters are translated into CR-LF combinations on output. Passing `_O_BINARY` sets binary (untranslated) mode, in which these translations are suppressed.  \n  \n You can also pass `_O_U16TEXT`, `_O_U8TEXT`, or _`O_WTEXT` to enable Unicode mode, as demonstrated in the second example later in this document. `_setmode` is typically used to modify the default translation mode of `stdin` and `stdout`, but you can use it on any file. If you apply `_setmode` to the file descriptor for a stream, call `_setmode` before you perform any input or output operations on the stream.  \n  \n> [!CAUTION]\n>  If you write data to a file stream, explicitly flush the code by using [fflush](../../c-runtime-library/reference/fflush.md) before you use `_setmode` to change the mode. If you do not flush the code, you might get unexpected behavior. If you have not written data to the stream, you do not have to flush the code.  \n  \n## Requirements  \n  \n|Routine|Required header|Optional Headers|  \n|-------------|---------------------|----------------------|  \n|`_setmode`|\\<io.h>|\\<fcntl.h>|  \n  \n For more compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md).  \n  \n## Example  \n  \n```  \n// crt_setmode.c  \n// This program uses _setmode to change  \n// stdin from text mode to binary mode.  \n  \n#include <stdio.h>  \n#include <fcntl.h>  \n#include <io.h>  \n  \nint main( void )  \n{  \n   int result;  \n  \n   // Set \"stdin\" to have binary mode:  \n   result = _setmode( _fileno( stdin ), _O_BINARY );  \n   if( result == -1 )  \n      perror( \"Cannot set mode\" );  \n   else  \n      printf( \"'stdin' successfully changed to binary mode\\n\" );  \n}  \n```  \n  \n```Output  \n'stdin' successfully changed to binary mode  \n```  \n  \n## Example  \n  \n```  \n// crt_setmodeunicode.c  \n// This program uses _setmode to change  \n// stdout to Unicode. Cyrillic and Ideographic  \n// characters will appear on the console (if  \n// your console font supports those character sets).  \n  \n#include <fcntl.h>  \n#include <io.h>  \n#include <stdio.h>  \n  \nint main(void) {  \n    _setmode(_fileno(stdout), _O_U16TEXT);  \n    wprintf(L\"\\x043a\\x043e\\x0448\\x043a\\x0430 \\x65e5\\x672c\\x56fd\\n\");  \n    return 0;  \n}  \n```  \n  \n## .NET Framework Equivalent  \n  \n-   [System::IO::BinaryReader Class](https://msdn.microsoft.com/en-us/library/system.io.binaryreader.aspx)  \n  \n-   [System::IO::TextReader Class](https://msdn.microsoft.com/en-us/library/system.io.textreader.aspx)  \n  \n## See Also  \n [File Handling](../../c-runtime-library/file-handling.md)   \n [_creat, _wcreat](../../c-runtime-library/reference/creat-wcreat.md)   \n [fopen, _wfopen](../../c-runtime-library/reference/fopen-wfopen.md)   \n [_open, _wopen](../../c-runtime-library/reference/open-wopen.md)   \n [_set_fmode](../../c-runtime-library/reference/set-fmode.md)"}