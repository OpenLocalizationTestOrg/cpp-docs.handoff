{"nodes":[{"pos":[12,52],"content":"_searchenv, _wsearchenv | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"_searchenv, _wsearchenv | Microsoft Docs","pos":[0,40]}]},{"pos":[1250,1273],"content":"_searchenv, _wsearchenv","linkify":"_searchenv, _wsearchenv","nodes":[{"content":"_searchenv, _wsearchenv","pos":[0,23]}]},{"content":"Uses environment paths to search for a file.","pos":[1274,1318]},{"content":"More secure versions of these functions are available; see <bpt id=\"p1\">[</bpt>_searchenv_s, _wsearchenv_s<ept id=\"p1\">](../../c-runtime-library/reference/searchenv-s-wsearchenv-s.md)</ept>.","pos":[1319,1471],"source":" More secure versions of these functions are available; see [_searchenv_s, _wsearchenv_s](../../c-runtime-library/reference/searchenv-s-wsearchenv-s.md)."},{"pos":[1479,1739],"content":"[!IMPORTANT]\n This API cannot be used in applications that execute in the [!INCLUDE[wrt](../../atl/reference/includes/wrt_md.md)]. For more information, see [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx).","leadings":["","> "],"nodes":[{"content":" This API cannot be used in applications that execute in the [!INCLUDE[wrt](../../atl/reference/includes/wrt_md.md)]. For more information, see [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx).","pos":[13,258],"nodes":[{"content":"This API cannot be used in applications that execute in the <ph id=\"ph1\">[!INCLUDE[wrt](../../atl/reference/includes/wrt_md.md)]</ph>.","pos":[1,117],"source":" This API cannot be used in applications that execute in the [!INCLUDE[wrt](../../atl/reference/includes/wrt_md.md)]."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>CRT functions not supported with /ZW<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx)</ept>.","pos":[118,245],"source":" For more information, see [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx)."}]}]},{"pos":[1748,1754],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[2280,2290],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"Name of the file to search for.","pos":[2308,2339]},{"content":"Environment to search.","pos":[2359,2381]},{"content":"Buffer to store the complete path.","pos":[2402,2436]},{"pos":[2445,2452],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">`_searchenv`</ph> routine searches for the target file in the specified domain.","pos":[2456,2534],"source":"The `_searchenv` routine searches for the target file in the specified domain."},{"content":"The <ph id=\"ph1\">`varname`</ph> variable can be any environment or user-defined variable—for example, <ph id=\"ph2\">`PATH`</ph>, <ph id=\"ph3\">`LIB`</ph>, or <ph id=\"ph4\">`INCLUDE`</ph>—that specifies a list of directory paths.","pos":[2535,2688],"source":" The `varname` variable can be any environment or user-defined variable—for example, `PATH`, `LIB`, or `INCLUDE`—that specifies a list of directory paths."},{"content":"Because <ph id=\"ph1\">`_searchenv`</ph> is case-sensitive, <ph id=\"ph2\">`varname`</ph> should match the case of the environment variable.","pos":[2689,2789],"source":" Because `_searchenv` is case-sensitive, `varname` should match the case of the environment variable."},{"content":"The routine first searches for the file in the current working directory.","pos":[2796,2869]},{"content":"If it does not find the file, it looks through the directories that are specified by the environment variable.","pos":[2870,2980]},{"content":"If the target file is in one of those directories, the newly created path is copied into <ph id=\"ph1\">`pathname`</ph>.","pos":[2981,3081],"source":" If the target file is in one of those directories, the newly created path is copied into `pathname`."},{"content":"If the <ph id=\"ph1\">`filename`</ph> file is not found, <ph id=\"ph2\">`pathname`</ph> contains an empty null-terminated string.","pos":[3082,3171],"source":" If the `filename` file is not found, `pathname` contains an empty null-terminated string."},{"content":"The <ph id=\"ph1\">`pathname`</ph> buffer should be at least <ph id=\"ph2\">`_MAX_PATH`</ph> characters long to accommodate the full length of the constructed path name.","pos":[3178,3307],"source":"The `pathname` buffer should be at least `_MAX_PATH` characters long to accommodate the full length of the constructed path name."},{"content":"Otherwise, <ph id=\"ph1\">`_searchenv`</ph> might overrun the <ph id=\"ph2\">`pathname`</ph> buffer and cause unexpected behavior.","pos":[3308,3398],"source":" Otherwise, `_searchenv` might overrun the `pathname` buffer and cause unexpected behavior."},{"content":"<ph id=\"ph1\">`_wsearchenv`</ph> is a wide-character version of <ph id=\"ph2\">`_searchenv`</ph>, and the arguments to <ph id=\"ph3\">`_wsearchenv`</ph> are wide-character strings.","pos":[3405,3526],"source":"`_wsearchenv` is a wide-character version of `_searchenv`, and the arguments to `_wsearchenv` are wide-character strings."},{"content":"<ph id=\"ph1\">`_wsearchenv`</ph> and <ph id=\"ph2\">`_searchenv`</ph> behave identically otherwise.","pos":[3527,3587],"source":"`_wsearchenv` and `_searchenv` behave identically otherwise."},{"pos":[3594,3660],"content":"If <ph id=\"ph1\">`filename`</ph> is an empty string, these functions return <ph id=\"ph2\">`ENOENT`</ph>.","source":"If `filename` is an empty string, these functions return `ENOENT`."},{"content":"If <ph id=\"ph1\">`filename`</ph> or <ph id=\"ph2\">`pathname`</ph> is a <ph id=\"ph3\">`NULL`</ph> pointer, the invalid parameter handler is invoked, as described in <bpt id=\"p1\">[</bpt>Parameter Validation<ept id=\"p1\">](../../c-runtime-library/parameter-validation.md)</ept>.","pos":[3667,3846],"source":"If `filename` or `pathname` is a `NULL` pointer, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md)."},{"content":"If execution is allowed to continue, these functions return -1 and set <ph id=\"ph1\">`errno`</ph> to <ph id=\"ph2\">`EINVAL`</ph>.","pos":[3847,3938],"source":" If execution is allowed to continue, these functions return -1 and set `errno` to `EINVAL`."},{"pos":[3945,4063],"content":"For more information about <ph id=\"ph1\">`errno`</ph> and error codes, see <bpt id=\"p1\">[</bpt>errno Constants<ept id=\"p1\">](../../c-runtime-library/errno-constants.md)</ept>.","source":"For more information about `errno` and error codes, see [errno Constants](../../c-runtime-library/errno-constants.md)."},{"content":"In C++, these functions have template overloads that invoke the newer, more secure counterparts of these functions.","pos":[4070,4185]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Secure Template Overloads<ept id=\"p1\">](../../c-runtime-library/secure-template-overloads.md)</ept>.","pos":[4186,4294],"source":" For more information, see [Secure Template Overloads](../../c-runtime-library/secure-template-overloads.md)."},{"pos":[4304,4333],"content":"Generic-Text Routine Mappings","linkify":"Generic-Text Routine Mappings","nodes":[{"content":"Generic-Text Routine Mappings","pos":[0,29]}]},{"content":"Tchar.h routine","pos":[4340,4355]},{"content":"_UNICODE and _MBCS not defined","pos":[4356,4386]},{"content":"_MBCS defined","pos":[4387,4400]},{"content":"_UNICODE defined","pos":[4401,4417]},{"pos":[4595,4607],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"content":"Routine","pos":[4614,4621]},{"content":"Required header","pos":[4622,4637]},{"content":"<ph id=\"ph1\">\\&lt;</ph>stdlib.h&gt;","pos":[4695,4706],"source":"\\<stdlib.h>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>stdlib.h&gt; or <ph id=\"ph2\">\\&lt;</ph>wchar.h&gt;","pos":[4725,4750],"source":"\\<stdlib.h> or \\<wchar.h>"},{"pos":[4758,4856],"content":"For more compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept>.","source":"For more compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md)."},{"pos":[4865,4872],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[5662,5687],"content":".NET Framework Equivalent","linkify":".NET Framework Equivalent","nodes":[{"content":".NET Framework Equivalent","pos":[0,25]}]},{"content":"Not applicable.","pos":[5691,5706]},{"content":"To call the standard C function, use <ph id=\"ph1\">`PInvoke`</ph>.","pos":[5707,5754],"source":" To call the standard C function, use `PInvoke`."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Platform Invoke Examples<ept id=\"p1\">](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f)</ept>.","pos":[5755,5880],"source":" For more information, see [Platform Invoke Examples](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f)."},{"pos":[5889,5897],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Directory Control<ept id=\"p1\">](../../c-runtime-library/directory-control.md)</ept><ph id=\"ph1\"> </ph>","pos":[5901,5967],"source":"[Directory Control](../../c-runtime-library/directory-control.md) "},{"content":"<bpt id=\"p1\"> [</bpt>getenv, _wgetenv<ept id=\"p1\">](../../c-runtime-library/reference/getenv-wgetenv.md)</ept><ph id=\"ph1\"> </ph>","pos":[5970,6043],"source":" [getenv, _wgetenv](../../c-runtime-library/reference/getenv-wgetenv.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_putenv, _wputenv<ept id=\"p1\">](../../c-runtime-library/reference/putenv-wputenv.md)</ept><ph id=\"ph1\"> </ph>","pos":[6046,6120],"source":" [_putenv, _wputenv](../../c-runtime-library/reference/putenv-wputenv.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_searchenv_s, _wsearchenv_s<ept id=\"p1\">](../../c-runtime-library/reference/searchenv-s-wsearchenv-s.md)</ept>","pos":[6123,6216],"source":" [_searchenv_s, _wsearchenv_s](../../c-runtime-library/reference/searchenv-s-wsearchenv-s.md)"}],"content":"---\ntitle: \"_searchenv, _wsearchenv | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"_searchenv\"\n  - \"_wsearchenv\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\n  - \"api-ms-win-crt-environment-l1-1-0.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"_wsearchenv\"\n  - \"_tsearchenv\"\n  - \"wsearchenv\"\n  - \"_searchenv\"\n  - \"searchenv\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"_wsearchenv function\"\n  - \"files [C++], finding\"\n  - \"_searchenv function\"\n  - \"tsearchenv function\"\n  - \"environment paths, searching for files\"\n  - \"_tsearchenv function\"\n  - \"wsearchenv function\"\n  - \"searchenv function\"\n  - \"environment paths\"\nms.assetid: 9c944a27-d326-409b-aee6-410e8762d9d3\ncaps.latest.revision: 33\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# _searchenv, _wsearchenv\nUses environment paths to search for a file. More secure versions of these functions are available; see [_searchenv_s, _wsearchenv_s](../../c-runtime-library/reference/searchenv-s-wsearchenv-s.md).  \n  \n> [!IMPORTANT]\n>  This API cannot be used in applications that execute in the [!INCLUDE[wrt](../../atl/reference/includes/wrt_md.md)]. For more information, see [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx).  \n  \n## Syntax  \n  \n```  \nvoid _searchenv(  \n   const char *filename,  \n   const char *varname,  \n   char *pathname   \n);  \nvoid _wsearchenv(  \n   const wchar_t *filename,  \n   const wchar_t *varname,  \n   wchar_t *pathname   \n);  \ntemplate <size_t size>  \nvoid _searchenv(  \n   const char *filename,  \n   const char *varname,  \n   char (&pathname)[size]  \n); // C++ only  \ntemplate <size_t size>  \nvoid _wsearchenv(  \n   const wchar_t *filename,  \n   const wchar_t *varname,  \n   wchar_t (&pathname)[size]  \n); // C++ only  \n```  \n  \n#### Parameters  \n `filename`  \n Name of the file to search for.  \n  \n `varname`  \n Environment to search.  \n  \n `pathname`  \n Buffer to store the complete path.  \n  \n## Remarks  \n The `_searchenv` routine searches for the target file in the specified domain. The `varname` variable can be any environment or user-defined variable—for example, `PATH`, `LIB`, or `INCLUDE`—that specifies a list of directory paths. Because `_searchenv` is case-sensitive, `varname` should match the case of the environment variable.  \n  \n The routine first searches for the file in the current working directory. If it does not find the file, it looks through the directories that are specified by the environment variable. If the target file is in one of those directories, the newly created path is copied into `pathname`. If the `filename` file is not found, `pathname` contains an empty null-terminated string.  \n  \n The `pathname` buffer should be at least `_MAX_PATH` characters long to accommodate the full length of the constructed path name. Otherwise, `_searchenv` might overrun the `pathname` buffer and cause unexpected behavior.  \n  \n `_wsearchenv` is a wide-character version of `_searchenv`, and the arguments to `_wsearchenv` are wide-character strings. `_wsearchenv` and `_searchenv` behave identically otherwise.  \n  \n If `filename` is an empty string, these functions return `ENOENT`.  \n  \n If `filename` or `pathname` is a `NULL` pointer, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md). If execution is allowed to continue, these functions return -1 and set `errno` to `EINVAL`.  \n  \n For more information about `errno` and error codes, see [errno Constants](../../c-runtime-library/errno-constants.md).  \n  \n In C++, these functions have template overloads that invoke the newer, more secure counterparts of these functions. For more information, see [Secure Template Overloads](../../c-runtime-library/secure-template-overloads.md).  \n  \n### Generic-Text Routine Mappings  \n  \n|Tchar.h routine|_UNICODE and _MBCS not defined|_MBCS defined|_UNICODE defined|  \n|---------------------|--------------------------------------|--------------------|-----------------------|  \n|`_tsearchenv`|`_searchenv`|`_searchenv`|`_wsearchenv`|  \n  \n## Requirements  \n  \n|Routine|Required header|  \n|-------------|---------------------|  \n|`_searchenv`|\\<stdlib.h>|  \n|`_wsearchenv`|\\<stdlib.h> or \\<wchar.h>|  \n  \n For more compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md).  \n  \n## Example  \n  \n```  \n  \n      // crt_searchenv.c  \n// compile with: /W3  \n// This program searches for a file in  \n// a directory that's specified by an environment variable.  \n  \n#include <stdlib.h>  \n#include <stdio.h>  \n  \nint main( void )  \n{  \n   char pathbuffer[_MAX_PATH];  \n   char searchfile[] = \"CL.EXE\";  \n   char envvar[] = \"PATH\";  \n  \n   // Search for file in PATH environment variable:  \n   _searchenv( searchfile, envvar, pathbuffer ); // C4996  \n   // Note: _searchenv is deprecated; consider using _searchenv_s  \n   if( *pathbuffer != '\\0' )  \n      printf( \"Path for %s:\\n%s\\n\", searchfile, pathbuffer );  \n   else  \n      printf( \"%s not found\\n\", searchfile );  \n}  \n```  \n  \n```Output  \nPath for CL.EXE:  \nC:\\Program Files\\Microsoft Visual Studio 8\\VC\\BIN\\CL.EXE  \n```  \n  \n## .NET Framework Equivalent  \n Not applicable. To call the standard C function, use `PInvoke`. For more information, see [Platform Invoke Examples](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f).  \n  \n## See Also  \n [Directory Control](../../c-runtime-library/directory-control.md)   \n [getenv, _wgetenv](../../c-runtime-library/reference/getenv-wgetenv.md)   \n [_putenv, _wputenv](../../c-runtime-library/reference/putenv-wputenv.md)   \n [_searchenv_s, _wsearchenv_s](../../c-runtime-library/reference/searchenv-s-wsearchenv-s.md)"}