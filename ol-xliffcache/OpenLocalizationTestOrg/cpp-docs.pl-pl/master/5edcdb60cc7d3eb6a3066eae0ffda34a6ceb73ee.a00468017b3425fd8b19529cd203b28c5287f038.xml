{"nodes":[{"pos":[12,64],"content":"_InterlockedAdd Intrinsic Functions | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"_InterlockedAdd Intrinsic Functions | Microsoft Docs","pos":[0,52]}]},{"content":"_InterlockedAdd Intrinsic Functions","pos":[1251,1286]},{"content":"Microsoft Specific","pos":[1289,1307]},{"content":"Perform an atomic addition, which ensures that the operation completes successfully when multiple threads have access to a shared variable.","pos":[1316,1455]},{"content":"Syntax","pos":[1464,1470]},{"content":"Parameters","pos":[2155,2165]},{"content":"[in, out]","pos":[2169,2178]},{"content":"Pointer to the integer to be added to; replaced by the result of the addition.","pos":[2191,2269]},{"content":"[in]","pos":[2276,2280]},{"content":"The value to add.","pos":[2292,2309]},{"content":"Return Value","pos":[2318,2330]},{"content":"Both functions return the result of the addition.","pos":[2334,2383]},{"content":"Requirements","pos":[2392,2404]},{"content":"Intrinsic","pos":[2411,2420]},{"content":"Architecture","pos":[2421,2433]},{"content":"ARM","pos":[2495,2498]},{"content":"ARM","pos":[2525,2528]},{"content":"ARM","pos":[2554,2557]},{"content":"ARM","pos":[2584,2587]},{"content":"ARM","pos":[2612,2615]},{"content":"ARM","pos":[2644,2647]},{"content":"ARM","pos":[2675,2678]},{"content":"ARM","pos":[2707,2710]},{"pos":[2718,2745],"content":"<bpt id=\"p1\">**</bpt>Header file<ept id=\"p1\">**</ept> <ph id=\"ph1\">\\&lt;</ph>intrin.h&gt;","source":"**Header file** \\<intrin.h>"},{"content":"Remarks","pos":[2754,2761]},{"content":"The versions of these functions with the <ph id=\"ph1\">`_acq`</ph> or <ph id=\"ph2\">`_rel`</ph> suffixes perform an interlocked addition following acquire or release semantics.","pos":[2765,2903],"source":"The versions of these functions with the `_acq` or `_rel` suffixes perform an interlocked addition following acquire or release semantics."},{"content":"Acquire semantics means that the result of the operation are made visible to all threads and processors before any subsequent memory reads and writes.","pos":[2904,3054]},{"content":"Acquire is useful when entering a critical section.","pos":[3055,3106]},{"content":"Release semantics means that all memory reads and writes are forced to be made visible to all threads and processors before the result of the operation is made visible itself.","pos":[3107,3282]},{"content":"Release is useful when leaving a critical section.","pos":[3283,3333]},{"content":"The intrinsics with an <ph id=\"ph1\">`_nf`</ph> (\"no fence\") suffix do not act as a memory barrier.","pos":[3334,3414],"source":" The intrinsics with an `_nf` (\"no fence\") suffix do not act as a memory barrier."},{"content":"These routines are only available as intrinsics.","pos":[3421,3469]},{"content":"Example","pos":[3478,3485]},{"content":"Output","pos":[3891,3897]},{"content":"Example","pos":[3954,3961]},{"content":"Output","pos":[4511,4517]},{"content":"END Microsoft Specific","pos":[4622,4644]},{"content":"See Also","pos":[4653,4661]},{"content":"Compiler Intrinsics","pos":[4666,4685]},{"content":"Conflicts with the x86 Compiler","pos":[4730,4761]}],"content":"---\ntitle: \"_InterlockedAdd Intrinsic Functions | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"_InterlockedAdd64_acq_cpp\"\n  - \"_InterlockedAdd64_acq\"\n  - \"_InterlockedAdd_acq\"\n  - \"_InterlockedAdd_nf\"\n  - \"_InterlockedAdd64_rel\"\n  - \"_InterlockedAdd64\"\n  - \"_InterlockedAdd_cpp\"\n  - \"_InterlockedAdd_rel_cpp\"\n  - \"_InterlockedAdd_rel\"\n  - \"_InterlockedAdd64_rel_cpp\"\n  - \"_InterlockedAdd64_cpp\"\n  - \"_InterlockedAdd_acq_cpp\"\n  - \"_InterlockedAdd64_nf\"\n  - \"_InterlockedAdd\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"_InterlockedAdd_nf intrinsic\"\n  - \"_InterlockedAdd_rel intrinsic\"\n  - \"_InterlockedAdd intrinsic\"\n  - \"_InterlockedAdd64 intrinsic\"\n  - \"_InterlockedAdd64_acq intrinsic\"\n  - \"_InterlockedAdd64_nf intrinsic\"\n  - \"_InterlockedAdd_acq intrinsic\"\n  - \"_InterlockedAdd64_rel intrinsic\"\nms.assetid: 3d319603-ea9c-4fdd-ae61-e52430ccc3b1\ncaps.latest.revision: 14\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# _InterlockedAdd Intrinsic Functions\n**Microsoft Specific**  \n  \n Perform an atomic addition, which ensures that the operation completes successfully when multiple threads have access to a shared variable.  \n  \n## Syntax  \n  \n```  \nlong _InterlockedAdd(  \n   long volatile * Addend,  \n   long Value  \n);  \nlong _InterlockedAdd_acq(  \n   long volatile * Addend,  \n   long Value  \n);  \nlong _InterlockedAdd_nf(  \n   long volatile * Addend,  \n   long Value  \n);  \nlong _InterlockedAdd_rel(  \n   long volatile * Addend,  \n   long Value  \n);  \n__int64 _InterlockedAdd64(  \n   __int64 volatile * Addend,  \n   __int64 Value  \n);  \n__int64 _InterlockedAdd64_acq(  \n   __int64 volatile * Addend,  \n   __int64 Value  \n);  \n__int64 _InterlockedAdd64_nf (  \n   __int64 volatile * Addend,  \n   __int64 Value  \n);  \n__int64 _InterlockedAdd64_rel(  \n   __int64 volatile * Addend,  \n   __int64 Value  \n);  \n```  \n  \n#### Parameters  \n [in, out] `Addend`  \n Pointer to the integer to be added to; replaced by the result of the addition.  \n  \n [in] `Value`  \n The value to add.  \n  \n## Return Value  \n Both functions return the result of the addition.  \n  \n## Requirements  \n  \n|Intrinsic|Architecture|  \n|---------------|------------------|  \n|`_InterlockedAdd`|ARM|  \n|`_InterlockedAdd_acq`|ARM|  \n|`_InterlockedAdd_nf`|ARM|  \n|`_InterlockedAdd_rel`|ARM|  \n|`_InterlockedAdd64`|ARM|  \n|`_InterlockedAdd64_acq`|ARM|  \n|`_InterlockedAdd64_nf`|ARM|  \n|`_InterlockedAdd64_rel`|ARM|  \n  \n **Header file** \\<intrin.h>  \n  \n## Remarks  \n The versions of these functions with the `_acq` or `_rel` suffixes perform an interlocked addition following acquire or release semantics. Acquire semantics means that the result of the operation are made visible to all threads and processors before any subsequent memory reads and writes. Acquire is useful when entering a critical section. Release semantics means that all memory reads and writes are forced to be made visible to all threads and processors before the result of the operation is made visible itself. Release is useful when leaving a critical section. The intrinsics with an `_nf` (\"no fence\") suffix do not act as a memory barrier.  \n  \n These routines are only available as intrinsics.  \n  \n## Example  \n  \n```  \n// interlockedadd.cpp  \n// Compile with: /Oi /EHsc  \n// processor: ARM  \n#include <stdio.h>  \n#include <intrin.h>  \n  \n#pragma intrinsic(_InterlockedAdd)  \n  \nint main()  \n{  \n        long data1 = 0xFF00FF00;  \n        long data2 = 0x00FF0000;  \n        long retval;  \n        retval = _InterlockedAdd(&data1, data2);  \n        printf(\"0x%x 0x%x 0x%x\", data1, data2, retval);  \n}  \n```  \n  \n## Output  \n  \n```  \n0xffffff00 0xff0000 0xffffff00  \n```  \n  \n## Example  \n  \n```  \n// interlockedadd64.cpp  \n// compile with: /Oi /EHsc  \n// processor: ARM  \n#include <iostream>  \n#include <intrin.h>  \nusing namespace std;  \n  \n#pragma intrinsic(_InterlockedAdd64)  \n  \nint main()  \n{  \n        __int64 data1 = 0x0000FF0000000000;  \n        __int64 data2 = 0x00FF0000FFFFFFFF;  \n        __int64 retval;  \n        cout << hex << data1 << \" + \" << data2 << \" = \" ;  \n        retval = _InterlockedAdd64(&data1, data2);  \n        cout << data1 << endl;  \n        cout << \"Return value: \" << retval << endl;  \n}  \n```  \n  \n## Output  \n  \n```  \nff0000000000 + ff0000ffffffff = ffff00ffffffff  \nReturn value: ffff00ffffffff  \n```  \n  \n### END Microsoft Specific  \n  \n## See Also  \n [Compiler Intrinsics](../intrinsics/compiler-intrinsics.md)   \n [Conflicts with the x86 Compiler](../build/conflicts-with-the-x86-compiler.md)"}