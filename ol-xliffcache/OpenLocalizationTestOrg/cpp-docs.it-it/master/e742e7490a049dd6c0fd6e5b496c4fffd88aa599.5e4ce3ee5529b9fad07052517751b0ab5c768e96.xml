{"nodes":[{"pos":[12,56],"content":"Memory Management Functions | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Memory Management Functions | Microsoft Docs","pos":[0,44]}]},{"content":"Memory Management Functions","pos":[614,641]},{"content":"This document describes the memory management functions that the Concurrency Runtime provides to help you allocate and free memory in a concurrent manner.","pos":[642,796]},{"pos":[804,1283],"content":"[!TIP]\n The Concurrency Runtime provides a default scheduler, and therefore you are not required to create one in your application. Because the Task Scheduler helps you fine-tune the performance of your applications, we recommend that you start with the [Parallel Patterns Library (PPL)](../../parallel/concrt/parallel-patterns-library-ppl.md) or the [Asynchronous Agents Library](../../parallel/concrt/asynchronous-agents-library.md) if you are new to the Concurrency Runtime.","leadings":["","> "],"nodes":[{"content":" The Concurrency Runtime provides a default scheduler, and therefore you are not required to create one in your application. Because the Task Scheduler helps you fine-tune the performance of your applications, we recommend that you start with the [Parallel Patterns Library (PPL)](../../parallel/concrt/parallel-patterns-library-ppl.md) or the [Asynchronous Agents Library](../../parallel/concrt/asynchronous-agents-library.md) if you are new to the Concurrency Runtime.","pos":[7,477],"nodes":[{"content":"The Concurrency Runtime provides a default scheduler, and therefore you are not required to create one in your application.","pos":[1,124]},{"content":"Because the Task Scheduler helps you fine-tune the performance of your applications, we recommend that you start with the <bpt id=\"p1\">[</bpt>Parallel Patterns Library (PPL)<ept id=\"p1\">](../../parallel/concrt/parallel-patterns-library-ppl.md)</ept> or the <bpt id=\"p2\">[</bpt>Asynchronous Agents Library<ept id=\"p2\">](../../parallel/concrt/asynchronous-agents-library.md)</ept> if you are new to the Concurrency Runtime.","pos":[125,470],"source":" Because the Task Scheduler helps you fine-tune the performance of your applications, we recommend that you start with the [Parallel Patterns Library (PPL)](../../parallel/concrt/parallel-patterns-library-ppl.md) or the [Asynchronous Agents Library](../../parallel/concrt/asynchronous-agents-library.md) if you are new to the Concurrency Runtime."}]}]},{"content":"The Concurrency Runtime provides two memory management functions that are optimized for allocating and freeing blocks of memory in a concurrent manner.","pos":[1290,1441]},{"content":"The <bpt id=\"p1\">[</bpt>concurrency::Alloc<ept id=\"p1\">](reference/concurrency-namespace-functions.md#alloc)</ept> function allocates a block of memory by using the specified size.","pos":[1442,1584],"source":" The [concurrency::Alloc](reference/concurrency-namespace-functions.md#alloc) function allocates a block of memory by using the specified size."},{"content":"The <bpt id=\"p1\">[</bpt>concurrency::Free<ept id=\"p1\">](reference/concurrency-namespace-functions.md#free)</ept> function frees the memory that was allocated by <ph id=\"ph1\">`Alloc`</ph>.","pos":[1585,1716],"source":" The [concurrency::Free](reference/concurrency-namespace-functions.md#free) function frees the memory that was allocated by `Alloc`."},{"pos":[1724,1996],"content":"[!NOTE]\n The `Alloc` and `Free` functions rely on each other. Use the `Free` function only to release memory that you allocate by using the `Alloc` function. Also, when you use the `Alloc` function to allocate memory, use only the `Free` function to release that memory.","leadings":["","> "],"nodes":[{"content":" The `Alloc` and `Free` functions rely on each other. Use the `Free` function only to release memory that you allocate by using the `Alloc` function. Also, when you use the `Alloc` function to allocate memory, use only the `Free` function to release that memory.","pos":[8,270],"nodes":[{"content":"The <ph id=\"ph1\">`Alloc`</ph> and <ph id=\"ph2\">`Free`</ph> functions rely on each other.","pos":[1,53],"source":" The `Alloc` and `Free` functions rely on each other."},{"content":"Use the <ph id=\"ph1\">`Free`</ph> function only to release memory that you allocate by using the <ph id=\"ph2\">`Alloc`</ph> function.","pos":[54,149],"source":" Use the `Free` function only to release memory that you allocate by using the `Alloc` function."},{"content":"Also, when you use the <ph id=\"ph1\">`Alloc`</ph> function to allocate memory, use only the <ph id=\"ph2\">`Free`</ph> function to release that memory.","pos":[150,262],"source":" Also, when you use the `Alloc` function to allocate memory, use only the `Free` function to release that memory."}]}]},{"content":"Use the <ph id=\"ph1\">`Alloc`</ph> and <ph id=\"ph2\">`Free`</ph> functions when you allocate and free a fixed set of allocation sizes from different threads or tasks.","pos":[2003,2131],"source":"Use the `Alloc` and `Free` functions when you allocate and free a fixed set of allocation sizes from different threads or tasks."},{"content":"The Concurrency Runtime caches memory that it allocates from the C Runtime heap.","pos":[2132,2212]},{"content":"The Concurrency Runtime holds a separate memory cache for each running thread; therefore, the runtime manages memory without the use of locks or memory barriers.","pos":[2213,2374]},{"content":"An application benefits more from the <ph id=\"ph1\">`Alloc`</ph> and <ph id=\"ph2\">`Free`</ph> functions when the memory cache is accessed more frequently.","pos":[2375,2492],"source":" An application benefits more from the `Alloc` and `Free` functions when the memory cache is accessed more frequently."},{"content":"For example, a thread that frequently calls both <ph id=\"ph1\">`Alloc`</ph> and <ph id=\"ph2\">`Free`</ph> benefits more than a thread that primarily calls <ph id=\"ph3\">`Alloc`</ph> or <ph id=\"ph4\">`Free`</ph>.","pos":[2493,2628],"source":" For example, a thread that frequently calls both `Alloc` and `Free` benefits more than a thread that primarily calls `Alloc` or `Free`."},{"pos":[2636,2970],"content":"[!NOTE]\n When you use these memory management functions, and your application uses lots of memory, the application may enter a low-memory condition sooner than you expect. Because the memory blocks that are cached by one thread are not available to any other thread, if one thread holds lots of memory, that memory is not available.","leadings":["","> "],"nodes":[{"content":" When you use these memory management functions, and your application uses lots of memory, the application may enter a low-memory condition sooner than you expect. Because the memory blocks that are cached by one thread are not available to any other thread, if one thread holds lots of memory, that memory is not available.","pos":[8,332],"nodes":[{"content":"When you use these memory management functions, and your application uses lots of memory, the application may enter a low-memory condition sooner than you expect.","pos":[1,163]},{"content":"Because the memory blocks that are cached by one thread are not available to any other thread, if one thread holds lots of memory, that memory is not available.","pos":[164,324]}]}]},{"content":"Example","pos":[2979,2986]},{"pos":[2990,3224],"content":"For an example that uses the <ph id=\"ph1\">`Alloc`</ph> and <ph id=\"ph2\">`Free`</ph> functions to improve memory performance, see <bpt id=\"p1\">[</bpt>How to: Use Alloc and Free to Improve Memory Performance<ept id=\"p1\">](../../parallel/concrt/how-to-use-alloc-and-free-to-improve-memory-performance.md)</ept>.","source":"For an example that uses the `Alloc` and `Free` functions to improve memory performance, see [How to: Use Alloc and Free to Improve Memory Performance](../../parallel/concrt/how-to-use-alloc-and-free-to-improve-memory-performance.md)."},{"content":"See Also","pos":[3233,3241]},{"content":"Task Scheduler","pos":[3246,3260]},{"content":"How to: Use Alloc and Free to Improve Memory Performance","pos":[3328,3384]}],"content":"---\ntitle: \"Memory Management Functions | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"memory management functions [Concurrency Runtime]\"\nms.assetid: d303dd2a-dfa4-4d90-a508-f6aa290bb9ea\ncaps.latest.revision: 6\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Memory Management Functions\nThis document describes the memory management functions that the Concurrency Runtime provides to help you allocate and free memory in a concurrent manner.  \n  \n> [!TIP]\n>  The Concurrency Runtime provides a default scheduler, and therefore you are not required to create one in your application. Because the Task Scheduler helps you fine-tune the performance of your applications, we recommend that you start with the [Parallel Patterns Library (PPL)](../../parallel/concrt/parallel-patterns-library-ppl.md) or the [Asynchronous Agents Library](../../parallel/concrt/asynchronous-agents-library.md) if you are new to the Concurrency Runtime.  \n  \n The Concurrency Runtime provides two memory management functions that are optimized for allocating and freeing blocks of memory in a concurrent manner. The [concurrency::Alloc](reference/concurrency-namespace-functions.md#alloc) function allocates a block of memory by using the specified size. The [concurrency::Free](reference/concurrency-namespace-functions.md#free) function frees the memory that was allocated by `Alloc`.  \n  \n> [!NOTE]\n>  The `Alloc` and `Free` functions rely on each other. Use the `Free` function only to release memory that you allocate by using the `Alloc` function. Also, when you use the `Alloc` function to allocate memory, use only the `Free` function to release that memory.  \n  \n Use the `Alloc` and `Free` functions when you allocate and free a fixed set of allocation sizes from different threads or tasks. The Concurrency Runtime caches memory that it allocates from the C Runtime heap. The Concurrency Runtime holds a separate memory cache for each running thread; therefore, the runtime manages memory without the use of locks or memory barriers. An application benefits more from the `Alloc` and `Free` functions when the memory cache is accessed more frequently. For example, a thread that frequently calls both `Alloc` and `Free` benefits more than a thread that primarily calls `Alloc` or `Free`.  \n  \n> [!NOTE]\n>  When you use these memory management functions, and your application uses lots of memory, the application may enter a low-memory condition sooner than you expect. Because the memory blocks that are cached by one thread are not available to any other thread, if one thread holds lots of memory, that memory is not available.  \n  \n## Example  \n For an example that uses the `Alloc` and `Free` functions to improve memory performance, see [How to: Use Alloc and Free to Improve Memory Performance](../../parallel/concrt/how-to-use-alloc-and-free-to-improve-memory-performance.md).  \n  \n## See Also  \n [Task Scheduler](../../parallel/concrt/task-scheduler-concurrency-runtime.md)   \n [How to: Use Alloc and Free to Improve Memory Performance](../../parallel/concrt/how-to-use-alloc-and-free-to-improve-memory-performance.md)\n\n"}