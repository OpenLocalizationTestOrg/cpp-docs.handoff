{"nodes":[{"pos":[12,55],"content":"IResourceManager Structure | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"IResourceManager Structure | Microsoft Docs","pos":[0,43]}]},{"content":"IResourceManager Structure","pos":[650,676]},{"content":"An interface to the Concurrency Runtime's Resource Manager.","pos":[677,736]},{"content":"This is the interface by which schedulers communicate with the Resource Manager.","pos":[737,817]},{"content":"Syntax","pos":[826,832]},{"content":"Members","pos":[879,886]},{"content":"Public Enumerations","pos":[896,915]},{"content":"Name","pos":[922,926]},{"content":"Description","pos":[927,938]},{"content":"IResourceManager::OSVersion Enumeration","pos":[977,1016]},{"content":"An enumerated type that represents the operating system version.","pos":[1030,1094]},{"content":"Public Methods","pos":[1105,1119]},{"content":"Name","pos":[1126,1130]},{"content":"Description","pos":[1131,1142]},{"content":"IResourceManager::CreateNodeTopology Method","pos":[1181,1224]},{"content":"Present only in debug builds of the runtime, this method is a test hook designed to facilitate testing of the Resource Manager on varying hardware topologies, without requiring actual hardware matching the configuration.","pos":[1247,1467]},{"content":"With retail builds of the runtime, this method will return without performing any action.","pos":[1468,1557]},{"content":"IResourceManager::GetAvailableNodeCount Method","pos":[1563,1609]},{"content":"Returns the number of nodes available to the Resource Manager.","pos":[1635,1697]},{"content":"IResourceManager::GetFirstNode Method","pos":[1703,1740]},{"content":"Returns the first node in enumeration order as defined by the Resource Manager.","pos":[1757,1836]},{"content":"IResourceManager::Reference Method","pos":[1842,1876]},{"content":"Increments the reference count on the Resource Manager instance.","pos":[1890,1954]},{"content":"IResourceManager::RegisterScheduler Method","pos":[1960,2002]},{"content":"Registers a scheduler with the Resource Manager.","pos":[2024,2072]},{"content":"Once the scheduler is registered, it should communicate with the Resource Manager using the <ph id=\"ph1\">`ISchedulerProxy`</ph> interface that is returned.","pos":[2073,2210],"source":" Once the scheduler is registered, it should communicate with the Resource Manager using the `ISchedulerProxy` interface that is returned."},{"content":"IResourceManager::Release Method","pos":[2216,2248]},{"content":"Decrements the reference count on the Resource Manager instance.","pos":[2260,2324]},{"content":"The Resource Manager is destroyed when its reference count goes to <ph id=\"ph1\">`0`</ph>.","pos":[2325,2396],"source":" The Resource Manager is destroyed when its reference count goes to `0`."},{"content":"Remarks","pos":[2406,2413]},{"content":"Use the <bpt id=\"p1\">[</bpt>CreateResourceManager<ept id=\"p1\">](concurrency-namespace-functions.md)</ept> function to obtain an interface to the singleton Resource Manager instance.","pos":[2417,2560],"source":"Use the [CreateResourceManager](concurrency-namespace-functions.md) function to obtain an interface to the singleton Resource Manager instance."},{"content":"The method increments a reference count on the Resource Manager, and you should invoke the <bpt id=\"p1\">[</bpt>IResourceManager::Release<ept id=\"p1\">](#release)</ept> method to release the reference when you are done with Resource Manager.","pos":[2561,2762],"source":" The method increments a reference count on the Resource Manager, and you should invoke the [IResourceManager::Release](#release) method to release the reference when you are done with Resource Manager."},{"content":"Typically, each scheduler you create will invoke this method during creation, and release the reference to the Resource Manager after it shuts down.","pos":[2763,2911]},{"content":"Inheritance Hierarchy","pos":[2920,2941]},{"content":"Requirements","pos":[2972,2984]},{"pos":[2988,3010],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> concrtrm.h","source":"**Header:** concrtrm.h"},{"pos":[3017,3043],"content":"<bpt id=\"p1\">**</bpt>Namespace:<ept id=\"p1\">**</ept> concurrency","source":"**Namespace:** concurrency"},{"pos":[3088,3131],"content":"IResourceManager::CreateNodeTopology Method"},{"content":"Present only in debug builds of the runtime, this method is a test hook designed to facilitate testing of the Resource Manager on varying hardware topologies, without requiring actual hardware matching the configuration.","pos":[3135,3355]},{"content":"With retail builds of the runtime, this method will return without performing any action.","pos":[3356,3445]},{"content":"Parameters","pos":[3704,3714]},{"content":"The number of processor nodes being simulated.","pos":[3733,3779]},{"content":"An array that specifies the number of cores on each node.","pos":[3802,3859]},{"content":"A matrix specifying the node distance between any two nodes.","pos":[3885,3945]},{"content":"This parameter can have the value <ph id=\"ph1\">`NULL`</ph>.","pos":[3946,3987],"source":" This parameter can have the value `NULL`."},{"content":"An array that specifies the processor group each node belongs to.","pos":[4016,4081]},{"content":"Remarks","pos":[4091,4098]},{"pos":[4102,4300],"content":"<bpt id=\"p1\">[</bpt>invalid_argument<ept id=\"p1\">](../../../standard-library/invalid-argument-class.md)</ept> is thrown if the parameter <ph id=\"ph1\">`nodeCount`</ph> has the value <ph id=\"ph2\">`0`</ph> was passed in, or if the parameter <ph id=\"ph3\">`pCoreCount`</ph> has the value <ph id=\"ph4\">`NULL`</ph>.","source":"[invalid_argument](../../../standard-library/invalid-argument-class.md) is thrown if the parameter `nodeCount` has the value `0` was passed in, or if the parameter `pCoreCount` has the value `NULL`."},{"pos":[4307,4434],"content":"<bpt id=\"p1\">[</bpt>invalid_operation<ept id=\"p1\">](invalid-operation-class.md)</ept> is thrown if this method is called while other schedulers exist in the process.","source":"[invalid_operation](invalid-operation-class.md) is thrown if this method is called while other schedulers exist in the process."},{"pos":[4482,4528],"content":"IResourceManager::GetAvailableNodeCount Method"},{"content":"Returns the number of nodes available to the Resource Manager.","pos":[4532,4594]},{"content":"Return Value","pos":[4673,4685]},{"content":"The number of nodes available to the Resource Manager.","pos":[4689,4743]},{"pos":[4782,4819],"content":"IResourceManager::GetFirstNode Method"},{"content":"Returns the first node in enumeration order as defined by the Resource Manager.","pos":[4823,4902]},{"content":"Return Value","pos":[4974,4986]},{"content":"The first node in enumeration order as defined by the Resource Manager.","pos":[4990,5061]},{"pos":[5115,5154],"content":"IResourceManager::OSVersion Enumeration"},{"content":"An enumerated type that represents the operating system version.","pos":[5158,5222]},{"pos":[5287,5321],"content":"IResourceManager::Reference Method"},{"content":"Increments the reference count on the Resource Manager instance.","pos":[5325,5389]},{"content":"Return Value","pos":[5450,5462]},{"content":"The resulting reference count.","pos":[5466,5496]},{"pos":[5540,5582],"content":"IResourceManager::RegisterScheduler Method"},{"content":"Registers a scheduler with the Resource Manager.","pos":[5586,5634]},{"content":"Once the scheduler is registered, it should communicate with the Resource Manager using the <ph id=\"ph1\">`ISchedulerProxy`</ph> interface that is returned.","pos":[5635,5772],"source":" Once the scheduler is registered, it should communicate with the Resource Manager using the `ISchedulerProxy` interface that is returned."},{"content":"Parameters","pos":[5906,5916]},{"content":"An <ph id=\"ph1\">`IScheduler`</ph> interface to the scheduler to be registered.","pos":[5936,5996],"source":" An `IScheduler` interface to the scheduler to be registered."},{"content":"The version of communication interface the scheduler is using to communicate with the Resource Manager.","pos":[6016,6119]},{"content":"Using a version allows the Resource Manager to evolve the communication interface while allowing schedulers to obtain access to older features.","pos":[6120,6263]},{"content":"Schedulers that wish to use Resource Manager features present in Visual Studio 2010 should use the version <ph id=\"ph1\">`CONCRT_RM_VERSION_1`</ph>.","pos":[6264,6393],"source":" Schedulers that wish to use Resource Manager features present in Visual Studio 2010 should use the version `CONCRT_RM_VERSION_1`."},{"content":"Return Value","pos":[6403,6415]},{"content":"The <ph id=\"ph1\">`ISchedulerProxy`</ph> interface the Resource Manager has associated with your scheduler.","pos":[6419,6507],"source":"The `ISchedulerProxy` interface the Resource Manager has associated with your scheduler."},{"content":"Your scheduler should use this interface to communicate with Resource Manager from this point on.","pos":[6508,6605]},{"content":"Remarks","pos":[6615,6622]},{"content":"Use this method to initiate communication with the Resource Manager.","pos":[6626,6694]},{"content":"The method associates the <ph id=\"ph1\">`IScheduler`</ph> interface for your scheduler with an <ph id=\"ph2\">`ISchedulerProxy`</ph> interface and hands it back to you.","pos":[6695,6824],"source":" The method associates the `IScheduler` interface for your scheduler with an `ISchedulerProxy` interface and hands it back to you."},{"content":"You can use the returned interface to request execution resources for use by your scheduler, or to subscribe threads with the Resource Manager.","pos":[6825,6968]},{"content":"The Resource Manager will use policy elements from the scheduler policy returned by the <bpt id=\"p1\">[</bpt>IScheduler::GetPolicy<ept id=\"p1\">](ischeduler-structure.md#getpolicy)</ept> method to determine what type of threads the scheduler will need to execute work.","pos":[6969,7197],"source":" The Resource Manager will use policy elements from the scheduler policy returned by the [IScheduler::GetPolicy](ischeduler-structure.md#getpolicy) method to determine what type of threads the scheduler will need to execute work."},{"content":"If your <ph id=\"ph1\">`SchedulerKind`</ph> policy key has the value <ph id=\"ph2\">`UmsThreadDefault`</ph> and the value is read back out of the policy as the value <ph id=\"ph3\">`UmsThreadDefault`</ph>, the <ph id=\"ph4\">`IScheduler`</ph> interface passed to the method must be an <ph id=\"ph5\">`IUMSScheduler`</ph> interface.","pos":[7198,7429],"source":" If your `SchedulerKind` policy key has the value `UmsThreadDefault` and the value is read back out of the policy as the value `UmsThreadDefault`, the `IScheduler` interface passed to the method must be an `IUMSScheduler` interface."},{"pos":[7436,7622],"content":"The method throws an <ph id=\"ph1\">`invalid_argument`</ph> exception if the parameter <ph id=\"ph2\">`pScheduler`</ph> has the value <ph id=\"ph3\">`NULL`</ph> or if the parameter <ph id=\"ph4\">`version`</ph> is not a valid version for the communication interface.","source":"The method throws an `invalid_argument` exception if the parameter `pScheduler` has the value `NULL` or if the parameter `version` is not a valid version for the communication interface."},{"pos":[7656,7688],"content":"IResourceManager::Release Method"},{"content":"Decrements the reference count on the Resource Manager instance.","pos":[7692,7756]},{"content":"The Resource Manager is destroyed when its reference count goes to <ph id=\"ph1\">`0`</ph>.","pos":[7757,7828],"source":" The Resource Manager is destroyed when its reference count goes to `0`."},{"content":"Return Value","pos":[7887,7899]},{"content":"The resulting reference count.","pos":[7903,7933]},{"content":"See Also","pos":[7942,7950]},{"content":"concurrency Namespace","pos":[7955,7976]},{"content":"ISchedulerProxy Structure","pos":[8009,8034]},{"content":"IScheduler Structure","pos":[8071,8091]}],"content":"---\ntitle: \"IResourceManager Structure | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"concrtrm/concurrency::IResourceManager\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"IResourceManager structure\"\nms.assetid: 3dd5ec2c-fe53-4121-ae77-1bc1d1167ff4\ncaps.latest.revision: 20\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# IResourceManager Structure\nAn interface to the Concurrency Runtime's Resource Manager. This is the interface by which schedulers communicate with the Resource Manager.  \n  \n## Syntax  \n  \n```\nstruct IResourceManager;\n```  \n  \n## Members  \n  \n### Public Enumerations  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[IResourceManager::OSVersion Enumeration](#osversion)|An enumerated type that represents the operating system version.|  \n  \n### Public Methods  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[IResourceManager::CreateNodeTopology Method](#createnodetopology)|Present only in debug builds of the runtime, this method is a test hook designed to facilitate testing of the Resource Manager on varying hardware topologies, without requiring actual hardware matching the configuration. With retail builds of the runtime, this method will return without performing any action.|  \n|[IResourceManager::GetAvailableNodeCount Method](#getavailablenodecount)|Returns the number of nodes available to the Resource Manager.|  \n|[IResourceManager::GetFirstNode Method](#getfirstnode)|Returns the first node in enumeration order as defined by the Resource Manager.|  \n|[IResourceManager::Reference Method](#reference)|Increments the reference count on the Resource Manager instance.|  \n|[IResourceManager::RegisterScheduler Method](#registerscheduler)|Registers a scheduler with the Resource Manager. Once the scheduler is registered, it should communicate with the Resource Manager using the `ISchedulerProxy` interface that is returned.|  \n|[IResourceManager::Release Method](#release)|Decrements the reference count on the Resource Manager instance. The Resource Manager is destroyed when its reference count goes to `0`.|  \n  \n## Remarks  \n Use the [CreateResourceManager](concurrency-namespace-functions.md) function to obtain an interface to the singleton Resource Manager instance. The method increments a reference count on the Resource Manager, and you should invoke the [IResourceManager::Release](#release) method to release the reference when you are done with Resource Manager. Typically, each scheduler you create will invoke this method during creation, and release the reference to the Resource Manager after it shuts down.  \n  \n## Inheritance Hierarchy  \n `IResourceManager`  \n  \n## Requirements  \n **Header:** concrtrm.h  \n  \n **Namespace:** concurrency  \n  \n##  <a name=\"createnodetopology\"></a>  IResourceManager::CreateNodeTopology Method  \n Present only in debug builds of the runtime, this method is a test hook designed to facilitate testing of the Resource Manager on varying hardware topologies, without requiring actual hardware matching the configuration. With retail builds of the runtime, this method will return without performing any action.  \n  \n```\nvirtual void CreateNodeTopology(\n    unsigned int nodeCount,\n    _In_reads_(nodeCount) unsigned int* pCoreCount,\n    _In_reads_opt_(nodeCount) unsigned int** pNodeDistance,\n    _In_reads_(nodeCount) unsigned int* pProcessorGroups) = 0;\n```  \n  \n### Parameters  \n `nodeCount`  \n The number of processor nodes being simulated.  \n  \n `pCoreCount`  \n An array that specifies the number of cores on each node.  \n  \n `pNodeDistance`  \n A matrix specifying the node distance between any two nodes. This parameter can have the value `NULL`.  \n  \n `pProcessorGroups`  \n An array that specifies the processor group each node belongs to.  \n  \n### Remarks  \n [invalid_argument](../../../standard-library/invalid-argument-class.md) is thrown if the parameter `nodeCount` has the value `0` was passed in, or if the parameter `pCoreCount` has the value `NULL`.  \n  \n [invalid_operation](invalid-operation-class.md) is thrown if this method is called while other schedulers exist in the process.  \n  \n##  <a name=\"getavailablenodecount\"></a>  IResourceManager::GetAvailableNodeCount Method  \n Returns the number of nodes available to the Resource Manager.  \n  \n```\nvirtual unsigned int GetAvailableNodeCount() const = 0;\n```  \n  \n### Return Value  \n The number of nodes available to the Resource Manager.  \n  \n##  <a name=\"getfirstnode\"></a>  IResourceManager::GetFirstNode Method  \n Returns the first node in enumeration order as defined by the Resource Manager.  \n  \n```\nvirtual ITopologyNode* GetFirstNode() const = 0;\n```  \n  \n### Return Value  \n The first node in enumeration order as defined by the Resource Manager.  \n  \n##  <a name=\"iresourcemanager__osversion\"></a>  IResourceManager::OSVersion Enumeration  \n An enumerated type that represents the operating system version.  \n  \n```\nenum OSVersion;\n```  \n  \n##  <a name=\"reference\"></a>  IResourceManager::Reference Method  \n Increments the reference count on the Resource Manager instance.  \n  \n```\nvirtual unsigned int Reference() = 0;\n```  \n  \n### Return Value  \n The resulting reference count.  \n  \n##  <a name=\"registerscheduler\"></a>  IResourceManager::RegisterScheduler Method  \n Registers a scheduler with the Resource Manager. Once the scheduler is registered, it should communicate with the Resource Manager using the `ISchedulerProxy` interface that is returned.  \n  \n```\nvirtual ISchedulerProxy *RegisterScheduler(\n    _Inout_ IScheduler* pScheduler,\n    unsigned int version) = 0;\n```  \n  \n### Parameters  \n `pScheduler`  \n An `IScheduler` interface to the scheduler to be registered.  \n  \n `version`  \n The version of communication interface the scheduler is using to communicate with the Resource Manager. Using a version allows the Resource Manager to evolve the communication interface while allowing schedulers to obtain access to older features. Schedulers that wish to use Resource Manager features present in Visual Studio 2010 should use the version `CONCRT_RM_VERSION_1`.  \n  \n### Return Value  \n The `ISchedulerProxy` interface the Resource Manager has associated with your scheduler. Your scheduler should use this interface to communicate with Resource Manager from this point on.  \n  \n### Remarks  \n Use this method to initiate communication with the Resource Manager. The method associates the `IScheduler` interface for your scheduler with an `ISchedulerProxy` interface and hands it back to you. You can use the returned interface to request execution resources for use by your scheduler, or to subscribe threads with the Resource Manager. The Resource Manager will use policy elements from the scheduler policy returned by the [IScheduler::GetPolicy](ischeduler-structure.md#getpolicy) method to determine what type of threads the scheduler will need to execute work. If your `SchedulerKind` policy key has the value `UmsThreadDefault` and the value is read back out of the policy as the value `UmsThreadDefault`, the `IScheduler` interface passed to the method must be an `IUMSScheduler` interface.  \n  \n The method throws an `invalid_argument` exception if the parameter `pScheduler` has the value `NULL` or if the parameter `version` is not a valid version for the communication interface.  \n  \n##  <a name=\"release\"></a>  IResourceManager::Release Method  \n Decrements the reference count on the Resource Manager instance. The Resource Manager is destroyed when its reference count goes to `0`.  \n  \n```\nvirtual unsigned int Release() = 0;\n```  \n  \n### Return Value  \n The resulting reference count.  \n  \n## See Also  \n [concurrency Namespace](concurrency-namespace.md)   \n [ISchedulerProxy Structure](ischedulerproxy-structure.md)   \n [IScheduler Structure](ischeduler-structure.md)\n"}