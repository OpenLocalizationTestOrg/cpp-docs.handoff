{"nodes":[{"pos":[12,58],"content":"MSBuild (Visual C++) Overview | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"MSBuild (Visual C++) Overview | Microsoft Docs","pos":[0,46]}]},{"content":"MSBuild (Visual C++) Overview","pos":[584,613]},{"content":"MSBuild is the standard build system for Visual C++ projects.","pos":[614,675]},{"content":"When you build a project in the Visual Studio integrated development environment (IDE), it uses the msbuild.exe tool, an XML-based project file, and optional settings files.","pos":[676,849]},{"content":"Although you can use msbuild.exe and a project file on the command line, the IDE provides a user interface so that you can more easily configure settings and build a project.","pos":[850,1024]},{"content":"This overview describes how Visual C++ uses the MSBuild system.","pos":[1025,1088]},{"content":"Prerequisites","pos":[1097,1110]},{"content":"Read the following documents about MSBuild.","pos":[1114,1157]},{"content":"MSBuild","pos":[1165,1172]},{"content":"Overview of MSBuild concepts.","pos":[1209,1238]},{"content":"MSBuild Reference","pos":[1246,1263]},{"content":"Reference information about the MSBuild system.","pos":[1309,1356]},{"content":"Project File Schema Reference","pos":[1364,1393]},{"content":"Lists the MSBuild XML Schema elements, together with their attributes, and parent and child elements.","pos":[1459,1560]},{"content":"Especially note the <bpt id=\"p1\">[</bpt>ItemGroup<ept id=\"p1\">](/visualstudio/msbuild/itemgroup-element-msbuild)</ept>, <bpt id=\"p2\">[</bpt>PropertyGroup<ept id=\"p2\">](/visualstudio/msbuild/propertygroup-element-msbuild)</ept>, <bpt id=\"p3\">[</bpt>Target<ept id=\"p3\">](/visualstudio/msbuild/target-element-msbuild)</ept>, and <bpt id=\"p4\">[</bpt>Task<ept id=\"p4\">](/visualstudio/msbuild/task-element-msbuild)</ept> elements.","pos":[1561,1833],"source":" Especially note the [ItemGroup](/visualstudio/msbuild/itemgroup-element-msbuild), [PropertyGroup](/visualstudio/msbuild/propertygroup-element-msbuild), [Target](/visualstudio/msbuild/target-element-msbuild), and [Task](/visualstudio/msbuild/task-element-msbuild) elements."},{"content":"Command-Line Reference","pos":[1841,1863]},{"content":"Describes the command-line arguments and options that you can use with msbuild.exe.","pos":[1922,2005]},{"content":"Task Reference","pos":[2013,2027]},{"content":"Describes MSBuild tasks.","pos":[2078,2102]},{"content":"Especially note these tasks, which are specific to Visual C++: <bpt id=\"p1\">[</bpt>BscMake Task<ept id=\"p1\">](/visualstudio/msbuild/bscmake-task)</ept>, <bpt id=\"p2\">[</bpt>CL Task<ept id=\"p2\">](/visualstudio/msbuild/cl-task)</ept>, <bpt id=\"p3\">[</bpt>CPPClean Task<ept id=\"p3\">](/visualstudio/msbuild/cppclean-task)</ept>, <bpt id=\"p4\">[</bpt>LIB Task<ept id=\"p4\">](/visualstudio/msbuild/lib-task)</ept>, <bpt id=\"p5\">[</bpt>Link Task<ept id=\"p5\">](/visualstudio/msbuild/link-task)</ept>, <bpt id=\"p6\">[</bpt>MIDL Task<ept id=\"p6\">](/visualstudio/msbuild/midl-task)</ept>, <bpt id=\"p7\">[</bpt>MT Task<ept id=\"p7\">](/visualstudio/msbuild/mt-task)</ept>, <bpt id=\"p8\">[</bpt>RC Task<ept id=\"p8\">](/visualstudio/msbuild/rc-task)</ept>, <bpt id=\"p9\">[</bpt>SetEnv Task<ept id=\"p9\">](/visualstudio/msbuild/setenv-task)</ept>, <bpt id=\"p10\">[</bpt>VCMessage Task<ept id=\"p10\">](/visualstudio/msbuild/vcmessage-task)</ept>, <bpt id=\"p11\">[</bpt>XDCMake Task<ept id=\"p11\">](/visualstudio/msbuild/xdcmake-task)</ept>, <bpt id=\"p12\">[</bpt>XSD Task<ept id=\"p12\">](/visualstudio/msbuild/xsd-task)</ept>.","pos":[2103,2735],"source":" Especially note these tasks, which are specific to Visual C++: [BscMake Task](/visualstudio/msbuild/bscmake-task), [CL Task](/visualstudio/msbuild/cl-task), [CPPClean Task](/visualstudio/msbuild/cppclean-task), [LIB Task](/visualstudio/msbuild/lib-task), [Link Task](/visualstudio/msbuild/link-task), [MIDL Task](/visualstudio/msbuild/midl-task), [MT Task](/visualstudio/msbuild/mt-task), [RC Task](/visualstudio/msbuild/rc-task), [SetEnv Task](/visualstudio/msbuild/setenv-task), [VCMessage Task](/visualstudio/msbuild/vcmessage-task), [XDCMake Task](/visualstudio/msbuild/xdcmake-task), [XSD Task](/visualstudio/msbuild/xsd-task)."},{"content":"MSBuild on the Command Line","pos":[2744,2771]},{"pos":[2775,3070],"content":"The following statement from the <bpt id=\"p1\">[</bpt>Command-Line Reference<ept id=\"p1\">](/visualstudio/msbuild/msbuild-command-line-reference)</ept> document illustrates that the msbuild.exe tool takes an implicit or explicit <ph id=\"ph1\">`project file`</ph> argument (a .vcxproj file for Visual C++ projects) and zero or more command-line <ph id=\"ph2\">`options`</ph>.","source":"The following statement from the [Command-Line Reference](/visualstudio/msbuild/msbuild-command-line-reference) document illustrates that the msbuild.exe tool takes an implicit or explicit `project file` argument (a .vcxproj file for Visual C++ projects) and zero or more command-line `options`."},{"pos":[3077,3133],"content":"<bpt id=\"p1\">**</bpt>msbuild.exe [<ept id=\"p1\">**</ept> <ph id=\"ph1\">`project file`</ph> <bpt id=\"p2\">**</bpt>] [<ept id=\"p2\">**</ept> <ph id=\"ph2\">`options`</ph> <bpt id=\"p3\">**</bpt>]<ept id=\"p3\">**</ept>","source":"**msbuild.exe [** `project file` **] [** `options` **]**"},{"pos":[3140,3297],"content":"Use the <bpt id=\"p1\">**</bpt>/target<ept id=\"p1\">**</ept> (or <bpt id=\"p2\">**</bpt>/t<ept id=\"p2\">**</ept>) and <bpt id=\"p3\">**</bpt>/property<ept id=\"p3\">**</ept> (or <bpt id=\"p4\">**</bpt>/p<ept id=\"p4\">**</ept>) command-line options to override properties and targets that are specified in the project file.","source":"Use the **/target** (or **/t**) and **/property** (or **/p**) command-line options to override properties and targets that are specified in the project file."},{"content":"An essential function of the project file is to specify a <bpt id=\"p1\">*</bpt>target<ept id=\"p1\">*</ept>, which is a particular operation applied to your project, and the inputs and outputs that are required to perform that operation.","pos":[3304,3500],"source":"An essential function of the project file is to specify a *target*, which is a particular operation applied to your project, and the inputs and outputs that are required to perform that operation."},{"content":"A project file can specify one or more targets, which can include a default target.","pos":[3501,3584]},{"content":"Each target consists of a sequence of one or more <bpt id=\"p1\">*</bpt>tasks<ept id=\"p1\">*</ept>.","pos":[3591,3649],"source":"Each target consists of a sequence of one or more *tasks*."},{"content":"Each task is represented by a .NET Framework class that contains one executable command.","pos":[3650,3738]},{"content":"For example, the <bpt id=\"p1\">[</bpt>CL task<ept id=\"p1\">](/visualstudio/msbuild/cl-task)</ept> contains the <bpt id=\"p2\">[</bpt>cl.exe<ept id=\"p2\">](../build/reference/compiling-a-c-cpp-program.md)</ept> command.","pos":[3739,3876],"source":" For example, the [CL task](/visualstudio/msbuild/cl-task) contains the [cl.exe](../build/reference/compiling-a-c-cpp-program.md) command."},{"content":"A <bpt id=\"p1\">*</bpt>task parameter<ept id=\"p1\">*</ept> is a property of the class task and typically represents a command-line option of the executable command.","pos":[3883,4007],"source":"A *task parameter* is a property of the class task and typically represents a command-line option of the executable command."},{"content":"For example, the <ph id=\"ph1\">`FavorSizeOrSpeed`</ph> parameter of the <ph id=\"ph2\">`CL`</ph> task corresponds to the <bpt id=\"p1\">**</bpt>/Os<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>/Ot<ept id=\"p2\">**</ept> compiler options.","pos":[4008,4127],"source":" For example, the `FavorSizeOrSpeed` parameter of the `CL` task corresponds to the **/Os** and **/Ot** compiler options."},{"content":"Additional task parameters support the MSBuild infrastructure.","pos":[4134,4196]},{"content":"For example, the <ph id=\"ph1\">`Sources`</ph> task parameter specifies a set of tasks that can be consumed by other tasks.","pos":[4197,4300],"source":" For example, the `Sources` task parameter specifies a set of tasks that can be consumed by other tasks."},{"content":"For more information about MSBuild tasks, see <bpt id=\"p1\">[</bpt>Task Reference<ept id=\"p1\">](/visualstudio/msbuild/msbuild-task-reference)</ept>.","pos":[4301,4410],"source":" For more information about MSBuild tasks, see [Task Reference](/visualstudio/msbuild/msbuild-task-reference)."},{"content":"Most tasks require inputs and outputs, such as file names, paths, and string, numeric, or Boolean parameters.","pos":[4417,4526]},{"content":"For example, a common input is the name of a .cpp source file to compile.","pos":[4527,4600]},{"content":"An important input parameter is a string that specifies the build configuration and platform, for example, \"Debug&amp;#124;Win32\".","pos":[4601,4727],"source":" An important input parameter is a string that specifies the build configuration and platform, for example, \"Debug&#124;Win32\"."},{"content":"Inputs and outputs are specified by one or more user-defined XML <ph id=\"ph1\">`Item`</ph> elements contained in an <ph id=\"ph2\">`ItemGroup`</ph> element.","pos":[4728,4845],"source":" Inputs and outputs are specified by one or more user-defined XML `Item` elements contained in an `ItemGroup` element."},{"content":"A project file can also specify user-defined <bpt id=\"p1\">*</bpt>properties<ept id=\"p1\">*</ept> and <bpt id=\"p2\">*</bpt>item-definition-group<ept id=\"p2\">*</ept><bpt id=\"p3\">*</bpt>items<ept id=\"p3\">*</ept>.","pos":[4852,4945],"source":"A project file can also specify user-defined *properties* and *item-definition-group**items*."},{"content":"Properties and items form name/value pairs that can be used as variables in the build.","pos":[4946,5032]},{"content":"The name component of a pair defines a <bpt id=\"p1\">*</bpt>macro<ept id=\"p1\">*</ept>, and the value component declares the <bpt id=\"p2\">*</bpt>macro value<ept id=\"p2\">*</ept>.","pos":[5033,5132],"source":" The name component of a pair defines a *macro*, and the value component declares the *macro value*."},{"content":"A property macro is accessed by using $(<bpt id=\"p1\">*</bpt>name<ept id=\"p1\">*</ept>) notation, and an item macro is accessed by using %(<bpt id=\"p2\">*</bpt>name<ept id=\"p2\">*</ept>) notation.","pos":[5133,5249],"source":" A property macro is accessed by using $(*name*) notation, and an item macro is accessed by using %(*name*) notation."},{"content":"Other XML elements in a project file can test macros, and then conditionally set the value of any macro or control the execution of the build.","pos":[5256,5398]},{"content":"Macro names and literal strings can be concatenated to generate constructs such as a path and file name.","pos":[5399,5503]},{"content":"On the command line, the <bpt id=\"p1\">**</bpt>/property<ept id=\"p1\">**</ept> option sets or overrides a project property.","pos":[5504,5587],"source":" On the command line, the **/property** option sets or overrides a project property."},{"content":"Items cannot be referenced on the command line.","pos":[5588,5635]},{"content":"The MSBuild system can conditionally execute a target before or after another target.","pos":[5642,5727]},{"content":"Also, the system can build a target based on whether the files that the target consumes are newer than the files it emits.","pos":[5728,5850]},{"content":"MSBuild in the IDE","pos":[5859,5877]},{"content":"When you set project properties in the IDE and then save the project, Visual C++ writes the project settings to your project file.","pos":[5881,6011]},{"content":"The project file contains settings that are unique to your project, but it does not contain all the settings that are required to build your project.","pos":[6012,6161]},{"content":"The project file contains <ph id=\"ph1\">`Import`</ph> elements that include a network of additional <bpt id=\"p1\">*</bpt>support files.<ept id=\"p1\">*</ept>","pos":[6162,6259],"source":" The project file contains `Import` elements that include a network of additional *support files.*"},{"content":"The support files contain the remaining properties, targets, and settings that are required to build the project.","pos":[6260,6373]},{"content":"Most targets and properties in the support files exist solely to implement the build system.","pos":[6380,6472]},{"content":"The following section discusses some useful targets and properties that you can specify on the MSBuild command line.","pos":[6473,6589]},{"content":"To discover more targets and properties, explore the files in the support file directories.","pos":[6590,6681]},{"content":"Support File Directories","pos":[6691,6715]},{"content":"By default, the primary Visual C++ support files are located in the following directories.","pos":[6719,6809]},{"content":"Directory","pos":[6816,6825]},{"content":"Description","pos":[6826,6837]},{"pos":[6880,6940],"content":"<bpt id=\"p1\">*</bpt>drive<ept id=\"p1\">*</ept>:\\Program Files\\MSBuild\\Microsoft.Cpp\\v4.0<ph id=\"ph1\">\\\\</ph><bpt id=\"p2\">*</bpt>version<ept id=\"p2\">*</ept>","source":"*drive*:\\Program Files\\MSBuild\\Microsoft.Cpp\\v4.0\\\\*version*"},{"content":"Contains the primary target files (.targets) and property files (.props) that are used by the targets.","pos":[6942,7044]},{"content":"By default, the $(VCTargetsPath) macro references this directory.","pos":[7045,7110]},{"pos":[7115,7197],"content":"<bpt id=\"p1\">*</bpt>drive<ept id=\"p1\">*</ept>:\\Program Files\\MSBuild\\Microsoft.Cpp\\v4.0<ph id=\"ph1\">\\\\</ph><bpt id=\"p2\">*</bpt>version<ept id=\"p2\">*</ept>\\Platforms<ph id=\"ph2\">\\\\</ph><bpt id=\"p3\">*</bpt>platform<ept id=\"p3\">*</ept>","source":"*drive*:\\Program Files\\MSBuild\\Microsoft.Cpp\\v4.0\\\\*version*\\Platforms\\\\*platform*"},{"content":"Contains platform-specific target and property files that override targets and properties in its parent directory.","pos":[7199,7313]},{"content":"This directory also contains a .dll file that defines the tasks that are used by the targets in this directory.","pos":[7314,7425]},{"content":"The <bpt id=\"p1\">*</bpt>platform<ept id=\"p1\">*</ept> placeholder represents the <ph id=\"ph1\">`ARM`</ph>, <ph id=\"ph2\">`Win32`</ph>, or <ph id=\"ph3\">`x64`</ph> subdirectory.","pos":[7438,7518],"source":" The *platform* placeholder represents the `ARM`, `Win32`, or `x64` subdirectory."},{"pos":[7523,7633],"content":"<bpt id=\"p1\">*</bpt>drive<ept id=\"p1\">*</ept>:\\Program Files\\MSBuild\\Microsoft.Cpp\\v4.0<ph id=\"ph1\">\\\\</ph><bpt id=\"p2\">*</bpt>version<ept id=\"p2\">*</ept>\\Platforms<ph id=\"ph2\">\\\\</ph><bpt id=\"p3\">*</bpt>platform<ept id=\"p3\">*</ept>\\PlatformToolsets<ph id=\"ph3\">\\\\</ph><bpt id=\"p4\">*</bpt>toolset<ept id=\"p4\">*</ept>","source":"*drive*:\\Program Files\\MSBuild\\Microsoft.Cpp\\v4.0\\\\*version*\\Platforms\\\\*platform*\\PlatformToolsets\\\\*toolset*"},{"content":"Contains the directories that enable the build to generate Visual C++ applications with the specified <bpt id=\"p1\">*</bpt>version<ept id=\"p1\">*</ept> of the toolset.","pos":[7635,7762],"source":"Contains the directories that enable the build to generate Visual C++ applications with the specified *version* of the toolset."},{"content":"The <bpt id=\"p1\">*</bpt>platform<ept id=\"p1\">*</ept> placeholder represents the <ph id=\"ph1\">`ARM`</ph>, <ph id=\"ph2\">`Win32`</ph>, or <ph id=\"ph3\">`x64`</ph> subdirectory.","pos":[7775,7855],"source":" The *platform* placeholder represents the `ARM`, `Win32`, or `x64` subdirectory."},{"content":"The <bpt id=\"p1\">*</bpt>toolset<ept id=\"p1\">*</ept> placeholder represents the toolset subdirectory for building Windows, Windows XP, or Windows Phone apps.","pos":[7856,7974],"source":" The *toolset* placeholder represents the toolset subdirectory for building Windows, Windows XP, or Windows Phone apps."},{"pos":[7979,8078],"content":"<bpt id=\"p1\">*</bpt>drive<ept id=\"p1\">*</ept>:\\Program Files\\MSBuild\\Microsoft.Cpp\\v4.0\\Platforms<ph id=\"ph1\">\\\\</ph><bpt id=\"p2\">*</bpt>platform<ept id=\"p2\">*</ept>\\PlatformToolsets<ph id=\"ph2\">\\\\</ph><bpt id=\"p3\">*</bpt>toolset<ept id=\"p3\">*</ept>","source":"*drive*:\\Program Files\\MSBuild\\Microsoft.Cpp\\v4.0\\Platforms\\\\*platform*\\PlatformToolsets\\\\*toolset*"},{"content":"Contains the directories that enable the build to generate either 9.0 or Visual C++ 10.0 applications.","pos":[8080,8182]},{"content":"The <bpt id=\"p1\">*</bpt>platform<ept id=\"p1\">*</ept> placeholder represents the <ph id=\"ph1\">`Itanium`</ph>, <ph id=\"ph2\">`Win32`</ph>, or <ph id=\"ph3\">`x64`</ph> subdirectory.","pos":[8195,8279],"source":" The *platform* placeholder represents the `Itanium`, `Win32`, or `x64` subdirectory."},{"content":"The <bpt id=\"p1\">*</bpt>toolset<ept id=\"p1\">*</ept> placeholder represents the <ph id=\"ph1\">`v90`</ph> or <ph id=\"ph2\">`v100`</ph> toolset subdirectory.","pos":[8280,8358],"source":" The *toolset* placeholder represents the `v90` or `v100` toolset subdirectory."},{"content":"Support Files","pos":[8369,8382]},{"content":"The support file directories contain files with the following extensions.","pos":[8386,8459]},{"content":"Extension","pos":[8466,8475]},{"content":"Description","pos":[8476,8487]},{"content":".targets","pos":[8530,8538]},{"content":"Contains <ph id=\"ph1\">`Target`</ph> XML elements that specify the tasks that are executed by the target.","pos":[8539,8625],"source":"Contains `Target` XML elements that specify the tasks that are executed by the target."},{"content":"May also contain <ph id=\"ph1\">`Property Group`</ph>, <ph id=\"ph2\">`Item Group`</ph>, <ph id=\"ph3\">`Item Definition Group`</ph>, and user-defined <ph id=\"ph4\">`Item`</ph> elements that are used to assign files and command-line options to task parameters.","pos":[8626,8807],"source":" May also contain `Property Group`, `Item Group`, `Item Definition Group`, and user-defined `Item` elements that are used to assign files and command-line options to task parameters."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Target Element (MSBuild)<ept id=\"p1\">](/visualstudio/msbuild/target-element-msbuild)</ept>.","pos":[8820,8919],"source":" For more information, see [Target Element (MSBuild)](/visualstudio/msbuild/target-element-msbuild)."},{"content":".props","pos":[8924,8930]},{"content":"Contains <ph id=\"ph1\">`Property Group`</ph> and user-defined <ph id=\"ph2\">`Property`</ph> XML elements that specify file and parameter settings that are used during a build.","pos":[8931,9068],"source":"Contains `Property Group` and user-defined `Property` XML elements that specify file and parameter settings that are used during a build."},{"content":"May also contain <ph id=\"ph1\">`Item Definition Group`</ph> and user-defined <ph id=\"ph2\">`Item`</ph> XML elements that specify additional settings.","pos":[9081,9192],"source":" May also contain `Item Definition Group` and user-defined `Item` XML elements that specify additional settings."},{"content":"Items defined in an item definition group resemble properties, but cannot be accessed from the command line.","pos":[9193,9301]},{"content":"Visual C++ project files frequently uses items instead of properties to represent settings.","pos":[9302,9393]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>ItemGroup Element (MSBuild)<ept id=\"p1\">](/visualstudio/msbuild/itemgroup-element-msbuild)</ept>, <bpt id=\"p2\">[</bpt>ItemDefinitionGroup Element (MSBuild)<ept id=\"p2\">](/visualstudio/msbuild/itemdefinitiongroup-element-msbuild)</ept>, and <bpt id=\"p3\">[</bpt>Item Element (MSBuild)<ept id=\"p3\">](/visualstudio/msbuild/item-element-msbuild)</ept>.","pos":[9406,9685],"source":" For more information, see [ItemGroup Element (MSBuild)](/visualstudio/msbuild/itemgroup-element-msbuild), [ItemDefinitionGroup Element (MSBuild)](/visualstudio/msbuild/itemdefinitiongroup-element-msbuild), and [Item Element (MSBuild)](/visualstudio/msbuild/item-element-msbuild)."},{"content":".xml","pos":[9690,9694]},{"content":"Contains XML elements that declare and initialize IDE user interface elements such as property sheets and property pages, and text box and list box controls.","pos":[9695,9852]},{"content":"The .xml files directly support the IDE, not MSBuild.","pos":[9865,9918]},{"content":"However, the values of IDE properties are assigned to build properties and items.","pos":[9919,10000]},{"content":"Most .xml files are in a locale-specific subdirectory.","pos":[10013,10067]},{"content":"For example, files for the English-US region are in $(VCTargetsPath)\\1033<ph id=\"ph1\">\\\\</ph>.","pos":[10068,10144],"source":" For example, files for the English-US region are in $(VCTargetsPath)\\1033\\\\."},{"content":"User Targets and Properties","pos":[10154,10181]},{"content":"To use MSBuild most effectively on the command line, it helps to know which properties and targets are useful and relevant.","pos":[10185,10308]},{"content":"Most properties and targets help implement the Visual C++ build system, and consequently are not relevant to the user.","pos":[10309,10427]},{"content":"This section describes some worthwhile user-oriented properties and targets.","pos":[10428,10504]},{"content":"PlatformToolset Property","pos":[10514,10538]},{"content":"The <ph id=\"ph1\">`PlatformToolset`</ph> property determines which Visual C++ toolset is used in the build.","pos":[10542,10630],"source":"The `PlatformToolset` property determines which Visual C++ toolset is used in the build."},{"content":"The value of the property is concatenated with literal strings to form the path of a directory that contains the property and target files that are required to build a project for a particular platform.","pos":[10631,10833]},{"pos":[10840,11005],"content":"Set the <ph id=\"ph1\">`PlatformToolset`</ph> property to <ph id=\"ph2\">`v110`</ph> to use <ph id=\"ph3\">[!INCLUDE[cpp_dev11_long](../build/includes/cpp_dev11_long_md.md)]</ph> tools and libraries to build your application.","source":"Set the `PlatformToolset` property to `v110` to use [!INCLUDE[cpp_dev11_long](../build/includes/cpp_dev11_long_md.md)] tools and libraries to build your application."},{"pos":[11070,11235],"content":"Set the <ph id=\"ph1\">`PlatformToolset`</ph> property to <ph id=\"ph2\">`v100`</ph> to use <ph id=\"ph3\">[!INCLUDE[cpp_dev10_long](../build/includes/cpp_dev10_long_md.md)]</ph> tools and libraries to build your application.","source":"Set the `PlatformToolset` property to `v100` to use [!INCLUDE[cpp_dev10_long](../build/includes/cpp_dev10_long_md.md)] tools and libraries to build your application."},{"content":"Set the <ph id=\"ph1\">`PlatformToolset`</ph> property to <ph id=\"ph2\">`v90`</ph> to use Visual C++ 2008 tools and libraries to build your application.","pos":[11300,11413],"source":"Set the `PlatformToolset` property to `v90` to use Visual C++ 2008 tools and libraries to build your application."},{"content":"The Visual C++ 2008 toolset must already be installed on your computer for this property to be effective.","pos":[11414,11519]},{"content":"PreferredToolArchitecture Property","pos":[11586,11620]},{"content":"The <ph id=\"ph1\">`PreferredToolArchitecture`</ph> property determines whether the 32-bit or 64-bit compiler and tools are used in the build.","pos":[11624,11746],"source":"The `PreferredToolArchitecture` property determines whether the 32-bit or 64-bit compiler and tools are used in the build."},{"content":"This property does not affect the output platform architecture or configuration.","pos":[11747,11827]},{"content":"By default, MSBuild uses the x86 version of the compiler and tools if this property is not set, or is set to any value other than <ph id=\"ph1\">`x64`</ph>.","pos":[11828,11964],"source":" By default, MSBuild uses the x86 version of the compiler and tools if this property is not set, or is set to any value other than `x64`."},{"pos":[11971,12088],"content":"Set the <ph id=\"ph1\">`PreferredToolArchitecture`</ph> property to <ph id=\"ph2\">`x64`</ph> to use the 64-bit compiler and tools to build your application.","source":"Set the `PreferredToolArchitecture` property to `x64` to use the 64-bit compiler and tools to build your application."},{"content":"UseEnv Property","pos":[12165,12180]},{"content":"By default, the platform-specific settings for the current project override the PATH, INCLUDE, LIB, LIBPATH, CONFIGURATION, and PLATFORM environment variables.","pos":[12184,12343]},{"content":"Set the <ph id=\"ph1\">`UseEnv`</ph> property to <ph id=\"ph2\">`true`</ph> to guarantee that the environment variables are not overridden.","pos":[12344,12443],"source":" Set the `UseEnv` property to `true` to guarantee that the environment variables are not overridden."},{"content":"Targets","pos":[12502,12509]},{"content":"There are hundreds of targets in the Visual C++ support files.","pos":[12513,12575]},{"content":"However, most are system-oriented targets that the user can ignore.","pos":[12576,12643]},{"content":"Most system targets are prefixed by an underscore (_), or have a name that starts with \"PrepareFor\", \"Compute\", \"Before\", \"After\", \"Pre\", or \"Post\".","pos":[12644,12792]},{"content":"The following table lists several worthwhile user-oriented targets.","pos":[12799,12866]},{"content":"Target","pos":[12873,12879]},{"content":"Description","pos":[12880,12891]},{"content":"BscMake","pos":[12931,12938]},{"content":"Executes the Microsoft Browse Information Maintenance Utility tool, bscmake.exe.","pos":[12939,13019]},{"content":"Build","pos":[13024,13029]},{"content":"Builds the project.","pos":[13030,13049]},{"content":"This is the default target for a project.","pos":[13062,13103]},{"content":"ClCompile","pos":[13108,13117]},{"content":"Executes the Visual C++ compiler tool, cl.exe.","pos":[13118,13164]},{"content":"Clean","pos":[13169,13174]},{"content":"Deletes temporary and intermediate build files.","pos":[13175,13222]},{"content":"Lib","pos":[13227,13230]},{"content":"Executes the Microsoft 32-Bit Library Manager tool, lib.exe.","pos":[13231,13291]},{"content":"Link","pos":[13296,13300]},{"content":"Executes the Visual C++ linker tool, link.exe.","pos":[13301,13347]},{"content":"ManifestResourceCompile","pos":[13352,13375]},{"content":"Extracts a list of resources from a manifest and then executes the Microsoft Windows Resource Compiler tool, rc.exe.","pos":[13376,13492]},{"content":"Midl","pos":[13497,13501]},{"content":"Executes the Microsoft Interface Definition Language (MIDL) compiler tool, midl.exe.","pos":[13502,13586]},{"content":"Rebuild","pos":[13591,13598]},{"content":"Cleans and then builds your project.","pos":[13599,13635]},{"content":"ResourceCompile","pos":[13640,13655]},{"content":"Executes the Microsoft Windows Resource Compiler tool, rc.exe.","pos":[13656,13718]},{"content":"XdcMake","pos":[13723,13730]},{"content":"Executes the XML Documentation tool, xdcmake.exe.","pos":[13731,13780]},{"content":"Xsd","pos":[13785,13788]},{"content":"Executes the XML Schema Definition tool, xsd.exe.","pos":[13789,13838]},{"content":"See Also","pos":[13848,13856]},{"content":"MSBuild (Visual C++)","pos":[13861,13881]}],"content":"---\ntitle: \"MSBuild (Visual C++) Overview | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"MSBuild overview\"\nms.assetid: dd258f6f-ab51-48d9-b274-f7ba911d05ca\ncaps.latest.revision: 17\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# MSBuild (Visual C++) Overview\nMSBuild is the standard build system for Visual C++ projects. When you build a project in the Visual Studio integrated development environment (IDE), it uses the msbuild.exe tool, an XML-based project file, and optional settings files. Although you can use msbuild.exe and a project file on the command line, the IDE provides a user interface so that you can more easily configure settings and build a project. This overview describes how Visual C++ uses the MSBuild system.  \n  \n## Prerequisites  \n Read the following documents about MSBuild.  \n  \n [MSBuild](/visualstudio/msbuild/msbuild1)  \n Overview of MSBuild concepts.  \n  \n [MSBuild Reference](/visualstudio/msbuild/msbuild-reference)  \n Reference information about the MSBuild system.  \n  \n [Project File Schema Reference](/visualstudio/msbuild/msbuild-project-file-schema-reference)  \n Lists the MSBuild XML Schema elements, together with their attributes, and parent and child elements. Especially note the [ItemGroup](/visualstudio/msbuild/itemgroup-element-msbuild), [PropertyGroup](/visualstudio/msbuild/propertygroup-element-msbuild), [Target](/visualstudio/msbuild/target-element-msbuild), and [Task](/visualstudio/msbuild/task-element-msbuild) elements.  \n  \n [Command-Line Reference](/visualstudio/msbuild/msbuild-command-line-reference)  \n Describes the command-line arguments and options that you can use with msbuild.exe.  \n  \n [Task Reference](/visualstudio/msbuild/msbuild-task-reference)  \n Describes MSBuild tasks. Especially note these tasks, which are specific to Visual C++: [BscMake Task](/visualstudio/msbuild/bscmake-task), [CL Task](/visualstudio/msbuild/cl-task), [CPPClean Task](/visualstudio/msbuild/cppclean-task), [LIB Task](/visualstudio/msbuild/lib-task), [Link Task](/visualstudio/msbuild/link-task), [MIDL Task](/visualstudio/msbuild/midl-task), [MT Task](/visualstudio/msbuild/mt-task), [RC Task](/visualstudio/msbuild/rc-task), [SetEnv Task](/visualstudio/msbuild/setenv-task), [VCMessage Task](/visualstudio/msbuild/vcmessage-task), [XDCMake Task](/visualstudio/msbuild/xdcmake-task), [XSD Task](/visualstudio/msbuild/xsd-task).  \n  \n## MSBuild on the Command Line  \n The following statement from the [Command-Line Reference](/visualstudio/msbuild/msbuild-command-line-reference) document illustrates that the msbuild.exe tool takes an implicit or explicit `project file` argument (a .vcxproj file for Visual C++ projects) and zero or more command-line `options`.  \n  \n **msbuild.exe [** `project file` **] [** `options` **]**  \n  \n Use the **/target** (or **/t**) and **/property** (or **/p**) command-line options to override properties and targets that are specified in the project file.  \n  \n An essential function of the project file is to specify a *target*, which is a particular operation applied to your project, and the inputs and outputs that are required to perform that operation. A project file can specify one or more targets, which can include a default target.  \n  \n Each target consists of a sequence of one or more *tasks*. Each task is represented by a .NET Framework class that contains one executable command. For example, the [CL task](/visualstudio/msbuild/cl-task) contains the [cl.exe](../build/reference/compiling-a-c-cpp-program.md) command.  \n  \n A *task parameter* is a property of the class task and typically represents a command-line option of the executable command. For example, the `FavorSizeOrSpeed` parameter of the `CL` task corresponds to the **/Os** and **/Ot** compiler options.  \n  \n Additional task parameters support the MSBuild infrastructure. For example, the `Sources` task parameter specifies a set of tasks that can be consumed by other tasks. For more information about MSBuild tasks, see [Task Reference](/visualstudio/msbuild/msbuild-task-reference).  \n  \n Most tasks require inputs and outputs, such as file names, paths, and string, numeric, or Boolean parameters. For example, a common input is the name of a .cpp source file to compile. An important input parameter is a string that specifies the build configuration and platform, for example, \"Debug&#124;Win32\". Inputs and outputs are specified by one or more user-defined XML `Item` elements contained in an `ItemGroup` element.  \n  \n A project file can also specify user-defined *properties* and *item-definition-group**items*. Properties and items form name/value pairs that can be used as variables in the build. The name component of a pair defines a *macro*, and the value component declares the *macro value*. A property macro is accessed by using $(*name*) notation, and an item macro is accessed by using %(*name*) notation.  \n  \n Other XML elements in a project file can test macros, and then conditionally set the value of any macro or control the execution of the build. Macro names and literal strings can be concatenated to generate constructs such as a path and file name. On the command line, the **/property** option sets or overrides a project property. Items cannot be referenced on the command line.  \n  \n The MSBuild system can conditionally execute a target before or after another target. Also, the system can build a target based on whether the files that the target consumes are newer than the files it emits.  \n  \n## MSBuild in the IDE  \n When you set project properties in the IDE and then save the project, Visual C++ writes the project settings to your project file. The project file contains settings that are unique to your project, but it does not contain all the settings that are required to build your project. The project file contains `Import` elements that include a network of additional *support files.* The support files contain the remaining properties, targets, and settings that are required to build the project.  \n  \n Most targets and properties in the support files exist solely to implement the build system. The following section discusses some useful targets and properties that you can specify on the MSBuild command line. To discover more targets and properties, explore the files in the support file directories.  \n  \n### Support File Directories  \n By default, the primary Visual C++ support files are located in the following directories.  \n  \n|Directory|Description|  \n|---------------|-----------------|  \n|*drive*:\\Program Files\\MSBuild\\Microsoft.Cpp\\v4.0\\\\*version*\\|Contains the primary target files (.targets) and property files (.props) that are used by the targets. By default, the $(VCTargetsPath) macro references this directory.|  \n|*drive*:\\Program Files\\MSBuild\\Microsoft.Cpp\\v4.0\\\\*version*\\Platforms\\\\*platform*\\|Contains platform-specific target and property files that override targets and properties in its parent directory. This directory also contains a .dll file that defines the tasks that are used by the targets in this directory.<br /><br /> The *platform* placeholder represents the `ARM`, `Win32`, or `x64` subdirectory.|  \n|*drive*:\\Program Files\\MSBuild\\Microsoft.Cpp\\v4.0\\\\*version*\\Platforms\\\\*platform*\\PlatformToolsets\\\\*toolset*\\|Contains the directories that enable the build to generate Visual C++ applications with the specified *version* of the toolset.<br /><br /> The *platform* placeholder represents the `ARM`, `Win32`, or `x64` subdirectory. The *toolset* placeholder represents the toolset subdirectory for building Windows, Windows XP, or Windows Phone apps.|  \n|*drive*:\\Program Files\\MSBuild\\Microsoft.Cpp\\v4.0\\Platforms\\\\*platform*\\PlatformToolsets\\\\*toolset*\\|Contains the directories that enable the build to generate either 9.0 or Visual C++ 10.0 applications.<br /><br /> The *platform* placeholder represents the `Itanium`, `Win32`, or `x64` subdirectory. The *toolset* placeholder represents the `v90` or `v100` toolset subdirectory.|  \n  \n### Support Files  \n The support file directories contain files with the following extensions.  \n  \n|Extension|Description|  \n|---------------|-----------------|  \n|.targets|Contains `Target` XML elements that specify the tasks that are executed by the target. May also contain `Property Group`, `Item Group`, `Item Definition Group`, and user-defined `Item` elements that are used to assign files and command-line options to task parameters.<br /><br /> For more information, see [Target Element (MSBuild)](/visualstudio/msbuild/target-element-msbuild).|  \n|.props|Contains `Property Group` and user-defined `Property` XML elements that specify file and parameter settings that are used during a build.<br /><br /> May also contain `Item Definition Group` and user-defined `Item` XML elements that specify additional settings. Items defined in an item definition group resemble properties, but cannot be accessed from the command line. Visual C++ project files frequently uses items instead of properties to represent settings.<br /><br /> For more information, see [ItemGroup Element (MSBuild)](/visualstudio/msbuild/itemgroup-element-msbuild), [ItemDefinitionGroup Element (MSBuild)](/visualstudio/msbuild/itemdefinitiongroup-element-msbuild), and [Item Element (MSBuild)](/visualstudio/msbuild/item-element-msbuild).|  \n|.xml|Contains XML elements that declare and initialize IDE user interface elements such as property sheets and property pages, and text box and list box controls.<br /><br /> The .xml files directly support the IDE, not MSBuild. However, the values of IDE properties are assigned to build properties and items.<br /><br /> Most .xml files are in a locale-specific subdirectory. For example, files for the English-US region are in $(VCTargetsPath)\\1033\\\\.|  \n  \n## User Targets and Properties  \n To use MSBuild most effectively on the command line, it helps to know which properties and targets are useful and relevant. Most properties and targets help implement the Visual C++ build system, and consequently are not relevant to the user. This section describes some worthwhile user-oriented properties and targets.  \n  \n### PlatformToolset Property  \n The `PlatformToolset` property determines which Visual C++ toolset is used in the build. The value of the property is concatenated with literal strings to form the path of a directory that contains the property and target files that are required to build a project for a particular platform.  \n  \n Set the `PlatformToolset` property to `v110` to use [!INCLUDE[cpp_dev11_long](../build/includes/cpp_dev11_long_md.md)] tools and libraries to build your application.  \n  \n `msbuild myProject.vcxproj /p:PlatformToolset=v110`  \n  \n Set the `PlatformToolset` property to `v100` to use [!INCLUDE[cpp_dev10_long](../build/includes/cpp_dev10_long_md.md)] tools and libraries to build your application.  \n  \n `msbuild myProject.vcxproj /p:PlatformToolset=v100`  \n  \n Set the `PlatformToolset` property to `v90` to use Visual C++ 2008 tools and libraries to build your application. The Visual C++ 2008 toolset must already be installed on your computer for this property to be effective.  \n  \n `msbuild myProject.vcxproj /p:PlatformToolset=v90`  \n  \n### PreferredToolArchitecture Property  \n The `PreferredToolArchitecture` property determines whether the 32-bit or 64-bit compiler and tools are used in the build. This property does not affect the output platform architecture or configuration. By default, MSBuild uses the x86 version of the compiler and tools if this property is not set, or is set to any value other than `x64`.  \n  \n Set the `PreferredToolArchitecture` property to `x64` to use the 64-bit compiler and tools to build your application.  \n  \n `msbuild myProject.vcxproj /p:PreferredToolArchitecture=x64`  \n  \n### UseEnv Property  \n By default, the platform-specific settings for the current project override the PATH, INCLUDE, LIB, LIBPATH, CONFIGURATION, and PLATFORM environment variables. Set the `UseEnv` property to `true` to guarantee that the environment variables are not overridden.  \n  \n `msbuild myProject.vcxproj /p:UseEnv=true`  \n  \n### Targets  \n There are hundreds of targets in the Visual C++ support files. However, most are system-oriented targets that the user can ignore. Most system targets are prefixed by an underscore (_), or have a name that starts with \"PrepareFor\", \"Compute\", \"Before\", \"After\", \"Pre\", or \"Post\".  \n  \n The following table lists several worthwhile user-oriented targets.  \n  \n|Target|Description|  \n|------------|-----------------|  \n|BscMake|Executes the Microsoft Browse Information Maintenance Utility tool, bscmake.exe.|  \n|Build|Builds the project.<br /><br /> This is the default target for a project.|  \n|ClCompile|Executes the Visual C++ compiler tool, cl.exe.|  \n|Clean|Deletes temporary and intermediate build files.|  \n|Lib|Executes the Microsoft 32-Bit Library Manager tool, lib.exe.|  \n|Link|Executes the Visual C++ linker tool, link.exe.|  \n|ManifestResourceCompile|Extracts a list of resources from a manifest and then executes the Microsoft Windows Resource Compiler tool, rc.exe.|  \n|Midl|Executes the Microsoft Interface Definition Language (MIDL) compiler tool, midl.exe.|  \n|Rebuild|Cleans and then builds your project.|  \n|ResourceCompile|Executes the Microsoft Windows Resource Compiler tool, rc.exe.|  \n|XdcMake|Executes the XML Documentation tool, xdcmake.exe.|  \n|Xsd|Executes the XML Schema Definition tool, xsd.exe.|  \n  \n## See Also  \n [MSBuild (Visual C++)](../build/msbuild-visual-cpp.md)"}