{"nodes":[{"pos":[12,91],"content":"strncpy, _strncpy_l, wcsncpy, _wcsncpy_l, _mbsncpy, _mbsncpy_l | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"strncpy, _strncpy_l, wcsncpy, _wcsncpy_l, _mbsncpy, _mbsncpy_l | Microsoft Docs","pos":[0,79]}]},{"content":"strncpy, _strncpy_l, wcsncpy, _wcsncpy_l, _mbsncpy, _mbsncpy_l","pos":[1888,1950]},{"content":"Copy characters of one string to another.","pos":[1951,1992]},{"content":"More secure versions of these functions are available; see <bpt id=\"p1\">[</bpt>strncpy_s, _strncpy_s_l, wcsncpy_s, _wcsncpy_s_l, _mbsncpy_s, _mbsncpy_s_l<ept id=\"p1\">](../../c-runtime-library/reference/strncpy-s-strncpy-s-l-wcsncpy-s-wcsncpy-s-l-mbsncpy-s-mbsncpy-s-l.md)</ept>.","pos":[1993,2233],"source":" More secure versions of these functions are available; see [strncpy_s, _strncpy_s_l, wcsncpy_s, _wcsncpy_s_l, _mbsncpy_s, _mbsncpy_s_l](../../c-runtime-library/reference/strncpy-s-strncpy-s-l-wcsncpy-s-wcsncpy-s-l-mbsncpy-s-mbsncpy-s-l.md)."},{"pos":[2241,2520],"content":"[!IMPORTANT]\n `_mbsncpy` and `_mbsncpy_l` cannot be used in applications that execute in the [!INCLUDE[wrt](../../atl/reference/includes/wrt_md.md)]. For more information, see [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx).","leadings":["","> "],"nodes":[{"content":" and `_mbsncpy_l` cannot be used in applications that execute in the [!INCLUDE[wrt](../../atl/reference/includes/wrt_md.md)]. For more information, see [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx).","pos":[24,277],"nodes":[{"content":"and <ph id=\"ph1\">`_mbsncpy_l`</ph> cannot be used in applications that execute in the <ph id=\"ph2\">[!INCLUDE[wrt](../../atl/reference/includes/wrt_md.md)]</ph>.","pos":[1,125],"source":" and `_mbsncpy_l` cannot be used in applications that execute in the [!INCLUDE[wrt](../../atl/reference/includes/wrt_md.md)]."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>CRT functions not supported with /ZW<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx)</ept>.","pos":[126,253],"source":" For more information, see [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx)."}]}]},{"content":"Syntax","pos":[2529,2535]},{"content":"Parameters","pos":[4195,4205]},{"content":"Destination string.","pos":[4222,4241]},{"content":"Source string.","pos":[4263,4277]},{"content":"Number of characters to be copied.","pos":[4295,4329]},{"content":"Locale to use.","pos":[4348,4362]},{"content":"Return Value","pos":[4371,4383]},{"content":"Returns <ph id=\"ph1\">`strDest`</ph>.","pos":[4387,4405],"source":"Returns `strDest`."},{"content":"No return value is reserved to indicate an error.","pos":[4406,4455]},{"content":"Remarks","pos":[4464,4471]},{"content":"The <ph id=\"ph1\">`strncpy`</ph> function copies the initial <ph id=\"ph2\">`count`</ph> characters of <ph id=\"ph3\">`strSource`</ph> to <ph id=\"ph4\">`strDest`</ph> and returns <ph id=\"ph5\">`strDest`</ph>.","pos":[4475,4586],"source":"The `strncpy` function copies the initial `count` characters of `strSource` to `strDest` and returns `strDest`."},{"content":"If <ph id=\"ph1\">`count`</ph> is less than or equal to the length of <ph id=\"ph2\">`strSource`</ph>, a null character is not appended automatically to the copied string.","pos":[4587,4718],"source":" If `count` is less than or equal to the length of `strSource`, a null character is not appended automatically to the copied string."},{"content":"If <ph id=\"ph1\">`count`</ph> is greater than the length of <ph id=\"ph2\">`strSource`</ph>, the destination string is padded with null characters up to length <ph id=\"ph3\">`count`</ph>.","pos":[4719,4848],"source":" If `count` is greater than the length of `strSource`, the destination string is padded with null characters up to length `count`."},{"content":"The behavior of <ph id=\"ph1\">`strncpy`</ph> is undefined if the source and destination strings overlap.","pos":[4849,4934],"source":" The behavior of `strncpy` is undefined if the source and destination strings overlap."},{"pos":[4942,5315],"content":"[!IMPORTANT]\n `strncpy` does not check for sufficient space in `strDest`; this makes it a potential cause of buffer overruns. The `count` argument limits the number of characters copied; it is not a limit on the size of `strDest`. See the following example. For more information, see [Avoiding Buffer Overruns](http://msdn.microsoft.com/library/windows/desktop/ms717795).","leadings":["","> "],"nodes":[{"content":" does not check for sufficient space in `strDest`; this makes it a potential cause of buffer overruns. The `count` argument limits the number of characters copied; it is not a limit on the size of `strDest`. See the following example. For more information, see [Avoiding Buffer Overruns](http://msdn.microsoft.com/library/windows/desktop/ms717795).","pos":[23,371],"nodes":[{"content":"does not check for sufficient space in <ph id=\"ph1\">`strDest`</ph>; this makes it a potential cause of buffer overruns.","pos":[1,102],"source":" does not check for sufficient space in `strDest`; this makes it a potential cause of buffer overruns."},{"content":"The <ph id=\"ph1\">`count`</ph> argument limits the number of characters copied; it is not a limit on the size of <ph id=\"ph2\">`strDest`</ph>.","pos":[103,207],"source":" The `count` argument limits the number of characters copied; it is not a limit on the size of `strDest`."},{"content":"See the following example.","pos":[208,234]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Avoiding Buffer Overruns<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/ms717795)</ept>.","pos":[235,348],"source":" For more information, see [Avoiding Buffer Overruns](http://msdn.microsoft.com/library/windows/desktop/ms717795)."}]}]},{"content":"If <ph id=\"ph1\">`strDest`</ph> or <ph id=\"ph2\">`strSource`</ph> is a <ph id=\"ph3\">`NULL`</ph> pointer, or if <ph id=\"ph4\">`count`</ph> is less than or equal to zero, the invalid parameter handler is invoked, as described in <bpt id=\"p1\">[</bpt>Parameter Validation<ept id=\"p1\">](../../c-runtime-library/parameter-validation.md)</ept>.","pos":[5322,5546],"source":"If `strDest` or `strSource` is a `NULL` pointer, or if `count` is less than or equal to zero, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md)."},{"content":"If execution is allowed to continue, these functions return -1 and set <ph id=\"ph1\">`errno`</ph> to","pos":[5547,5628],"source":" If execution is allowed to continue, these functions return -1 and set `errno` to "},{"content":"and <ph id=\"ph1\">`_mbsncpy`</ph> are wide-character and multibyte-character versions of <ph id=\"ph2\">`strncpy`</ph>.","pos":[5654,5734],"source":" and `_mbsncpy` are wide-character and multibyte-character versions of `strncpy`."},{"content":"The arguments and return value of <ph id=\"ph1\">`wcsncpy`</ph> and <ph id=\"ph2\">`_mbsncpy`</ph> vary accordingly.","pos":[5735,5811],"source":" The arguments and return value of `wcsncpy` and `_mbsncpy` vary accordingly."},{"content":"These six functions behave identically otherwise.","pos":[5812,5861]},{"content":"The versions of these functions with the <ph id=\"ph1\">`_l`</ph> suffix are identical except that they use the locale passed in instead of the current locale for their locale-dependent behavior.","pos":[5868,6043],"source":"The versions of these functions with the `_l` suffix are identical except that they use the locale passed in instead of the current locale for their locale-dependent behavior."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Locale<ept id=\"p1\">](../../c-runtime-library/locale.md)</ept>.","pos":[6044,6114],"source":" For more information, see [Locale](../../c-runtime-library/locale.md)."},{"content":"In C++, these functions have template overloads that invoke the newer, secure counterparts of these functions.","pos":[6121,6231]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Secure Template Overloads<ept id=\"p1\">](../../c-runtime-library/secure-template-overloads.md)</ept>.","pos":[6232,6340],"source":" For more information, see [Secure Template Overloads](../../c-runtime-library/secure-template-overloads.md)."},{"content":"Generic-Text Routine Mappings","pos":[6350,6379]},{"content":"TCHAR.H routine","pos":[6386,6401]},{"content":"_UNICODE &amp; _MBCS not defined","pos":[6402,6430],"source":"_UNICODE & _MBCS not defined"},{"content":"_MBCS defined","pos":[6431,6444]},{"content":"_UNICODE defined","pos":[6445,6461]},{"pos":[6682,6833],"content":"[!NOTE]\n `_strncpy_l` and `_wcsncpy_l` have no locale dependence; they are provided just for `_tcsncpy_l` and are not intended to be called directly.","leadings":["","> "],"nodes":[{"content":"and <ph id=\"ph1\">`_wcsncpy_l`</ph> have no locale dependence; they are provided just for <ph id=\"ph2\">`_tcsncpy_l`</ph> and are not intended to be called directly.","pos":[22,149],"source":" and `_wcsncpy_l` have no locale dependence; they are provided just for `_tcsncpy_l` and are not intended to be called directly."}]},{"content":"Requirements","pos":[6842,6854]},{"content":"Routine","pos":[6861,6868]},{"content":"Required header","pos":[6869,6884]},{"content":"string.h&gt;","pos":[6941,6950],"source":"string.h>"},{"content":"string.h&gt; or <ph id=\"ph1\">\\&lt;</ph>wchar.h&gt;","pos":[6967,6990],"source":"string.h> or \\<wchar.h>"},{"pos":[7005,7006],"content":","},{"content":"mbstring.h&gt;","pos":[7022,7033],"source":"mbstring.h>"},{"pos":[7041,7154],"content":"For additional platform compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept>.","source":"For additional platform compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md)."},{"content":"Example","pos":[7163,7170]},{"content":"The following example demonstrates the use of <ph id=\"ph1\">`strncpy`</ph> and how it can be misused to cause program bugs and security issues.","pos":[7174,7298],"source":"The following example demonstrates the use of `strncpy` and how it can be misused to cause program bugs and security issues."},{"content":"The compiler generates a warning for each call to <ph id=\"ph1\">`strncpy`</ph> similar to <bpt id=\"p1\">**</bpt>crt_strncpy_x86.c(15) : warning C4996: 'strncpy': This function or variable may be unsafe. Consider using strncpy_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.<ept id=\"p1\">**</ept>","pos":[7299,7580],"source":" The compiler generates a warning for each call to `strncpy` similar to **crt_strncpy_x86.c(15) : warning C4996: 'strncpy': This function or variable may be unsafe. Consider using strncpy_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.**"},{"content":"Output","pos":[9413,9419]},{"content":"The layout of automatic variables and the level of error detection and code protection can vary with changed compiler settings.","pos":[9583,9710]},{"content":"This example may have different results when built in other compilation environments or with other compiler options.","pos":[9711,9827]},{"content":".NET Framework Equivalent","pos":[9836,9861]},{"content":"System::String::Copy","pos":[9866,9886]},{"content":"See Also","pos":[9962,9970]},{"content":"String Manipulation","pos":[9975,9994]},{"content":"Locale","pos":[10053,10059]},{"content":"Interpretation of Multibyte-Character Sequences","pos":[10101,10148]},{"content":"_mbsnbcpy, _mbsnbcpy_l","pos":[10231,10253]},{"content":"strcat, wcscat, _mbscat","pos":[10318,10341]},{"content":"strcmp, wcscmp, _mbscmp","pos":[10407,10430]},{"content":"strcpy, wcscpy, _mbscpy","pos":[10496,10519]},{"content":"strncat, _strncat_l, wcsncat, _wcsncat_l, _mbsncat, _mbsncat_l","pos":[10585,10647]},{"content":"strncmp, wcsncmp, _mbsncmp, _mbsncmp_l","pos":[10746,10784]},{"content":"_strnicmp, _wcsnicmp, _mbsnicmp, _strnicmp_l, _wcsnicmp_l, _mbsnicmp_l","pos":[10863,10933]},{"content":"strrchr, wcsrchr, _mbsrchr, _mbsrchr_l","pos":[11038,11076]},{"content":"_strset, _strset_l, _wcsset, _wcsset_l, _mbsset, _mbsset_l","pos":[11155,11213]},{"content":"strspn, wcsspn, _mbsspn, _mbsspn_l","pos":[11306,11340]},{"content":"strncpy_s, _strncpy_s_l, wcsncpy_s, _wcsncpy_s_l, _mbsncpy_s, _mbsncpy_s_l","pos":[11415,11489]},{"content":"strcpy_s, wcscpy_s, _mbscpy_s","pos":[11600,11629]}],"content":"---\ntitle: \"strncpy, _strncpy_l, wcsncpy, _wcsncpy_l, _mbsncpy, _mbsncpy_l | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"strncpy\"\n  - \"_strncpy_l\"\n  - \"_mbsncpy\"\n  - \"wcsncpy\"\n  - \"_mbsncpy_l\"\n  - \"_wcsncpy_l\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\n  - \"api-ms-win-crt-multibyte-l1-1-0.dll\"\n  - \"api-ms-win-crt-string-l1-1-0.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"_fstrncpy\"\n  - \"strncpy\"\n  - \"_ftcsncpy\"\n  - \"_tcsnccpy_l\"\n  - \"_tcsnccpy\"\n  - \"_mbsncpy\"\n  - \"wcsncpy\"\n  - \"_tcsncpy\"\n  - \"_strncpy_l\"\n  - \"_mbsncpy_l\"\n  - \"_wcsncpy_l\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"wcsncpy_l function\"\n  - \"characters [C++], copying\"\n  - \"mbsncpy_l function\"\n  - \"strncpy_l function\"\n  - \"wcsncpy function\"\n  - \"tcsnccpy function\"\n  - \"ftcsncpy function\"\n  - \"copying characters of strings\"\n  - \"_wcsncpy_l function\"\n  - \"_tcsnccpy function\"\n  - \"_tcsnccpy_l function\"\n  - \"strncpy function\"\n  - \"_tcsncpy function\"\n  - \"mbsncpy function\"\n  - \"_fstrncpy function\"\n  - \"_mbsncpy_l function\"\n  - \"tcsncpy_l function\"\n  - \"tcsnccpy_l function\"\n  - \"fstrncpy function\"\n  - \"strings [C++], copying\"\n  - \"_ftcsncpy function\"\n  - \"_tcsncpy_l function\"\n  - \"_mbsncpy function\"\n  - \"tcsncpy function\"\n  - \"_strncpy_l function\"\nms.assetid: ac4345a1-a129-4f2f-bb8a-373ec58ab8b0\ncaps.latest.revision: 42\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"ru-ru\"\n  - \"zh-cn\"\n  - \"zh-tw\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"tr-tr\"\n---\n# strncpy, _strncpy_l, wcsncpy, _wcsncpy_l, _mbsncpy, _mbsncpy_l\nCopy characters of one string to another. More secure versions of these functions are available; see [strncpy_s, _strncpy_s_l, wcsncpy_s, _wcsncpy_s_l, _mbsncpy_s, _mbsncpy_s_l](../../c-runtime-library/reference/strncpy-s-strncpy-s-l-wcsncpy-s-wcsncpy-s-l-mbsncpy-s-mbsncpy-s-l.md).  \n  \n> [!IMPORTANT]\n>  `_mbsncpy` and `_mbsncpy_l` cannot be used in applications that execute in the [!INCLUDE[wrt](../../atl/reference/includes/wrt_md.md)]. For more information, see [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx).  \n  \n## Syntax  \n  \n```  \nchar *strncpy(  \n   char *strDest,  \n   const char *strSource,  \n   size_t count   \n);  \nchar *_strncpy_l(  \n   char *strDest,  \n   const char *strSource,  \n   size_t count,  \n   locale_t locale   \n);  \nwchar_t *wcsncpy(  \n   wchar_t *strDest,  \n   const wchar_t *strSource,  \n   size_t count   \n);  \nwchar_t *_wcsncpy_l(  \n   wchar_t *strDest,  \n   const wchar_t *strSource,  \n   size_t count,  \n   locale_t locale   \n);  \nunsigned char *_mbsncpy(  \n   unsigned char *strDest,  \n   const unsigned char *strSource,  \n   size_t count   \n);  \nunsigned char *_mbsncpy_l(  \n   unsigned char *strDest,  \n   const unsigned char *strSource,  \n   size_t count,  \n   _locale_t locale  \n);  \ntemplate <size_t size>  \nchar *strncpy(  \n   char (&strDest)[size],  \n   const char *strSource,  \n   size_t count   \n); // C++ only  \ntemplate <size_t size>  \nchar *_strncpy_l(  \n   char (&strDest)[size],  \n   const char *strSource,  \n   size_t count,  \n   locale_t locale   \n); // C++ only  \ntemplate <size_t size>  \nwchar_t *wcsncpy(  \n   wchar_t (&strDest)[size],  \n   const wchar_t *strSource,  \n   size_t count   \n); // C++ only  \ntemplate <size_t size>  \nwchar_t *_wcsncpy_l(  \n   wchar_t (&strDest)[size],  \n   const wchar_t *strSource,  \n   size_t count,  \n   locale_t locale   \n); // C++ only  \ntemplate <size_t size>  \nunsigned char *_mbsncpy(  \n   unsigned char (&strDest)[size],  \n   const unsigned char *strSource,  \n   size_t count   \n); // C++ only  \ntemplate <size_t size>  \nunsigned char *_mbsncpy_l(  \n   unsigned char (&strDest)[size],  \n   const unsigned char *strSource,  \n   size_t count,  \n   _locale_t locale  \n); // C++ only  \n```  \n  \n#### Parameters  \n `strDest`  \n Destination string.  \n  \n `strSource`  \n Source string.  \n  \n `count`  \n Number of characters to be copied.  \n  \n `locale`  \n Locale to use.  \n  \n## Return Value  \n Returns `strDest`. No return value is reserved to indicate an error.  \n  \n## Remarks  \n The `strncpy` function copies the initial `count` characters of `strSource` to `strDest` and returns `strDest`. If `count` is less than or equal to the length of `strSource`, a null character is not appended automatically to the copied string. If `count` is greater than the length of `strSource`, the destination string is padded with null characters up to length `count`. The behavior of `strncpy` is undefined if the source and destination strings overlap.  \n  \n> [!IMPORTANT]\n>  `strncpy` does not check for sufficient space in `strDest`; this makes it a potential cause of buffer overruns. The `count` argument limits the number of characters copied; it is not a limit on the size of `strDest`. See the following example. For more information, see [Avoiding Buffer Overruns](http://msdn.microsoft.com/library/windows/desktop/ms717795).  \n  \n If `strDest` or `strSource` is a `NULL` pointer, or if `count` is less than or equal to zero, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md). If execution is allowed to continue, these functions return -1 and set `errno` to `EINVAL`  \n  \n `wcsncpy` and `_mbsncpy` are wide-character and multibyte-character versions of `strncpy`. The arguments and return value of `wcsncpy` and `_mbsncpy` vary accordingly. These six functions behave identically otherwise.  \n  \n The versions of these functions with the `_l` suffix are identical except that they use the locale passed in instead of the current locale for their locale-dependent behavior. For more information, see [Locale](../../c-runtime-library/locale.md).  \n  \n In C++, these functions have template overloads that invoke the newer, secure counterparts of these functions. For more information, see [Secure Template Overloads](../../c-runtime-library/secure-template-overloads.md).  \n  \n### Generic-Text Routine Mappings  \n  \n|TCHAR.H routine|_UNICODE & _MBCS not defined|_MBCS defined|_UNICODE defined|  \n|---------------------|------------------------------------|--------------------|-----------------------|  \n|`_tcsncpy`|`strncpy`|`_mbsnbcpy`|`wcsncpy`|  \n|`_tcsncpy_l`|`_strncpy_l`|`_mbsnbcpy_l`|`_wcsncpy_l`|  \n  \n> [!NOTE]\n>  `_strncpy_l` and `_wcsncpy_l` have no locale dependence; they are provided just for `_tcsncpy_l` and are not intended to be called directly.  \n  \n## Requirements  \n  \n|Routine|Required header|  \n|-------------|---------------------|  \n|`strncpy`|\\<string.h>|  \n|`wcsncpy`|\\<string.h> or \\<wchar.h>|  \n|`_mbsncpy`, `_mbsncpy_l`|\\<mbstring.h>|  \n  \n For additional platform compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md).  \n  \n## Example  \n The following example demonstrates the use of `strncpy` and how it can be misused to cause program bugs and security issues. The compiler generates a warning for each call to `strncpy` similar to **crt_strncpy_x86.c(15) : warning C4996: 'strncpy': This function or variable may be unsafe. Consider using strncpy_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.**  \n  \n```  \n// crt_strncpy_x86.c  \n// Use this command in an x86 developer command prompt to compile:   \n// cl /TC /W3 crt_strncpy_x86.c  \n  \n#include <stdio.h>  \n#include <string.h>  \n  \nint main() {  \n   char t[20];  \n   char s[20];  \n   char *p = 0, *q = 0;  \n  \n   strcpy_s(s, sizeof(s), \"AA BB CC\");  \n   // Note: strncpy is deprecated; consider using strncpy_s instead  \n   strncpy(s, \"aa\", 2);     // \"aa BB CC\"         C4996  \n   strncpy(s + 3, \"bb\", 2); // \"aa bb CC\"         C4996  \n   strncpy(s, \"ZZ\", 3);     // \"ZZ\",              C4996  \n                            // count greater than strSource, null added  \n   printf(\"%s\\n\", s);  \n  \n   strcpy_s(s, sizeof(s), \"AA BB CC\");  \n   p = strstr(s, \"BB\");  \n   q = strstr(s, \"CC\");  \n   strncpy(s, \"aa\", p - s - 1);   // \"aa BB CC\"   C4996  \n   strncpy(p, \"bb\", q - p - 1);   // \"aa bb CC\"   C4996  \n   strncpy(q, \"cc\",  q - s);      // \"aa bb cc\"   C4996  \n   strncpy(q, \"dd\", strlen(q));   // \"aa bb dd\"   C4996  \n   printf(\"%s\\n\", s);  \n  \n   // some problems with strncpy  \n   strcpy_s(s, sizeof(s), \"test\");  \n   strncpy(t, \"this is a very long string\", 20 ); // C4996  \n   // Danger: at this point, t has no terminating null,  \n   // so the printf continues until it runs into one.  \n   // In this case, it will print \"this is a very long test\"  \n   printf(\"%s\\n\", t);  \n  \n   strcpy_s(t, sizeof(t), \"dogs like cats\");  \n   printf(\"%s\\n\", t);  \n  \n   strncpy(t + 10, \"to chase cars.\", 14); // C4996  \n   printf(\"%s\\n\", t);  \n  \n   // strncpy has caused a buffer overrun and corrupted string s  \n   printf(\"Buffer overrun: s = '%s' (should be 'test')\\n\", s);  \n   // Since the stack grows from higher to lower addresses, buffer  \n   // overruns can corrupt function return addresses on the stack,  \n   // which can be exploited to run arbitrary code.  \n}  \n```  \n  \n Output  \n  \n```Output  \n ZZ  \naa bb dd  \nthis is a very long test  \ndogs like cats  \ndogs like to chase cars.  \nBuffer overrun: s = 'ars.' (should be 'test')  \n```  \n  \n The layout of automatic variables and the level of error detection and code protection can vary with changed compiler settings. This example may have different results when built in other compilation environments or with other compiler options.  \n  \n## .NET Framework Equivalent  \n [System::String::Copy](https://msdn.microsoft.com/en-us/library/system.string.copy.aspx)  \n  \n## See Also  \n [String Manipulation](../../c-runtime-library/string-manipulation-crt.md)   \n [Locale](../../c-runtime-library/locale.md)   \n [Interpretation of Multibyte-Character Sequences](../../c-runtime-library/interpretation-of-multibyte-character-sequences.md)   \n [_mbsnbcpy, _mbsnbcpy_l](../../c-runtime-library/reference/mbsnbcpy-mbsnbcpy-l.md)   \n [strcat, wcscat, _mbscat](../../c-runtime-library/reference/strcat-wcscat-mbscat.md)   \n [strcmp, wcscmp, _mbscmp](../../c-runtime-library/reference/strcmp-wcscmp-mbscmp.md)   \n [strcpy, wcscpy, _mbscpy](../../c-runtime-library/reference/strcpy-wcscpy-mbscpy.md)   \n [strncat, _strncat_l, wcsncat, _wcsncat_l, _mbsncat, _mbsncat_l](../../c-runtime-library/reference/strncat-strncat-l-wcsncat-wcsncat-l-mbsncat-mbsncat-l.md)   \n [strncmp, wcsncmp, _mbsncmp, _mbsncmp_l](../../c-runtime-library/reference/strncmp-wcsncmp-mbsncmp-mbsncmp-l.md)   \n [_strnicmp, _wcsnicmp, _mbsnicmp, _strnicmp_l, _wcsnicmp_l, _mbsnicmp_l](../../c-runtime-library/reference/strnicmp-wcsnicmp-mbsnicmp-strnicmp-l-wcsnicmp-l-mbsnicmp-l.md)   \n [strrchr, wcsrchr, _mbsrchr, _mbsrchr_l](../../c-runtime-library/reference/strrchr-wcsrchr-mbsrchr-mbsrchr-l.md)   \n [_strset, _strset_l, _wcsset, _wcsset_l, _mbsset, _mbsset_l](../../c-runtime-library/reference/strset-strset-l-wcsset-wcsset-l-mbsset-mbsset-l.md)   \n [strspn, wcsspn, _mbsspn, _mbsspn_l](../../c-runtime-library/reference/strspn-wcsspn-mbsspn-mbsspn-l.md)   \n [strncpy_s, _strncpy_s_l, wcsncpy_s, _wcsncpy_s_l, _mbsncpy_s, _mbsncpy_s_l](../../c-runtime-library/reference/strncpy-s-strncpy-s-l-wcsncpy-s-wcsncpy-s-l-mbsncpy-s-mbsncpy-s-l.md)   \n [strcpy_s, wcscpy_s, _mbscpy_s](../../c-runtime-library/reference/strcpy-s-wcscpy-s-mbscpy-s.md)"}