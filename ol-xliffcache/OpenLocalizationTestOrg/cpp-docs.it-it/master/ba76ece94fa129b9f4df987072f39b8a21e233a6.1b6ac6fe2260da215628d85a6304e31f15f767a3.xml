{"nodes":[{"pos":[12,76],"content":"C Run-Time Library Functions for Thread Control | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"C Run-Time Library Functions for Thread Control | Microsoft Docs","pos":[0,64]}]},{"content":"C Run-Time Library Functions for Thread Control","pos":[781,828]},{"content":"All Win32 programs have at least one thread.","pos":[829,873]},{"content":"Any thread can create additional threads.","pos":[874,915]},{"content":"A thread can complete its work quickly and then terminate, or it can stay active for the life of the program.","pos":[916,1025]},{"pos":[1032,1324],"content":"The LIBCMT and MSVCRT C run-time libraries provide the following functions for thread creation and termination: <bpt id=\"p1\">[</bpt>_beginthread, _beginthreadex<ept id=\"p1\">](../c-runtime-library/reference/beginthread-beginthreadex.md)</ept> and <bpt id=\"p2\">[</bpt>_endthread, _endthreadex<ept id=\"p2\">](../c-runtime-library/reference/endthread-endthreadex.md)</ept>.","source":"The LIBCMT and MSVCRT C run-time libraries provide the following functions for thread creation and termination: [_beginthread, _beginthreadex](../c-runtime-library/reference/beginthread-beginthreadex.md) and [_endthread, _endthreadex](../c-runtime-library/reference/endthread-endthreadex.md)."},{"content":"The <ph id=\"ph1\">`_beginthread`</ph> and <ph id=\"ph2\">`_beginthreadex`</ph> functions create a new thread and return a thread identifier if the operation is successful.","pos":[1331,1463],"source":"The `_beginthread` and `_beginthreadex` functions create a new thread and return a thread identifier if the operation is successful."},{"content":"The thread terminates automatically if it completes execution, or it can terminate itself with a call to <ph id=\"ph1\">`_endthread`</ph> or <ph id=\"ph2\">`_endthreadex`</ph>.","pos":[1464,1600],"source":" The thread terminates automatically if it completes execution, or it can terminate itself with a call to `_endthread` or `_endthreadex`."},{"pos":[1608,2017],"content":"[!NOTE]\n If you are going to call C run-time routines from a program built with Libcmt.lib, you must start your threads with the `_beginthread` or `_beginthreadex` function. Do not use the Win32 functions `ExitThread` and `CreateThread`. Using `SuspendThread` can lead to a deadlock when more than one thread is blocked waiting for the suspended thread to complete its access to a C run-time data structure.","leadings":["","> "],"nodes":[{"content":" If you are going to call C run-time routines from a program built with Libcmt.lib, you must start your threads with the `_beginthread` or `_beginthreadex` function. Do not use the Win32 functions `ExitThread` and `CreateThread`. Using `SuspendThread` can lead to a deadlock when more than one thread is blocked waiting for the suspended thread to complete its access to a C run-time data structure.","pos":[8,407],"nodes":[{"content":"If you are going to call C run-time routines from a program built with Libcmt.lib, you must start your threads with the <ph id=\"ph1\">`_beginthread`</ph> or <ph id=\"ph2\">`_beginthreadex`</ph> function.","pos":[1,165],"source":" If you are going to call C run-time routines from a program built with Libcmt.lib, you must start your threads with the `_beginthread` or `_beginthreadex` function."},{"content":"Do not use the Win32 functions <ph id=\"ph1\">`ExitThread`</ph> and <ph id=\"ph2\">`CreateThread`</ph>.","pos":[166,229],"source":" Do not use the Win32 functions `ExitThread` and `CreateThread`."},{"content":"Using <ph id=\"ph1\">`SuspendThread`</ph> can lead to a deadlock when more than one thread is blocked waiting for the suspended thread to complete its access to a C run-time data structure.","pos":[230,399],"source":" Using `SuspendThread` can lead to a deadlock when more than one thread is blocked waiting for the suspended thread to complete its access to a C run-time data structure."}]}]},{"pos":[2074,2119],"content":"The _beginthread and _beginthreadex Functions"},{"content":"The <ph id=\"ph1\">`_beginthread`</ph> and <ph id=\"ph2\">`_beginthreadex`</ph> functions create a new thread.","pos":[2123,2193],"source":"The `_beginthread` and `_beginthreadex` functions create a new thread."},{"content":"A thread shares the code and data segments of a process with other threads in the process but has its own unique register values, stack space, and current instruction address.","pos":[2194,2369]},{"content":"The system gives CPU time to each thread, so that all threads in a process can execute concurrently.","pos":[2370,2470]},{"pos":[2492,2659],"content":"and <ph id=\"ph1\">`_beginthreadex`</ph> are similar to the <bpt id=\"p1\">[</bpt>CreateThread<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/ms682453)</ept> function in the Win32 API but has these differences:","source":" and `_beginthreadex` are similar to the [CreateThread](http://msdn.microsoft.com/library/windows/desktop/ms682453) function in the Win32 API but has these differences:"},{"content":"They initialize certain C run-time library variables.","pos":[2669,2722]},{"content":"This is important only if you use the C run-time library in your threads.","pos":[2723,2796]},{"content":"helps provide control over security attributes.","pos":[2821,2868]},{"content":"You can use this function to start a thread in a suspended state.","pos":[2869,2934]},{"pos":[2956,3064],"content":"and <ph id=\"ph1\">`_beginthreadex`</ph> return a handle to the new thread if successful or an error code if there was an error.","source":" and `_beginthreadex` return a handle to the new thread if successful or an error code if there was an error."},{"pos":[3119,3160],"content":"The _endthread and _endthreadex Functions"},{"content":"The <bpt id=\"p1\">[</bpt>_endthread<ept id=\"p1\">](../c-runtime-library/reference/endthread-endthreadex.md)</ept> function terminates a thread created by <ph id=\"ph1\">`_beginthread`</ph> (and similarly, <ph id=\"ph2\">`_endthreadex`</ph> terminates a thread created by <ph id=\"ph3\">`_beginthreadex`</ph>).","pos":[3164,3373],"source":"The [_endthread](../c-runtime-library/reference/endthread-endthreadex.md) function terminates a thread created by `_beginthread` (and similarly, `_endthreadex` terminates a thread created by `_beginthreadex`)."},{"content":"Threads terminate automatically when they finish.","pos":[3374,3423]},{"content":"and <ph id=\"ph1\">`_endthreadex`</ph> are useful for conditional termination from within a thread.","pos":[3437,3516],"source":" and `_endthreadex` are useful for conditional termination from within a thread."},{"content":"A thread dedicated to communications processing, for example, can quit if it is unable to get control of the communications port.","pos":[3517,3646]},{"content":"See Also","pos":[3655,3663]},{"content":"Multithreading with C and Win32","pos":[3668,3699]}],"content":"---\ntitle: \"C Run-Time Library Functions for Thread Control | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"_beginthread function\"\n  - \"_endthread function\"\n  - \"threading [C++], controlling threads\"\n  - \"multithreading [C++], controlling threads\"\n  - \"_beginthreadex function\"\n  - \"_endthreadex function\"\nms.assetid: 39d0529c-c392-4c6f-94f5-105d1e8054e4\ncaps.latest.revision: 9\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# C Run-Time Library Functions for Thread Control\nAll Win32 programs have at least one thread. Any thread can create additional threads. A thread can complete its work quickly and then terminate, or it can stay active for the life of the program.  \n  \n The LIBCMT and MSVCRT C run-time libraries provide the following functions for thread creation and termination: [_beginthread, _beginthreadex](../c-runtime-library/reference/beginthread-beginthreadex.md) and [_endthread, _endthreadex](../c-runtime-library/reference/endthread-endthreadex.md).  \n  \n The `_beginthread` and `_beginthreadex` functions create a new thread and return a thread identifier if the operation is successful. The thread terminates automatically if it completes execution, or it can terminate itself with a call to `_endthread` or `_endthreadex`.  \n  \n> [!NOTE]\n>  If you are going to call C run-time routines from a program built with Libcmt.lib, you must start your threads with the `_beginthread` or `_beginthreadex` function. Do not use the Win32 functions `ExitThread` and `CreateThread`. Using `SuspendThread` can lead to a deadlock when more than one thread is blocked waiting for the suspended thread to complete its access to a C run-time data structure.  \n  \n##  <a name=\"_core_the__beginthread_function\"></a> The _beginthread and _beginthreadex Functions  \n The `_beginthread` and `_beginthreadex` functions create a new thread. A thread shares the code and data segments of a process with other threads in the process but has its own unique register values, stack space, and current instruction address. The system gives CPU time to each thread, so that all threads in a process can execute concurrently.  \n  \n `_beginthread` and `_beginthreadex` are similar to the [CreateThread](http://msdn.microsoft.com/library/windows/desktop/ms682453) function in the Win32 API but has these differences:  \n  \n-   They initialize certain C run-time library variables. This is important only if you use the C run-time library in your threads.  \n  \n-   `CreateThread` helps provide control over security attributes. You can use this function to start a thread in a suspended state.  \n  \n `_beginthread` and `_beginthreadex` return a handle to the new thread if successful or an error code if there was an error.  \n  \n##  <a name=\"_core_the__endthread_function\"></a> The _endthread and _endthreadex Functions  \n The [_endthread](../c-runtime-library/reference/endthread-endthreadex.md) function terminates a thread created by `_beginthread` (and similarly, `_endthreadex` terminates a thread created by `_beginthreadex`). Threads terminate automatically when they finish. `_endthread` and `_endthreadex` are useful for conditional termination from within a thread. A thread dedicated to communications processing, for example, can quit if it is unable to get control of the communications port.  \n  \n## See Also  \n [Multithreading with C and Win32](../parallel/multithreading-with-c-and-win32.md)"}