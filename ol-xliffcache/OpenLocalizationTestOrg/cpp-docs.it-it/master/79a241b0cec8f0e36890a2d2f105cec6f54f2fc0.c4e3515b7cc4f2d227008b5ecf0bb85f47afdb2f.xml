{"nodes":[{"pos":[12,35],"content":"_write | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"_write | Microsoft Docs","pos":[0,23]}]},{"content":"_write","pos":[914,920]},{"content":"Writes data to a file.","pos":[921,943]},{"content":"Syntax","pos":[952,958]},{"content":"Parameters","pos":[1066,1076]},{"content":"File descriptor of file into which data is written.","pos":[1088,1139]},{"content":"Data to be written.","pos":[1158,1177]},{"content":"Number of bytes.","pos":[1195,1211]},{"content":"Return Value","pos":[1220,1232]},{"content":"If successful, <ph id=\"ph1\">`_write`</ph> returns the number of bytes actually written.","pos":[1236,1305],"source":"If successful, `_write` returns the number of bytes actually written."},{"content":"If the actual space remaining on the disk is less than the size of the buffer the function is trying to write to the disk, <ph id=\"ph1\">`_write`</ph> fails and does not flush any of the buffer's contents to the disk.","pos":[1306,1504],"source":" If the actual space remaining on the disk is less than the size of the buffer the function is trying to write to the disk, `_write` fails and does not flush any of the buffer's contents to the disk."},{"content":"A return value of –1 indicates an error.","pos":[1505,1545]},{"content":"If invalid parameters are passed, this function invokes the invalid parameter handler, as described in <bpt id=\"p1\">[</bpt>Parameter Validation<ept id=\"p1\">](../../c-runtime-library/parameter-validation.md)</ept>.","pos":[1546,1721],"source":" If invalid parameters are passed, this function invokes the invalid parameter handler, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md)."},{"content":"If execution is allowed to continue, the function returns -1 and <ph id=\"ph1\">`errno`</ph> is set to one of three values: <ph id=\"ph2\">`EBADF`</ph>, which means the file descriptor is invalid or the file is not opened for writing; <ph id=\"ph3\">`ENOSPC`</ph>, which means there is not enough space left on the device for the operation; or <ph id=\"ph4\">`EINVAL`</ph>, which means that <ph id=\"ph5\">`buffer`</ph> was a null pointer or that an odd <ph id=\"ph6\">`count`</ph> of bytes was passed to be written to a file in Unicode mode.","pos":[1722,2144],"source":" If execution is allowed to continue, the function returns -1 and `errno` is set to one of three values: `EBADF`, which means the file descriptor is invalid or the file is not opened for writing; `ENOSPC`, which means there is not enough space left on the device for the operation; or `EINVAL`, which means that `buffer` was a null pointer or that an odd `count` of bytes was passed to be written to a file in Unicode mode."},{"pos":[2151,2328],"content":"For more information about these and other return codes, see <bpt id=\"p1\">[</bpt>errno, _doserrno, _sys_errlist, and _sys_nerr<ept id=\"p1\">](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md)</ept>.","source":"For more information about these and other return codes, see [errno, _doserrno, _sys_errlist, and _sys_nerr](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md)."},{"content":"If the file is opened in text mode, each linefeed character is replaced with a carriage return – linefeed pair in the output.","pos":[2335,2460]},{"content":"The replacement does not affect the return value.","pos":[2461,2510]},{"content":"When the file is opened in Unicode translation mode—for example, if <ph id=\"ph1\">`fd`</ph> is opened by using <ph id=\"ph2\">`_open`</ph> or <ph id=\"ph3\">`_sopen`</ph> and a mode parameter that includes <ph id=\"ph4\">`_O_WTEXT`</ph>, <ph id=\"ph5\">`_O_U16TEXT`</ph>, or <ph id=\"ph6\">`_O_U8TEXT`</ph>, or if it is opened by using <ph id=\"ph7\">`fopen`</ph> and a mode parameter that includes <ph id=\"ph8\">`ccs=UNICODE`</ph>, <ph id=\"ph9\">`ccs=UTF-16LE`</ph>, or <ph id=\"ph10\">`ccs=UTF-8`</ph>, or if the mode is changed to a Unicode translation mode by using <ph id=\"ph11\">`_setmode`</ph>—<ph id=\"ph12\">`buffer`</ph> is interpreted as a pointer to an array of <ph id=\"ph13\">`wchar_t`</ph> that contains <bpt id=\"p1\">**</bpt>UTF-16<ept id=\"p1\">**</ept> data.","pos":[2517,2992],"source":"When the file is opened in Unicode translation mode—for example, if `fd` is opened by using `_open` or `_sopen` and a mode parameter that includes `_O_WTEXT`, `_O_U16TEXT`, or `_O_U8TEXT`, or if it is opened by using `fopen` and a mode parameter that includes `ccs=UNICODE`, `ccs=UTF-16LE`, or `ccs=UTF-8`, or if the mode is changed to a Unicode translation mode by using `_setmode`—`buffer` is interpreted as a pointer to an array of `wchar_t` that contains **UTF-16** data."},{"content":"An attempt to write an odd number of bytes in this mode causes a parameter validation error.","pos":[2993,3085]},{"content":"Remarks","pos":[3094,3101]},{"content":"The <ph id=\"ph1\">`_write`</ph> function writes <ph id=\"ph2\">`count`</ph> bytes from <ph id=\"ph3\">`buffer`</ph> into the file associated with <ph id=\"ph4\">`fd`</ph>.","pos":[3105,3197],"source":"The `_write` function writes `count` bytes from `buffer` into the file associated with `fd`."},{"content":"The write operation begins at the current position of the file pointer (if any) associated with the given file.","pos":[3198,3309]},{"content":"If the file is open for appending, the operation begins at the current end of the file.","pos":[3310,3397]},{"content":"After the write operation, the file pointer is increased by the number of bytes actually written.","pos":[3398,3495]},{"content":"When writing to files opened in text mode, <ph id=\"ph1\">`_write`</ph> treats a CTRL+Z character as the logical end-of-file.","pos":[3502,3607],"source":"When writing to files opened in text mode, `_write` treats a CTRL+Z character as the logical end-of-file."},{"content":"When writing to a device, <ph id=\"ph1\">`_write`</ph> treats a CTRL+Z character in the buffer as an output terminator.","pos":[3608,3707],"source":" When writing to a device, `_write` treats a CTRL+Z character in the buffer as an output terminator."},{"content":"Requirements","pos":[3716,3728]},{"content":"Routine","pos":[3735,3742]},{"content":"Required header","pos":[3743,3758]},{"content":"io.h&gt;","pos":[3814,3819],"source":"io.h>"},{"pos":[3827,3931],"content":"For additional compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept>.","source":"For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md)."},{"content":"Example","pos":[3940,3947]},{"content":"See Also","pos":[5266,5274]},{"content":"Low-Level I/O","pos":[5279,5292]},{"content":"fwrite","pos":[5341,5347]},{"content":"_open, _wopen","pos":[5399,5412]},{"content":"_read","pos":[5468,5473]},{"content":"_setmode","pos":[5523,5531]}],"content":"---\ntitle: \"_write | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"_write\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"_write\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"_write function\"\n  - \"write function\"\n  - \"files [C++], writing to\"\nms.assetid: 7b868c33-766f-4e1a-95a7-e8d25f0604c4\ncaps.latest.revision: 21\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# _write\nWrites data to a file.  \n  \n## Syntax  \n  \n```  \nint _write(  \n   int fd,  \n   const void *buffer,  \n   unsigned int count   \n);  \n```  \n  \n#### Parameters  \n `fd`  \n File descriptor of file into which data is written.  \n  \n `buffer`  \n Data to be written.  \n  \n `count`  \n Number of bytes.  \n  \n## Return Value  \n If successful, `_write` returns the number of bytes actually written. If the actual space remaining on the disk is less than the size of the buffer the function is trying to write to the disk, `_write` fails and does not flush any of the buffer's contents to the disk. A return value of –1 indicates an error. If invalid parameters are passed, this function invokes the invalid parameter handler, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md). If execution is allowed to continue, the function returns -1 and `errno` is set to one of three values: `EBADF`, which means the file descriptor is invalid or the file is not opened for writing; `ENOSPC`, which means there is not enough space left on the device for the operation; or `EINVAL`, which means that `buffer` was a null pointer or that an odd `count` of bytes was passed to be written to a file in Unicode mode.  \n  \n For more information about these and other return codes, see [errno, _doserrno, _sys_errlist, and _sys_nerr](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md).  \n  \n If the file is opened in text mode, each linefeed character is replaced with a carriage return – linefeed pair in the output. The replacement does not affect the return value.  \n  \n When the file is opened in Unicode translation mode—for example, if `fd` is opened by using `_open` or `_sopen` and a mode parameter that includes `_O_WTEXT`, `_O_U16TEXT`, or `_O_U8TEXT`, or if it is opened by using `fopen` and a mode parameter that includes `ccs=UNICODE`, `ccs=UTF-16LE`, or `ccs=UTF-8`, or if the mode is changed to a Unicode translation mode by using `_setmode`—`buffer` is interpreted as a pointer to an array of `wchar_t` that contains **UTF-16** data. An attempt to write an odd number of bytes in this mode causes a parameter validation error.  \n  \n## Remarks  \n The `_write` function writes `count` bytes from `buffer` into the file associated with `fd`. The write operation begins at the current position of the file pointer (if any) associated with the given file. If the file is open for appending, the operation begins at the current end of the file. After the write operation, the file pointer is increased by the number of bytes actually written.  \n  \n When writing to files opened in text mode, `_write` treats a CTRL+Z character as the logical end-of-file. When writing to a device, `_write` treats a CTRL+Z character in the buffer as an output terminator.  \n  \n## Requirements  \n  \n|Routine|Required header|  \n|-------------|---------------------|  \n|`_write`|\\<io.h>|  \n  \n For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md).  \n  \n## Example  \n  \n```  \n// crt__write.c  \n//   \n// This program opens a file for output and uses _write to write  \n// some bytes to the file.  \n  \n#include <io.h>  \n#include <stdio.h>  \n#include <stdlib.h>  \n#include <fcntl.h>  \n#include <sys/types.h>  \n#include <sys/stat.h>  \n#include <errno.h>  \n#include <share.h>  \n  \nchar buffer[] = \"This is a test of '_write' function\";  \n  \nint main( void )  \n{  \n   int         fileHandle = 0;  \n   unsigned    bytesWritten = 0;  \n  \n   if ( _sopen_s(&fileHandle, \"write.o\", _O_RDWR | _O_CREAT,  \n                  _SH_DENYNO, _S_IREAD | _S_IWRITE) )  \n      return -1;  \n  \n   if (( bytesWritten = _write( fileHandle, buffer, sizeof( buffer ))) == -1 )  \n   {  \n      switch(errno)  \n      {  \n         case EBADF:  \n            perror(\"Bad file descriptor!\");  \n            break;  \n         case ENOSPC:  \n            perror(\"No space left on device!\");  \n            break;  \n         case EINVAL:  \n            perror(\"Invalid parameter: buffer was NULL!\");  \n            break;  \n         default:  \n            // An unrelated error occured   \n            perror(\"Unexpected error!\");  \n      }  \n   }  \n   else  \n   {  \n      printf_s( \"Wrote %u bytes to file.\\n\", bytesWritten );  \n   }  \n   _close( fileHandle );  \n}  \n```  \n  \n```Output  \nWrote 36 bytes to file.  \n```  \n  \n## See Also  \n [Low-Level I/O](../../c-runtime-library/low-level-i-o.md)   \n [fwrite](../../c-runtime-library/reference/fwrite.md)   \n [_open, _wopen](../../c-runtime-library/reference/open-wopen.md)   \n [_read](../../c-runtime-library/reference/read.md)   \n [_setmode](../../c-runtime-library/reference/setmode.md)"}