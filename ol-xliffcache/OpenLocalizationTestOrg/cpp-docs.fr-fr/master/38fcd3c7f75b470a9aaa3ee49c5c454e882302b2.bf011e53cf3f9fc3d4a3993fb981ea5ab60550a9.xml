{"nodes":[{"pos":[12,53],"content":"Lambda Expression Syntax | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Lambda Expression Syntax | Microsoft Docs","pos":[0,41]}]},{"content":"Lambda Expression Syntax","pos":[642,666]},{"content":"This article demonstrates the syntax and structural elements of lambda expressions.","pos":[667,750]},{"content":"For a description of lambda expressions, see <bpt id=\"p1\">[</bpt>Lambda Expressions<ept id=\"p1\">](../cpp/lambda-expressions-in-cpp.md)</ept>.","pos":[751,854],"source":" For a description of lambda expressions, see [Lambda Expressions](../cpp/lambda-expressions-in-cpp.md)."},{"content":"Function Objects vs. Lambdas","pos":[863,891]},{"content":"When you write code, you probably use function pointers and function objects to solve problems and perform calculations, especially when you use <bpt id=\"p1\">[</bpt>STL algorithms<ept id=\"p1\">](../cpp/algorithms-modern-cpp.md)</ept>.","pos":[895,1090],"source":"When you write code, you probably use function pointers and function objects to solve problems and perform calculations, especially when you use [STL algorithms](../cpp/algorithms-modern-cpp.md)."},{"content":"Function pointers and function objects each have advantages and disadvantages—for example, function pointers have minimal syntactic overhead but do not retain state within a scope, and function objects can maintain state but require the syntactic overhead of a class definition.","pos":[1091,1369]},{"content":"A lambda combines the benefits of function pointers and function objects and avoids their disadvantages.","pos":[1376,1480]},{"content":"Like a function objects, a lambda is flexible and can maintain state, but unlike a function object, its compact syntax doesn't require an explicit class definition.","pos":[1481,1645]},{"content":"By using lambdas, you can write code that's less cumbersome and less prone to errors than the code for an equivalent function object.","pos":[1646,1779]},{"content":"The following examples compare the use of a lambda to the use of a function object.","pos":[1786,1869]},{"content":"The first example uses a lambda to print to the console whether each element in a <ph id=\"ph1\">`vector`</ph> object is even or odd.","pos":[1870,1983],"source":" The first example uses a lambda to print to the console whether each element in a `vector` object is even or odd."},{"content":"The second example uses a function object to accomplish the same task.","pos":[1984,2054]},{"content":"Example 1: Using a Lambda","pos":[2063,2088]},{"content":"This example passes a lambda to the <ph id=\"ph1\">`for_each`</ph> function.","pos":[2092,2148],"source":"This example passes a lambda to the `for_each` function."},{"content":"The lambda prints a result that states whether each element in a <ph id=\"ph1\">`vector`</ph> object is even or odd.","pos":[2149,2245],"source":" The lambda prints a result that states whether each element in a `vector` object is even or odd."},{"content":"Code","pos":[2255,2259]},{"content":"Output","pos":[3140,3146]},{"content":"Comments","pos":[3325,3333]},{"content":"In the example, the third argument to the <ph id=\"ph1\">`for_each`</ph> function is a lambda.","pos":[3337,3411],"source":"In the example, the third argument to the `for_each` function is a lambda."},{"content":"The <ph id=\"ph1\">`[&amp;evenCount]`</ph> part specifies the capture clause of the expression, <ph id=\"ph2\">`(int n)`</ph> specifies the parameter list, and remaining part specifies the body of the expression.","pos":[3412,3580],"source":" The `[&evenCount]` part specifies the capture clause of the expression, `(int n)` specifies the parameter list, and remaining part specifies the body of the expression."},{"content":"Example 2: Using a Function Object","pos":[3589,3623]},{"content":"Sometimes a lambda would be too unwieldy to extend much further than the previous example.","pos":[3627,3717]},{"content":"The next example uses a function object instead of a lambda, together with the <ph id=\"ph1\">`for_each`</ph> function, to produce the same results as Example 1.","pos":[3718,3859],"source":" The next example uses a function object instead of a lambda, together with the `for_each` function, to produce the same results as Example 1."},{"content":"Both examples store the count of even numbers in a <ph id=\"ph1\">`vector`</ph> object.","pos":[3860,3927],"source":" Both examples store the count of even numbers in a `vector` object."},{"content":"To maintain the state of the operation, the <ph id=\"ph1\">`FunctorClass`</ph> class stores the <ph id=\"ph2\">`m_evenCount`</ph> variable by reference as a member variable.","pos":[3928,4061],"source":" To maintain the state of the operation, the `FunctorClass` class stores the `m_evenCount` variable by reference as a member variable."},{"content":"To perform the operation, <ph id=\"ph1\">`FunctorClass`</ph> implements the function-call operator, <ph id=\"ph2\">`operator()`</ph>.","pos":[4062,4155],"source":" To perform the operation, `FunctorClass` implements the function-call operator, `operator()`."},{"content":"The Visual C++ compiler generates code that is comparable in size and performance to the lambda code in Example 1.","pos":[4156,4270]},{"content":"For a basic problem like the one in this article, the simpler lambda design is probably better than the function-object design.","pos":[4271,4398]},{"content":"However, if you think that the functionality might require significant expansion in the future, then use a function object design so that code maintenance will be easier.","pos":[4399,4569]},{"content":"For more information about the <ph id=\"ph1\">`operator()`</ph>, see <bpt id=\"p1\">[</bpt>Function Call<ept id=\"p1\">](../cpp/function-call-cpp.md)</ept>.","pos":[4576,4670],"source":"For more information about the `operator()`, see [Function Call](../cpp/function-call-cpp.md)."},{"content":"For more information about the <ph id=\"ph1\">`for_each`</ph> function, see <bpt id=\"p1\">[</bpt>for_each<ept id=\"p1\">](http://msdn.microsoft.com/Library/8cb2ae72-bef6-488b-b011-0475c0787e33)</ept>.","pos":[4671,4810],"source":" For more information about the `for_each` function, see [for_each](http://msdn.microsoft.com/Library/8cb2ae72-bef6-488b-b011-0475c0787e33)."},{"content":"Code","pos":[4820,4824]},{"content":"Output","pos":[6304,6310]},{"content":"See Also","pos":[6488,6496]},{"content":"Lambda Expressions","pos":[6501,6519]},{"content":"Examples of Lambda Expressions","pos":[6563,6593]},{"content":"generate","pos":[6642,6650]},{"content":"generate_n","pos":[6729,6739]},{"content":"for_each","pos":[6818,6826]},{"content":"Exception Specifications (throw)","pos":[6905,6937]},{"content":"Compiler Warning (level 1) C4297","pos":[6990,7022]},{"content":"Microsoft-Specific Modifiers","pos":[7100,7128]}],"content":"---\ntitle: \"Lambda Expression Syntax | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"language-reference\"\nf1_keywords: \n  - \"VCF1 Lambda_CPP\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"lambda expressions [C++], syntax\"\nms.assetid: 5d6154a4-f34d-4a15-970d-7e7de45f54e9\ncaps.latest.revision: 26\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Lambda Expression Syntax\nThis article demonstrates the syntax and structural elements of lambda expressions. For a description of lambda expressions, see [Lambda Expressions](../cpp/lambda-expressions-in-cpp.md).  \n  \n## Function Objects vs. Lambdas  \n When you write code, you probably use function pointers and function objects to solve problems and perform calculations, especially when you use [STL algorithms](../cpp/algorithms-modern-cpp.md). Function pointers and function objects each have advantages and disadvantages—for example, function pointers have minimal syntactic overhead but do not retain state within a scope, and function objects can maintain state but require the syntactic overhead of a class definition.  \n  \n A lambda combines the benefits of function pointers and function objects and avoids their disadvantages. Like a function objects, a lambda is flexible and can maintain state, but unlike a function object, its compact syntax doesn't require an explicit class definition. By using lambdas, you can write code that's less cumbersome and less prone to errors than the code for an equivalent function object.  \n  \n The following examples compare the use of a lambda to the use of a function object. The first example uses a lambda to print to the console whether each element in a `vector` object is even or odd. The second example uses a function object to accomplish the same task.  \n  \n## Example 1: Using a Lambda  \n This example passes a lambda to the `for_each` function. The lambda prints a result that states whether each element in a `vector` object is even or odd.  \n  \n### Code  \n  \n```cpp  \n// even_lambda.cpp  \n// compile with: cl /EHsc /nologo /W4 /MTd  \n#include <algorithm>  \n#include <iostream>  \n#include <vector>  \nusing namespace std;  \n  \nint main()   \n{  \n   // Create a vector object that contains 10 elements.  \n   vector<int> v;  \n   for (int i = 1; i < 10; ++i) {  \n      v.push_back(i);  \n   }  \n  \n   // Count the number of even numbers in the vector by   \n   // using the for_each function and a lambda.  \n   int evenCount = 0;  \n   for_each(v.begin(), v.end(), [&evenCount] (int n) {  \n      cout << n;  \n      if (n % 2 == 0) {  \n         cout << \" is even \" << endl;  \n         ++evenCount;  \n      } else {  \n         cout << \" is odd \" << endl;  \n      }  \n   });  \n  \n   // Print the count of even numbers to the console.  \n   cout << \"There are \" << evenCount   \n        << \" even numbers in the vector.\" << endl;  \n}  \n```  \n  \n### Output  \n  \n```Output  \n1 is odd  \n2 is even  \n3 is odd  \n4 is even  \n5 is odd  \n6 is even  \n7 is odd  \n8 is even  \n9 is odd  \nThere are 4 even numbers in the vector.  \n  \n```  \n  \n### Comments  \n In the example, the third argument to the `for_each` function is a lambda. The `[&evenCount]` part specifies the capture clause of the expression, `(int n)` specifies the parameter list, and remaining part specifies the body of the expression.  \n  \n## Example 2: Using a Function Object  \n Sometimes a lambda would be too unwieldy to extend much further than the previous example. The next example uses a function object instead of a lambda, together with the `for_each` function, to produce the same results as Example 1. Both examples store the count of even numbers in a `vector` object. To maintain the state of the operation, the `FunctorClass` class stores the `m_evenCount` variable by reference as a member variable. To perform the operation, `FunctorClass` implements the function-call operator, `operator()`. The Visual C++ compiler generates code that is comparable in size and performance to the lambda code in Example 1. For a basic problem like the one in this article, the simpler lambda design is probably better than the function-object design. However, if you think that the functionality might require significant expansion in the future, then use a function object design so that code maintenance will be easier.  \n  \n For more information about the `operator()`, see [Function Call](../cpp/function-call-cpp.md). For more information about the `for_each` function, see [for_each](http://msdn.microsoft.com/Library/8cb2ae72-bef6-488b-b011-0475c0787e33).  \n  \n### Code  \n  \n```cpp  \n// even_functor.cpp  \n// compile with: /EHsc  \n#include <algorithm>  \n#include <iostream>  \n#include <vector>  \nusing namespace std;  \n  \nclass FunctorClass  \n{  \npublic:  \n    // The required constructor for this example.  \n    explicit FunctorClass(int& evenCount)  \n        : m_evenCount(evenCount) { }  \n  \n    // The function-call operator prints whether the number is  \n    // even or odd. If the number is even, this method updates  \n    // the counter.  \n    void operator()(int n) const {  \n        cout << n;  \n  \n        if (n % 2 == 0) {  \n            cout << \" is even \" << endl;  \n            ++m_evenCount;  \n        } else {  \n            cout << \" is odd \" << endl;  \n        }  \n    }  \n  \nprivate:  \n    // Default assignment operator to silence warning C4512.  \n    FunctorClass& operator=(const FunctorClass&);  \n  \n    int& m_evenCount; // the number of even variables in the vector.  \n};  \n  \nint main()  \n{  \n    // Create a vector object that contains 10 elements.  \n    vector<int> v;  \n    for (int i = 1; i < 10; ++i) {  \n        v.push_back(i);  \n    }  \n  \n    // Count the number of even numbers in the vector by   \n    // using the for_each function and a function object.  \n    int evenCount = 0;  \n    for_each(v.begin(), v.end(), FunctorClass(evenCount));  \n  \n    // Print the count of even numbers to the console.  \n    cout << \"There are \" << evenCount  \n        << \" even numbers in the vector.\" << endl;  \n}  \n  \n```  \n  \n## Output  \n  \n```Output  \n1 is odd  \n2 is even  \n3 is odd  \n4 is even  \n5 is odd  \n6 is even  \n7 is odd  \n8 is even  \n9 is odd  \nThere are 4 even numbers in the vector.  \n  \n```  \n  \n## See Also  \n [Lambda Expressions](../cpp/lambda-expressions-in-cpp.md)   \n [Examples of Lambda Expressions](../cpp/examples-of-lambda-expressions.md)   \n [generate](http://msdn.microsoft.com/Library/0353f358-9651-4e00-b0c9-5bca720539a3)   \n [generate_n](http://msdn.microsoft.com/Library/377e5b0f-1bb8-4b77-9449-fbebf57f6e5e)   \n [for_each](http://msdn.microsoft.com/Library/8cb2ae72-bef6-488b-b011-0475c0787e33)   \n [Exception Specifications (throw)](../cpp/exception-specifications-throw-cpp.md)   \n [Compiler Warning (level 1) C4297](../error-messages/compiler-warnings/compiler-warning-level-1-c4297.md)   \n [Microsoft-Specific Modifiers](../cpp/microsoft-specific-modifiers.md)"}