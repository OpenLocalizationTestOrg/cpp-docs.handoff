{"nodes":[{"pos":[12,58],"content":"A Sample Generic-Text Program | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"A Sample Generic-Text Program | Microsoft Docs","pos":[0,46]}]},{"content":"A Sample Generic-Text Program","pos":[732,761]},{"content":"Microsoft Specific","pos":[764,782]},{"content":"The following program, GENTEXT.C, provides a more detailed illustration of the use of generic-text mappings defined in TCHAR.H:","pos":[791,918]},{"pos":[1839,1913],"content":"If <ph id=\"ph1\">`_MBCS`</ph> has been defined, GENTEXT.C maps to the following MBCS program:","source":"If `_MBCS` has been defined, GENTEXT.C maps to the following MBCS program:"},{"content":"If <ph id=\"ph1\">`_UNICODE`</ph> has been defined, GENTEXT.C maps to the following Unicode version of the program.","pos":[2727,2822],"source":"If `_UNICODE` has been defined, GENTEXT.C maps to the following Unicode version of the program."},{"content":"For more information about using <ph id=\"ph1\">`wmain`</ph> in Unicode programs as a replacement for <ph id=\"ph2\">`main`</ph>, see <bpt id=\"p1\">[</bpt>Using wmain<ept id=\"p1\">](../c-language/using-wmain.md)</ept> in <bpt id=\"p2\">*</bpt>C Language Reference<ept id=\"p2\">*</ept>.","pos":[2823,2987],"source":" For more information about using `wmain` in Unicode programs as a replacement for `main`, see [Using wmain](../c-language/using-wmain.md) in *C Language Reference*."},{"pos":[3806,3911],"content":"If neither <ph id=\"ph1\">`_MBCS`</ph> nor <ph id=\"ph2\">`_UNICODE`</ph> has been defined, GENTEXT.C maps to single-byte ASCII code, as follows:","source":"If neither `_MBCS` nor `_UNICODE` has been defined, GENTEXT.C maps to single-byte ASCII code, as follows:"},{"content":"END Microsoft Specific","pos":[4723,4745]},{"content":"See Also","pos":[4756,4764]},{"content":"Generic-Text Mappings","pos":[4769,4790]},{"content":"Data Type Mappings","pos":[4844,4862]},{"content":"Constant and Global Variable Mappings","pos":[4913,4950]},{"content":"Routine Mappings","pos":[5020,5036]},{"content":"Using Generic-Text Mappings","pos":[5085,5112]}],"content":"---\ntitle: \"A Sample Generic-Text Program | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"_TCHAR type\"\n  - \"mappings, TCHAR.H data types\"\n  - \"generic-text example [CRT]\"\n  - \"TCHAR type\"\n  - \"TCHAR.H data types, mapping\"\nms.assetid: a03de0db-8118-4bd9-a03f-640e8dfc5ed3\ncaps.latest.revision: 10\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"ru-ru\"\n  - \"zh-cn\"\n  - \"zh-tw\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"tr-tr\"\n---\n# A Sample Generic-Text Program\n**Microsoft Specific**  \n  \n The following program, GENTEXT.C, provides a more detailed illustration of the use of generic-text mappings defined in TCHAR.H:  \n  \n```  \n// GENTEXT.C  \n// use of generic-text mappings defined in TCHAR.H  \n  \n#include <stdio.h>  \n#include <stdlib.h>  \n#include <string.h>  \n#include <direct.h>  \n#include <errno.h>  \n#include <tchar.h>  \n  \nint __cdecl _tmain(int argc, _TCHAR **argv, _TCHAR **envp)  \n{  \n   _TCHAR buff[_MAX_PATH];  \n   _TCHAR *str = _T(\"Astring\");  \n   char *amsg = \"Reversed\";  \n   wchar_t *wmsg = L\"Is\";  \n  \n#ifdef _UNICODE  \n   printf(\"Unicode version\\n\");  \n#else /* _UNICODE */  \n#ifdef _MBCS  \n   printf(\"MBCS version\\n\");  \n#else  \n   printf(\"SBCS version\\n\");  \n#endif  \n#endif /* _UNICODE */  \n  \n   if (_tgetcwd(buff, _MAX_PATH) == NULL)  \n       printf(\"Can't Get Current Directory - errno=%d\\n\", errno);  \n   else  \n       _tprintf(_T(\"Current Directory is '%s'\\n\"), buff);  \n   _tprintf(_T(\"'%s' %hs %ls:\\n\"), str, amsg, wmsg);  \n   _tprintf(_T(\"'%s'\\n\"), _tcsrev(_tcsdup(str)));  \n   return 0;  \n}  \n  \n```  \n  \n If `_MBCS` has been defined, GENTEXT.C maps to the following MBCS program:  \n  \n```  \n// crt_mbcsgtxt.c  \n  \n/*   \n * Use of generic-text mappings defined in TCHAR.H  \n * Generic-Text-Mapping example program  \n * MBCS version of GENTEXT.C  \n */  \n  \n#include <stdio.h>  \n#include <stdlib.h>  \n#include <mbstring.h>  \n#include <direct.h>  \n  \nint __cdecl main(int argc, char **argv, char **envp)  \n{  \n   char buff[_MAX_PATH];  \n   char *str = \"Astring\";  \n   char *amsg = \"Reversed\";  \n   wchar_t *wmsg = L\"Is\";  \n  \n   printf(\"MBCS version\\n\");  \n  \n   if (_getcwd(buff, _MAX_PATH) == NULL) {  \n       printf(\"Can't Get Current Directory - errno=%d\\n\", errno);  \n   }  \n   else {  \n       printf(\"Current Directory is '%s'\\n\", buff);  \n   }  \n  \n   printf(\"'%s' %hs %ls:\\n\", str, amsg, wmsg);  \n   printf(\"'%s'\\n\", _mbsrev(_mbsdup((unsigned char*) str)));  \n   return 0;  \n}  \n```  \n  \n If `_UNICODE` has been defined, GENTEXT.C maps to the following Unicode version of the program. For more information about using `wmain` in Unicode programs as a replacement for `main`, see [Using wmain](../c-language/using-wmain.md) in *C Language Reference*.  \n  \n```  \n// crt_unicgtxt.c  \n  \n/*   \n * Use of generic-text mappings defined in TCHAR.H  \n * Generic-Text-Mapping example program  \n * Unicode version of GENTEXT.C  \n */  \n  \n#include <stdio.h>  \n#include <stdlib.h>  \n#include <string.h>  \n#include <direct.h>  \n  \nint __cdecl wmain(int argc, wchar_t **argv, wchar_t **envp)  \n{  \n   wchar_t buff[_MAX_PATH];  \n   wchar_t *str = L\"Astring\";  \n   char *amsg = \"Reversed\";  \n   wchar_t *wmsg = L\"Is\";  \n  \n   printf(\"Unicode version\\n\");  \n  \n   if (_wgetcwd(buff, _MAX_PATH) == NULL) {  \n      printf(\"Can't Get Current Directory - errno=%d\\n\", errno);  \n   }  \n   else {  \n       wprintf(L\"Current Directory is '%s'\\n\", buff);  \n   }  \n  \n   wprintf(L\"'%s' %hs %ls:\\n\", str, amsg, wmsg);  \n   wprintf(L\"'%s'\\n\", wcsrev(wcsdup(str)));  \n   return 0;  \n}  \n```  \n  \n If neither `_MBCS` nor `_UNICODE` has been defined, GENTEXT.C maps to single-byte ASCII code, as follows:  \n  \n```  \n// crt_sbcsgtxt.c  \n/*   \n * Use of generic-text mappings defined in TCHAR.H  \n * Generic-Text-Mapping example program  \n * Single-byte (SBCS) Ascii version of GENTEXT.C  \n */  \n  \n#include <stdio.h>  \n#include <stdlib.h>  \n#include <string.h>  \n#include <direct.h>  \n  \nint __cdecl main(int argc, char **argv, char **envp)  \n{  \n   char buff[_MAX_PATH];  \n   char *str = \"Astring\";  \n   char *amsg = \"Reversed\";  \n   wchar_t *wmsg = L\"Is\";  \n  \n   printf(\"SBCS version\\n\");  \n  \n   if (_getcwd(buff, _MAX_PATH) == NULL) {  \n       printf(\"Can't Get Current Directory - errno=%d\\n\", errno);  \n   }  \n   else {  \n       printf(\"Current Directory is '%s'\\n\", buff);  \n   }  \n  \n   printf(\"'%s' %hs %ls:\\n\", str, amsg, wmsg);  \n   printf(\"'%s'\\n\", strrev(strdup(str)));  \n   return 0;  \n}  \n```  \n  \n **END Microsoft Specific**  \n  \n## See Also  \n [Generic-Text Mappings](../c-runtime-library/generic-text-mappings.md)   \n [Data Type Mappings](../c-runtime-library/data-type-mappings.md)   \n [Constant and Global Variable Mappings](../c-runtime-library/constant-and-global-variable-mappings.md)   \n [Routine Mappings](../c-runtime-library/routine-mappings.md)   \n [Using Generic-Text Mappings](../c-runtime-library/using-generic-text-mappings.md)"}