{"nodes":[{"pos":[12,61],"content":"Compiler Warning (level 1) C4540 | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Compiler Warning (level 1) C4540 | Microsoft Docs","pos":[0,49]}]},{"content":"Compiler Warning (level 1) C4540","pos":[609,641]},{"content":"dynamic_cast used to convert to inaccessible or ambiguous base; run-time test will fail ('type1' to 'type2')","pos":[642,750]},{"content":"You used <ph id=\"ph1\">`dynamic_cast`</ph> to convert from one type to another.","pos":[757,817],"source":"You used `dynamic_cast` to convert from one type to another."},{"content":"The compiler determined that the cast would always fail (return <bpt id=\"p1\">**</bpt>NULL<ept id=\"p1\">**</ept>) because a base class is inaccessible (<ph id=\"ph1\">`private`</ph>, for instance) or ambiguous (appears more than once in the class hierarchy, for instance).","pos":[818,1030],"source":" The compiler determined that the cast would always fail (return **NULL**) because a base class is inaccessible (`private`, for instance) or ambiguous (appears more than once in the class hierarchy, for instance)."},{"content":"The following shows an example of this warning.","pos":[1037,1084]},{"content":"Class <bpt id=\"p1\">**</bpt>B<ept id=\"p1\">**</ept> is derived from class <bpt id=\"p2\">**</bpt>A<ept id=\"p2\">**</ept>. The program uses <ph id=\"ph1\">`dynamic_cast`</ph> to cast from class <bpt id=\"p3\">**</bpt>B<ept id=\"p3\">**</ept> (the derived class) to class <bpt id=\"p4\">**</bpt>A<ept id=\"p4\">**</ept>, which will always fail because class <bpt id=\"p5\">**</bpt>B<ept id=\"p5\">**</ept> is <ph id=\"ph2\">`private`</ph> and thus inaccessible.","pos":[1085,1297],"source":" Class **B** is derived from class **A**. The program uses `dynamic_cast` to cast from class **B** (the derived class) to class **A**, which will always fail because class **B** is `private` and thus inaccessible."},{"content":"Changing the access of <bpt id=\"p1\">**</bpt>A<ept id=\"p1\">**</ept> to <bpt id=\"p2\">**</bpt>public<ept id=\"p2\">**</ept> will resolve the warning.","pos":[1298,1366],"source":" Changing the access of **A** to **public** will resolve the warning."}],"content":"---\ntitle: \"Compiler Warning (level 1) C4540 | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"error-reference\"\nf1_keywords: \n  - \"C4540\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"C4540\"\nms.assetid: 8085e748-5f4d-43c2-b06d-eaf794edbf72\ncaps.latest.revision: 7\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Compiler Warning (level 1) C4540\ndynamic_cast used to convert to inaccessible or ambiguous base; run-time test will fail ('type1' to 'type2')  \n  \n You used `dynamic_cast` to convert from one type to another. The compiler determined that the cast would always fail (return **NULL**) because a base class is inaccessible (`private`, for instance) or ambiguous (appears more than once in the class hierarchy, for instance).  \n  \n The following shows an example of this warning. Class **B** is derived from class **A**. The program uses `dynamic_cast` to cast from class **B** (the derived class) to class **A**, which will always fail because class **B** is `private` and thus inaccessible. Changing the access of **A** to **public** will resolve the warning.  \n  \n```  \n// C4540.cpp  \n// compile with: /W1  \n  \nstruct A {   \n   virtual void g() {}  \n};  \n  \nstruct B : private A {  \n   virtual void g() {}  \n};  \n  \nint main() {  \n   B b;  \n   A * ap = dynamic_cast<A*>(&b);   // C4540  \n}  \n```"}