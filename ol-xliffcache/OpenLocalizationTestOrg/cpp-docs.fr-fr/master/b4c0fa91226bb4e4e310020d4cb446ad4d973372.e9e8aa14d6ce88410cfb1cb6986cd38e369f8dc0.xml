{"nodes":[{"pos":[12,35],"content":"_tzset | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"_tzset | Microsoft Docs","pos":[0,23]}]},{"pos":[975,981],"content":"_tzset","linkify":"_tzset","nodes":[{"content":"_tzset","pos":[0,6]}]},{"content":"Sets time environment variables.","pos":[982,1014]},{"pos":[1022,1259],"content":"[!IMPORTANT]\n This API cannot be used in applications that execute in the Windows Runtime. For more information, see                  [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx).","leadings":["","> "],"nodes":[{"content":" This API cannot be used in applications that execute in the Windows Runtime. For more information, see                  [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx).","pos":[13,235],"nodes":[{"content":"This API cannot be used in applications that execute in the Windows Runtime.","pos":[1,77]},{"content":"For more information, see                  <bpt id=\"p1\">[</bpt>CRT functions not supported with /ZW<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx)</ept>.","pos":[78,222],"source":" For more information, see                  [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx)."}]}]},{"pos":[1268,1274],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1321,1328],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">`_tzset`</ph> function uses the current setting of the environment variable <ph id=\"ph2\">`TZ`</ph> to assign values to three global variables: <ph id=\"ph3\">`_daylight`</ph>, <ph id=\"ph4\">`_timezone`</ph>, and <ph id=\"ph5\">`_tzname`</ph>.","pos":[1332,1496],"source":"The `_tzset` function uses the current setting of the environment variable `TZ` to assign values to three global variables: `_daylight`, `_timezone`, and `_tzname`."},{"content":"These variables are used by the <bpt id=\"p1\">[</bpt>_ftime<ept id=\"p1\">](../../c-runtime-library/reference/ftime-ftime32-ftime64.md)</ept> and <bpt id=\"p2\">[</bpt>localtime<ept id=\"p2\">](../../c-runtime-library/reference/localtime-localtime32-localtime64.md)</ept> functions to make corrections from coordinated universal time (UTC) to local time, and by the <ph id=\"ph1\">`time`</ph> function to compute UTC from system time.","pos":[1497,1828],"source":" These variables are used by the [_ftime](../../c-runtime-library/reference/ftime-ftime32-ftime64.md) and [localtime](../../c-runtime-library/reference/localtime-localtime32-localtime64.md) functions to make corrections from coordinated universal time (UTC) to local time, and by the `time` function to compute UTC from system time."},{"content":"Use the following syntax to set the <ph id=\"ph1\">`TZ`</ph> environment variable:","pos":[1829,1891],"source":" Use the following syntax to set the `TZ` environment variable:"},{"pos":[1898,1956],"content":"<ph id=\"ph1\">`set`</ph> <ph id=\"ph2\">`TZ`</ph><ph id=\"ph3\">=</ph><ph id=\"ph4\">`tzn`</ph>[+ &amp;#124; –]<ph id=\"ph5\">`hh`</ph>[<ph id=\"ph6\">`:``mm`</ph>[<ph id=\"ph7\">`:``ss`</ph>] ][<ph id=\"ph8\">`dzn`</ph>]","source":"`set` `TZ`=`tzn`[+ &#124; –]`hh`[`:``mm`[`:``ss`] ][`dzn`]"},{"content":"Three-letter time-zone name, such as PST.","pos":[1972,2013]},{"content":"You must specify the correct offset from local time to UTC.","pos":[2014,2073]},{"content":"Difference in hours between UTC and local time.","pos":[2088,2135]},{"content":"Sign (+) optional for positive values.","pos":[2136,2174]},{"content":"Minutes.","pos":[2189,2197]},{"content":"Separated from <ph id=\"ph1\">`hh`</ph> by a colon (<ph id=\"ph2\">`:`</ph>).","pos":[2198,2235],"source":" Separated from `hh` by a colon (`:`)."},{"content":"Seconds.","pos":[2250,2258]},{"content":"Separated from <ph id=\"ph1\">`mm`</ph> by a colon (<ph id=\"ph2\">`:`</ph>).","pos":[2259,2296],"source":" Separated from `mm` by a colon (`:`)."},{"content":"Three-letter daylight-saving-time zone such as PDT.","pos":[2312,2363]},{"content":"If daylight saving time is never in effect in the locality, set <ph id=\"ph1\">`TZ`</ph> without a value for <ph id=\"ph2\">`dzn`</ph>.","pos":[2364,2459],"source":" If daylight saving time is never in effect in the locality, set `TZ` without a value for `dzn`."},{"content":"The C run-time library assumes the United States' rules for implementing the calculation of daylight saving time (DST).","pos":[2460,2579]},{"pos":[2587,2924],"content":"[!NOTE]\n Take care in computing the sign of the time difference. Because the time difference is the offset from local time to UTC (rather than the reverse), its sign may be the opposite of what you might intuitively expect. For time zones ahead of UTC, the time difference is negative; for those behind UTC, the difference is positive.","leadings":["","> "],"nodes":[{"content":" Take care in computing the sign of the time difference. Because the time difference is the offset from local time to UTC (rather than the reverse), its sign may be the opposite of what you might intuitively expect. For time zones ahead of UTC, the time difference is negative; for those behind UTC, the difference is positive.","pos":[8,335],"nodes":[{"content":"Take care in computing the sign of the time difference.","pos":[1,56]},{"content":"Because the time difference is the offset from local time to UTC (rather than the reverse), its sign may be the opposite of what you might intuitively expect.","pos":[57,215]},{"content":"For time zones ahead of UTC, the time difference is negative; for those behind UTC, the difference is positive.","pos":[216,327]}]}]},{"pos":[2931,3072],"content":"For example, to set the <ph id=\"ph1\">`TZ`</ph> environment variable to correspond to the current time zone in Germany, enter the following on the command line:","source":"For example, to set the `TZ` environment variable to correspond to the current time zone in Germany, enter the following on the command line:"},{"content":"This command uses GST to indicate German standard time, assumes that UTC is one hour behind Germany (or in other words, that Germany is one hour ahead of UTC), and assumes that Germany observes daylight-saving time.","pos":[3112,3327]},{"content":"If the <ph id=\"ph1\">`TZ`</ph> value is not set, _<ph id=\"ph2\">`tzset`</ph> attempts to use the time zone information specified by the operating system.","pos":[3334,3449],"source":"If the `TZ` value is not set, _`tzset` attempts to use the time zone information specified by the operating system."},{"content":"In the Windows operating system, this information is specified in the Date/Time application in Control Panel.","pos":[3450,3559]},{"content":"If <ph id=\"ph1\">`_tzset`</ph> cannot obtain this information, it uses PST8PDT by default, which signifies the Pacific Time zone.","pos":[3560,3670],"source":" If `_tzset` cannot obtain this information, it uses PST8PDT by default, which signifies the Pacific Time zone."},{"pos":[3677,3845],"content":"Based on the <ph id=\"ph1\">`TZ`</ph> environment variable value, the following values are assigned to the global variables <ph id=\"ph2\">`_daylight`</ph>, <ph id=\"ph3\">`_timezone`</ph>, and <ph id=\"ph4\">`_tzname`</ph> when <ph id=\"ph5\">`_tzset`</ph> is called:","source":"Based on the `TZ` environment variable value, the following values are assigned to the global variables `_daylight`, `_timezone`, and `_tzname` when `_tzset` is called:"},{"content":"Global variable","pos":[3852,3867]},{"content":"Description","pos":[3868,3879]},{"content":"Default value","pos":[3880,3893]},{"pos":[3974,4062],"content":"Nonzero value if a daylight-saving-time zone is specified in <ph id=\"ph1\">`TZ`</ph> setting; otherwise, 0.","source":"Nonzero value if a daylight-saving-time zone is specified in `TZ` setting; otherwise, 0."},{"content":"1","pos":[4063,4064]},{"content":"Difference in seconds between local time and UTC.","pos":[4081,4130]},{"content":"28800 (28800 seconds equals 8 hours)","pos":[4131,4167]},{"pos":[4172,4184],"content":"<ph id=\"ph1\">`_tzname`</ph>[0]","source":"`_tzname`[0]"},{"pos":[4185,4281],"content":"String value of time-zone name from <ph id=\"ph1\">`TZ`</ph> environmental variable; empty if <ph id=\"ph2\">`TZ`</ph> has not been set.","source":"String value of time-zone name from `TZ` environmental variable; empty if `TZ` has not been set."},{"content":"PST","pos":[4282,4285]},{"pos":[4290,4302],"content":"<ph id=\"ph1\">`_tzname`</ph>[1]","source":"`_tzname`[1]"},{"pos":[4303,4425],"content":"String value of daylight-saving-time zone; empty if daylight-saving-time zone is omitted from <ph id=\"ph1\">`TZ`</ph> environmental variable.","source":"String value of daylight-saving-time zone; empty if daylight-saving-time zone is omitted from `TZ` environmental variable."},{"content":"PDT","pos":[4426,4429]},{"content":"The default values shown in the preceding table for <ph id=\"ph1\">`_daylight`</ph> and the <ph id=\"ph2\">`_tzname`</ph> array correspond to \"PST8PDT.\"","pos":[4437,4549],"source":"The default values shown in the preceding table for `_daylight` and the `_tzname` array correspond to \"PST8PDT.\""},{"content":"If the DST zone is omitted from the <ph id=\"ph1\">`TZ`</ph> environmental variable, the value of <ph id=\"ph2\">`_daylight`</ph> is 0 and the <ph id=\"ph3\">`_ftime`</ph>, <ph id=\"ph4\">`gmtime`</ph>, and <ph id=\"ph5\">`localtime`</ph> functions return 0 for their DST flags.","pos":[4550,4728],"source":" If the DST zone is omitted from the `TZ` environmental variable, the value of `_daylight` is 0 and the `_ftime`, `gmtime`, and `localtime` functions return 0 for their DST flags."},{"pos":[4737,4749],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"content":"Routine","pos":[4756,4763]},{"content":"Required header","pos":[4764,4779]},{"content":"<ph id=\"ph1\">\\&lt;</ph>time.h&gt;","pos":[4833,4842],"source":"\\<time.h>"},{"pos":[4850,4934],"content":"For more information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept>.","source":"For more information, see [Compatibility](../../c-runtime-library/compatibility.md)."},{"pos":[4943,4950],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[5727,5752],"content":".NET Framework Equivalent","linkify":".NET Framework Equivalent","nodes":[{"content":".NET Framework Equivalent","pos":[0,25]}]},{"content":"Not applicable.","pos":[5756,5771]},{"content":"To call the standard C function, use <ph id=\"ph1\">`PInvoke`</ph>.","pos":[5772,5819],"source":" To call the standard C function, use `PInvoke`."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Platform Invoke Examples<ept id=\"p1\">](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f)</ept>.","pos":[5820,5945],"source":" For more information, see [Platform Invoke Examples](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f)."},{"pos":[5954,5962],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Time Management<ept id=\"p1\">](../../c-runtime-library/time-management.md)</ept><ph id=\"ph1\"> </ph>","pos":[5966,6028],"source":"[Time Management](../../c-runtime-library/time-management.md) "},{"content":"<bpt id=\"p1\"> [</bpt>asctime, _wasctime<ept id=\"p1\">](../../c-runtime-library/reference/asctime-wasctime.md)</ept><ph id=\"ph1\"> </ph>","pos":[6031,6108],"source":" [asctime, _wasctime](../../c-runtime-library/reference/asctime-wasctime.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_ftime, _ftime32, _ftime64<ept id=\"p1\">](../../c-runtime-library/reference/ftime-ftime32-ftime64.md)</ept><ph id=\"ph1\"> </ph>","pos":[6111,6201],"source":" [_ftime, _ftime32, _ftime64](../../c-runtime-library/reference/ftime-ftime32-ftime64.md) "},{"content":"<bpt id=\"p1\"> [</bpt>gmtime, _gmtime32, _gmtime64<ept id=\"p1\">](../../c-runtime-library/reference/gmtime-gmtime32-gmtime64.md)</ept><ph id=\"ph1\"> </ph>","pos":[6204,6299],"source":" [gmtime, _gmtime32, _gmtime64](../../c-runtime-library/reference/gmtime-gmtime32-gmtime64.md) "},{"content":"<bpt id=\"p1\"> [</bpt>localtime, _localtime32, _localtime64<ept id=\"p1\">](../../c-runtime-library/reference/localtime-localtime32-localtime64.md)</ept><ph id=\"ph1\"> </ph>","pos":[6302,6415],"source":" [localtime, _localtime32, _localtime64](../../c-runtime-library/reference/localtime-localtime32-localtime64.md) "},{"content":"<bpt id=\"p1\"> [</bpt>time, _time32, _time64<ept id=\"p1\">](../../c-runtime-library/reference/time-time32-time64.md)</ept><ph id=\"ph1\"> </ph>","pos":[6418,6501],"source":" [time, _time32, _time64](../../c-runtime-library/reference/time-time32-time64.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_utime, _utime32, _utime64, _wutime, _wutime32, _wutime64<ept id=\"p1\">](../../c-runtime-library/reference/utime-utime32-utime64-wutime-wutime32-wutime64.md)</ept>","pos":[6504,6649],"source":" [_utime, _utime32, _utime64, _wutime, _wutime32, _wutime64](../../c-runtime-library/reference/utime-utime32-utime64-wutime-wutime32-wutime64.md)"}],"content":"---\ntitle: \"_tzset | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"_tzset\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\n  - \"api-ms-win-crt-time-l1-1-0.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"_tzset\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"_tzset function\"\n  - \"time environment variables\"\n  - \"environment variables, setting time\"\nms.assetid: 3f6ed537-b414-444d-b272-5dd377481930\ncaps.latest.revision: 23\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# _tzset\nSets time environment variables.  \n  \n> [!IMPORTANT]\n>  This API cannot be used in applications that execute in the Windows Runtime. For more information, see                  [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx).  \n  \n## Syntax  \n  \n```  \nvoid _tzset( void );  \n```  \n  \n## Remarks  \n The `_tzset` function uses the current setting of the environment variable `TZ` to assign values to three global variables: `_daylight`, `_timezone`, and `_tzname`. These variables are used by the [_ftime](../../c-runtime-library/reference/ftime-ftime32-ftime64.md) and [localtime](../../c-runtime-library/reference/localtime-localtime32-localtime64.md) functions to make corrections from coordinated universal time (UTC) to local time, and by the `time` function to compute UTC from system time. Use the following syntax to set the `TZ` environment variable:  \n  \n `set` `TZ`=`tzn`[+ &#124; –]`hh`[`:``mm`[`:``ss`] ][`dzn`]  \n  \n `tzn`  \n Three-letter time-zone name, such as PST. You must specify the correct offset from local time to UTC.  \n  \n `hh`  \n Difference in hours between UTC and local time. Sign (+) optional for positive values.  \n  \n `mm`  \n Minutes. Separated from `hh` by a colon (`:`).  \n  \n `ss`  \n Seconds. Separated from `mm` by a colon (`:`).  \n  \n `dzn`  \n Three-letter daylight-saving-time zone such as PDT. If daylight saving time is never in effect in the locality, set `TZ` without a value for `dzn`. The C run-time library assumes the United States' rules for implementing the calculation of daylight saving time (DST).  \n  \n> [!NOTE]\n>  Take care in computing the sign of the time difference. Because the time difference is the offset from local time to UTC (rather than the reverse), its sign may be the opposite of what you might intuitively expect. For time zones ahead of UTC, the time difference is negative; for those behind UTC, the difference is positive.  \n  \n For example, to set the `TZ` environment variable to correspond to the current time zone in Germany, enter the following on the command line:  \n  \n```  \nset TZ=GST-1GDT  \n```  \n  \n This command uses GST to indicate German standard time, assumes that UTC is one hour behind Germany (or in other words, that Germany is one hour ahead of UTC), and assumes that Germany observes daylight-saving time.  \n  \n If the `TZ` value is not set, _`tzset` attempts to use the time zone information specified by the operating system. In the Windows operating system, this information is specified in the Date/Time application in Control Panel. If `_tzset` cannot obtain this information, it uses PST8PDT by default, which signifies the Pacific Time zone.  \n  \n Based on the `TZ` environment variable value, the following values are assigned to the global variables `_daylight`, `_timezone`, and `_tzname` when `_tzset` is called:  \n  \n|Global variable|Description|Default value|  \n|---------------------|-----------------|-------------------|  \n|`_daylight`|Nonzero value if a daylight-saving-time zone is specified in `TZ` setting; otherwise, 0.|1|  \n|`_timezone`|Difference in seconds between local time and UTC.|28800 (28800 seconds equals 8 hours)|  \n|`_tzname`[0]|String value of time-zone name from `TZ` environmental variable; empty if `TZ` has not been set.|PST|  \n|`_tzname`[1]|String value of daylight-saving-time zone; empty if daylight-saving-time zone is omitted from `TZ` environmental variable.|PDT|  \n  \n The default values shown in the preceding table for `_daylight` and the `_tzname` array correspond to \"PST8PDT.\" If the DST zone is omitted from the `TZ` environmental variable, the value of `_daylight` is 0 and the `_ftime`, `gmtime`, and `localtime` functions return 0 for their DST flags.  \n  \n## Requirements  \n  \n|Routine|Required header|  \n|-------------|---------------------|  \n|`_tzset`|\\<time.h>|  \n  \n For more information, see [Compatibility](../../c-runtime-library/compatibility.md).  \n  \n## Example  \n  \n```  \n// crt_tzset.cpp  \n// This program uses _tzset to set the global variables  \n// named _daylight, _timezone, and _tzname. Since TZ is  \n// not being explicitly set, it uses the system time.  \n  \n#include <time.h>  \n#include <stdlib.h>  \n#include <stdio.h>  \n  \nint main( void )  \n{  \n    _tzset();  \n    int daylight;  \n    _get_daylight( &daylight );  \n    printf( \"_daylight = %d\\n\", daylight );  \n    long timezone;  \n    _get_timezone( &timezone );  \n    printf( \"_timezone = %ld\\n\", timezone );  \n    size_t s;  \n    char tzname[100];  \n    _get_tzname( &s, tzname, sizeof(tzname), 0 );  \n    printf( \"_tzname[0] = %s\\n\", tzname );  \n    exit( 0 );  \n}  \n```  \n  \n```Output  \n_daylight = 1  \n_timezone = 28800  \n_tzname[0] = Pacific Standard Time  \n```  \n  \n## .NET Framework Equivalent  \n Not applicable. To call the standard C function, use `PInvoke`. For more information, see [Platform Invoke Examples](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f).  \n  \n## See Also  \n [Time Management](../../c-runtime-library/time-management.md)   \n [asctime, _wasctime](../../c-runtime-library/reference/asctime-wasctime.md)   \n [_ftime, _ftime32, _ftime64](../../c-runtime-library/reference/ftime-ftime32-ftime64.md)   \n [gmtime, _gmtime32, _gmtime64](../../c-runtime-library/reference/gmtime-gmtime32-gmtime64.md)   \n [localtime, _localtime32, _localtime64](../../c-runtime-library/reference/localtime-localtime32-localtime64.md)   \n [time, _time32, _time64](../../c-runtime-library/reference/time-time32-time64.md)   \n [_utime, _utime32, _utime64, _wutime, _wutime32, _wutime64](../../c-runtime-library/reference/utime-utime32-utime64-wutime-wutime32-wutime64.md)"}