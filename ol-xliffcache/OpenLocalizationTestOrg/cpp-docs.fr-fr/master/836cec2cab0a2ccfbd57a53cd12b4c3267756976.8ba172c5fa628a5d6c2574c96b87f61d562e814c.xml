{"nodes":[{"pos":[12,37],"content":"_heapset | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"_heapset | Microsoft Docs","pos":[0,25]}]},{"content":"_heapset","pos":[948,956]},{"content":"Checks heaps for minimal consistency and sets the free entries to a specified value.","pos":[957,1041]},{"pos":[1049,1156],"content":"[!IMPORTANT]\n This function is obsolete. Beginning in Visual Studio 2015, it is not available in the CRT.","leadings":["","> "],"nodes":[{"content":" This function is obsolete. Beginning in Visual Studio 2015, it is not available in the CRT.","pos":[13,105],"nodes":[{"content":"This function is obsolete.","pos":[1,27]},{"content":"Beginning in Visual Studio 2015, it is not available in the CRT.","pos":[28,92]}]}]},{"content":"Syntax","pos":[1165,1171]},{"content":"Parameters","pos":[1243,1253]},{"content":"Fill character.","pos":[1267,1282]},{"content":"Return Value","pos":[1291,1303]},{"pos":[1318,1394],"content":"returns one of the following integer manifest constants defined in Malloc.h."},{"content":"Initial header information invalid or not found.","pos":[1420,1468]},{"content":"Heap damaged or bad node found.","pos":[1493,1524]},{"content":"Heap not initialized.","pos":[1547,1568]},{"content":"Heap appears to be consistent.","pos":[1588,1618]},{"pos":[1625,1694],"content":"In addition, if an error occurs, <ph id=\"ph1\">`_heapset`</ph> sets <ph id=\"ph2\">`errno`</ph> to <ph id=\"ph3\">`ENOSYS`</ph>.","source":"In addition, if an error occurs, `_heapset` sets `errno` to `ENOSYS`."},{"content":"Remarks","pos":[1703,1710]},{"pos":[1714,1818],"content":"The <ph id=\"ph1\">`_heapset`</ph> function shows free memory locations or nodes that have been unintentionally overwritten.","source":"The `_heapset` function shows free memory locations or nodes that have been unintentionally overwritten."},{"content":"checks for minimal consistency on the heap and then sets each byte of the heap's free entries to the <ph id=\"ph1\">`fill`</ph> value.","pos":[1836,1950],"source":" checks for minimal consistency on the heap and then sets each byte of the heap's free entries to the `fill` value."},{"content":"This known value shows which memory locations of the heap contain free nodes and which contain data that were unintentionally written to freed memory.","pos":[1951,2101]},{"content":"If the operating system does not support <ph id=\"ph1\">`_heapset`</ph>(for example, Windows 98), the function returns <ph id=\"ph2\">`_HEAPOK`</ph> and sets <ph id=\"ph3\">`errno`</ph> to <ph id=\"ph4\">`ENOSYS`</ph>.","pos":[2102,2240],"source":" If the operating system does not support `_heapset`(for example, Windows 98), the function returns `_HEAPOK` and sets `errno` to `ENOSYS`."},{"content":"Requirements","pos":[2249,2261]},{"content":"Routine","pos":[2268,2275]},{"content":"Required header","pos":[2276,2291]},{"content":"Optional header","pos":[2292,2307]},{"content":"malloc.h&gt;","pos":[2387,2396],"source":"malloc.h>"},{"content":"errno.h&gt;","pos":[2399,2407],"source":"errno.h>"},{"pos":[2415,2530],"content":"For more compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../c-runtime-library/compatibility.md)</ept> in the Introduction.","source":"For more compatibility information, see [Compatibility](../c-runtime-library/compatibility.md) in the Introduction."},{"content":"Example","pos":[2539,2546]},{"content":".NET Framework Equivalent","pos":[3447,3472]},{"content":"Not applicable.","pos":[3476,3491]},{"content":"To call the standard C function, use <ph id=\"ph1\">`PInvoke`</ph>.","pos":[3492,3539],"source":" To call the standard C function, use `PInvoke`."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Platform Invoke Examples<ept id=\"p1\">](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f)</ept>.","pos":[3540,3665],"source":" For more information, see [Platform Invoke Examples](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f)."},{"content":"See Also","pos":[3674,3682]},{"content":"Memory Allocation","pos":[3687,3704]},{"content":"_heapadd","pos":[3754,3762]},{"content":"_heapchk","pos":[3802,3810]},{"content":"_heapmin","pos":[3860,3868]},{"content":"_heapwalk","pos":[3918,3927]}],"content":"---\ntitle: \"_heapset | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"_heapset\"\napilocation: \n  - \"msvcr90.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcrt.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr100.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"_heapset\"\n  - \"heapset\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"checking heap\"\n  - \"heapset function\"\n  - \"heaps, checking\"\n  - \"debugging [CRT], heap-related problems\"\n  - \"_heapset function\"\nms.assetid: 9667eeb0-55bc-4c19-af5f-d1fd0a142b3c\ncaps.latest.revision: 14\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"ru-ru\"\n  - \"zh-cn\"\n  - \"zh-tw\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"tr-tr\"\n---\n# _heapset\nChecks heaps for minimal consistency and sets the free entries to a specified value.  \n  \n> [!IMPORTANT]\n>  This function is obsolete. Beginning in Visual Studio 2015, it is not available in the CRT.  \n  \n## Syntax  \n  \n```  \nint _heapset(   \n   unsigned int fill   \n);  \n```  \n  \n#### Parameters  \n `fill`  \n Fill character.  \n  \n## Return Value  \n `_heapset` returns one of the following integer manifest constants defined in Malloc.h.  \n  \n `_HEAPBADBEGIN`  \n Initial header information invalid or not found.  \n  \n `_HEAPBADNODE`  \n Heap damaged or bad node found.  \n  \n `_HEAPEMPTY`  \n Heap not initialized.  \n  \n `_HEAPOK`  \n Heap appears to be consistent.  \n  \n In addition, if an error occurs, `_heapset` sets `errno` to `ENOSYS`.  \n  \n## Remarks  \n The `_heapset` function shows free memory locations or nodes that have been unintentionally overwritten.  \n  \n `_heapset` checks for minimal consistency on the heap and then sets each byte of the heap's free entries to the `fill` value. This known value shows which memory locations of the heap contain free nodes and which contain data that were unintentionally written to freed memory. If the operating system does not support `_heapset`(for example, Windows 98), the function returns `_HEAPOK` and sets `errno` to `ENOSYS`.  \n  \n## Requirements  \n  \n|Routine|Required header|Optional header|  \n|-------------|---------------------|---------------------|  \n|`_heapset`|\\<malloc.h>|\\<errno.h>|  \n  \n For more compatibility information, see [Compatibility](../c-runtime-library/compatibility.md) in the Introduction.  \n  \n## Example  \n  \n```  \n// crt_heapset.c  \n// This program checks the heap and  \n// fills in free entries with the character 'Z'.  \n  \n#include <malloc.h>  \n#include <stdio.h>  \n#include <stdlib.h>  \n  \nint main( void )  \n{  \n   int heapstatus;  \n   char *buffer;  \n  \n   if( (buffer = malloc( 1 )) == NULL ) // Make sure heap is   \n      exit( 0 );                        //    initialized       \n   heapstatus = _heapset( 'Z' );        // Fill in free entries   \n   switch( heapstatus )  \n   {  \n   case _HEAPOK:  \n      printf( \"OK - heap is fine\\n\" );  \n      break;  \n   case _HEAPEMPTY:  \n      printf( \"OK - heap is empty\\n\" );  \n      break;  \n   case _HEAPBADBEGIN:  \n      printf( \"ERROR - bad start of heap\\n\" );  \n      break;  \n   case _HEAPBADNODE:  \n      printf( \"ERROR - bad node in heap\\n\" );  \n      break;  \n   }  \n   free( buffer );  \n}  \n```  \n  \n```Output  \nOK - heap is fine  \n```  \n  \n## .NET Framework Equivalent  \n Not applicable. To call the standard C function, use `PInvoke`. For more information, see [Platform Invoke Examples](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f).  \n  \n## See Also  \n [Memory Allocation](../c-runtime-library/memory-allocation.md)   \n [_heapadd](../c-runtime-library/heapadd.md)   \n [_heapchk](../c-runtime-library/reference/heapchk.md)   \n [_heapmin](../c-runtime-library/reference/heapmin.md)   \n [_heapwalk](../c-runtime-library/reference/heapwalk.md)"}