{"nodes":[{"pos":[12,39],"content":"join Class | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"join Class | Microsoft Docs","pos":[0,27]}]},{"content":"join Class","pos":[604,614]},{"pos":[615,771],"content":"A <ph id=\"ph1\">`join`</ph> messaging block is a single-target, multi-source, ordered <ph id=\"ph2\">`propagator_block`</ph> which combines together messages of type <ph id=\"ph3\">`T`</ph> from each of its sources.","source":"A `join` messaging block is a single-target, multi-source, ordered `propagator_block` which combines together messages of type `T` from each of its sources."},{"content":"Syntax","pos":[780,786]},{"content":"Parameters","pos":[986,996]},{"content":"The payload type of the messages joined and propagated by the block.","pos":[1007,1075]},{"content":"The kind of <ph id=\"ph1\">`join`</ph> block this is, either <ph id=\"ph2\">`greedy`</ph> or","pos":[1094,1146],"source":" The kind of `join` block this is, either `greedy` or "},{"content":"Members","pos":[1168,1175]},{"content":"Public Constructors","pos":[1185,1204]},{"content":"Name","pos":[1211,1215]},{"content":"Description","pos":[1216,1227]},{"content":"join::join Constructor","pos":[1266,1288]},{"content":"Overloaded.","pos":[1297,1308]},{"content":"Constructs a <ph id=\"ph1\">`join`</ph> messaging block.","pos":[1309,1345],"source":" Constructs a `join` messaging block."},{"content":"join::~join Destructor","pos":[1351,1373]},{"pos":[1382,1408],"content":"Destroys the <ph id=\"ph1\">`join`</ph> block.","source":"Destroys the `join` block."},{"content":"Protected Methods","pos":[1419,1436]},{"content":"Name","pos":[1443,1447]},{"content":"Description","pos":[1448,1459]},{"content":"join::accept_message Method","pos":[1498,1525]},{"pos":[1544,1648],"content":"Accepts a message that was offered by this <ph id=\"ph1\">`join`</ph> messaging block, transferring ownership to the caller.","source":"Accepts a message that was offered by this `join` messaging block, transferring ownership to the caller."},{"content":"join::consume_message Method","pos":[1654,1682]},{"pos":[1702,1835],"content":"Consumes a message previously offered by the <ph id=\"ph1\">`join`</ph> messaging block and reserved by the target, transferring ownership to the caller.","source":"Consumes a message previously offered by the `join` messaging block and reserved by the target, transferring ownership to the caller."},{"content":"join::link_target_notification Method","pos":[1841,1878]},{"pos":[1907,1997],"content":"A callback that notifies that a new target has been linked to this <ph id=\"ph1\">`join`</ph> messaging block.","source":"A callback that notifies that a new target has been linked to this `join` messaging block."},{"content":"join::propagate_message Method","pos":[2003,2033]},{"content":"Asynchronously passes a message from an <ph id=\"ph1\">`ISource`</ph> block to this <ph id=\"ph2\">`join`</ph> messaging block.","pos":[2055,2142],"source":"Asynchronously passes a message from an `ISource` block to this `join` messaging block."},{"content":"It is invoked by the <ph id=\"ph1\">`propagate`</ph> method, when called by a source block.","pos":[2143,2214],"source":" It is invoked by the `propagate` method, when called by a source block."},{"content":"join::propagate_to_any_targets Method","pos":[2220,2257]},{"content":"Constructs an output message containing an input message from each source when they have all propagated a message.","pos":[2286,2400]},{"content":"Sends this output message out to each of its targets.","pos":[2401,2454]},{"content":"join::release_message Method","pos":[2460,2488]},{"content":"Releases a previous message reservation.","pos":[2508,2548]},{"content":"(Overrides <bpt id=\"p1\">[</bpt>source_block::release_message<ept id=\"p1\">](source-block-class.md#release_message)</ept>.)","pos":[2549,2632],"source":" (Overrides [source_block::release_message](source-block-class.md#release_message).)"},{"content":"join::reserve_message Method","pos":[2638,2666]},{"content":"Reserves a message previously offered by this <ph id=\"ph1\">`join`</ph> messaging block.","pos":[2686,2755],"source":"Reserves a message previously offered by this `join` messaging block."},{"content":"(Overrides <bpt id=\"p1\">[</bpt>source_block::reserve_message<ept id=\"p1\">](source-block-class.md#reserve_message)</ept>.)","pos":[2756,2839],"source":" (Overrides [source_block::reserve_message](source-block-class.md#reserve_message).)"},{"content":"join::resume_propagation Method","pos":[2845,2876]},{"content":"Resumes propagation after a reservation has been released.","pos":[2899,2957]},{"content":"(Overrides <bpt id=\"p1\">[</bpt>source_block::resume_propagation<ept id=\"p1\">](source-block-class.md#resume_propagation)</ept>.)","pos":[2958,3047],"source":" (Overrides [source_block::resume_propagation](source-block-class.md#resume_propagation).)"},{"content":"Remarks","pos":[3057,3064]},{"pos":[3068,3181],"content":"For more information, see <bpt id=\"p1\">[</bpt>Asynchronous Message Blocks<ept id=\"p1\">](../../../parallel/concrt/asynchronous-message-blocks.md)</ept>.","source":"For more information, see [Asynchronous Message Blocks](../../../parallel/concrt/asynchronous-message-blocks.md)."},{"content":"Inheritance Hierarchy","pos":[3190,3211]},{"content":"ISource","pos":[3216,3223]},{"content":"ITarget","pos":[3250,3257]},{"content":"source_block","pos":[3284,3296]},{"content":"propagator_block","pos":[3328,3344]},{"content":"Requirements","pos":[3394,3406]},{"pos":[3410,3430],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> agents.h","source":"**Header:** agents.h"},{"pos":[3437,3463],"content":"<bpt id=\"p1\">**</bpt>Namespace:<ept id=\"p1\">**</ept> concurrency","source":"**Namespace:** concurrency"},{"pos":[3504,3531],"content":"join::accept_message Method"},{"pos":[3535,3639],"content":"Accepts a message that was offered by this <ph id=\"ph1\">`join`</ph> messaging block, transferring ownership to the caller.","source":"Accepts a message that was offered by this `join` messaging block, transferring ownership to the caller."},{"content":"Parameters","pos":[3740,3750]},{"content":"The <ph id=\"ph1\">`runtime_object_identity`</ph> of the offered <ph id=\"ph2\">`message`</ph> object.","pos":[3766,3828],"source":" The `runtime_object_identity` of the offered `message` object."},{"content":"Return Value","pos":[3838,3850]},{"pos":[3854,3925],"content":"A pointer to the <ph id=\"ph1\">`message`</ph> object that the caller now has ownership of.","source":"A pointer to the `message` object that the caller now has ownership of."},{"pos":[3967,3995],"content":"join::consume_message Method"},{"pos":[3999,4132],"content":"Consumes a message previously offered by the <ph id=\"ph1\">`join`</ph> messaging block and reserved by the target, transferring ownership to the caller.","source":"Consumes a message previously offered by the `join` messaging block and reserved by the target, transferring ownership to the caller."},{"content":"Parameters","pos":[4234,4244]},{"content":"The <ph id=\"ph1\">`runtime_object_identity`</ph> of the <ph id=\"ph2\">`message`</ph> object being consumed.","pos":[4260,4329],"source":" The `runtime_object_identity` of the `message` object being consumed."},{"content":"Return Value","pos":[4339,4351]},{"pos":[4355,4426],"content":"A pointer to the <ph id=\"ph1\">`message`</ph> object that the caller now has ownership of.","source":"A pointer to the `message` object that the caller now has ownership of."},{"content":"Remarks","pos":[4436,4443]},{"pos":[4447,4514],"content":"Similar to <ph id=\"ph1\">`accept`</ph>, but is always preceded by a call to <ph id=\"ph2\">`reserve`</ph>.","source":"Similar to `accept`, but is always preceded by a call to `reserve`."},{"pos":[4545,4567],"content":"join::join Constructor"},{"pos":[4571,4607],"content":"Constructs a <ph id=\"ph1\">`join`</ph> messaging block.","source":"Constructs a `join` messaging block."},{"content":"Parameters","pos":[5045,5055]},{"content":"The number of inputs this <ph id=\"ph1\">`join`</ph> block will be allowed.","pos":[5075,5130],"source":" The number of inputs this `join` block will be allowed."},{"content":"A filter function which determines whether offered messages should be accepted.","pos":[5150,5229]},{"content":"The <ph id=\"ph1\">`Scheduler`</ph> object within which the propagation task for the <ph id=\"ph2\">`join`</ph> messaging block is scheduled.","pos":[5253,5354],"source":" The `Scheduler` object within which the propagation task for the `join` messaging block is scheduled."},{"content":"The <ph id=\"ph1\">`ScheduleGroup`</ph> object within which the propagation task for the <ph id=\"ph2\">`join`</ph> messaging block is scheduled.","pos":[5382,5487],"source":" The `ScheduleGroup` object within which the propagation task for the `join` messaging block is scheduled."},{"content":"The <ph id=\"ph1\">`Scheduler`</ph> object used is implied by the schedule group.","pos":[5488,5549],"source":" The `Scheduler` object used is implied by the schedule group."},{"content":"Remarks","pos":[5559,5566]},{"pos":[5570,5681],"content":"The runtime uses the default scheduler if you do not specify the <ph id=\"ph1\">`_PScheduler`</ph> or <ph id=\"ph2\">`_PScheduleGroup`</ph> parameters.","source":"The runtime uses the default scheduler if you do not specify the `_PScheduler` or `_PScheduleGroup` parameters."},{"pos":[5688,5872],"content":"The type <ph id=\"ph1\">`filter_method`</ph> is a functor with signature <ph id=\"ph2\">`bool (T const &amp;)`</ph> which is invoked by this <ph id=\"ph3\">`join`</ph> messaging block to determine whether or not it should accept an offered message.","source":"The type `filter_method` is a functor with signature `bool (T const &)` which is invoked by this `join` messaging block to determine whether or not it should accept an offered message."},{"pos":[5903,5925],"content":"join::~join Destructor"},{"pos":[5929,5955],"content":"Destroys the <ph id=\"ph1\">`join`</ph> block.","source":"Destroys the `join` block."},{"pos":[6028,6065],"content":"join::link_target_notification Method"},{"pos":[6069,6159],"content":"A callback that notifies that a new target has been linked to this <ph id=\"ph1\">`join`</ph> messaging block.","source":"A callback that notifies that a new target has been linked to this `join` messaging block."},{"pos":[6290,6320],"content":"join::propagate_message Method"},{"content":"Asynchronously passes a message from an <ph id=\"ph1\">`ISource`</ph> block to this <ph id=\"ph2\">`join`</ph> messaging block.","pos":[6324,6411],"source":"Asynchronously passes a message from an `ISource` block to this `join` messaging block."},{"content":"It is invoked by the <ph id=\"ph1\">`propagate`</ph> method, when called by a source block.","pos":[6412,6483],"source":" It is invoked by the `propagate` method, when called by a source block."},{"content":"Parameters","pos":[6610,6620]},{"content":"A pointer to the <ph id=\"ph1\">`message`</ph> object.","pos":[6639,6673],"source":" A pointer to the `message` object."},{"content":"A pointer to the source block offering the message.","pos":[6694,6745]},{"content":"Return Value","pos":[6755,6767]},{"pos":[6771,6883],"content":"A <bpt id=\"p1\">[</bpt>message_status<ept id=\"p1\">](concurrency-namespace-enums.md)</ept> indication of what the target decided to do with the message.","source":"A [message_status](concurrency-namespace-enums.md) indication of what the target decided to do with the message."},{"pos":[6934,6971],"content":"join::propagate_to_any_targets Method"},{"content":"Constructs an output message containing an input message from each source when they have all propagated a message.","pos":[6975,7089]},{"content":"Sends this output message out to each of its targets.","pos":[7090,7143]},{"pos":[7265,7293],"content":"join::release_message Method"},{"content":"Releases a previous message reservation.","pos":[7297,7337]},{"content":"Parameters","pos":[7422,7432]},{"content":"The <ph id=\"ph1\">`runtime_object_identity`</ph> of the <ph id=\"ph2\">`message`</ph> object being released.","pos":[7448,7517],"source":" The `runtime_object_identity` of the `message` object being released."},{"pos":[7559,7587],"content":"join::reserve_message Method"},{"pos":[7591,7660],"content":"Reserves a message previously offered by this <ph id=\"ph1\">`join`</ph> messaging block.","source":"Reserves a message previously offered by this `join` messaging block."},{"content":"Parameters","pos":[7745,7755]},{"content":"The <ph id=\"ph1\">`runtime_object_identity`</ph> of the offered <ph id=\"ph2\">`message`</ph> object.","pos":[7771,7833],"source":" The `runtime_object_identity` of the offered `message` object."},{"content":"Return Value","pos":[7843,7855]},{"pos":[7866,7926],"content":"if the message was successfully reserved, <ph id=\"ph1\">`false`</ph> otherwise.","source":" if the message was successfully reserved, `false` otherwise."},{"content":"Remarks","pos":[7936,7943]},{"pos":[7947,8092],"content":"After <ph id=\"ph1\">`reserve`</ph> is called, if it returns <ph id=\"ph2\">`true`</ph>, either <ph id=\"ph3\">`consume`</ph> or <ph id=\"ph4\">`release`</ph> must be called to either take or release ownership of the message.","source":"After `reserve` is called, if it returns `true`, either `consume` or `release` must be called to either take or release ownership of the message."},{"pos":[8137,8168],"content":"join::resume_propagation Method"},{"content":"Resumes propagation after a reservation has been released.","pos":[8172,8230]},{"content":"See Also","pos":[8287,8295]},{"content":"concurrency Namespace","pos":[8300,8321]},{"content":"choice Class","pos":[8354,8366]},{"content":"multitype_join Class","pos":[8390,8410]}],"content":"---\ntitle: \"join Class | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"agents/concurrency::join\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"join class\"\nms.assetid: d2217119-70a1-40b6-809f-c1c13a571c3f\ncaps.latest.revision: 20\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# join Class\nA `join` messaging block is a single-target, multi-source, ordered `propagator_block` which combines together messages of type `T` from each of its sources.  \n  \n## Syntax  \n  \n```\ntemplate<class T,\n    join_type _Jtype = non_greedy>\nclass join : public propagator_block<single_link_registry<ITarget<std::vector<T>>>,\n    multi_link_registry<ISource<T>>>;\n```   \n  \n#### Parameters  \n `T`  \n The payload type of the messages joined and propagated by the block.  \n  \n `_Jtype`  \n The kind of `join` block this is, either `greedy` or `non_greedy`  \n  \n## Members  \n  \n### Public Constructors  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[join::join Constructor](#ctor)|Overloaded. Constructs a `join` messaging block.|  \n|[join::~join Destructor](#dtor)|Destroys the `join` block.|  \n  \n### Protected Methods  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[join::accept_message Method](#accept_message)|Accepts a message that was offered by this `join` messaging block, transferring ownership to the caller.|  \n|[join::consume_message Method](#consume_message)|Consumes a message previously offered by the `join` messaging block and reserved by the target, transferring ownership to the caller.|  \n|[join::link_target_notification Method](#link_target_notification)|A callback that notifies that a new target has been linked to this `join` messaging block.|  \n|[join::propagate_message Method](#propagate_message)|Asynchronously passes a message from an `ISource` block to this `join` messaging block. It is invoked by the `propagate` method, when called by a source block.|  \n|[join::propagate_to_any_targets Method](#propagate_to_any_targets)|Constructs an output message containing an input message from each source when they have all propagated a message. Sends this output message out to each of its targets.|  \n|[join::release_message Method](#release_message)|Releases a previous message reservation. (Overrides [source_block::release_message](source-block-class.md#release_message).)|  \n|[join::reserve_message Method](#reserve_message)|Reserves a message previously offered by this `join` messaging block. (Overrides [source_block::reserve_message](source-block-class.md#reserve_message).)|  \n|[join::resume_propagation Method](#resume_propagation)|Resumes propagation after a reservation has been released. (Overrides [source_block::resume_propagation](source-block-class.md#resume_propagation).)|  \n  \n## Remarks  \n For more information, see [Asynchronous Message Blocks](../../../parallel/concrt/asynchronous-message-blocks.md).  \n  \n## Inheritance Hierarchy  \n [ISource](isource-class.md)  \n  \n [ITarget](itarget-class.md)  \n  \n [source_block](source-block-class.md)  \n  \n [propagator_block](propagator-block-class.md)  \n  \n `join`  \n  \n## Requirements  \n **Header:** agents.h  \n  \n **Namespace:** concurrency  \n  \n##  <a name=\"accept_message\"></a>  join::accept_message Method  \n Accepts a message that was offered by this `join` messaging block, transferring ownership to the caller.  \n  \n```\nvirtual message<_OutputType>* accept_message(runtime_object_identity _MsgId);\n```  \n  \n### Parameters  \n `_MsgId`  \n The `runtime_object_identity` of the offered `message` object.  \n  \n### Return Value  \n A pointer to the `message` object that the caller now has ownership of.  \n  \n##  <a name=\"consume_message\"></a>  join::consume_message Method  \n Consumes a message previously offered by the `join` messaging block and reserved by the target, transferring ownership to the caller.  \n  \n```\nvirtual message<_OutputType>* consume_message(runtime_object_identity _MsgId);\n```  \n  \n### Parameters  \n `_MsgId`  \n The `runtime_object_identity` of the `message` object being consumed.  \n  \n### Return Value  \n A pointer to the `message` object that the caller now has ownership of.  \n  \n### Remarks  \n Similar to `accept`, but is always preceded by a call to `reserve`.  \n  \n##  <a name=\"ctor\"></a>  join::join Constructor  \n Constructs a `join` messaging block.  \n  \n```\njoin(\n    size_t _NumInputs);\n\njoin(\n    size_t _NumInputs,\n    filter_method const& _Filter);\n\njoin(\n    Scheduler& _PScheduler,\n    size_t _NumInputs);\n\njoin(\n    Scheduler& _PScheduler,\n    size_t _NumInputs,\n    filter_method const& _Filter);\n\njoin(\n    ScheduleGroup& _PScheduleGroup,\n    size_t _NumInputs);\n\njoin(\n    ScheduleGroup& _PScheduleGroup,\n    size_t _NumInputs,\n    filter_method const& _Filter);\n```  \n  \n### Parameters  \n `_NumInputs`  \n The number of inputs this `join` block will be allowed.  \n  \n `_Filter`  \n A filter function which determines whether offered messages should be accepted.  \n  \n `_PScheduler`  \n The `Scheduler` object within which the propagation task for the `join` messaging block is scheduled.  \n  \n `_PScheduleGroup`  \n The `ScheduleGroup` object within which the propagation task for the `join` messaging block is scheduled. The `Scheduler` object used is implied by the schedule group.  \n  \n### Remarks  \n The runtime uses the default scheduler if you do not specify the `_PScheduler` or `_PScheduleGroup` parameters.  \n  \n The type `filter_method` is a functor with signature `bool (T const &)` which is invoked by this `join` messaging block to determine whether or not it should accept an offered message.  \n  \n##  <a name=\"dtor\"></a>  join::~join Destructor  \n Destroys the `join` block.  \n  \n```\n~join();\n```  \n  \n##  <a name=\"link_target_notification\"></a>  join::link_target_notification Method  \n A callback that notifies that a new target has been linked to this `join` messaging block.  \n  \n```\nvirtual void link_target_notification(_Inout_ ITarget<std::vector<T>> *);\n```  \n  \n##  <a name=\"propagate_message\"></a>  join::propagate_message Method  \n Asynchronously passes a message from an `ISource` block to this `join` messaging block. It is invoked by the `propagate` method, when called by a source block.  \n  \n```\nmessage_status propagate_message(\n    _Inout_ message<T>* _PMessage,\n    _Inout_ ISource<T>* _PSource);\n```  \n  \n### Parameters  \n `_PMessage`  \n A pointer to the `message` object.  \n  \n `_PSource`  \n A pointer to the source block offering the message.  \n  \n### Return Value  \n A [message_status](concurrency-namespace-enums.md) indication of what the target decided to do with the message.  \n  \n##  <a name=\"propagate_to_any_targets\"></a>  join::propagate_to_any_targets Method  \n Constructs an output message containing an input message from each source when they have all propagated a message. Sends this output message out to each of its targets.  \n  \n```\nvoid propagate_to_any_targets(_Inout_opt_ message<_OutputType> *);\n```  \n  \n##  <a name=\"release_message\"></a>  join::release_message Method  \n Releases a previous message reservation.  \n  \n```\nvirtual void release_message(runtime_object_identity _MsgId);\n```  \n  \n### Parameters  \n `_MsgId`  \n The `runtime_object_identity` of the `message` object being released.  \n  \n##  <a name=\"reserve_message\"></a>  join::reserve_message Method  \n Reserves a message previously offered by this `join` messaging block.  \n  \n```\nvirtual bool reserve_message(runtime_object_identity _MsgId);\n```  \n  \n### Parameters  \n `_MsgId`  \n The `runtime_object_identity` of the offered `message` object.  \n  \n### Return Value  \n `true` if the message was successfully reserved, `false` otherwise.  \n  \n### Remarks  \n After `reserve` is called, if it returns `true`, either `consume` or `release` must be called to either take or release ownership of the message.  \n  \n##  <a name=\"resume_propagation\"></a>  join::resume_propagation Method  \n Resumes propagation after a reservation has been released.  \n  \n```\nvirtual void resume_propagation();\n```  \n  \n## See Also  \n [concurrency Namespace](concurrency-namespace.md)   \n [choice Class](choice-class.md)   \n [multitype_join Class](multitype-join-class.md)\n"}