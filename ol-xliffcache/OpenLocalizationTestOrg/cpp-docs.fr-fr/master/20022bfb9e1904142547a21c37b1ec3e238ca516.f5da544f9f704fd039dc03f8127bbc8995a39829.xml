{"nodes":[{"pos":[12,79],"content":"sprintf_s, _sprintf_s_l, swprintf_s, _swprintf_s_l | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"sprintf_s, _sprintf_s_l, swprintf_s, _swprintf_s_l | Microsoft Docs","pos":[0,67]}]},{"content":"sprintf_s, _sprintf_s_l, swprintf_s, _swprintf_s_l","pos":[1399,1449]},{"content":"Write formatted data to a string.","pos":[1450,1483]},{"content":"These are versions of <bpt id=\"p1\">[</bpt>sprintf, _sprintf_l, swprintf, _swprintf_l, <ph id=\"ph1\">\\_</ph>_swprintf_l<ept id=\"p1\">](../../c-runtime-library/reference/sprintf-sprintf-l-swprintf-swprintf-l-swprintf-l.md)</ept> with security enhancements as described in <bpt id=\"p2\">[</bpt>Security Features in the CRT<ept id=\"p2\">](../../c-runtime-library/security-features-in-the-crt.md)</ept>.","pos":[1484,1784],"source":" These are versions of [sprintf, _sprintf_l, swprintf, _swprintf_l, \\__swprintf_l](../../c-runtime-library/reference/sprintf-sprintf-l-swprintf-swprintf-l-swprintf-l.md) with security enhancements as described in [Security Features in the CRT](../../c-runtime-library/security-features-in-the-crt.md)."},{"content":"Syntax","pos":[1793,1799]},{"content":"Parameters","pos":[2543,2553]},{"content":"Storage location for output","pos":[2569,2596]},{"content":"Maximum number of characters to store.","pos":[2621,2659]},{"content":"Format-control string","pos":[2678,2699]},{"content":"Optional arguments to be formatted","pos":[2715,2749]},{"content":"The locale to use.","pos":[2768,2786]},{"pos":[2793,2928],"content":"For more information, see <bpt id=\"p1\">[</bpt>Format Specifications<ept id=\"p1\">](../../c-runtime-library/format-specification-syntax-printf-and-wprintf-functions.md)</ept>.","source":"For more information, see [Format Specifications](../../c-runtime-library/format-specification-syntax-printf-and-wprintf-functions.md)."},{"content":"Return Value","pos":[2937,2949]},{"content":"The number of characters written, or â€“1 if an error occurred.","pos":[2953,3014]},{"content":"If <ph id=\"ph1\">`buffer`</ph> or <ph id=\"ph2\">`format`</ph> is a null pointer, <ph id=\"ph3\">`sprintf_s`</ph> and <ph id=\"ph4\">`swprintf_s`</ph> return -1 and set <ph id=\"ph5\">`errno`</ph> to <ph id=\"ph6\">`EINVAL`</ph>.","pos":[3015,3125],"source":" If `buffer` or `format` is a null pointer, `sprintf_s` and `swprintf_s` return -1 and set `errno` to `EINVAL`."},{"content":"returns the number of bytes stored in <ph id=\"ph1\">`buffer`</ph>, not counting the terminating null character.","pos":[3144,3236],"source":" returns the number of bytes stored in `buffer`, not counting the terminating null character."},{"content":"returns the number of wide characters stored in <ph id=\"ph1\">`buffer`</ph>, not counting the terminating null wide character.","pos":[3250,3357],"source":" returns the number of wide characters stored in `buffer`, not counting the terminating null wide character."},{"content":"Remarks","pos":[3366,3373]},{"content":"The <ph id=\"ph1\">`sprintf_s`</ph> function formats and stores a series of characters and values in <ph id=\"ph2\">`buffer`</ph>.","pos":[3377,3467],"source":"The `sprintf_s` function formats and stores a series of characters and values in `buffer`."},{"content":"Each <ph id=\"ph1\">`argument`</ph> (if any) is converted and output according to the corresponding format specification in <ph id=\"ph2\">`format`</ph>.","pos":[3468,3581],"source":" Each `argument` (if any) is converted and output according to the corresponding format specification in `format`."},{"content":"The format consists of ordinary characters and has the same form and function as the <ph id=\"ph1\">`format`</ph> argument for <bpt id=\"p1\">[</bpt>printf<ept id=\"p1\">](../../c-runtime-library/reference/printf-printf-l-wprintf-wprintf-l.md)</ept>.","pos":[3582,3770],"source":" The format consists of ordinary characters and has the same form and function as the `format` argument for [printf](../../c-runtime-library/reference/printf-printf-l-wprintf-wprintf-l.md)."},{"content":"A null character is appended after the last character written.","pos":[3771,3833]},{"content":"If copying occurs between strings that overlap, the behavior is undefined.","pos":[3834,3908]},{"content":"One main difference between <ph id=\"ph1\">`sprintf_s`</ph> and <ph id=\"ph2\">`sprintf`</ph> is that <ph id=\"ph3\">`sprintf_s`</ph> checks the format string for valid formatting characters, whereas <ph id=\"ph4\">`sprintf`</ph> only checks if the format string or buffer are <ph id=\"ph5\">`NULL`</ph> pointers.","pos":[3915,4128],"source":"One main difference between `sprintf_s` and `sprintf` is that `sprintf_s` checks the format string for valid formatting characters, whereas `sprintf` only checks if the format string or buffer are `NULL` pointers."},{"content":"If either check fails, the invalid parameter handler is invoked, as described in <bpt id=\"p1\">[</bpt>Parameter Validation<ept id=\"p1\">](../../c-runtime-library/parameter-validation.md)</ept>.","pos":[4129,4282],"source":" If either check fails, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md)."},{"content":"If execution is allowed to continue, the function returns -1 and sets <ph id=\"ph1\">`errno`</ph> to <ph id=\"ph2\">`EINVAL`</ph>.","pos":[4283,4373],"source":" If execution is allowed to continue, the function returns -1 and sets `errno` to `EINVAL`."},{"content":"The other main difference between <ph id=\"ph1\">`sprintf_s`</ph> and <ph id=\"ph2\">`sprintf`</ph> is that <ph id=\"ph3\">`sprintf_s`</ph> takes a length parameter specifying the size of the output buffer in characters.","pos":[4380,4540],"source":"The other main difference between `sprintf_s` and `sprintf` is that `sprintf_s` takes a length parameter specifying the size of the output buffer in characters."},{"content":"If the buffer is too small for the formatted text, including the terminating null, then the buffer is set to an empty string by placing a null character at <ph id=\"ph1\">`buffer``[0]`</ph>, and the invalid parameter handler is invoked.","pos":[4541,4757],"source":" If the buffer is too small for the formatted text, including the terminating null, then the buffer is set to an empty string by placing a null character at `buffer``[0]`, and the invalid parameter handler is invoked."},{"content":"Unlike <ph id=\"ph1\">`_snprintf`</ph>, <ph id=\"ph2\">`sprintf_s`</ph> guarantees that the buffer will be null-terminated unless the buffer size is zero.","pos":[4758,4872],"source":" Unlike `_snprintf`, `sprintf_s` guarantees that the buffer will be null-terminated unless the buffer size is zero."},{"content":"is a wide-character version of <ph id=\"ph1\">`sprintf_s`</ph>; the pointer arguments to <ph id=\"ph2\">`swprintf_s`</ph> are wide-character strings.","pos":[4892,5001],"source":" is a wide-character version of `sprintf_s`; the pointer arguments to `swprintf_s` are wide-character strings."},{"content":"Detection of encoding errors in <ph id=\"ph1\">`swprintf_s`</ph> may differ from that in <ph id=\"ph2\">`sprintf_s`</ph>.","pos":[5002,5083],"source":" Detection of encoding errors in `swprintf_s` may differ from that in `sprintf_s`."},{"content":"The versions of these functions with the <ph id=\"ph1\">`_l`</ph> suffix are identical except that they use the locale parameter passed in instead of the current thread locale.","pos":[5084,5240],"source":" The versions of these functions with the `_l` suffix are identical except that they use the locale parameter passed in instead of the current thread locale."},{"content":"In C++, use of these functions is simplified by template overloads; the overloads can infer buffer length automatically, which eliminates the need to specify a size argument, and they can automatically replace older, non-secure functions with their newer, secure counterparts.","pos":[5247,5523]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Secure Template Overloads<ept id=\"p1\">](../../c-runtime-library/secure-template-overloads.md)</ept>.","pos":[5524,5632],"source":" For more information, see [Secure Template Overloads](../../c-runtime-library/secure-template-overloads.md)."},{"content":"There are versions of <ph id=\"ph1\">`sprintf_s`</ph> that offer additional control over what happens if the buffer is too small.","pos":[5639,5748],"source":"There are versions of `sprintf_s` that offer additional control over what happens if the buffer is too small."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>_snprintf_s, _snprintf_s_l, _snwprintf_s, _snwprintf_s_l<ept id=\"p1\">](../../c-runtime-library/reference/snprintf-s-snprintf-s-l-snwprintf-s-snwprintf-s-l.md)</ept>.","pos":[5749,5922],"source":" For more information, see [_snprintf_s, _snprintf_s_l, _snwprintf_s, _snwprintf_s_l](../../c-runtime-library/reference/snprintf-s-snprintf-s-l-snwprintf-s-snwprintf-s-l.md)."},{"content":"Generic-Text Routine Mappings","pos":[5932,5961]},{"content":"TCHAR.H routine","pos":[5968,5983]},{"content":"_UNICODE &amp; _MBCS not defined","pos":[5984,6012],"source":"_UNICODE & _MBCS not defined"},{"content":"_MBCS defined","pos":[6013,6026]},{"content":"_UNICODE defined","pos":[6027,6043]},{"content":"Requirements","pos":[6282,6294]},{"content":"Routine","pos":[6301,6308]},{"content":"Required header","pos":[6309,6324]},{"pos":[6380,6381],"content":","},{"content":"C: <ph id=\"ph1\">\\&lt;</ph>stdio.h&gt;","pos":[6397,6410],"source":"C: \\<stdio.h>"},{"content":"C++: <ph id=\"ph1\">\\&lt;</ph>cstdio&gt; or <ph id=\"ph2\">\\&lt;</ph>stdio.h&gt;","pos":[6423,6451],"source":"C++: \\<cstdio> or \\<stdio.h>"},{"pos":[6468,6469],"content":","},{"content":"C: <ph id=\"ph1\">\\&lt;</ph>stdio.h&gt; or <ph id=\"ph2\">\\&lt;</ph>wchar.h&gt;","pos":[6486,6513],"source":"C: \\<stdio.h> or \\<wchar.h>"},{"content":"C++: <ph id=\"ph1\">\\&lt;</ph>cstdio&gt;, <ph id=\"ph2\">\\&lt;</ph>cwchar&gt;, <ph id=\"ph3\">\\&lt;</ph>stdio.h&gt; or <ph id=\"ph4\">\\&lt;</ph>wchar.h&gt;","pos":[6526,6577],"source":"C++: \\<cstdio>, \\<cwchar>, \\<stdio.h> or \\<wchar.h>"},{"pos":[6585,6689],"content":"For additional compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept>.","source":"For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md)."},{"content":"Example","pos":[6698,6705]},{"content":"Example","pos":[7544,7551]},{"content":".NET Framework Equivalent","pos":[8098,8123]},{"content":"System::String::Format","pos":[8128,8150]},{"content":"See Also","pos":[8228,8236]},{"content":"Stream I/O","pos":[8241,8251]},{"content":"fprintf, _fprintf_l, fwprintf, _fwprintf_l","pos":[8297,8339]},{"content":"printf, _printf_l, wprintf, _wprintf_l","pos":[8422,8460]},{"content":"scanf, _scanf_l, wscanf, _wscanf_l","pos":[8539,8573]},{"content":"sscanf, _sscanf_l, swscanf, _swscanf_l","pos":[8648,8686]},{"content":"vprintf Functions","pos":[8765,8782]}],"content":"---\ntitle: \"sprintf_s, _sprintf_s_l, swprintf_s, _swprintf_s_l | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"_swprintf_s_l\"\n  - \"_sprintf_s_l\"\n  - \"swprintf_s\"\n  - \"sprintf_s\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"swprintf_s\"\n  - \"sprintf_s\"\n  - \"stdio/sprintf_s\"\n  - \"stdio/swprintf_s\"\n  - \"stdio/_sprintf_s_l\"\n  - \"stdio/_swprintf_s_l\"\n  - \"_sprintf_s_l\"\n  - \"_swprintf_s_l\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"stprintf_s function\"\n  - \"stprintf_s_l function\"\n  - \"swprintf_s_l function\"\n  - \"sprintf_s function\"\n  - \"swprintf_s function\"\n  - \"_swprintf_s_l function\"\n  - \"sprintf_s_l function\"\n  - \"_stprintf_s_l function\"\n  - \"_stprintf_s function\"\n  - \"_sprintf_s_l function\"\n  - \"formatted text [C++]\"\nms.assetid: 424f0a29-22ef-40e8-b565-969f5f57782f\ncaps.latest.revision: 26\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# sprintf_s, _sprintf_s_l, swprintf_s, _swprintf_s_l\nWrite formatted data to a string. These are versions of [sprintf, _sprintf_l, swprintf, _swprintf_l, \\__swprintf_l](../../c-runtime-library/reference/sprintf-sprintf-l-swprintf-swprintf-l-swprintf-l.md) with security enhancements as described in [Security Features in the CRT](../../c-runtime-library/security-features-in-the-crt.md).  \n  \n## Syntax  \n  \n```  \nint sprintf_s(  \n   char *buffer,  \n   size_t sizeOfBuffer,  \n   const char *format,  \n   ...   \n);  \nint _sprintf_s_l(  \n   char *buffer,  \n   size_t sizeOfBuffer,  \n   const char *format,  \n   locale_t locale,  \n   ...   \n);  \nint swprintf_s(  \n   wchar_t *buffer,  \n   size_t sizeOfBuffer,  \n   const wchar_t *format,  \n   ...  \n);  \nint _swprintf_s_l(  \n   wchar_t *buffer,  \n   size_t sizeOfBuffer,  \n   const wchar_t *format,  \n   locale_t locale,  \n   ...  \n);  \ntemplate <size_t size>  \nint sprintf_s(  \n   char (&buffer)[size],  \n   const char *format,  \n   ...   \n); // C++ only  \ntemplate <size_t size>  \nint swprintf_s(  \n   wchar_t (&buffer)[size],  \n   const wchar_t *format,  \n   ...  \n); // C++ only  \n```  \n  \n#### Parameters  \n `buffer`  \n Storage location for output  \n  \n `sizeOfBuffer`  \n Maximum number of characters to store.  \n  \n `format`  \n Format-control string  \n  \n `...`  \n Optional arguments to be formatted  \n  \n `locale`  \n The locale to use.  \n  \n For more information, see [Format Specifications](../../c-runtime-library/format-specification-syntax-printf-and-wprintf-functions.md).  \n  \n## Return Value  \n The number of characters written, or â€“1 if an error occurred. If `buffer` or `format` is a null pointer, `sprintf_s` and `swprintf_s` return -1 and set `errno` to `EINVAL`.  \n  \n `sprintf_s` returns the number of bytes stored in `buffer`, not counting the terminating null character. `swprintf_s` returns the number of wide characters stored in `buffer`, not counting the terminating null wide character.  \n  \n## Remarks  \n The `sprintf_s` function formats and stores a series of characters and values in `buffer`. Each `argument` (if any) is converted and output according to the corresponding format specification in `format`. The format consists of ordinary characters and has the same form and function as the `format` argument for [printf](../../c-runtime-library/reference/printf-printf-l-wprintf-wprintf-l.md). A null character is appended after the last character written. If copying occurs between strings that overlap, the behavior is undefined.  \n  \n One main difference between `sprintf_s` and `sprintf` is that `sprintf_s` checks the format string for valid formatting characters, whereas `sprintf` only checks if the format string or buffer are `NULL` pointers. If either check fails, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md). If execution is allowed to continue, the function returns -1 and sets `errno` to `EINVAL`.  \n  \n The other main difference between `sprintf_s` and `sprintf` is that `sprintf_s` takes a length parameter specifying the size of the output buffer in characters. If the buffer is too small for the formatted text, including the terminating null, then the buffer is set to an empty string by placing a null character at `buffer``[0]`, and the invalid parameter handler is invoked. Unlike `_snprintf`, `sprintf_s` guarantees that the buffer will be null-terminated unless the buffer size is zero.  \n  \n `swprintf_s` is a wide-character version of `sprintf_s`; the pointer arguments to `swprintf_s` are wide-character strings. Detection of encoding errors in `swprintf_s` may differ from that in `sprintf_s`. The versions of these functions with the `_l` suffix are identical except that they use the locale parameter passed in instead of the current thread locale.  \n  \n In C++, use of these functions is simplified by template overloads; the overloads can infer buffer length automatically, which eliminates the need to specify a size argument, and they can automatically replace older, non-secure functions with their newer, secure counterparts. For more information, see [Secure Template Overloads](../../c-runtime-library/secure-template-overloads.md).  \n  \n There are versions of `sprintf_s` that offer additional control over what happens if the buffer is too small. For more information, see [_snprintf_s, _snprintf_s_l, _snwprintf_s, _snwprintf_s_l](../../c-runtime-library/reference/snprintf-s-snprintf-s-l-snwprintf-s-snwprintf-s-l.md).  \n  \n### Generic-Text Routine Mappings  \n  \n|TCHAR.H routine|_UNICODE & _MBCS not defined|_MBCS defined|_UNICODE defined|  \n|---------------------|------------------------------------|--------------------|-----------------------|  \n|`_stprintf_s`|`sprintf_s`|`sprintf_s`|`swprintf_s`|  \n|`_stprintf_s_l`|`_sprintf_s_l`|`_sprintf_s_l`|`_swprintf_s_l`|  \n  \n## Requirements  \n  \n|Routine|Required header|  \n|-------------|---------------------|  \n|`sprintf_s`, `_sprintf_s_l`|C: \\<stdio.h><br /><br /> C++: \\<cstdio> or \\<stdio.h>|  \n|`swprintf_s`, `_swprintf_s_l`|C: \\<stdio.h> or \\<wchar.h><br /><br /> C++: \\<cstdio>, \\<cwchar>, \\<stdio.h> or \\<wchar.h>|  \n  \n For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md).  \n  \n## Example  \n  \n```  \n// crt_sprintf_s.c  \n// This program uses sprintf_s to format various  \n// data and place them in the string named buffer.  \n//  \n  \n#include <stdio.h>  \n  \nint main( void )  \n{  \n   char  buffer[200], s[] = \"computer\", c = 'l';  \n   int   i = 35, j;  \n   float fp = 1.7320534f;  \n  \n   // Format and print various data:   \n   j  = sprintf_s( buffer, 200,     \"   String:    %s\\n\", s );  \n   j += sprintf_s( buffer + j, 200 - j, \"   Character: %c\\n\", c );  \n   j += sprintf_s( buffer + j, 200 - j, \"   Integer:   %d\\n\", i );  \n   j += sprintf_s( buffer + j, 200 - j, \"   Real:      %f\\n\", fp );  \n  \n   printf_s( \"Output:\\n%s\\ncharacter count = %d\\n\", buffer, j );  \n}  \n```  \n  \n```Output  \nOutput:  \n   String:    computer  \n   Character: l  \n   Integer:   35  \n   Real:      1.732053  \n  \ncharacter count = 79  \n```  \n  \n## Example  \n  \n```  \n// crt_swprintf_s.c  \n// wide character example  \n// also demonstrates swprintf_s returning error code  \n#include <stdio.h>  \n  \nint main( void )  \n{  \n   wchar_t buf[100];  \n   int len = swprintf_s( buf, 100, L\"%s\", L\"Hello world\" );  \n   printf( \"wrote %d characters\\n\", len );  \n   len = swprintf_s( buf, 100, L\"%s\", L\"Hello\\xffff world\" );  \n   // swprintf_s fails because string contains WEOF (\\xffff)  \n   printf( \"wrote %d characters\\n\", len );  \n}  \n```  \n  \n```Output  \nwrote 11 characters  \nwrote -1 characters  \n```  \n  \n## .NET Framework Equivalent  \n [System::String::Format](https://msdn.microsoft.com/en-us/library/system.string.format.aspx)  \n  \n## See Also  \n [Stream I/O](../../c-runtime-library/stream-i-o.md)   \n [fprintf, _fprintf_l, fwprintf, _fwprintf_l](../../c-runtime-library/reference/fprintf-fprintf-l-fwprintf-fwprintf-l.md)   \n [printf, _printf_l, wprintf, _wprintf_l](../../c-runtime-library/reference/printf-printf-l-wprintf-wprintf-l.md)   \n [scanf, _scanf_l, wscanf, _wscanf_l](../../c-runtime-library/reference/scanf-scanf-l-wscanf-wscanf-l.md)   \n [sscanf, _sscanf_l, swscanf, _swscanf_l](../../c-runtime-library/reference/sscanf-sscanf-l-swscanf-swscanf-l.md)   \n [vprintf Functions](../../c-runtime-library/vprintf-functions.md)"}