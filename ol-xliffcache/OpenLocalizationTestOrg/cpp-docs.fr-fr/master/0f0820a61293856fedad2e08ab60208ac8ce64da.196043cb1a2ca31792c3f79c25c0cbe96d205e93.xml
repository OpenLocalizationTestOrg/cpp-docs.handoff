{"nodes":[{"pos":[12,61],"content":"Compiler Warning (Level 1) C4730 | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Compiler Warning (Level 1) C4730 | Microsoft Docs","pos":[0,49]}]},{"pos":[609,641],"content":"Compiler Warning (Level 1) C4730","linkify":"Compiler Warning (Level 1) C4730","nodes":[{"content":"Compiler Warning (Level 1) C4730","pos":[0,32]}]},{"content":"'main' : mixing _m64 and floating point expressions may result in incorrect code","pos":[642,722]},{"content":"A function uses <bpt id=\"p1\">[</bpt>__m64<ept id=\"p1\">](../../cpp/m64.md)</ept> and <bpt id=\"p2\">**</bpt>float<ept id=\"p2\">**</ept><ph id=\"ph1\">/</ph><bpt id=\"p3\">**</bpt>double<ept id=\"p3\">**</ept> types.","pos":[729,802],"source":"A function uses [__m64](../../cpp/m64.md) and **float**/**double** types."},{"content":"Because the MMX and floating-point registers share the same physical register space (cannot be used simultaneously), using <ph id=\"ph1\">`__m64`</ph> and <bpt id=\"p1\">**</bpt>float<ept id=\"p1\">**</ept><ph id=\"ph2\">/</ph><bpt id=\"p2\">**</bpt>double<ept id=\"p2\">**</ept> types in the same function can result in data corruption, possibly causing an exception.","pos":[803,1047],"source":" Because the MMX and floating-point registers share the same physical register space (cannot be used simultaneously), using `__m64` and **float**/**double** types in the same function can result in data corruption, possibly causing an exception."},{"pos":[1054,1266],"content":"To safely use <ph id=\"ph1\">`__m64`</ph> types and floating-point types in the same function, each instruction that uses one of the types should be separated by the <bpt id=\"p1\">**</bpt>_m_empty()<ept id=\"p1\">**</ept> (for MMX) or <bpt id=\"p2\">**</bpt>_m_femms()<ept id=\"p2\">**</ept> (for 3DNow!) intrinsic.","source":"To safely use `__m64` types and floating-point types in the same function, each instruction that uses one of the types should be separated by the **_m_empty()** (for MMX) or **_m_femms()** (for 3DNow!) intrinsic."},{"content":"The following sample generates C4730:","pos":[1273,1310]}],"content":"---\ntitle: \"Compiler Warning (Level 1) C4730 | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"error-reference\"\nf1_keywords: \n  - \"C4730\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"C4730\"\nms.assetid: 11303e3f-162b-4b19-970a-479686123a68\ncaps.latest.revision: 8\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Compiler Warning (Level 1) C4730\n'main' : mixing _m64 and floating point expressions may result in incorrect code  \n  \n A function uses [__m64](../../cpp/m64.md) and **float**/**double** types. Because the MMX and floating-point registers share the same physical register space (cannot be used simultaneously), using `__m64` and **float**/**double** types in the same function can result in data corruption, possibly causing an exception.  \n  \n To safely use `__m64` types and floating-point types in the same function, each instruction that uses one of the types should be separated by the **_m_empty()** (for MMX) or **_m_femms()** (for 3DNow!) intrinsic.  \n  \n The following sample generates C4730:  \n  \n```  \n// C4730.cpp  \n// compile with: /W1  \n// processor: x86  \n#include \"mmintrin.h\"  \n  \nvoid func(double)  \n{  \n}  \n  \nint main(__m64 a, __m64 b)  \n{  \n   __m64 m;  \n   double f;  \n   f = 1.0;  \n   m = _m_paddb(a, b);  \n   // uncomment the next line to resolve C4730  \n   // _m_empty();  \n   func(f * 3.0);   // C4730  \n}  \n```"}