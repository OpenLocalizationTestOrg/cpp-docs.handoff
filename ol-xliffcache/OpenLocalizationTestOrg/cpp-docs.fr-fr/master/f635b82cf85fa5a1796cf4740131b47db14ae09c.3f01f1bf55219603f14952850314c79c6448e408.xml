{"nodes":[{"pos":[12,84],"content":"How User Account Control (UAC) Affects Your Application | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"How User Account Control (UAC) Affects Your Application | Microsoft Docs","pos":[0,72]}]},{"content":"How User Account Control (UAC) Affects Your Application","pos":[727,782]},{"content":"User Account Control (UAC) is a feature of Windows Vista in which user accounts have limited privileges.","pos":[783,887]},{"content":"You can find detailed information about UAC at these sites:","pos":[888,947]},{"content":"Windows Vista User Account Control Step by Step Guide","pos":[958,1011]},{"content":"Developer Best Practices and Guidelines for Applications in a Least Privileged Environment","pos":[1069,1159]},{"content":"Understanding and Configuring User Account Control in Windows Vista","pos":[1217,1284]},{"content":"Building Projects after Enabling UAC","pos":[1340,1376]},{"content":"If you build a Visual C++ project on Windows Vista with UAC disabled, and you later enable UAC, you must clean and rebuild the project for it to work correctly.","pos":[1380,1540]},{"content":"Applications that Require Administrative Privileges","pos":[1549,1600]},{"content":"Be default, the Visual C++ linker embeds a UAC fragment into the manifest of an application with an execution level of <ph id=\"ph1\">`asInvoker`</ph>.","pos":[1604,1735],"source":"Be default, the Visual C++ linker embeds a UAC fragment into the manifest of an application with an execution level of `asInvoker`."},{"content":"If your application requires administrative privileges to run correctly (for example, if it modifies the HKLM node of the registry or if it writes to protected areas of the disk, such as the Windows directory), you must modify your application.","pos":[1736,1980]},{"content":"The first option is to modify the UAC fragment of the manifest to change the execution level to <bpt id=\"p1\">*</bpt>requireAdministrator<ept id=\"p1\">*</ept>.","pos":[1987,2106],"source":"The first option is to modify the UAC fragment of the manifest to change the execution level to *requireAdministrator*."},{"content":"The application will then prompt the user for administrative credentials before it runs.","pos":[2107,2195]},{"content":"For information about how to do this, see <bpt id=\"p1\">[</bpt>/MANIFESTUAC (Embeds UAC information in manifest)<ept id=\"p1\">](../build/reference/manifestuac-embeds-uac-information-in-manifest.md)</ept>.","pos":[2196,2360],"source":" For information about how to do this, see [/MANIFESTUAC (Embeds UAC information in manifest)](../build/reference/manifestuac-embeds-uac-information-in-manifest.md)."},{"content":"The second option is to not embed a UAC fragment into the manifest by specifying the <bpt id=\"p1\">**</bpt>/MANIFESTUAC:NO<ept id=\"p1\">**</ept> linker option.","pos":[2367,2486],"source":"The second option is to not embed a UAC fragment into the manifest by specifying the **/MANIFESTUAC:NO** linker option."},{"content":"In this case, your application will run virtualized.","pos":[2487,2539]},{"content":"Any changes you make to the registry or to the file system will not persist after your application has ended.","pos":[2540,2649]},{"content":"The following flowchart describes how your application will run depending on whether UAC is enabled and whether the application has a UAC manifest:","pos":[2656,2803]},{"content":"Windows Vista Loader behavior","pos":[2812,2841]},{"content":"See Also","pos":[2890,2898]},{"content":"Security Best Practices","pos":[2903,2926]}],"content":"---\ntitle: \"How User Account Control (UAC) Affects Your Application | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"UAC [C++]\"\n  - \"security [C++], User Account Control\"\n  - \"user accounts [C++]\"\n  - \"User Account Control [C++]\"\nms.assetid: 0d001870-253e-4989-b689-f78035953799\ncaps.latest.revision: 5\nauthor: \"ghogen\"\nms.author: \"ghogen\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"ru-ru\"\n  - \"zh-cn\"\n  - \"zh-tw\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"tr-tr\"\n---\n# How User Account Control (UAC) Affects Your Application\nUser Account Control (UAC) is a feature of Windows Vista in which user accounts have limited privileges. You can find detailed information about UAC at these sites:  \n  \n-   [Windows Vista User Account Control Step by Step Guide](http://go.microsoft.com/fwlink/?linkid=53781)  \n  \n-   [Developer Best Practices and Guidelines for Applications in a Least Privileged Environment](http://go.microsoft.com/fwlink/?linkid=82444)  \n  \n-   [Understanding and Configuring User Account Control in Windows Vista](http://go.microsoft.com/fwlink/?LinkId=82445)  \n  \n## Building Projects after Enabling UAC  \n If you build a Visual C++ project on Windows Vista with UAC disabled, and you later enable UAC, you must clean and rebuild the project for it to work correctly.  \n  \n## Applications that Require Administrative Privileges  \n Be default, the Visual C++ linker embeds a UAC fragment into the manifest of an application with an execution level of `asInvoker`. If your application requires administrative privileges to run correctly (for example, if it modifies the HKLM node of the registry or if it writes to protected areas of the disk, such as the Windows directory), you must modify your application.  \n  \n The first option is to modify the UAC fragment of the manifest to change the execution level to *requireAdministrator*. The application will then prompt the user for administrative credentials before it runs. For information about how to do this, see [/MANIFESTUAC (Embeds UAC information in manifest)](../build/reference/manifestuac-embeds-uac-information-in-manifest.md).  \n  \n The second option is to not embed a UAC fragment into the manifest by specifying the **/MANIFESTUAC:NO** linker option. In this case, your application will run virtualized. Any changes you make to the registry or to the file system will not persist after your application has ended.  \n  \n The following flowchart describes how your application will run depending on whether UAC is enabled and whether the application has a UAC manifest:  \n  \n ![Windows Vista Loader behavior](media/uacflowchart.png \"UACflowchart\")  \n  \n## See Also  \n [Security Best Practices](security-best-practices-for-cpp.md)"}