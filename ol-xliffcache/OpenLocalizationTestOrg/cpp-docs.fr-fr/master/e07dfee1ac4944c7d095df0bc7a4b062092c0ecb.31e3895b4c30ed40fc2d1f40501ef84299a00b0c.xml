{"nodes":[{"pos":[12,40],"content":"CDacl Class | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"CDacl Class | Microsoft Docs","pos":[0,28]}]},{"pos":[622,633],"content":"CDacl Class","linkify":"CDacl Class","nodes":[{"content":"CDacl Class","pos":[0,11]}]},{"content":"This class is a wrapper for a DACL (discretionary access-control list) structure.","pos":[634,715]},{"pos":[723,833],"content":"[!IMPORTANT]\n This class and its members cannot be used in applications that execute in the Windows Runtime.","leadings":["","> "],"nodes":[{"content":"This class and its members cannot be used in applications that execute in the Windows Runtime.","pos":[14,108]}]},{"pos":[842,848],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[896,903],"content":"Members","linkify":"Members","nodes":[{"content":"Members","pos":[0,7]}]},{"pos":[913,932],"content":"Public Constructors","linkify":"Public Constructors","nodes":[{"content":"Public Constructors","pos":[0,19]}]},{"content":"Name","pos":[939,943]},{"content":"Description","pos":[944,955]},{"pos":[993,1022],"content":"<bpt id=\"p1\">[</bpt>CDacl::CDacl<ept id=\"p1\">](#cdacl__cdacl)</ept>","source":"[CDacl::CDacl](#cdacl__cdacl)"},{"content":"The constructor.","pos":[1023,1039]},{"pos":[1044,1079],"content":"<bpt id=\"p1\">[</bpt>CDacl::~CDacl<ept id=\"p1\">](#cdacl___dtorcdacl)</ept>","source":"[CDacl::~CDacl](#cdacl___dtorcdacl)"},{"content":"The destructor.","pos":[1080,1095]},{"pos":[1106,1120],"content":"Public Methods","linkify":"Public Methods","nodes":[{"content":"Public Methods","pos":[0,14]}]},{"content":"Name","pos":[1127,1131]},{"content":"Description","pos":[1132,1143]},{"pos":[1181,1226],"content":"<bpt id=\"p1\">[</bpt>CDacl::AddAllowedAce<ept id=\"p1\">](#cdacl__addallowedace)</ept>","source":"[CDacl::AddAllowedAce](#cdacl__addallowedace)"},{"pos":[1227,1292],"content":"Adds an allowed ACE (access-control entry) to the <ph id=\"ph1\">`CDacl`</ph> object.","source":"Adds an allowed ACE (access-control entry) to the `CDacl` object."},{"pos":[1297,1340],"content":"<bpt id=\"p1\">[</bpt>CDacl::AddDeniedAce<ept id=\"p1\">](#cdacl__adddeniedace)</ept>","source":"[CDacl::AddDeniedAce](#cdacl__adddeniedace)"},{"pos":[1341,1381],"content":"Adds a denied ACE to the <ph id=\"ph1\">`CDacl`</ph> object.","source":"Adds a denied ACE to the `CDacl` object."},{"pos":[1386,1427],"content":"<bpt id=\"p1\">[</bpt>CDacl::GetAceCount<ept id=\"p1\">](#cdacl__getacecount)</ept>","source":"[CDacl::GetAceCount](#cdacl__getacecount)"},{"pos":[1428,1502],"content":"Returns the number of ACEs (access-control entries) in the <ph id=\"ph1\">`CDacl`</ph> object.","source":"Returns the number of ACEs (access-control entries) in the `CDacl` object."},{"pos":[1507,1544],"content":"<bpt id=\"p1\">[</bpt>CDacl::RemoveAce<ept id=\"p1\">](#cdacl__removeace)</ept>","source":"[CDacl::RemoveAce](#cdacl__removeace)"},{"pos":[1545,1615],"content":"Removes a specific ACE (access-control entry) from the <ph id=\"ph1\">`CDacl`</ph> object.","source":"Removes a specific ACE (access-control entry) from the `CDacl` object."},{"pos":[1620,1665],"content":"<bpt id=\"p1\">[</bpt>CDacl::RemoveAllAces<ept id=\"p1\">](#cdacl__removeallaces)</ept>","source":"[CDacl::RemoveAllAces](#cdacl__removeallaces)"},{"pos":[1666,1722],"content":"Removes all of the ACEs contained in the <ph id=\"ph1\">`CDacl`</ph> object.","source":"Removes all of the ACEs contained in the `CDacl` object."},{"pos":[1733,1749],"content":"Public Operators","linkify":"Public Operators","nodes":[{"content":"Public Operators","pos":[0,16]}]},{"content":"Name","pos":[1756,1760]},{"content":"Description","pos":[1761,1772]},{"pos":[1810,1850],"content":"<bpt id=\"p1\">[</bpt>CDacl::operator =<ept id=\"p1\">](#cdacl__operator_eq)</ept>","source":"[CDacl::operator =](#cdacl__operator_eq)"},{"content":"Assignment operator.","pos":[1851,1871]},{"pos":[1881,1888],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"An object's security descriptor can contain a DACL.","pos":[1892,1943]},{"content":"A DACL contains zero or more ACEs (access-control entries) that identify the users and groups who can access the object.","pos":[1944,2064]},{"content":"If a DACL is empty (that is, it contains zero ACEs), no access is explicitly granted, so access is implicitly denied.","pos":[2065,2182]},{"content":"However, if an object's security descriptor does not have a DACL, the object is unprotected and everyone has complete access.","pos":[2183,2308]},{"content":"To retrieve an object's DACL, you must be the object's owner or have READ_CONTROL access to the object.","pos":[2315,2418]},{"content":"To change an object's DACL, you must have WRITE_DAC access to the object.","pos":[2419,2492]},{"content":"Use the class methods provided to create, add, remove, and delete ACEs from the <ph id=\"ph1\">`CDacl`</ph> object.","pos":[2499,2594],"source":"Use the class methods provided to create, add, remove, and delete ACEs from the `CDacl` object."},{"content":"See also <bpt id=\"p1\">[</bpt>AtlGetDacl<ept id=\"p1\">](http://msdn.microsoft.com/library/a0973648-0d46-4c1a-914f-bda861fe5d19)</ept> and <bpt id=\"p2\">[</bpt>AtlSetDacl<ept id=\"p2\">](http://msdn.microsoft.com/library/eb88ccb6-1f1b-444d-b0c9-8d5cd0dd6c0b)</ept>.","pos":[2595,2778],"source":" See also [AtlGetDacl](http://msdn.microsoft.com/library/a0973648-0d46-4c1a-914f-bda861fe5d19) and [AtlSetDacl](http://msdn.microsoft.com/library/eb88ccb6-1f1b-444d-b0c9-8d5cd0dd6c0b)."},{"pos":[2785,2985],"content":"For an introduction to the access control model in Windows, see <bpt id=\"p1\">[</bpt>Access Control<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa374860)</ept> in the <ph id=\"ph1\">[!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)]</ph>.","source":"For an introduction to the access control model in Windows, see [Access Control](http://msdn.microsoft.com/library/windows/desktop/aa374860) in the [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)]."},{"pos":[2994,3015],"content":"Inheritance Hierarchy","linkify":"Inheritance Hierarchy","nodes":[{"content":"Inheritance Hierarchy","pos":[0,21]}]},{"pos":[3019,3060],"content":"<bpt id=\"p1\">[</bpt>CAcl<ept id=\"p1\">](../../atl/reference/cacl-class.md)</ept>","source":"[CAcl](../../atl/reference/cacl-class.md)"},{"pos":[3083,3095],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"pos":[3099,3124],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> atlsecurity.h","source":"**Header:** atlsecurity.h"},{"pos":[3134,3191],"content":"<bpt id=\"p1\">&lt;a name=\"cdacl__addallowedace\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDacl::AddAllowedAce","linkify":"<a name=\"cdacl__addallowedace\"></a>  CDacl::AddAllowedAce","source":"<a name=\"cdacl__addallowedace\"></a>  CDacl::AddAllowedAce"},{"pos":[3195,3260],"content":"Adds an allowed ACE (access-control entry) to the <ph id=\"ph1\">`CDacl`</ph> object.","source":"Adds an allowed ACE (access-control entry) to the `CDacl` object."},{"pos":[3551,3561],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"A <bpt id=\"p1\">[</bpt>CSid<ept id=\"p1\">](../../atl/reference/csid-class.md)</ept> object.","pos":[3575,3626],"source":" A [CSid](../../atl/reference/csid-class.md) object."},{"content":"Specifies the mask of access rights to be allowed for the specified <ph id=\"ph1\">`CSid`</ph> object.","pos":[3649,3731],"source":" Specifies the mask of access rights to be allowed for the specified `CSid` object."},{"content":"A set of bit flags that control ACE inheritance.","pos":[3752,3800]},{"content":"The object type.","pos":[3824,3840]},{"content":"The inherited object type.","pos":[3873,3899]},{"pos":[3909,3921],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"pos":[3925,4006],"content":"Returns <bpt id=\"p1\">**</bpt>true<ept id=\"p1\">**</ept> if the ACE is added to the <ph id=\"ph1\">`CDacl`</ph> object, <bpt id=\"p2\">**</bpt>false<ept id=\"p2\">**</ept> on failure.","source":"Returns **true** if the ACE is added to the `CDacl` object, **false** on failure."},{"pos":[4016,4023],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"A <ph id=\"ph1\">`CDacl`</ph> object contains zero or more ACEs (access-control entries) that identify the users and groups who can access the object.","pos":[4027,4157],"source":"A `CDacl` object contains zero or more ACEs (access-control entries) that identify the users and groups who can access the object."},{"content":"This method adds an ACE that allows access to the <ph id=\"ph1\">`CDacl`</ph> object.","pos":[4158,4223],"source":" This method adds an ACE that allows access to the `CDacl` object."},{"pos":[4231,4321],"content":"[!NOTE]\n The second form of `AddAllowedAce` is only available on Windows 2000 and later.","leadings":["","> "],"nodes":[{"content":"The second form of <ph id=\"ph1\">`AddAllowedAce`</ph> is only available on Windows 2000 and later.","pos":[9,88],"source":" The second form of `AddAllowedAce` is only available on Windows 2000 and later."}]},{"pos":[4328,4489],"content":"See <bpt id=\"p1\">[</bpt>ACE_HEADER<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa374919)</ept> for a description of the various flags which can be set in the <ph id=\"ph1\">`AceFlags`</ph> parameter.","source":"See [ACE_HEADER](http://msdn.microsoft.com/library/windows/desktop/aa374919) for a description of the various flags which can be set in the `AceFlags` parameter."},{"pos":[4499,4554],"content":"<bpt id=\"p1\">&lt;a name=\"cdacl__adddeniedace\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDacl::AddDeniedAce","linkify":"<a name=\"cdacl__adddeniedace\"></a>  CDacl::AddDeniedAce","source":"<a name=\"cdacl__adddeniedace\"></a>  CDacl::AddDeniedAce"},{"pos":[4558,4621],"content":"Adds a denied ACE (access-control entry) to the <ph id=\"ph1\">`CDacl`</ph> object.","source":"Adds a denied ACE (access-control entry) to the `CDacl` object."},{"pos":[4910,4920],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"A <ph id=\"ph1\">`CSid`</ph> object.","pos":[4934,4950],"source":" A `CSid` object."},{"content":"Specifies the mask of access rights to be denied for the specified <ph id=\"ph1\">`CSid`</ph> object.","pos":[4973,5054],"source":" Specifies the mask of access rights to be denied for the specified `CSid` object."},{"content":"A set of bit flags that control ACE inheritance.","pos":[5075,5123]},{"content":"Defaults to 0 in the first form of the method.","pos":[5124,5170]},{"content":"The object type.","pos":[5194,5210]},{"content":"The inherited object type.","pos":[5243,5269]},{"pos":[5279,5291],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"pos":[5295,5376],"content":"Returns <bpt id=\"p1\">**</bpt>true<ept id=\"p1\">**</ept> if the ACE is added to the <ph id=\"ph1\">`CDacl`</ph> object, <bpt id=\"p2\">**</bpt>false<ept id=\"p2\">**</ept> on failure.","source":"Returns **true** if the ACE is added to the `CDacl` object, **false** on failure."},{"pos":[5386,5393],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"A <ph id=\"ph1\">`CDacl`</ph> object contains zero or more ACEs (access-control entries) that identify the users and groups who can access the object.","pos":[5397,5527],"source":"A `CDacl` object contains zero or more ACEs (access-control entries) that identify the users and groups who can access the object."},{"content":"This method adds an ACE that denies access to the <ph id=\"ph1\">`CDacl`</ph> object.","pos":[5528,5593],"source":" This method adds an ACE that denies access to the `CDacl` object."},{"pos":[5601,5690],"content":"[!NOTE]\n The second form of `AddDeniedAce` is only available on Windows 2000 and later.","leadings":["","> "],"nodes":[{"content":"The second form of <ph id=\"ph1\">`AddDeniedAce`</ph> is only available on Windows 2000 and later.","pos":[9,87],"source":" The second form of `AddDeniedAce` is only available on Windows 2000 and later."}]},{"pos":[5697,5858],"content":"See <bpt id=\"p1\">[</bpt>ACE_HEADER<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa374919)</ept> for a description of the various flags which can be set in the <ph id=\"ph1\">`AceFlags`</ph> parameter.","source":"See [ACE_HEADER](http://msdn.microsoft.com/library/windows/desktop/aa374919) for a description of the various flags which can be set in the `AceFlags` parameter."},{"pos":[5868,5909],"content":"<bpt id=\"p1\">&lt;a name=\"cdacl__cdacl\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDacl::CDacl","linkify":"<a name=\"cdacl__cdacl\"></a>  CDacl::CDacl","source":"<a name=\"cdacl__cdacl\"></a>  CDacl::CDacl"},{"content":"The constructor.","pos":[5913,5929]},{"pos":[6010,6020],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"An existing <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept> (access-control list) structure.","pos":[6033,6085],"source":" An existing **ACL** (access-control list) structure."},{"pos":[6095,6102],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">`CDacl`</ph> object can be optionally created using an existing <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept> structure.","pos":[6106,6187],"source":"The `CDacl` object can be optionally created using an existing **ACL** structure."},{"content":"It is important to note that only a DACL (discretionary access-control list), and not a SACL (system access-control list), should be passed as this parameter.","pos":[6188,6346]},{"content":"In debug builds, passing a SACL will cause an ASSERT.","pos":[6347,6400]},{"content":"In release builds, passing a SACL will cause the ACEs (access-control entries) in the ACL to be ignored, and no error will occur.","pos":[6401,6530]},{"pos":[6540,6587],"content":"<bpt id=\"p1\">&lt;a name=\"cdacl___dtorcdacl\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDacl::~CDacl","linkify":"<a name=\"cdacl___dtorcdacl\"></a>  CDacl::~CDacl","source":"<a name=\"cdacl___dtorcdacl\"></a>  CDacl::~CDacl"},{"content":"The destructor.","pos":[6591,6606]},{"pos":[6648,6655],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[6659,6814],"content":"The destructor frees any resources acquired by the object, including all ACEs (access-control entries) using <bpt id=\"p1\">[</bpt>CDacl::RemoveAllAces<ept id=\"p1\">](#cdacl__removeallaces)</ept>.","source":"The destructor frees any resources acquired by the object, including all ACEs (access-control entries) using [CDacl::RemoveAllAces](#cdacl__removeallaces)."},{"pos":[6824,6877],"content":"<bpt id=\"p1\">&lt;a name=\"cdacl__getacecount\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDacl::GetAceCount","linkify":"<a name=\"cdacl__getacecount\"></a>  CDacl::GetAceCount","source":"<a name=\"cdacl__getacecount\"></a>  CDacl::GetAceCount"},{"pos":[6881,6955],"content":"Returns the number of ACEs (access-control entries) in the <ph id=\"ph1\">`CDacl`</ph> object.","source":"Returns the number of ACEs (access-control entries) in the `CDacl` object."},{"pos":[7012,7024],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"pos":[7028,7087],"content":"Returns the number of ACEs contained in the <ph id=\"ph1\">`CDacl`</ph> object.","source":"Returns the number of ACEs contained in the `CDacl` object."},{"pos":[7097,7149],"content":"<bpt id=\"p1\">&lt;a name=\"cdacl__operator_eq\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDacl::operator =","linkify":"<a name=\"cdacl__operator_eq\"></a>  CDacl::operator =","source":"<a name=\"cdacl__operator_eq\"></a>  CDacl::operator ="},{"content":"Assignment operator.","pos":[7153,7173]},{"pos":[7242,7252],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"The ACL (access-control list) to assign to the existing object.","pos":[7265,7328]},{"pos":[7338,7350],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"pos":[7354,7404],"content":"Returns a reference to the updated <ph id=\"ph1\">`CDacl`</ph> object.","source":"Returns a reference to the updated `CDacl` object."},{"pos":[7414,7421],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"You should ensure that you only pass a DACL (discretionary access-control list) to this function.","pos":[7425,7522]},{"content":"Passing a SACL (system access-control list) to this function will cause an ASSERT in debug builds but will cause no error in release builds.","pos":[7523,7663]},{"pos":[7673,7722],"content":"<bpt id=\"p1\">&lt;a name=\"cdacl__removeace\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDacl::RemoveAce","linkify":"<a name=\"cdacl__removeace\"></a>  CDacl::RemoveAce","source":"<a name=\"cdacl__removeace\"></a>  CDacl::RemoveAce"},{"pos":[7726,7796],"content":"Removes a specific ACE (access-control entry) from the <ph id=\"ph1\">`CDacl`</ph> object.","source":"Removes a specific ACE (access-control entry) from the `CDacl` object."},{"pos":[7858,7868],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"Index to the ACE entry to remove.","pos":[7884,7917]},{"pos":[7927,7934],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[7938,8048],"content":"This method is derived from <bpt id=\"p1\">[</bpt>CAtlArray::RemoveAt<ept id=\"p1\">](../../atl/reference/catlarray-class.md#catlarray__removeat)</ept>.","source":"This method is derived from [CAtlArray::RemoveAt](../../atl/reference/catlarray-class.md#catlarray__removeat)."},{"pos":[8058,8115],"content":"<bpt id=\"p1\">&lt;a name=\"cdacl__removeallaces\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept>  CDacl::RemoveAllAces","linkify":"<a name=\"cdacl__removeallaces\"></a>  CDacl::RemoveAllAces","source":"<a name=\"cdacl__removeallaces\"></a>  CDacl::RemoveAllAces"},{"pos":[8119,8200],"content":"Removes all of the ACEs (access-control entries) contained in the <ph id=\"ph1\">`CDacl`</ph> object.","source":"Removes all of the ACEs (access-control entries) contained in the `CDacl` object."},{"pos":[8253,8260],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[8264,8350],"content":"Removes every <bpt id=\"p1\">**</bpt>ACE<ept id=\"p1\">**</ept> (access-control entry) structure (if any) in the <ph id=\"ph1\">`CDacl`</ph> object.","source":"Removes every **ACE** (access-control entry) structure (if any) in the `CDacl` object."},{"pos":[8359,8367],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Security Sample<ept id=\"p1\">](../../visual-cpp-samples.md)</ept><ph id=\"ph1\"> </ph>","pos":[8371,8418],"source":"[Security Sample](../../visual-cpp-samples.md) "},{"content":"<bpt id=\"p1\"> [</bpt>CAcl Class<ept id=\"p1\">](../../atl/reference/cacl-class.md)</ept><ph id=\"ph1\"> </ph>","pos":[8421,8470],"source":" [CAcl Class](../../atl/reference/cacl-class.md) "},{"content":"<bpt id=\"p1\"> [</bpt>ACLs<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa374872)</ept><ph id=\"ph1\"> </ph>","pos":[8473,8541],"source":" [ACLs](http://msdn.microsoft.com/library/windows/desktop/aa374872) "},{"content":"<bpt id=\"p1\"> [</bpt>ACEs<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa374868)</ept><ph id=\"ph1\"> </ph>","pos":[8544,8612],"source":" [ACEs](http://msdn.microsoft.com/library/windows/desktop/aa374868) "},{"content":"<bpt id=\"p1\"> [</bpt>Class Overview<ept id=\"p1\">](../../atl/atl-class-overview.md)</ept><ph id=\"ph1\"> </ph>","pos":[8615,8666],"source":" [Class Overview](../../atl/atl-class-overview.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Security Global Functions<ept id=\"p1\">](../../atl/reference/security-global-functions.md)</ept>","pos":[8669,8747],"source":" [Security Global Functions](../../atl/reference/security-global-functions.md)"}],"content":"---\ntitle: \"CDacl Class | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"reference\"\nf1_keywords: \n  - \"ATL::CDacl\"\n  - \"CDacl\"\n  - \"ATL.CDacl\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"CDacl class\"\nms.assetid: 2dc76616-6362-4967-b6cf-e2d39ca37ddd\ncaps.latest.revision: 23\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# CDacl Class\nThis class is a wrapper for a DACL (discretionary access-control list) structure.  \n  \n> [!IMPORTANT]\n>  This class and its members cannot be used in applications that execute in the Windows Runtime.  \n  \n## Syntax  \n  \n```\nclass CDacl : public CAcl\n```  \n  \n## Members  \n  \n### Public Constructors  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CDacl::CDacl](#cdacl__cdacl)|The constructor.|  \n|[CDacl::~CDacl](#cdacl___dtorcdacl)|The destructor.|  \n  \n### Public Methods  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CDacl::AddAllowedAce](#cdacl__addallowedace)|Adds an allowed ACE (access-control entry) to the `CDacl` object.|  \n|[CDacl::AddDeniedAce](#cdacl__adddeniedace)|Adds a denied ACE to the `CDacl` object.|  \n|[CDacl::GetAceCount](#cdacl__getacecount)|Returns the number of ACEs (access-control entries) in the `CDacl` object.|  \n|[CDacl::RemoveAce](#cdacl__removeace)|Removes a specific ACE (access-control entry) from the `CDacl` object.|  \n|[CDacl::RemoveAllAces](#cdacl__removeallaces)|Removes all of the ACEs contained in the `CDacl` object.|  \n  \n### Public Operators  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CDacl::operator =](#cdacl__operator_eq)|Assignment operator.|  \n  \n## Remarks  \n An object's security descriptor can contain a DACL. A DACL contains zero or more ACEs (access-control entries) that identify the users and groups who can access the object. If a DACL is empty (that is, it contains zero ACEs), no access is explicitly granted, so access is implicitly denied. However, if an object's security descriptor does not have a DACL, the object is unprotected and everyone has complete access.  \n  \n To retrieve an object's DACL, you must be the object's owner or have READ_CONTROL access to the object. To change an object's DACL, you must have WRITE_DAC access to the object.  \n  \n Use the class methods provided to create, add, remove, and delete ACEs from the `CDacl` object. See also [AtlGetDacl](http://msdn.microsoft.com/library/a0973648-0d46-4c1a-914f-bda861fe5d19) and [AtlSetDacl](http://msdn.microsoft.com/library/eb88ccb6-1f1b-444d-b0c9-8d5cd0dd6c0b).  \n  \n For an introduction to the access control model in Windows, see [Access Control](http://msdn.microsoft.com/library/windows/desktop/aa374860) in the [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  \n  \n## Inheritance Hierarchy  \n [CAcl](../../atl/reference/cacl-class.md)  \n  \n `CDacl`  \n  \n## Requirements  \n **Header:** atlsecurity.h  \n  \n##  <a name=\"cdacl__addallowedace\"></a>  CDacl::AddAllowedAce  \n Adds an allowed ACE (access-control entry) to the `CDacl` object.  \n  \n```\nbool AddAllowedAce(const CSid& rSid,\n    ACCESS_MASK AccessMask,\n    BYTE AceFlags = 0) throw(...);\n\n    bool AddAllowedAce(const CSid& rSid,\n    ACCESS_MASK AccessMask,\n    BYTE AceFlags,\n    const GUID* pObjectType,\n    const GUID* pInheritedObjectType) throw(...);\n```  \n  \n### Parameters  \n `rSid`  \n A [CSid](../../atl/reference/csid-class.md) object.  \n  \n `AccessMask`  \n Specifies the mask of access rights to be allowed for the specified `CSid` object.  \n  \n `AceFlags`  \n A set of bit flags that control ACE inheritance.  \n  \n `pObjectType`  \n The object type.  \n  \n `pInheritedObjectType`  \n The inherited object type.  \n  \n### Return Value  \n Returns **true** if the ACE is added to the `CDacl` object, **false** on failure.  \n  \n### Remarks  \n A `CDacl` object contains zero or more ACEs (access-control entries) that identify the users and groups who can access the object. This method adds an ACE that allows access to the `CDacl` object.  \n  \n> [!NOTE]\n>  The second form of `AddAllowedAce` is only available on Windows 2000 and later.  \n  \n See [ACE_HEADER](http://msdn.microsoft.com/library/windows/desktop/aa374919) for a description of the various flags which can be set in the `AceFlags` parameter.  \n  \n##  <a name=\"cdacl__adddeniedace\"></a>  CDacl::AddDeniedAce  \n Adds a denied ACE (access-control entry) to the `CDacl` object.  \n  \n```\nbool AddDeniedAce(const CSid& rSid,\n    ACCESS_MASK AccessMask,\n    BYTE AceFlags = 0) throw(...);\n\n    bool AddDeniedAce(const CSid& rSid,\n    ACCESS_MASK AccessMask,\n    BYTE AceFlags,\n    const GUID* pObjectType,\n    const GUID* pInheritedObjectType) throw(...);\n```  \n  \n### Parameters  \n `rSid`  \n A `CSid` object.  \n  \n `AccessMask`  \n Specifies the mask of access rights to be denied for the specified `CSid` object.  \n  \n `AceFlags`  \n A set of bit flags that control ACE inheritance. Defaults to 0 in the first form of the method.  \n  \n `pObjectType`  \n The object type.  \n  \n `pInheritedObjectType`  \n The inherited object type.  \n  \n### Return Value  \n Returns **true** if the ACE is added to the `CDacl` object, **false** on failure.  \n  \n### Remarks  \n A `CDacl` object contains zero or more ACEs (access-control entries) that identify the users and groups who can access the object. This method adds an ACE that denies access to the `CDacl` object.  \n  \n> [!NOTE]\n>  The second form of `AddDeniedAce` is only available on Windows 2000 and later.  \n  \n See [ACE_HEADER](http://msdn.microsoft.com/library/windows/desktop/aa374919) for a description of the various flags which can be set in the `AceFlags` parameter.  \n  \n##  <a name=\"cdacl__cdacl\"></a>  CDacl::CDacl  \n The constructor.  \n  \n```\nCDacl (const ACL& rhs) throw(...);\n\n    CDacl () throw();\n```  \n  \n### Parameters  \n `rhs`  \n An existing **ACL** (access-control list) structure.  \n  \n### Remarks  \n The `CDacl` object can be optionally created using an existing **ACL** structure. It is important to note that only a DACL (discretionary access-control list), and not a SACL (system access-control list), should be passed as this parameter. In debug builds, passing a SACL will cause an ASSERT. In release builds, passing a SACL will cause the ACEs (access-control entries) in the ACL to be ignored, and no error will occur.  \n  \n##  <a name=\"cdacl___dtorcdacl\"></a>  CDacl::~CDacl  \n The destructor.  \n  \n```\n~CDacl () throw();\n```  \n  \n### Remarks  \n The destructor frees any resources acquired by the object, including all ACEs (access-control entries) using [CDacl::RemoveAllAces](#cdacl__removeallaces).  \n  \n##  <a name=\"cdacl__getacecount\"></a>  CDacl::GetAceCount  \n Returns the number of ACEs (access-control entries) in the `CDacl` object.  \n  \n```\nUINT GetAceCount() const throw();\n```  \n  \n### Return Value  \n Returns the number of ACEs contained in the `CDacl` object.  \n  \n##  <a name=\"cdacl__operator_eq\"></a>  CDacl::operator =  \n Assignment operator.  \n  \n```\nCDacl& operator= (const ACL& rhs) throw(...);\n```  \n  \n### Parameters  \n `rhs`  \n The ACL (access-control list) to assign to the existing object.  \n  \n### Return Value  \n Returns a reference to the updated `CDacl` object.  \n  \n### Remarks  \n You should ensure that you only pass a DACL (discretionary access-control list) to this function. Passing a SACL (system access-control list) to this function will cause an ASSERT in debug builds but will cause no error in release builds.  \n  \n##  <a name=\"cdacl__removeace\"></a>  CDacl::RemoveAce  \n Removes a specific ACE (access-control entry) from the `CDacl` object.  \n  \n```\nvoid RemoveAce(UINT   nIndex) throw();\n```  \n  \n### Parameters  \n `nIndex`  \n Index to the ACE entry to remove.  \n  \n### Remarks  \n This method is derived from [CAtlArray::RemoveAt](../../atl/reference/catlarray-class.md#catlarray__removeat).  \n  \n##  <a name=\"cdacl__removeallaces\"></a>  CDacl::RemoveAllAces  \n Removes all of the ACEs (access-control entries) contained in the `CDacl` object.  \n  \n```\nvoid RemoveAllAces() throw();\n```  \n  \n### Remarks  \n Removes every **ACE** (access-control entry) structure (if any) in the `CDacl` object.  \n  \n## See Also  \n [Security Sample](../../visual-cpp-samples.md)   \n [CAcl Class](../../atl/reference/cacl-class.md)   \n [ACLs](http://msdn.microsoft.com/library/windows/desktop/aa374872)   \n [ACEs](http://msdn.microsoft.com/library/windows/desktop/aa374868)   \n [Class Overview](../../atl/atl-class-overview.md)   \n [Security Global Functions](../../atl/reference/security-global-functions.md)\n"}