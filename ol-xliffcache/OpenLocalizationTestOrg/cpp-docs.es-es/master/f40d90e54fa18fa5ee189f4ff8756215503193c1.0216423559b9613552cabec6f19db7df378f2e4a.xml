{"nodes":[{"pos":[12,67],"content":"Security Implications of Customization | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Security Implications of Customization | Microsoft Docs","pos":[0,55]}]},{"content":"Security Implications of Customization","pos":[662,700]},{"content":"This topic discusses a potential security weakness in MFC.","pos":[701,759]},{"content":"Potential Security Weakness","pos":[768,795]},{"content":"MFC allows the user customize the look of an application user interface, for example, the appearance of buttons and icons.","pos":[799,921]},{"content":"MFC also supports user-defined tools, which let the user execute shell commands.","pos":[922,1002]},{"content":"A security vulnerability arises because the customized settings of the application are saved in the user profile in the registry.","pos":[1003,1132]},{"content":"Anyone who can access the registry can edit those settings and change the application appearance or behavior.","pos":[1133,1242]},{"content":"For example, an administrator on the computer could impersonate a user by causing the user's application to execute arbitrary programs (even from a network share).","pos":[1243,1406]},{"content":"Workarounds","pos":[1415,1426]},{"content":"We recommend any of these three ways to close the vulnerabilities in the registry:","pos":[1430,1512]},{"content":"Encrypt the data that is stored there","pos":[1522,1559]},{"content":"Store the data in a secure file instead of in the registry.","pos":[1569,1628]},{"pos":[1639,1851],"content":"To accomplish either of these first two ways, derive a class from <bpt id=\"p1\">[</bpt>CSettingsStore Class<ept id=\"p1\">](../mfc/reference/csettingsstore-class.md)</ept> and override its methods to implement encryption or storage outside the registry.","source":"To accomplish either of these first two ways, derive a class from [CSettingsStore Class](../mfc/reference/csettingsstore-class.md) and override its methods to implement encryption or storage outside the registry."},{"content":"You can also disable customizations in your application.","pos":[1861,1917]},{"content":"See Also","pos":[1926,1934]},{"content":"Customization for MFC","pos":[1939,1960]}],"content":"---\ntitle: \"Security Implications of Customization | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"security, MFC Feature Pack\"\n  - \"MFC Feature Pack, security\"\nms.assetid: 9be96b12-be38-43bd-a133-5d671265f7a1\ncaps.latest.revision: 14\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"ru-ru\"\n  - \"zh-cn\"\n  - \"zh-tw\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"tr-tr\"\n---\n# Security Implications of Customization\nThis topic discusses a potential security weakness in MFC.  \n  \n## Potential Security Weakness  \n MFC allows the user customize the look of an application user interface, for example, the appearance of buttons and icons. MFC also supports user-defined tools, which let the user execute shell commands. A security vulnerability arises because the customized settings of the application are saved in the user profile in the registry. Anyone who can access the registry can edit those settings and change the application appearance or behavior. For example, an administrator on the computer could impersonate a user by causing the user's application to execute arbitrary programs (even from a network share).  \n  \n## Workarounds  \n We recommend any of these three ways to close the vulnerabilities in the registry:  \n  \n-   Encrypt the data that is stored there  \n  \n-   Store the data in a secure file instead of in the registry.  \n  \n     To accomplish either of these first two ways, derive a class from [CSettingsStore Class](../mfc/reference/csettingsstore-class.md) and override its methods to implement encryption or storage outside the registry.  \n  \n-   You can also disable customizations in your application.  \n  \n## See Also  \n [Customization for MFC](../mfc/customization-for-mfc.md)\n\n"}