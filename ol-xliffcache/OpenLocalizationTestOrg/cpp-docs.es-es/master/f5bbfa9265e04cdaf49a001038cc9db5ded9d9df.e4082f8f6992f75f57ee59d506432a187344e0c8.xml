{"nodes":[{"pos":[12,61],"content":"Compiler Warning (level 1) C4251 | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Compiler Warning (level 1) C4251 | Microsoft Docs","pos":[0,49]}]},{"pos":[610,642],"content":"Compiler Warning (level 1) C4251","linkify":"Compiler Warning (level 1) C4251","nodes":[{"content":"Compiler Warning (level 1) C4251","pos":[0,32]}]},{"content":"'identifier' : class 'type' needs to have dll-interface to be used by clients of class 'type2'","pos":[643,737]},{"pos":[744,890],"content":"To minimize the possibility of data corruption when exporting a class with <bpt id=\"p1\">[</bpt>__declspec(dllexport)<ept id=\"p1\">](../../cpp/dllexport-dllimport.md)</ept>, ensure that:","source":"To minimize the possibility of data corruption when exporting a class with [__declspec(dllexport)](../../cpp/dllexport-dllimport.md), ensure that:"},{"content":"All your static data is access through functions that are exported from the DLL.","pos":[900,980]},{"content":"No inlined methods of your class can modify static data.","pos":[990,1046]},{"pos":[1056,1325],"content":"No inlined methods of your class use CRT functions or other library functions use static data (see <bpt id=\"p1\">[</bpt>Potential Errors Passing CRT Objects Across DLL Boundaries<ept id=\"p1\">](../../c-runtime-library/potential-errors-passing-crt-objects-across-dll-boundaries.md)</ept> for more information).","source":"No inlined methods of your class use CRT functions or other library functions use static data (see [Potential Errors Passing CRT Objects Across DLL Boundaries](../../c-runtime-library/potential-errors-passing-crt-objects-across-dll-boundaries.md) for more information)."},{"content":"No methods of your class (regardless of inlining) can use types where the instantiation in the EXE and DLL have static data differences.","pos":[1335,1471]},{"content":"You can avoid exporting classes by defining a DLL that defines a class with virtual functions, and functions you can call to instantiate and delete objects of the type.","pos":[1478,1646]},{"content":"You can then just call virtual functions on the type.","pos":[1648,1701]},{"pos":[1708,1886],"content":"For more information on exporting templates, see <bpt id=\"p1\">[</bpt>http://support.microsoft.com/default.aspx?scid=KB;EN-US;168958<ept id=\"p1\">](http://support.microsoft.com/default.aspx?scid=KB;EN-US;168958)</ept>.","source":"For more information on exporting templates, see [http://support.microsoft.com/default.aspx?scid=KB;EN-US;168958](http://support.microsoft.com/default.aspx?scid=KB;EN-US;168958)."},{"pos":[1893,2075],"content":"C4251 can be ignored if you are deriving from a type in the Standard C++ Library, compiling a debug release (<bpt id=\"p1\">**</bpt>/MTd<ept id=\"p1\">**</ept>) and where the compiler error message refers to _Container_base.","source":"C4251 can be ignored if you are deriving from a type in the Standard C++ Library, compiling a debug release (**/MTd**) and where the compiler error message refers to _Container_base."}],"content":"---\ntitle: \"Compiler Warning (level 1) C4251 | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"error-reference\"\nf1_keywords: \n  - \"C4251\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"C4251\"\nms.assetid: a9992038-f0c2-4fc4-a9be-4509442cbc1e\ncaps.latest.revision: 16\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Compiler Warning (level 1) C4251\n'identifier' : class 'type' needs to have dll-interface to be used by clients of class 'type2'  \n  \n To minimize the possibility of data corruption when exporting a class with [__declspec(dllexport)](../../cpp/dllexport-dllimport.md), ensure that:  \n  \n-   All your static data is access through functions that are exported from the DLL.  \n  \n-   No inlined methods of your class can modify static data.  \n  \n-   No inlined methods of your class use CRT functions or other library functions use static data (see [Potential Errors Passing CRT Objects Across DLL Boundaries](../../c-runtime-library/potential-errors-passing-crt-objects-across-dll-boundaries.md) for more information).  \n  \n-   No methods of your class (regardless of inlining) can use types where the instantiation in the EXE and DLL have static data differences.  \n  \n You can avoid exporting classes by defining a DLL that defines a class with virtual functions, and functions you can call to instantiate and delete objects of the type.  You can then just call virtual functions on the type.  \n  \n For more information on exporting templates, see [http://support.microsoft.com/default.aspx?scid=KB;EN-US;168958](http://support.microsoft.com/default.aspx?scid=KB;EN-US;168958).  \n  \n C4251 can be ignored if you are deriving from a type in the Standard C++ Library, compiling a debug release (**/MTd**) and where the compiler error message refers to _Container_base.  \n  \n```  \n// C4251.cpp  \n// compile with: /EHsc /MTd /W2 /c  \n#include <vector>  \nusing namespace std;  \nclass Node;  \nclass __declspec(dllimport) VecWrapper : vector<Node *> {};   // C4251  \n```"}