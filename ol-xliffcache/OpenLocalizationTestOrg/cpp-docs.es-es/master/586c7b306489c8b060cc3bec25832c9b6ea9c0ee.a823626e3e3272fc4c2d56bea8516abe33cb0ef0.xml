{"nodes":[{"pos":[12,73],"content":"Support for Multibyte Character Sets (MBCSs) | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Support for Multibyte Character Sets (MBCSs) | Microsoft Docs","pos":[0,61]}]},{"content":"Support for Multibyte Character Sets (MBCSs)","pos":[716,760]},{"content":"Multibyte character sets (MBCSs) are an older approach to the need to support character sets, like Japanese and Chinese, that cannot be represented in a single byte.","pos":[761,926]},{"content":"If you are doing new development, you should use Unicode for all text strings except perhaps system strings that are not seen by end users.","pos":[927,1066]},{"content":"MBCS is a legacy technology and is not recommended for new development.","pos":[1067,1138]},{"content":"The most common MBCS implementation is double-byte character sets (DBCSs).","pos":[1145,1219]},{"content":"Visual C++ in general, and MFC in particular, is fully enabled for DBCS.","pos":[1220,1292]},{"pos":[1300,1589],"content":"[!WARNING]\n In Visual Studio 2013 and later, the MFC libraries for multi-byle character encoding (MBCS) will be provided as an add-on to Visual Studio and will be available free of charge to Visual Studio customers (Professional and Enterprise editions only) from the MSDN download site.","leadings":["","> "],"nodes":[{"content":"In Visual Studio 2013 and later, the MFC libraries for multi-byle character encoding (MBCS) will be provided as an add-on to Visual Studio and will be available free of charge to Visual Studio customers (Professional and Enterprise editions only) from the MSDN download site.","pos":[12,287]}]},{"content":"The libraries require about 440 MB on your drive, and the installation includes all localized versions of the libraries.","pos":[1600,1720]},{"content":"You can install it on any machine on which Visual Studio Community, Professional, or Enterprise edition is installed, and which has the in-box MFC feature enabled.","pos":[1721,1884]},{"content":"If you uninstall or repair Visual Studio, the MBCS libraries will also be uninstalled or repaired.","pos":[1895,1993]},{"content":"However, if you just remove the MFC feature, the MBCS libraries will remain on your system.","pos":[1994,2085]},{"content":"If you repair the MBCS libraries, Visual Studio is not modified in any way.","pos":[2086,2161]},{"content":"The Redistributable Packages for Visual Studio 2013 and later will still include the MBCS MFC DLLs.","pos":[2172,2271]},{"content":"No additional steps are required to redistribute the DLLs to your customers.","pos":[2272,2348]},{"content":"For samples, see the MFC source code files.","pos":[2355,2398]},{"content":"For platforms used in markets whose languages use large character sets, the best alternative to Unicode is MBCS.","pos":[2405,2517]},{"content":"MFC supports MBCS by using internationalizable data types and C run-time functions.","pos":[2518,2601]},{"content":"You should do the same in your code.","pos":[2602,2638]},{"content":"Under MBCS, characters are encoded in either 1 or 2 bytes.","pos":[2645,2703]},{"content":"In 2-byte characters, the first, or lead byte, signals that both it and the following byte are to be interpreted as one character.","pos":[2704,2834]},{"content":"The first byte comes from a range of codes reserved for use as lead bytes.","pos":[2835,2909]},{"content":"Which ranges of bytes can be lead bytes depends on the code page in use.","pos":[2910,2982]},{"content":"For example, Japanese code page 932 uses the range 0x81 through 0x9F as lead bytes, but Korean code page 949 uses a different range.","pos":[2983,3115]},{"content":"Consider all the following in your MBCS programming.","pos":[3122,3174]},{"content":"MBCS characters in the environment","pos":[3181,3215]},{"content":"MBCS characters can appear in strings such as file and directory names.","pos":[3219,3290]},{"content":"Editing operations","pos":[3297,3315]},{"content":"Editing operations in MBCS applications should operate on characters, not bytes.","pos":[3319,3399]},{"content":"The caret should not split a character, the RIGHT ARROW key should move right one character, and so on.","pos":[3400,3503]},{"content":"<bpt id=\"p1\">**</bpt>Delete<ept id=\"p1\">**</ept> should delete a character; <bpt id=\"p2\">**</bpt>Undo<ept id=\"p2\">**</ept> should reinsert it.","pos":[3504,3570],"source":"**Delete** should delete a character; **Undo** should reinsert it."},{"content":"String handling","pos":[3577,3592]},{"content":"In an application that uses MBCS, string handling poses special problems.","pos":[3596,3669]},{"content":"Characters of both widths are mixed in a single string; therefore, you must remember to check for lead bytes.","pos":[3670,3779]},{"content":"Run-time library support","pos":[3786,3810]},{"content":"The C run-time library and MFC support single-byte, MBCS, and Unicode programming.","pos":[3814,3896]},{"content":"Single-byte strings are processed with the <ph id=\"ph1\">`str`</ph> family of run-time functions, MBCS strings are processed with corresponding <ph id=\"ph2\">`_mbs`</ph> functions, and Unicode strings are processed with corresponding <bpt id=\"p1\">*</bpt>wcs<ept id=\"p1\">*</ept> functions.","pos":[3897,4109],"source":" Single-byte strings are processed with the `str` family of run-time functions, MBCS strings are processed with corresponding `_mbs` functions, and Unicode strings are processed with corresponding *wcs* functions."},{"content":"MFC class member function implementations use portable run-time functions that map, under the right circumstances, to the normal <ph id=\"ph1\">`str`</ph> family of functions, the MBCS functions, or the Unicode functions, as described in \"MBCS/Unicode portability.\"","pos":[4110,4355],"source":" MFC class member function implementations use portable run-time functions that map, under the right circumstances, to the normal `str` family of functions, the MBCS functions, or the Unicode functions, as described in \"MBCS/Unicode portability.\""},{"content":"MBCS/Unicode portability","pos":[4362,4386]},{"content":"Using the Tchar.h header file, you can build single-byte, MBCS, and Unicode applications from the same sources.","pos":[4390,4501]},{"content":"Tchar.h defines macros prefixed with <bpt id=\"p1\">*</bpt>_tcs<ept id=\"p1\">*</ept> , which map to <ph id=\"ph1\">`str`</ph>, <ph id=\"ph2\">`_mbs`</ph>, or <bpt id=\"p2\">*</bpt>wcs<ept id=\"p2\">*</ept> functions, as appropriate.","pos":[4502,4611],"source":" Tchar.h defines macros prefixed with *_tcs* , which map to `str`, `_mbs`, or *wcs* functions, as appropriate."},{"content":"To build MBCS, define the symbol <bpt id=\"p1\">**</bpt>_MBCS<ept id=\"p1\">**</ept>.","pos":[4612,4655],"source":" To build MBCS, define the symbol **_MBCS**."},{"content":"To build Unicode, define the symbol <bpt id=\"p1\">**</bpt>_UNICODE<ept id=\"p1\">**</ept>.","pos":[4656,4705],"source":" To build Unicode, define the symbol **_UNICODE**."},{"content":"By default, <bpt id=\"p1\">**</bpt>_MBCS<ept id=\"p1\">**</ept> is defined for MFC applications.","pos":[4706,4760],"source":" By default, **_MBCS** is defined for MFC applications."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Generic-Text Mappings in Tchar.h<ept id=\"p1\">](../text/generic-text-mappings-in-tchar-h.md)</ept>.","pos":[4761,4867],"source":" For more information, see [Generic-Text Mappings in Tchar.h](../text/generic-text-mappings-in-tchar-h.md)."},{"pos":[4875,4954],"content":"[!NOTE]\n Behavior is undefined if you define both **_UNICODE** and **_MBCS**.","leadings":["","> "],"nodes":[{"content":"Behavior is undefined if you define both <bpt id=\"p1\">**</bpt>_UNICODE<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>_MBCS<ept id=\"p2\">**</ept>.","pos":[9,77],"source":" Behavior is undefined if you define both **_UNICODE** and **_MBCS**."}]},{"content":"The Mbctype.h and Mbstring.h header files define MBCS-specific functions and macros, which you might need in some cases.","pos":[4961,5081]},{"content":"For example, <ph id=\"ph1\">`_ismbblead`</ph> tells you whether a specific byte in a string is a lead byte.","pos":[5082,5169],"source":" For example, `_ismbblead` tells you whether a specific byte in a string is a lead byte."},{"pos":[5176,5308],"content":"For international portability, code your program with <bpt id=\"p1\">[</bpt>Unicode<ept id=\"p1\">](../text/support-for-unicode.md)</ept> or multibyte character sets (MBCSs).","source":"For international portability, code your program with [Unicode](../text/support-for-unicode.md) or multibyte character sets (MBCSs)."},{"content":"What do you want to do?","pos":[5317,5340]},{"content":"Enable MBCS in my program","pos":[5351,5376]},{"content":"Enable both Unicode and MBCS in my program","pos":[5423,5465]},{"content":"Use MBCS to create an internationalized program","pos":[5521,5568]},{"content":"See a summary of MBCS programming","pos":[5614,5647]},{"content":"Learn about generic-text mappings for byte-width portability","pos":[5693,5753]},{"content":"See Also","pos":[5808,5816]},{"content":"Text and Strings","pos":[5821,5837]},{"content":"MBCS Support in Visual C++","pos":[5887,5913]}],"content":"---\ntitle: \"Support for Multibyte Character Sets (MBCSs) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"_mbcs\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"MBCS [C++], about MBCS\"\n  - \"character sets [C++], multibyte\"\n  - \"multibyte characters [C++]\"\n  - \"MBCS [C++]\"\nms.assetid: b498733c-a1e1-45e3-8f26-d6da3cb5f2dd\ncaps.latest.revision: 11\nauthor: \"ghogen\"\nms.author: \"ghogen\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Support for Multibyte Character Sets (MBCSs)\nMultibyte character sets (MBCSs) are an older approach to the need to support character sets, like Japanese and Chinese, that cannot be represented in a single byte. If you are doing new development, you should use Unicode for all text strings except perhaps system strings that are not seen by end users. MBCS is a legacy technology and is not recommended for new development.  \n  \n The most common MBCS implementation is double-byte character sets (DBCSs). Visual C++ in general, and MFC in particular, is fully enabled for DBCS.  \n  \n> [!WARNING]\n>  In Visual Studio 2013 and later, the MFC libraries for multi-byle character encoding (MBCS) will be provided as an add-on to Visual Studio and will be available free of charge to Visual Studio customers (Professional and Enterprise editions only) from the MSDN download site.  \n>   \n>  The libraries require about 440 MB on your drive, and the installation includes all localized versions of the libraries. You can install it on any machine on which Visual Studio Community, Professional, or Enterprise edition is installed, and which has the in-box MFC feature enabled.  \n>   \n>  If you uninstall or repair Visual Studio, the MBCS libraries will also be uninstalled or repaired. However, if you just remove the MFC feature, the MBCS libraries will remain on your system. If you repair the MBCS libraries, Visual Studio is not modified in any way.  \n>   \n>  The Redistributable Packages for Visual Studio 2013 and later will still include the MBCS MFC DLLs. No additional steps are required to redistribute the DLLs to your customers.  \n  \n For samples, see the MFC source code files.  \n  \n For platforms used in markets whose languages use large character sets, the best alternative to Unicode is MBCS. MFC supports MBCS by using internationalizable data types and C run-time functions. You should do the same in your code.  \n  \n Under MBCS, characters are encoded in either 1 or 2 bytes. In 2-byte characters, the first, or lead byte, signals that both it and the following byte are to be interpreted as one character. The first byte comes from a range of codes reserved for use as lead bytes. Which ranges of bytes can be lead bytes depends on the code page in use. For example, Japanese code page 932 uses the range 0x81 through 0x9F as lead bytes, but Korean code page 949 uses a different range.  \n  \n Consider all the following in your MBCS programming.  \n  \n MBCS characters in the environment  \n MBCS characters can appear in strings such as file and directory names.  \n  \n Editing operations  \n Editing operations in MBCS applications should operate on characters, not bytes. The caret should not split a character, the RIGHT ARROW key should move right one character, and so on. **Delete** should delete a character; **Undo** should reinsert it.  \n  \n String handling  \n In an application that uses MBCS, string handling poses special problems. Characters of both widths are mixed in a single string; therefore, you must remember to check for lead bytes.  \n  \n Run-time library support  \n The C run-time library and MFC support single-byte, MBCS, and Unicode programming. Single-byte strings are processed with the `str` family of run-time functions, MBCS strings are processed with corresponding `_mbs` functions, and Unicode strings are processed with corresponding *wcs* functions. MFC class member function implementations use portable run-time functions that map, under the right circumstances, to the normal `str` family of functions, the MBCS functions, or the Unicode functions, as described in \"MBCS/Unicode portability.\"  \n  \n MBCS/Unicode portability  \n Using the Tchar.h header file, you can build single-byte, MBCS, and Unicode applications from the same sources. Tchar.h defines macros prefixed with *_tcs* , which map to `str`, `_mbs`, or *wcs* functions, as appropriate. To build MBCS, define the symbol **_MBCS**. To build Unicode, define the symbol **_UNICODE**. By default, **_MBCS** is defined for MFC applications. For more information, see [Generic-Text Mappings in Tchar.h](../text/generic-text-mappings-in-tchar-h.md).  \n  \n> [!NOTE]\n>  Behavior is undefined if you define both **_UNICODE** and **_MBCS**.  \n  \n The Mbctype.h and Mbstring.h header files define MBCS-specific functions and macros, which you might need in some cases. For example, `_ismbblead` tells you whether a specific byte in a string is a lead byte.  \n  \n For international portability, code your program with [Unicode](../text/support-for-unicode.md) or multibyte character sets (MBCSs).  \n  \n## What do you want to do?  \n  \n-   [Enable MBCS in my program](../text/international-enabling.md)  \n  \n-   [Enable both Unicode and MBCS in my program](../text/internationalization-strategies.md)  \n  \n-   [Use MBCS to create an internationalized program](../text/mbcs-programming-tips.md)  \n  \n-   [See a summary of MBCS programming](../text/mbcs-programming-tips.md)  \n  \n-   [Learn about generic-text mappings for byte-width portability](../text/generic-text-mappings-in-tchar-h.md)  \n  \n## See Also  \n [Text and Strings](../text/text-and-strings-in-visual-cpp.md)   \n [MBCS Support in Visual C++](../text/mbcs-support-in-visual-cpp.md)"}