{"nodes":[{"pos":[12,36],"content":"realloc | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"realloc | Microsoft Docs","pos":[0,24]}]},{"pos":[1193,1200],"content":"realloc","linkify":"realloc","nodes":[{"content":"realloc","pos":[0,7]}]},{"content":"Reallocate memory blocks.","pos":[1201,1226]},{"pos":[1235,1241],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1328,1338],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"Pointer to previously allocated memory block.","pos":[1356,1401]},{"content":"New size in bytes.","pos":[1418,1436]},{"pos":[1445,1457],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"pos":[1461,1549],"content":"<ph id=\"ph1\">`realloc`</ph> returns a <ph id=\"ph2\">`void`</ph> pointer to the reallocated (and possibly moved) memory block.","source":"`realloc` returns a `void` pointer to the reallocated (and possibly moved) memory block."},{"pos":[1556,1696],"content":"If there is not enough available memory to expand the block to the given size, the original block is left unchanged, and <ph id=\"ph1\">`NULL`</ph> is returned.","source":"If there is not enough available memory to expand the block to the given size, the original block is left unchanged, and `NULL` is returned."},{"pos":[1703,1849],"content":"If <ph id=\"ph1\">`size`</ph> is zero, then the block pointed to by <ph id=\"ph2\">`memblock`</ph> is freed; the return value is <ph id=\"ph3\">`NULL`</ph>, and <ph id=\"ph4\">`memblock`</ph> is left pointing at a freed block.","source":"If `size` is zero, then the block pointed to by `memblock` is freed; the return value is `NULL`, and `memblock` is left pointing at a freed block."},{"content":"The return value points to a storage space that is guaranteed to be suitably aligned for storage of any type of object.","pos":[1856,1975]},{"content":"To get a pointer to a type other than <ph id=\"ph1\">`void`</ph>, use a type cast on the return value.","pos":[1976,2058],"source":" To get a pointer to a type other than `void`, use a type cast on the return value."},{"pos":[2067,2074],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">`realloc`</ph> function changes the size of an allocated memory block.","pos":[2078,2147],"source":"The `realloc` function changes the size of an allocated memory block."},{"content":"The <ph id=\"ph1\">`memblock`</ph> argument points to the beginning of the memory block.","pos":[2148,2216],"source":" The `memblock` argument points to the beginning of the memory block."},{"content":"If <ph id=\"ph1\">`memblock`</ph> is <ph id=\"ph2\">`NULL`</ph>, <ph id=\"ph3\">`realloc`</ph> behaves the same way as <ph id=\"ph4\">`malloc`</ph> and allocates a new block of <ph id=\"ph5\">`size`</ph> bytes.","pos":[2217,2327],"source":" If `memblock` is `NULL`, `realloc` behaves the same way as `malloc` and allocates a new block of `size` bytes."},{"content":"If <ph id=\"ph1\">`memblock`</ph> is not <ph id=\"ph2\">`NULL`</ph>, it should be a pointer returned by a previous call to <ph id=\"ph3\">`calloc`</ph>, <ph id=\"ph4\">`malloc`</ph>, or <ph id=\"ph5\">`realloc`</ph>.","pos":[2328,2444],"source":" If `memblock` is not `NULL`, it should be a pointer returned by a previous call to `calloc`, `malloc`, or `realloc`."},{"content":"The <ph id=\"ph1\">`size`</ph> argument gives the new size of the block, in bytes.","pos":[2451,2513],"source":"The `size` argument gives the new size of the block, in bytes."},{"content":"The contents of the block are unchanged up to the shorter of the new and old sizes, although the new block can be in a different location.","pos":[2514,2652]},{"content":"Because the new block can be in a new memory location, the pointer returned by <ph id=\"ph1\">`realloc`</ph> is not guaranteed to be the pointer passed through the <ph id=\"ph2\">`memblock`</ph> argument.","pos":[2653,2817],"source":" Because the new block can be in a new memory location, the pointer returned by `realloc` is not guaranteed to be the pointer passed through the `memblock` argument."},{"content":"<ph id=\"ph1\">`realloc`</ph> does not zero newly allocated memory in the case of buffer growth.","pos":[2818,2894],"source":"`realloc` does not zero newly allocated memory in the case of buffer growth."},{"content":"<ph id=\"ph1\">`realloc`</ph> sets <ph id=\"ph2\">`errno`</ph> to <ph id=\"ph3\">`ENOMEM`</ph> if the memory allocation fails or if the amount of memory requested exceeds <ph id=\"ph4\">`_HEAP_MAXREQ`</ph>.","pos":[2901,3027],"source":"`realloc` sets `errno` to `ENOMEM` if the memory allocation fails or if the amount of memory requested exceeds `_HEAP_MAXREQ`."},{"content":"For information on this and other error codes, see <bpt id=\"p1\">[</bpt>errno, _doserrno, _sys_errlist, and _sys_nerr<ept id=\"p1\">](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md)</ept>.","pos":[3028,3195],"source":" For information on this and other error codes, see [errno, _doserrno, _sys_errlist, and _sys_nerr](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md)."},{"content":"<ph id=\"ph1\">`realloc`</ph> calls <ph id=\"ph2\">`malloc`</ph>in order to use the C++ <bpt id=\"p1\">[</bpt>_set_new_mode<ept id=\"p1\">](../../c-runtime-library/reference/set-new-mode.md)</ept> function to set the new handler mode.","pos":[3202,3354],"source":"`realloc` calls `malloc`in order to use the C++ [_set_new_mode](../../c-runtime-library/reference/set-new-mode.md) function to set the new handler mode."},{"content":"The new handler mode indicates whether, on failure, <ph id=\"ph1\">`malloc`</ph> is to call the new handler routine as set by <bpt id=\"p1\">[</bpt>_set_new_handler<ept id=\"p1\">](../../c-runtime-library/reference/set-new-handler.md)</ept>.","pos":[3355,3534],"source":" The new handler mode indicates whether, on failure, `malloc` is to call the new handler routine as set by [_set_new_handler](../../c-runtime-library/reference/set-new-handler.md)."},{"content":"By default, <ph id=\"ph1\">`malloc`</ph> does not call the new handler routine on failure to allocate memory.","pos":[3535,3624],"source":" By default, `malloc` does not call the new handler routine on failure to allocate memory."},{"content":"You can override this default behavior so that, when <ph id=\"ph1\">`realloc`</ph> fails to allocate memory, <ph id=\"ph2\">`malloc`</ph> calls the new handler routine in the same way that the <ph id=\"ph3\">`new`</ph> operator does when it fails for the same reason.","pos":[3625,3832],"source":" You can override this default behavior so that, when `realloc` fails to allocate memory, `malloc` calls the new handler routine in the same way that the `new` operator does when it fails for the same reason."},{"content":"To override the default, call","pos":[3833,3862]},{"pos":[3903,4013],"content":"early in ones program, or link with NEWMODE.OBJ (see <bpt id=\"p1\">[</bpt>Link Options<ept id=\"p1\">](../../c-runtime-library/link-options.md)</ept>).","source":"early in ones program, or link with NEWMODE.OBJ (see [Link Options](../../c-runtime-library/link-options.md))."},{"content":"When the application is linked with a debug version of the C run-time libraries, <ph id=\"ph1\">`realloc`</ph> resolves to <bpt id=\"p1\">[</bpt>_realloc_dbg<ept id=\"p1\">](../../c-runtime-library/reference/realloc-dbg.md)</ept>.","pos":[4020,4188],"source":"When the application is linked with a debug version of the C run-time libraries, `realloc` resolves to [_realloc_dbg](../../c-runtime-library/reference/realloc-dbg.md)."},{"content":"For more information about how the heap is managed during the debugging process, see <bpt id=\"p1\">[</bpt>The CRT Debug Heap<ept id=\"p1\">](/visualstudio/debugger/crt-debug-heap-details)</ept>.","pos":[4189,4342],"source":" For more information about how the heap is managed during the debugging process, see [The CRT Debug Heap](/visualstudio/debugger/crt-debug-heap-details)."},{"content":"<ph id=\"ph1\">`realloc`</ph> is marked <ph id=\"ph2\">`__declspec(noalias)`</ph> and <ph id=\"ph3\">`__declspec(restrict)`</ph>, meaning that the function is guaranteed not to modify global variables, and that the pointer returned is not aliased.","pos":[4349,4536],"source":"`realloc` is marked `__declspec(noalias)` and `__declspec(restrict)`, meaning that the function is guaranteed not to modify global variables, and that the pointer returned is not aliased."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>noalias<ept id=\"p1\">](../../cpp/noalias.md)</ept> and <bpt id=\"p2\">[</bpt>restrict<ept id=\"p2\">](../../cpp/restrict.md)</ept>.","pos":[4537,4633],"source":" For more information, see [noalias](../../cpp/noalias.md) and [restrict](../../cpp/restrict.md)."},{"pos":[4642,4654],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"content":"Routine","pos":[4661,4668]},{"content":"Required header","pos":[4669,4684]},{"content":"<ph id=\"ph1\">\\&lt;</ph>stdlib.h&gt; and <ph id=\"ph2\">\\&lt;</ph>malloc.h&gt;","pos":[4739,4766],"source":"\\<stdlib.h> and \\<malloc.h>"},{"pos":[4774,4898],"content":"For additional compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept> in the Introduction.","source":"For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md) in the Introduction."},{"pos":[4907,4914],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[6161,6186],"content":".NET Framework Equivalent","linkify":".NET Framework Equivalent","nodes":[{"content":".NET Framework Equivalent","pos":[0,25]}]},{"content":"Not applicable.","pos":[6190,6205]},{"content":"To call the standard C function, use <ph id=\"ph1\">`PInvoke`</ph>.","pos":[6206,6253],"source":" To call the standard C function, use `PInvoke`."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Platform Invoke Examples<ept id=\"p1\">](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f)</ept>.","pos":[6254,6379],"source":" For more information, see [Platform Invoke Examples](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f)."},{"pos":[6388,6396],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Memory Allocation<ept id=\"p1\">](../../c-runtime-library/memory-allocation.md)</ept><ph id=\"ph1\"> </ph>","pos":[6400,6466],"source":"[Memory Allocation](../../c-runtime-library/memory-allocation.md) "},{"content":"<bpt id=\"p1\"> [</bpt>calloc<ept id=\"p1\">](../../c-runtime-library/reference/calloc.md)</ept><ph id=\"ph1\"> </ph>","pos":[6469,6524],"source":" [calloc](../../c-runtime-library/reference/calloc.md) "},{"content":"<bpt id=\"p1\"> [</bpt>free<ept id=\"p1\">](../../c-runtime-library/reference/free.md)</ept><ph id=\"ph1\"> </ph>","pos":[6527,6578],"source":" [free](../../c-runtime-library/reference/free.md) "},{"content":"<bpt id=\"p1\"> [</bpt>malloc<ept id=\"p1\">](../../c-runtime-library/reference/malloc.md)</ept>","pos":[6581,6635],"source":" [malloc](../../c-runtime-library/reference/malloc.md)"}],"content":"---\ntitle: \"realloc | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"realloc\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\n  - \"api-ms-win-crt-heap-l1-1-0.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"_brealloc\"\n  - \"_nrealloc\"\n  - \"realloc\"\n  - \"_frealloc\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"_brealloc function\"\n  - \"realloc function\"\n  - \"nrealloc function\"\n  - \"frealloc function\"\n  - \"_nrealloc function\"\n  - \"memory blocks, reallocating\"\n  - \"memory, reallocating\"\n  - \"_frealloc function\"\n  - \"reallocate memory blocks\"\nms.assetid: 2b2239de-810b-4b11-9438-32ab0a244185\ncaps.latest.revision: 20\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"ru-ru\"\n  - \"zh-cn\"\n  - \"zh-tw\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"tr-tr\"\n---\n# realloc\nReallocate memory blocks.  \n  \n## Syntax  \n  \n```  \nvoid *realloc(  \n   void *memblock,  \n   size_t size   \n);  \n```  \n  \n#### Parameters  \n `memblock`  \n Pointer to previously allocated memory block.  \n  \n `size`  \n New size in bytes.  \n  \n## Return Value  \n `realloc` returns a `void` pointer to the reallocated (and possibly moved) memory block.  \n  \n If there is not enough available memory to expand the block to the given size, the original block is left unchanged, and `NULL` is returned.  \n  \n If `size` is zero, then the block pointed to by `memblock` is freed; the return value is `NULL`, and `memblock` is left pointing at a freed block.  \n  \n The return value points to a storage space that is guaranteed to be suitably aligned for storage of any type of object. To get a pointer to a type other than `void`, use a type cast on the return value.  \n  \n## Remarks  \n The `realloc` function changes the size of an allocated memory block. The `memblock` argument points to the beginning of the memory block. If `memblock` is `NULL`, `realloc` behaves the same way as `malloc` and allocates a new block of `size` bytes. If `memblock` is not `NULL`, it should be a pointer returned by a previous call to `calloc`, `malloc`, or `realloc`.  \n  \n The `size` argument gives the new size of the block, in bytes. The contents of the block are unchanged up to the shorter of the new and old sizes, although the new block can be in a different location. Because the new block can be in a new memory location, the pointer returned by `realloc` is not guaranteed to be the pointer passed through the `memblock` argument. `realloc` does not zero newly allocated memory in the case of buffer growth.  \n  \n `realloc` sets `errno` to `ENOMEM` if the memory allocation fails or if the amount of memory requested exceeds `_HEAP_MAXREQ`. For information on this and other error codes, see [errno, _doserrno, _sys_errlist, and _sys_nerr](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md).  \n  \n `realloc` calls `malloc`in order to use the C++ [_set_new_mode](../../c-runtime-library/reference/set-new-mode.md) function to set the new handler mode. The new handler mode indicates whether, on failure, `malloc` is to call the new handler routine as set by [_set_new_handler](../../c-runtime-library/reference/set-new-handler.md). By default, `malloc` does not call the new handler routine on failure to allocate memory. You can override this default behavior so that, when `realloc` fails to allocate memory, `malloc` calls the new handler routine in the same way that the `new` operator does when it fails for the same reason. To override the default, call  \n  \n```  \n_set_new_mode(1)  \n```  \n  \n early in ones program, or link with NEWMODE.OBJ (see [Link Options](../../c-runtime-library/link-options.md)).  \n  \n When the application is linked with a debug version of the C run-time libraries, `realloc` resolves to [_realloc_dbg](../../c-runtime-library/reference/realloc-dbg.md). For more information about how the heap is managed during the debugging process, see [The CRT Debug Heap](/visualstudio/debugger/crt-debug-heap-details).  \n  \n `realloc` is marked `__declspec(noalias)` and `__declspec(restrict)`, meaning that the function is guaranteed not to modify global variables, and that the pointer returned is not aliased. For more information, see [noalias](../../cpp/noalias.md) and [restrict](../../cpp/restrict.md).  \n  \n## Requirements  \n  \n|Routine|Required header|  \n|-------------|---------------------|  \n|`realloc`|\\<stdlib.h> and \\<malloc.h>|  \n  \n For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md) in the Introduction.  \n  \n## Example  \n  \n```  \n// crt_realloc.c  \n// This program allocates a block of memory for  \n// buffer and then uses _msize to display the size of that  \n// block. Next, it uses realloc to expand the amount of  \n// memory used by buffer and then calls _msize again to  \n// display the new amount of memory allocated to buffer.  \n  \n#include <stdio.h>  \n#include <malloc.h>  \n#include <stdlib.h>  \n  \nint main( void )  \n{  \n   long *buffer, *oldbuffer;  \n   size_t size;  \n  \n   if( (buffer = (long *)malloc( 1000 * sizeof( long ) )) == NULL )  \n      exit( 1 );  \n  \n   size = _msize( buffer );  \n   printf_s( \"Size of block after malloc of 1000 longs: %u\\n\", size );  \n  \n   // Reallocate and show new size:  \n   oldbuffer = buffer;     // save pointer in case realloc fails  \n   if( (buffer = realloc( buffer, size + (1000 * sizeof( long )) ))   \n        ==  NULL )  \n   {  \n      free( oldbuffer );  // free original block  \n      exit( 1 );  \n   }  \n   size = _msize( buffer );  \n   printf_s( \"Size of block after realloc of 1000 more longs: %u\\n\",   \n            size );  \n  \n   free( buffer );  \n   exit( 0 );  \n}  \n```  \n  \n```Output  \nSize of block after malloc of 1000 longs: 4000  \nSize of block after realloc of 1000 more longs: 8000  \n```  \n  \n## .NET Framework Equivalent  \n Not applicable. To call the standard C function, use `PInvoke`. For more information, see [Platform Invoke Examples](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f).  \n  \n## See Also  \n [Memory Allocation](../../c-runtime-library/memory-allocation.md)   \n [calloc](../../c-runtime-library/reference/calloc.md)   \n [free](../../c-runtime-library/reference/free.md)   \n [malloc](../../c-runtime-library/reference/malloc.md)"}