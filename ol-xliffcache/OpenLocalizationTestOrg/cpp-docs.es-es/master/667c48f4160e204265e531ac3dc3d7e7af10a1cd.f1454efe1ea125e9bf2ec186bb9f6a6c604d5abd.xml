{"nodes":[{"pos":[12,52],"content":"_strtime_s, _wstrtime_s | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"_strtime_s, _wstrtime_s | Microsoft Docs","pos":[0,40]}]},{"pos":[1126,1149],"content":"_strtime_s, _wstrtime_s","linkify":"_strtime_s, _wstrtime_s","nodes":[{"content":"_strtime_s, _wstrtime_s","pos":[0,23]}]},{"content":"Copy the current time to a buffer.","pos":[1150,1184]},{"content":"These are versions of <bpt id=\"p1\">[</bpt>_strtime, _wstrtime<ept id=\"p1\">](../../c-runtime-library/reference/strtime-wstrtime.md)</ept> with security enhancements as described in <bpt id=\"p2\">[</bpt>Security Features in the CRT<ept id=\"p2\">](../../c-runtime-library/security-features-in-the-crt.md)</ept>.","pos":[1185,1415],"source":" These are versions of [_strtime, _wstrtime](../../c-runtime-library/reference/strtime-wstrtime.md) with security enhancements as described in [Security Features in the CRT](../../c-runtime-library/security-features-in-the-crt.md)."},{"pos":[1424,1430],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1794,1804],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"[out] <ph id=\"ph1\">`buffer`</ph>","pos":[1808,1822],"source":"[out] `buffer`"},{"content":"A buffer, at least 10 bytes long, where the time will be written.","pos":[1826,1891]},{"content":"[in] <ph id=\"ph1\">`numberOfElements`</ph>","pos":[1898,1921],"source":"[in] `numberOfElements`"},{"content":"The size of the buffer.","pos":[1925,1948]},{"pos":[1957,1969],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"Zero if successful.","pos":[1973,1992]},{"content":"If an error condition occurs, the invalid parameter handler is invoked, as described in <bpt id=\"p1\">[</bpt>Parameter Validation<ept id=\"p1\">](../../c-runtime-library/parameter-validation.md)</ept>.","pos":[1999,2159],"source":"If an error condition occurs, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md)."},{"content":"The return value is an error code if there is a failure.","pos":[2160,2216]},{"content":"Error codes are defined in ERRNO.H; see the following table for the exact errors generated by this function.","pos":[2217,2325]},{"content":"For more information on error codes, see <bpt id=\"p1\">[</bpt>errno Constants<ept id=\"p1\">](../../c-runtime-library/errno-constants.md)</ept>.","pos":[2326,2429],"source":" For more information on error codes, see [errno Constants](../../c-runtime-library/errno-constants.md)."},{"pos":[2439,2455],"content":"Error Conditions","linkify":"Error Conditions","nodes":[{"content":"Error Conditions","pos":[0,16]}]},{"content":"Return","pos":[2490,2496]},{"pos":[2497,2517],"content":"Contents of <ph id=\"ph1\">`buffer`</ph>","source":"Contents of `buffer`"},{"content":"(any)","pos":[2613,2618]},{"content":"Not modified","pos":[2628,2640]},{"pos":[2645,2682],"content":"Not <ph id=\"ph1\">`NULL`</ph> (pointing to valid buffer)","source":"Not `NULL` (pointing to valid buffer)"},{"content":"0","pos":[2683,2684]},{"content":"Not modified","pos":[2694,2706]},{"pos":[2711,2748],"content":"Not <ph id=\"ph1\">`NULL`</ph> (pointing to valid buffer)","source":"Not `NULL` (pointing to valid buffer)"},{"content":"0 &lt; size &lt; 9","pos":[2749,2761],"source":"0 < size < 9"},{"content":"Empty string","pos":[2771,2783]},{"pos":[2788,2825],"content":"Not <ph id=\"ph1\">`NULL`</ph> (pointing to valid buffer)","source":"Not `NULL` (pointing to valid buffer)"},{"content":"Size &gt; 9","pos":[2826,2834],"source":"Size > 9"},{"content":"0","pos":[2835,2836]},{"content":"Current time formatted as specified in the remarks","pos":[2837,2887]},{"pos":[2897,2912],"content":"Security Issues","linkify":"Security Issues","nodes":[{"content":"Security Issues","pos":[0,15]}]},{"pos":[2916,3057],"content":"Passing in an invalid non-NULL value for the buffer will result in an access violation if the <ph id=\"ph1\">`numberOfElements`</ph> parameter is greater than 9.","source":"Passing in an invalid non-NULL value for the buffer will result in an access violation if the `numberOfElements` parameter is greater than 9."},{"pos":[3064,3184],"content":"Passing a value for <ph id=\"ph1\">`numberOfElements`</ph> that is greater than the actual size of the buffer will result in buffer overrun.","source":"Passing a value for `numberOfElements` that is greater than the actual size of the buffer will result in buffer overrun."},{"pos":[3193,3200],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"These functions provide more secure versions of <ph id=\"ph1\">`_strtime`</ph> and <ph id=\"ph2\">`_wstrtime`</ph>.","pos":[3204,3279],"source":"These functions provide more secure versions of `_strtime` and `_wstrtime`."},{"content":"The <ph id=\"ph1\">`_strtime_s`</ph> function copies the current local time into the buffer pointed to by <ph id=\"ph2\">`timestr`</ph><bpt id=\"p1\">*</bpt>.<ept id=\"p1\">*</ept>","pos":[3280,3378],"source":" The `_strtime_s` function copies the current local time into the buffer pointed to by `timestr`*.*"},{"content":"The time is formatted as <ph id=\"ph1\">`hh:mm:ss`</ph> where <ph id=\"ph2\">`hh`</ph> is two digits representing the hour in 24-hour notation, <ph id=\"ph3\">`mm`</ph> is two digits representing the minutes past the hour, and <ph id=\"ph4\">`ss`</ph> is two digits representing seconds.","pos":[3379,3586],"source":" The time is formatted as `hh:mm:ss` where `hh` is two digits representing the hour in 24-hour notation, `mm` is two digits representing the minutes past the hour, and `ss` is two digits representing seconds."},{"content":"For example, the string <ph id=\"ph1\">`18:23:44`</ph> represents 23 minutes and 44 seconds past 6 P.M.","pos":[3587,3670],"source":" For example, the string `18:23:44` represents 23 minutes and 44 seconds past 6 P.M."},{"content":"The buffer must be at least 9 bytes long; the actual size is specified by the second parameter.","pos":[3671,3766]},{"content":"<ph id=\"ph1\">`_wstrtime`</ph> is a wide-character version of <ph id=\"ph2\">`_strtime`</ph>; the argument and return value of <ph id=\"ph3\">`_wstrtime`</ph> are wide-character strings.","pos":[3773,3900],"source":"`_wstrtime` is a wide-character version of `_strtime`; the argument and return value of `_wstrtime` are wide-character strings."},{"content":"These functions behave identically otherwise.","pos":[3901,3946]},{"content":"In C++, using these functions is simplified by template overloads; the overloads can infer buffer length automatically (eliminating the need to specify a size argument) and they can automatically replace older, non-secure functions with their newer, secure counterparts.","pos":[3953,4223]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Secure Template Overloads<ept id=\"p1\">](../../c-runtime-library/secure-template-overloads.md)</ept>.","pos":[4224,4332],"source":" For more information, see [Secure Template Overloads](../../c-runtime-library/secure-template-overloads.md)."},{"pos":[4342,4371],"content":"Generic-Text Routine Mapping:","linkify":"Generic-Text Routine Mapping:","nodes":[{"content":"Generic-Text Routine Mapping:","pos":[0,29]}]},{"content":"TCHAR.H routine","pos":[4378,4393]},{"content":"_UNICODE &amp; _MBCS not defined","pos":[4394,4422],"source":"_UNICODE & _MBCS not defined"},{"content":"_MBCS defined","pos":[4423,4436]},{"content":"_UNICODE defined","pos":[4437,4453]},{"pos":[4629,4641],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"content":"Routine","pos":[4648,4655]},{"content":"Required header","pos":[4656,4671]},{"content":"<ph id=\"ph1\">\\&lt;</ph>time.h&gt;","pos":[4729,4738],"source":"\\<time.h>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>time.h&gt; or <ph id=\"ph2\">\\&lt;</ph>wchar.h&gt;","pos":[4757,4780],"source":"\\<time.h> or \\<wchar.h>"},{"pos":[4788,4912],"content":"For additional compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept> in the Introduction.","source":"For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md) in the Introduction."},{"pos":[4921,4928],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[5819,5844],"content":".NET Framework Equivalent","linkify":".NET Framework Equivalent","nodes":[{"content":".NET Framework Equivalent","pos":[0,25]}]},{"pos":[5854,5970],"content":"<bpt id=\"p1\">[</bpt>System::DateTime::ToLongDateString<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/system.datetime.tolongdatestring.aspx)</ept>","source":"[System::DateTime::ToLongDateString](https://msdn.microsoft.com/en-us/library/system.datetime.tolongdatestring.aspx)"},{"pos":[5980,6096],"content":"<bpt id=\"p1\">[</bpt>System::DateTime::ToLongTimeString<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/system.datetime.tolongtimestring.aspx)</ept>","source":"[System::DateTime::ToLongTimeString](https://msdn.microsoft.com/en-us/library/system.datetime.tolongtimestring.aspx)"},{"pos":[6106,6224],"content":"<bpt id=\"p1\">[</bpt>System::DateTime::ToShortDateString<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx)</ept>","source":"[System::DateTime::ToShortDateString](https://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx)"},{"pos":[6234,6352],"content":"<bpt id=\"p1\">[</bpt>System::DateTime::ToShortTimeString<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/system.datetime.toshorttimestring.aspx)</ept>","source":"[System::DateTime::ToShortTimeString](https://msdn.microsoft.com/en-us/library/system.datetime.toshorttimestring.aspx)"},{"pos":[6362,6462],"content":"<bpt id=\"p1\">[</bpt>System::DateTime::ToString<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/system.datetime.tostring.aspx)</ept>","source":"[System::DateTime::ToString](https://msdn.microsoft.com/en-us/library/system.datetime.tostring.aspx)"},{"pos":[6471,6479],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Time Management<ept id=\"p1\">](../../c-runtime-library/time-management.md)</ept><ph id=\"ph1\"> </ph>","pos":[6483,6545],"source":"[Time Management](../../c-runtime-library/time-management.md) "},{"content":"<bpt id=\"p1\"> [</bpt>asctime_s, _wasctime_s<ept id=\"p1\">](../../c-runtime-library/reference/asctime-s-wasctime-s.md)</ept><ph id=\"ph1\"> </ph>","pos":[6548,6633],"source":" [asctime_s, _wasctime_s](../../c-runtime-library/reference/asctime-s-wasctime-s.md) "},{"content":"<bpt id=\"p1\"> [</bpt>ctime_s, _ctime32_s, _ctime64_s, _wctime_s, _wctime32_s, _wctime64_s<ept id=\"p1\">](../../c-runtime-library/reference/ctime-s-ctime32-s-ctime64-s-wctime-s-wctime32-s-wctime64-s.md)</ept><ph id=\"ph1\"> </ph>","pos":[6636,6805],"source":" [ctime_s, _ctime32_s, _ctime64_s, _wctime_s, _wctime32_s, _wctime64_s](../../c-runtime-library/reference/ctime-s-ctime32-s-ctime64-s-wctime-s-wctime32-s-wctime64-s.md) "},{"content":"<bpt id=\"p1\"> [</bpt>gmtime_s, _gmtime32_s, _gmtime64_s<ept id=\"p1\">](../../c-runtime-library/reference/gmtime-s-gmtime32-s-gmtime64-s.md)</ept><ph id=\"ph1\"> </ph>","pos":[6808,6915],"source":" [gmtime_s, _gmtime32_s, _gmtime64_s](../../c-runtime-library/reference/gmtime-s-gmtime32-s-gmtime64-s.md) "},{"content":"<bpt id=\"p1\"> [</bpt>localtime_s, _localtime32_s, _localtime64_s<ept id=\"p1\">](../../c-runtime-library/reference/localtime-s-localtime32-s-localtime64-s.md)</ept><ph id=\"ph1\"> </ph>","pos":[6918,7043],"source":" [localtime_s, _localtime32_s, _localtime64_s](../../c-runtime-library/reference/localtime-s-localtime32-s-localtime64-s.md) "},{"content":"<bpt id=\"p1\"> [</bpt>mktime, _mktime32, _mktime64<ept id=\"p1\">](../../c-runtime-library/reference/mktime-mktime32-mktime64.md)</ept><ph id=\"ph1\"> </ph>","pos":[7046,7141],"source":" [mktime, _mktime32, _mktime64](../../c-runtime-library/reference/mktime-mktime32-mktime64.md) "},{"content":"<bpt id=\"p1\"> [</bpt>time, _time32, _time64<ept id=\"p1\">](../../c-runtime-library/reference/time-time32-time64.md)</ept><ph id=\"ph1\"> </ph>","pos":[7144,7227],"source":" [time, _time32, _time64](../../c-runtime-library/reference/time-time32-time64.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_tzset<ept id=\"p1\">](../../c-runtime-library/reference/tzset.md)</ept>","pos":[7230,7283],"source":" [_tzset](../../c-runtime-library/reference/tzset.md)"}],"content":"---\ntitle: \"_strtime_s, _wstrtime_s | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"_wstrtime_s\"\n  - \"_strtime_s\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\n  - \"api-ms-win-crt-time-l1-1-0.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"_wstrtime_s\"\n  - \"strtime_s\"\n  - \"wstrtime_s\"\n  - \"_strtime_s\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"wstrtime_s function\"\n  - \"copying time to buffers\"\n  - \"strtime_s function\"\n  - \"_wstrtime_s function\"\n  - \"time, copying\"\n  - \"_strtime_s function\"\nms.assetid: 42acf013-c334-485d-b610-84c0af8a46ec\ncaps.latest.revision: 25\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# _strtime_s, _wstrtime_s\nCopy the current time to a buffer. These are versions of [_strtime, _wstrtime](../../c-runtime-library/reference/strtime-wstrtime.md) with security enhancements as described in [Security Features in the CRT](../../c-runtime-library/security-features-in-the-crt.md).  \n  \n## Syntax  \n  \n```  \nerrno_t _strtime_s(  \n   char *buffer,  \n   size_t numberOfElements  \n);  \nerrno_t _wstrtime_s(  \n   wchar_t *buffer,  \n   size_t numberOfElements  \n);  \ntemplate <size_t size>  \nerrno_t _strtime_s(  \n   char (&buffer)[size]  \n); // C++ only  \ntemplate <size_t size>  \nerrno_t _wstrtime_s(  \n   wchar_t (&buffer)[size]  \n); // C++ only  \n```  \n  \n#### Parameters  \n [out] `buffer`  \n A buffer, at least 10 bytes long, where the time will be written.  \n  \n [in] `numberOfElements`  \n The size of the buffer.  \n  \n## Return Value  \n Zero if successful.  \n  \n If an error condition occurs, the invalid parameter handler is invoked, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md). The return value is an error code if there is a failure. Error codes are defined in ERRNO.H; see the following table for the exact errors generated by this function. For more information on error codes, see [errno Constants](../../c-runtime-library/errno-constants.md).  \n  \n### Error Conditions  \n  \n|`buffer`|`numberOfElements`|Return|Contents of `buffer`|  \n|--------------|------------------------|------------|--------------------------|  \n|`NULL`|(any)|`EINVAL`|Not modified|  \n|Not `NULL` (pointing to valid buffer)|0|`EINVAL`|Not modified|  \n|Not `NULL` (pointing to valid buffer)|0 < size < 9|`EINVAL`|Empty string|  \n|Not `NULL` (pointing to valid buffer)|Size > 9|0|Current time formatted as specified in the remarks|  \n  \n## Security Issues  \n Passing in an invalid non-NULL value for the buffer will result in an access violation if the `numberOfElements` parameter is greater than 9.  \n  \n Passing a value for `numberOfElements` that is greater than the actual size of the buffer will result in buffer overrun.  \n  \n## Remarks  \n These functions provide more secure versions of `_strtime` and `_wstrtime`. The `_strtime_s` function copies the current local time into the buffer pointed to by `timestr`*.* The time is formatted as `hh:mm:ss` where `hh` is two digits representing the hour in 24-hour notation, `mm` is two digits representing the minutes past the hour, and `ss` is two digits representing seconds. For example, the string `18:23:44` represents 23 minutes and 44 seconds past 6 P.M. The buffer must be at least 9 bytes long; the actual size is specified by the second parameter.  \n  \n `_wstrtime` is a wide-character version of `_strtime`; the argument and return value of `_wstrtime` are wide-character strings. These functions behave identically otherwise.  \n  \n In C++, using these functions is simplified by template overloads; the overloads can infer buffer length automatically (eliminating the need to specify a size argument) and they can automatically replace older, non-secure functions with their newer, secure counterparts. For more information, see [Secure Template Overloads](../../c-runtime-library/secure-template-overloads.md).  \n  \n### Generic-Text Routine Mapping:  \n  \n|TCHAR.H routine|_UNICODE & _MBCS not defined|_MBCS defined|_UNICODE defined|  \n|---------------------|------------------------------------|--------------------|-----------------------|  \n|`_tstrtime_s`|`_strtime_s`|`_strtime_s`|`_wstrtime_s`|  \n  \n## Requirements  \n  \n|Routine|Required header|  \n|-------------|---------------------|  \n|`_strtime_s`|\\<time.h>|  \n|`_wstrtime_s`|\\<time.h> or \\<wchar.h>|  \n  \n For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md) in the Introduction.  \n  \n## Example  \n  \n```  \n// strtime_s.c  \n  \n#include <time.h>  \n#include <stdio.h>  \n  \nint main()  \n{  \n    char tmpbuf[9];  \n    errno_t err;  \n  \n    // Set time zone from TZ environment variable. If TZ is not set,  \n    // the operating system is queried to obtain the default value   \n    // for the variable.   \n    //  \n    _tzset();  \n  \n    // Display operating system-style date and time.   \n    err = _strtime_s( tmpbuf, 9 );  \n    if (err)  \n    {  \n       printf(\"_strdate_s failed due to an invalid argument.\");  \n      exit(1);  \n    }  \n    printf( \"OS time:\\t\\t\\t\\t%s\\n\", tmpbuf );  \n    err = _strdate_s( tmpbuf, 9 );  \n    if (err)  \n    {  \n       printf(\"_strdate_s failed due to an invalid argument.\");  \n       exit(1);  \n    }  \n    printf( \"OS date:\\t\\t\\t\\t%s\\n\", tmpbuf );  \n  \n}  \n```  \n  \n```Output  \nOS time:            14:37:49  \nOS date:            04/25/03  \n```  \n  \n## .NET Framework Equivalent  \n  \n-   [System::DateTime::ToLongDateString](https://msdn.microsoft.com/en-us/library/system.datetime.tolongdatestring.aspx)  \n  \n-   [System::DateTime::ToLongTimeString](https://msdn.microsoft.com/en-us/library/system.datetime.tolongtimestring.aspx)  \n  \n-   [System::DateTime::ToShortDateString](https://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx)  \n  \n-   [System::DateTime::ToShortTimeString](https://msdn.microsoft.com/en-us/library/system.datetime.toshorttimestring.aspx)  \n  \n-   [System::DateTime::ToString](https://msdn.microsoft.com/en-us/library/system.datetime.tostring.aspx)  \n  \n## See Also  \n [Time Management](../../c-runtime-library/time-management.md)   \n [asctime_s, _wasctime_s](../../c-runtime-library/reference/asctime-s-wasctime-s.md)   \n [ctime_s, _ctime32_s, _ctime64_s, _wctime_s, _wctime32_s, _wctime64_s](../../c-runtime-library/reference/ctime-s-ctime32-s-ctime64-s-wctime-s-wctime32-s-wctime64-s.md)   \n [gmtime_s, _gmtime32_s, _gmtime64_s](../../c-runtime-library/reference/gmtime-s-gmtime32-s-gmtime64-s.md)   \n [localtime_s, _localtime32_s, _localtime64_s](../../c-runtime-library/reference/localtime-s-localtime32-s-localtime64-s.md)   \n [mktime, _mktime32, _mktime64](../../c-runtime-library/reference/mktime-mktime32-mktime64.md)   \n [time, _time32, _time64](../../c-runtime-library/reference/time-time32-time64.md)   \n [_tzset](../../c-runtime-library/reference/tzset.md)"}