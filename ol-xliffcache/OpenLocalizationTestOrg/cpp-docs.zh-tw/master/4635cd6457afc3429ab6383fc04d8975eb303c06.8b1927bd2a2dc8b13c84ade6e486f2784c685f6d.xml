{"nodes":[{"pos":[12,48],"content":"CDataExchange Class | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"CDataExchange Class | Microsoft Docs","pos":[0,36]}]},{"content":"CDataExchange Class","pos":[1111,1130]},{"content":"Supports the dialog data exchange (DDX) and dialog data validation (DDV) routines used by the Microsoft Foundation classes.","pos":[1131,1254]},{"content":"Syntax","pos":[1263,1269]},{"content":"Members","pos":[1315,1322]},{"content":"Public Constructors","pos":[1332,1351]},{"content":"Name","pos":[1358,1362]},{"content":"Description","pos":[1363,1374]},{"content":"CDataExchange::CDataExchange","pos":[1413,1441]},{"pos":[1474,1510],"content":"Constructs a <ph id=\"ph1\">`CDataExchange`</ph> object.","source":"Constructs a `CDataExchange` object."},{"content":"Public Methods","pos":[1521,1535]},{"content":"Name","pos":[1542,1546]},{"content":"Description","pos":[1547,1558]},{"content":"CDataExchange::Fail","pos":[1597,1616]},{"content":"Called when validation fails.","pos":[1640,1669]},{"content":"Resets focus to the previous control and throws an exception.","pos":[1670,1731]},{"content":"CDataExchange::PrepareCtrl","pos":[1737,1763]},{"content":"Prepares the specified control for data exchange or validation.","pos":[1794,1857]},{"content":"Use for nonedit controls.","pos":[1858,1883]},{"content":"CDataExchange::PrepareEditCtrl","pos":[1889,1919]},{"content":"Prepares the specified edit control for data exchange or validation.","pos":[1954,2022]},{"content":"CDataExchange::PrepareOleCtrl","pos":[2028,2057]},{"content":"Prepares the specified OLE control for data exchange or validation.","pos":[2091,2158]},{"content":"Use for nonedit controls.","pos":[2159,2184]},{"content":"Public Data Members","pos":[2195,2214]},{"content":"Name","pos":[2221,2225]},{"content":"Description","pos":[2226,2237]},{"content":"CDataExchange::m_bSaveAndValidate","pos":[2276,2309]},{"content":"Flag for the direction of DDX and DDV.","pos":[2347,2385]},{"content":"CDataExchange::m_pDlgWnd","pos":[2391,2415]},{"content":"The dialog box or window where the data exchange takes place.","pos":[2444,2505]},{"content":"Remarks","pos":[2515,2522]},{"pos":[2542,2569],"content":"does not have a base class."},{"content":"Use this class if you are writing data exchange routines for custom data types or controls, or if you are writing your own data validation routines.","pos":[2576,2724]},{"content":"For more information on writing your own DDX and DDV routines, see <bpt id=\"p1\">[</bpt>Technical Note 26<ept id=\"p1\">](../../mfc/tn026-ddx-and-ddv-routines.md)</ept>.","pos":[2725,2853],"source":" For more information on writing your own DDX and DDV routines, see [Technical Note 26](../../mfc/tn026-ddx-and-ddv-routines.md)."},{"content":"For an overview of DDX and DDV, see <bpt id=\"p1\">[</bpt>Dialog Data Exchange and Validation<ept id=\"p1\">](../../mfc/dialog-data-exchange-and-validation.md)</ept> and <bpt id=\"p2\">[</bpt>Dialog Boxes<ept id=\"p2\">](../../mfc/dialog-boxes.md)</ept>.","pos":[2854,3024],"source":" For an overview of DDX and DDV, see [Dialog Data Exchange and Validation](../../mfc/dialog-data-exchange-and-validation.md) and [Dialog Boxes](../../mfc/dialog-boxes.md)."},{"content":"A <ph id=\"ph1\">`CDataExchange`</ph> object provides the context information needed for DDX and DDV to take place.","pos":[3031,3126],"source":"A `CDataExchange` object provides the context information needed for DDX and DDV to take place."},{"content":"The flag <ph id=\"ph1\">`m_bSaveAndValidate`</ph> is <bpt id=\"p1\">**</bpt>FALSE<ept id=\"p1\">**</ept> when DDX is used to fill the initial values of dialog controls from data members.","pos":[3127,3251],"source":" The flag `m_bSaveAndValidate` is **FALSE** when DDX is used to fill the initial values of dialog controls from data members."},{"content":"The flag <ph id=\"ph1\">`m_bSaveAndValidate`</ph> is <bpt id=\"p1\">**</bpt>TRUE<ept id=\"p1\">**</ept> when DDX is used to set the current values of dialog controls into data members and when DDV is used to validate the data values.","pos":[3252,3423],"source":" The flag `m_bSaveAndValidate` is **TRUE** when DDX is used to set the current values of dialog controls into data members and when DDV is used to validate the data values."},{"content":"If the DDV validation fails, the DDV procedure will display a message box explaining the input error.","pos":[3424,3525]},{"content":"The DDV procedure will then call <bpt id=\"p1\">**</bpt>Fail<ept id=\"p1\">**</ept> to reset the focus to the offending control and throw an exception to stop the validation process.","pos":[3526,3666],"source":" The DDV procedure will then call **Fail** to reset the focus to the offending control and throw an exception to stop the validation process."},{"content":"Inheritance Hierarchy","pos":[3675,3696]},{"content":"Requirements","pos":[3724,3736]},{"pos":[3740,3760],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> afxwin.h","source":"**Header:** afxwin.h"},{"pos":[3815,3843],"content":"CDataExchange::CDataExchange"},{"pos":[3847,3911],"content":"Call this member function to construct a <ph id=\"ph1\">`CDataExchange`</ph> object.","source":"Call this member function to construct a `CDataExchange` object."},{"content":"Parameters","pos":[4000,4010]},{"content":"pDlgWnd","pos":[4015,4022]},{"content":"A pointer to the parent window that contains the control.","pos":[4027,4084]},{"content":"Usually this is a <bpt id=\"p1\">[</bpt>CDialog<ept id=\"p1\">](../../mfc/reference/cdialog-class.md)</ept>-derived object.","pos":[4085,4166],"source":" Usually this is a [CDialog](../../mfc/reference/cdialog-class.md)-derived object."},{"content":"If <bpt id=\"p1\">**</bpt>TRUE<ept id=\"p1\">**</ept>, this object validates data, then writes data from the controls to the members.","pos":[4195,4286],"source":" If **TRUE**, this object validates data, then writes data from the controls to the members."},{"content":"If <bpt id=\"p1\">**</bpt>FALSE<ept id=\"p1\">**</ept>, this object will move data from members to controls.","pos":[4287,4353],"source":" If **FALSE**, this object will move data from members to controls."},{"content":"Remarks","pos":[4363,4370]},{"pos":[4374,4593],"content":"Construct a <ph id=\"ph1\">`CDataExchange`</ph> object yourself to store extra information in the data exchange object to pass to your window's <bpt id=\"p1\">[</bpt>CWnd::DoDataExchange<ept id=\"p1\">](../../mfc/reference/cwnd-class.md#cwnd__dodataexchange)</ept> member function.","source":"Construct a `CDataExchange` object yourself to store extra information in the data exchange object to pass to your window's [CWnd::DoDataExchange](../../mfc/reference/cwnd-class.md#cwnd__dodataexchange) member function."},{"content":"Example","pos":[4603,4610]},{"pos":[4625,4653],"content":"NVC_MFCControlLadenDialog#70"},{"pos":[4754,4773],"content":"CDataExchange::Fail"},{"content":"The framework calls this member function when a dialog data validation (DDV) operation fails.","pos":[4777,4870]},{"content":"Remarks","pos":[4908,4915]},{"content":"<bpt id=\"p1\">**</bpt>Fail<ept id=\"p1\">**</ept> restores the focus and selection to the control whose validation failed (if there is a control to restore).","pos":[4919,5035],"source":"**Fail** restores the focus and selection to the control whose validation failed (if there is a control to restore)."},{"content":"<bpt id=\"p1\">**</bpt>Fail<ept id=\"p1\">**</ept> then throws an exception of type <bpt id=\"p2\">[</bpt>CUserException<ept id=\"p2\">](../../mfc/reference/cuserexception-class.md)</ept> to stop the validation process.","pos":[5036,5171],"source":"**Fail** then throws an exception of type [CUserException](../../mfc/reference/cuserexception-class.md) to stop the validation process."},{"content":"The exception causes a message box explaining the error to be displayed.","pos":[5172,5244]},{"content":"After DDV validation fails, the user can reenter data in the offending control.","pos":[5245,5324]},{"pos":[5331,5429],"content":"Implementors of custom DDV routines can call <bpt id=\"p1\">**</bpt>Fail<ept id=\"p1\">**</ept> from their routines when a validation fails.","source":"Implementors of custom DDV routines can call **Fail** from their routines when a validation fails."},{"content":"For more information on writing your own DDX and DDV routines, see <bpt id=\"p1\">[</bpt>Technical Note 26<ept id=\"p1\">](../../mfc/tn026-ddx-and-ddv-routines.md)</ept>.","pos":[5436,5564],"source":"For more information on writing your own DDX and DDV routines, see [Technical Note 26](../../mfc/tn026-ddx-and-ddv-routines.md)."},{"content":"For an overview of DDX and DDV, see <bpt id=\"p1\">[</bpt>Dialog Data Exchange and Validation<ept id=\"p1\">](../../mfc/dialog-data-exchange-and-validation.md)</ept> and <bpt id=\"p2\">[</bpt>Dialog Box Topics<ept id=\"p2\">](../../mfc/dialog-boxes.md)</ept>.","pos":[5565,5740],"source":" For an overview of DDX and DDV, see [Dialog Data Exchange and Validation](../../mfc/dialog-data-exchange-and-validation.md) and [Dialog Box Topics](../../mfc/dialog-boxes.md)."},{"pos":[5800,5833],"content":"CDataExchange::m_bSaveAndValidate"},{"content":"This flag indicates the direction of a dialog data exchange (DDX) operation.","pos":[5837,5913]},{"content":"Remarks","pos":[5965,5972]},{"content":"The flag is nonzero if the <ph id=\"ph1\">`CDataExchange`</ph> object is being used to move data from the dialog controls to dialog-class data members after the user edits the controls.","pos":[5976,6141],"source":"The flag is nonzero if the `CDataExchange` object is being used to move data from the dialog controls to dialog-class data members after the user edits the controls."},{"content":"The flag is zero if the object is being used to initialize dialog controls from dialog-class data members.","pos":[6142,6248]},{"content":"The flag is also nonzero during dialog data validation (DDV).","pos":[6255,6316]},{"content":"For more information on writing your own DDX and DDV routines, see <bpt id=\"p1\">[</bpt>Technical Note 26<ept id=\"p1\">](../../mfc/tn026-ddx-and-ddv-routines.md)</ept>.","pos":[6323,6451],"source":"For more information on writing your own DDX and DDV routines, see [Technical Note 26](../../mfc/tn026-ddx-and-ddv-routines.md)."},{"content":"For an overview of DDX and DDV, see <bpt id=\"p1\">[</bpt>Dialog Data Exchange and Validation<ept id=\"p1\">](../../mfc/dialog-data-exchange-and-validation.md)</ept> and <bpt id=\"p2\">[</bpt>Dialog Box Topics<ept id=\"p2\">](../../mfc/dialog-boxes.md)</ept>.","pos":[6452,6627],"source":" For an overview of DDX and DDV, see [Dialog Data Exchange and Validation](../../mfc/dialog-data-exchange-and-validation.md) and [Dialog Box Topics](../../mfc/dialog-boxes.md)."},{"pos":[6678,6702],"content":"CDataExchange::m_pDlgWnd"},{"pos":[6706,6854],"content":"Contains a pointer to the <bpt id=\"p1\">[</bpt>CWnd<ept id=\"p1\">](../../mfc/reference/cwnd-class.md)</ept> object for which dialog data exchange (DDX) or validation (DDV) is taking place.","source":"Contains a pointer to the [CWnd](../../mfc/reference/cwnd-class.md) object for which dialog data exchange (DDX) or validation (DDV) is taking place."},{"content":"Remarks","pos":[6898,6905]},{"content":"This object is usually a <bpt id=\"p1\">[</bpt>CDialog<ept id=\"p1\">](../../mfc/reference/cdialog-class.md)</ept> object.","pos":[6909,6989],"source":"This object is usually a [CDialog](../../mfc/reference/cdialog-class.md) object."},{"content":"Implementors of custom DDX or DDV routines can use this pointer to obtain access to the dialog window that contains the controls they are operating on.","pos":[6990,7141]},{"content":"For more information on writing your own DDX and DDV routines, see <bpt id=\"p1\">[</bpt>Technical Note 26<ept id=\"p1\">](../../mfc/tn026-ddx-and-ddv-routines.md)</ept>.","pos":[7148,7276],"source":"For more information on writing your own DDX and DDV routines, see [Technical Note 26](../../mfc/tn026-ddx-and-ddv-routines.md)."},{"content":"For an overview of DDX and DDV, see <bpt id=\"p1\">[</bpt>Dialog Data Exchange and Validation<ept id=\"p1\">](../../mfc/dialog-data-exchange-and-validation.md)</ept> and <bpt id=\"p2\">[</bpt>Dialog Box Topics<ept id=\"p2\">](../../mfc/dialog-boxes.md)</ept>.","pos":[7277,7452],"source":" For an overview of DDX and DDV, see [Dialog Data Exchange and Validation](../../mfc/dialog-data-exchange-and-validation.md) and [Dialog Box Topics](../../mfc/dialog-boxes.md)."},{"pos":[7505,7531],"content":"CDataExchange::PrepareCtrl"},{"content":"The framework calls this member function to prepare the specified control for dialog data exchange (DDX) and validation (DDV).","pos":[7535,7661]},{"content":"Parameters","pos":[7714,7724]},{"content":"The ID of the control to be prepared for DDX or DDV.","pos":[7738,7790]},{"content":"Return Value","pos":[7800,7812]},{"pos":[7816,7872],"content":"The <ph id=\"ph1\">`HWND`</ph> of the control being prepared for DDX or DDV.","source":"The `HWND` of the control being prepared for DDX or DDV."},{"content":"Remarks","pos":[7882,7889]},{"pos":[7893,8023],"content":"Use <bpt id=\"p1\">[</bpt>PrepareEditCtrl<ept id=\"p1\">](#cdataexchange__prepareeditctrl)</ept> instead for edit controls; use this member function for all other controls.","source":"Use [PrepareEditCtrl](#cdataexchange__prepareeditctrl) instead for edit controls; use this member function for all other controls."},{"content":"Preparation consists of storing the control's <ph id=\"ph1\">`HWND`</ph> in the <ph id=\"ph2\">`CDataExchange`</ph> class.","pos":[8030,8112],"source":"Preparation consists of storing the control's `HWND` in the `CDataExchange` class."},{"content":"The framework uses this handle to restore the focus to the previously focused control in the event of a DDX or DDV failure.","pos":[8113,8236]},{"pos":[8243,8408],"content":"Implementors of custom DDX or DDV routines should call <ph id=\"ph1\">`PrepareCtrl`</ph> for all non-edit controls for which they are exchanging data via DDX or validating data via DDV.","source":"Implementors of custom DDX or DDV routines should call `PrepareCtrl` for all non-edit controls for which they are exchanging data via DDX or validating data via DDV."},{"content":"For more information on writing your own DDX and DDV routines, see <bpt id=\"p1\">[</bpt>Technical Note 26<ept id=\"p1\">](../../mfc/tn026-ddx-and-ddv-routines.md)</ept>.","pos":[8415,8543],"source":"For more information on writing your own DDX and DDV routines, see [Technical Note 26](../../mfc/tn026-ddx-and-ddv-routines.md)."},{"content":"For an overview of DDX and DDV, see <bpt id=\"p1\">[</bpt>Dialog Data Exchange and Validation<ept id=\"p1\">](../../mfc/dialog-data-exchange-and-validation.md)</ept> and <bpt id=\"p2\">[</bpt>Dialog Box Topics<ept id=\"p2\">](../../mfc/dialog-boxes.md)</ept>.","pos":[8544,8719],"source":" For an overview of DDX and DDV, see [Dialog Data Exchange and Validation](../../mfc/dialog-data-exchange-and-validation.md) and [Dialog Box Topics](../../mfc/dialog-boxes.md)."},{"pos":[8776,8806],"content":"CDataExchange::PrepareEditCtrl"},{"content":"The framework calls this member function to prepare the specified edit control for dialog data exchange (DDX) and validation (DDV).","pos":[8810,8941]},{"content":"Parameters","pos":[8998,9008]},{"content":"The ID of the edit control to be prepared for DDX or DDV.","pos":[9022,9079]},{"content":"Return Value","pos":[9089,9101]},{"pos":[9105,9166],"content":"The <ph id=\"ph1\">`HWND`</ph> of the edit control being prepared for DDX or DDV.","source":"The `HWND` of the edit control being prepared for DDX or DDV."},{"content":"Remarks","pos":[9176,9183]},{"pos":[9187,9268],"content":"Use <bpt id=\"p1\">[</bpt>PrepareCtrl<ept id=\"p1\">](#cdataexchange__preparectrl)</ept> instead for all non-edit controls.","source":"Use [PrepareCtrl](#cdataexchange__preparectrl) instead for all non-edit controls."},{"content":"Preparation consists of two things.","pos":[9275,9310]},{"content":"First, <ph id=\"ph1\">`PrepareEditCtrl`</ph> stores the control's <ph id=\"ph2\">`HWND`</ph> in the <ph id=\"ph3\">`CDataExchange`</ph> class.","pos":[9311,9393],"source":" First, `PrepareEditCtrl` stores the control's `HWND` in the `CDataExchange` class."},{"content":"The framework uses this handle to restore the focus to the previously focused control in the event of a DDX or DDV failure.","pos":[9394,9517]},{"content":"Second, <ph id=\"ph1\">`PrepareEditCtrl`</ph> sets a flag in the <ph id=\"ph2\">`CDataExchange`</ph> class to indicate that the control whose data is being exchanged or validated is an edit control.","pos":[9518,9676],"source":" Second, `PrepareEditCtrl` sets a flag in the `CDataExchange` class to indicate that the control whose data is being exchanged or validated is an edit control."},{"pos":[9683,9848],"content":"Implementors of custom DDX or DDV routines should call <ph id=\"ph1\">`PrepareEditCtrl`</ph> for all edit controls for which they are exchanging data via DDX or validating data via DDV.","source":"Implementors of custom DDX or DDV routines should call `PrepareEditCtrl` for all edit controls for which they are exchanging data via DDX or validating data via DDV."},{"content":"For more information on writing your own DDX and DDV routines, see <bpt id=\"p1\">[</bpt>Technical Note 26<ept id=\"p1\">](../../mfc/tn026-ddx-and-ddv-routines.md)</ept>.","pos":[9855,9983],"source":"For more information on writing your own DDX and DDV routines, see [Technical Note 26](../../mfc/tn026-ddx-and-ddv-routines.md)."},{"content":"For an overview of DDX and DDV, see <bpt id=\"p1\">[</bpt>Dialog Data Exchange and Validation<ept id=\"p1\">](../../mfc/dialog-data-exchange-and-validation.md)</ept> and <bpt id=\"p2\">[</bpt>Dialog Box Topics<ept id=\"p2\">](../../mfc/dialog-boxes.md)</ept>.","pos":[9984,10159],"source":" For an overview of DDX and DDV, see [Dialog Data Exchange and Validation](../../mfc/dialog-data-exchange-and-validation.md) and [Dialog Box Topics](../../mfc/dialog-boxes.md)."},{"pos":[10215,10244],"content":"CDataExchange::PrepareOleCtrl"},{"content":"The framework calls this member function to prepare the specified OLE control for dialog data exchange (DDX) and validation (DDV).","pos":[10248,10378]},{"content":"Parameters","pos":[10446,10456]},{"content":"The ID of the OLE control to be prepared for DDX or DDV.","pos":[10470,10526]},{"content":"Return Value","pos":[10536,10548]},{"content":"A pointer to the OLE control site.","pos":[10552,10586]},{"content":"Remarks","pos":[10596,10603]},{"pos":[10607,10765],"content":"Use <bpt id=\"p1\">[</bpt>PrepareEditCtrl<ept id=\"p1\">](#cdataexchange__prepareeditctrl)</ept> instead for edit controls or <bpt id=\"p2\">[</bpt>PrepareCtrl<ept id=\"p2\">](#cdataexchange__preparectrl)</ept> for all other non-OLE controls.","source":"Use [PrepareEditCtrl](#cdataexchange__prepareeditctrl) instead for edit controls or [PrepareCtrl](#cdataexchange__preparectrl) for all other non-OLE controls."},{"pos":[10772,10935],"content":"Implementors of custom DDX or DDV routines should call <ph id=\"ph1\">`PrepareOleCtrl`</ph> for all OLE controls for which they are exchanging data via DDX or validating data via DDV.","source":"Implementors of custom DDX or DDV routines should call `PrepareOleCtrl` for all OLE controls for which they are exchanging data via DDX or validating data via DDV."},{"content":"For more information on writing your own DDX and DDV routines, see <bpt id=\"p1\">[</bpt>Technical Note 26<ept id=\"p1\">](../../mfc/tn026-ddx-and-ddv-routines.md)</ept>.","pos":[10942,11070],"source":"For more information on writing your own DDX and DDV routines, see [Technical Note 26](../../mfc/tn026-ddx-and-ddv-routines.md)."},{"content":"For an overview of DDX and DDV, see <bpt id=\"p1\">[</bpt>Dialog Data Exchange and Validation<ept id=\"p1\">](../../mfc/dialog-data-exchange-and-validation.md)</ept> and <bpt id=\"p2\">[</bpt>Dialog Box Topics<ept id=\"p2\">](../../mfc/dialog-boxes.md)</ept>.","pos":[11071,11246],"source":" For an overview of DDX and DDV, see [Dialog Data Exchange and Validation](../../mfc/dialog-data-exchange-and-validation.md) and [Dialog Box Topics](../../mfc/dialog-boxes.md)."},{"content":"See Also","pos":[11255,11263]},{"content":"MFC Sample VIEWEX","pos":[11268,11285]},{"content":"Hierarchy Chart","pos":[11321,11336]},{"content":"CWnd::DoDataExchange","pos":[11373,11393]},{"content":"CWnd::UpdateData","pos":[11456,11472]}],"content":"---\ntitle: \"CDataExchange Class | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"reference\"\nf1_keywords: \n  - \"CDataExchange\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"DDX/DDV, Technical Note 26\"\n  - \"DDX/DDV, CDataExchange class\"\n  - \"DDX (dialog data exchange), direction of exchange\"\n  - \"DDX (dialog data exchange), between dialog and CDialog\"\n  - \"DDX (dialog data exchange), custom DDX routines\"\n  - \"DDV (dialog data validation)\"\n  - \"m_bSaveAndValidate\"\n  - \"CDataExchange class\"\n  - \"exchanging data between dialogs and CDialogs\"\n  - \"DDV (dialog data validation), custom DDV routines\"\n  - \"DDX/DDV\"\n  - \"DDX (dialog data exchange)\"\n  - \"validating data, dialog box data entry\"\nms.assetid: 84ed6113-325d-493e-a75d-223f03a992b8\ncaps.latest.revision: 20\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# CDataExchange Class\nSupports the dialog data exchange (DDX) and dialog data validation (DDV) routines used by the Microsoft Foundation classes.  \n  \n## Syntax  \n  \n```  \nclass CDataExchange  \n```  \n  \n## Members  \n  \n### Public Constructors  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CDataExchange::CDataExchange](#cdataexchange__cdataexchange)|Constructs a `CDataExchange` object.|  \n  \n### Public Methods  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CDataExchange::Fail](#cdataexchange__fail)|Called when validation fails. Resets focus to the previous control and throws an exception.|  \n|[CDataExchange::PrepareCtrl](#cdataexchange__preparectrl)|Prepares the specified control for data exchange or validation. Use for nonedit controls.|  \n|[CDataExchange::PrepareEditCtrl](#cdataexchange__prepareeditctrl)|Prepares the specified edit control for data exchange or validation.|  \n|[CDataExchange::PrepareOleCtrl](#cdataexchange__prepareolectrl)|Prepares the specified OLE control for data exchange or validation. Use for nonedit controls.|  \n  \n### Public Data Members  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CDataExchange::m_bSaveAndValidate](#cdataexchange__m_bsaveandvalidate)|Flag for the direction of DDX and DDV.|  \n|[CDataExchange::m_pDlgWnd](#cdataexchange__m_pdlgwnd)|The dialog box or window where the data exchange takes place.|  \n  \n## Remarks  \n `CDataExchange` does not have a base class.  \n  \n Use this class if you are writing data exchange routines for custom data types or controls, or if you are writing your own data validation routines. For more information on writing your own DDX and DDV routines, see [Technical Note 26](../../mfc/tn026-ddx-and-ddv-routines.md). For an overview of DDX and DDV, see [Dialog Data Exchange and Validation](../../mfc/dialog-data-exchange-and-validation.md) and [Dialog Boxes](../../mfc/dialog-boxes.md).  \n  \n A `CDataExchange` object provides the context information needed for DDX and DDV to take place. The flag `m_bSaveAndValidate` is **FALSE** when DDX is used to fill the initial values of dialog controls from data members. The flag `m_bSaveAndValidate` is **TRUE** when DDX is used to set the current values of dialog controls into data members and when DDV is used to validate the data values. If the DDV validation fails, the DDV procedure will display a message box explaining the input error. The DDV procedure will then call **Fail** to reset the focus to the offending control and throw an exception to stop the validation process.  \n  \n## Inheritance Hierarchy  \n `CDataExchange`  \n  \n## Requirements  \n **Header:** afxwin.h  \n  \n##  <a name=\"cdataexchange__cdataexchange\"></a>  CDataExchange::CDataExchange  \n Call this member function to construct a `CDataExchange` object.  \n  \n```  \nCDataExchange(\n    CWnd* pDlgWnd,  \n    BOOL bSaveAndValidate);\n```  \n  \n### Parameters  \n *pDlgWnd*  \n A pointer to the parent window that contains the control. Usually this is a [CDialog](../../mfc/reference/cdialog-class.md)-derived object.  \n  \n `bSaveAndValidate`  \n If **TRUE**, this object validates data, then writes data from the controls to the members. If **FALSE**, this object will move data from members to controls.  \n  \n### Remarks  \n Construct a `CDataExchange` object yourself to store extra information in the data exchange object to pass to your window's [CWnd::DoDataExchange](../../mfc/reference/cwnd-class.md#cwnd__dodataexchange) member function.  \n  \n### Example  \n [!code-cpp[NVC_MFCControlLadenDialog#70](../../mfc/codesnippet/cpp/cdataexchange-class_1.cpp)]  \n  \n##  <a name=\"cdataexchange__fail\"></a>  CDataExchange::Fail  \n The framework calls this member function when a dialog data validation (DDV) operation fails.  \n  \n```  \nvoid Fail();\n```  \n  \n### Remarks  \n **Fail** restores the focus and selection to the control whose validation failed (if there is a control to restore). **Fail** then throws an exception of type [CUserException](../../mfc/reference/cuserexception-class.md) to stop the validation process. The exception causes a message box explaining the error to be displayed. After DDV validation fails, the user can reenter data in the offending control.  \n  \n Implementors of custom DDV routines can call **Fail** from their routines when a validation fails.  \n  \n For more information on writing your own DDX and DDV routines, see [Technical Note 26](../../mfc/tn026-ddx-and-ddv-routines.md). For an overview of DDX and DDV, see [Dialog Data Exchange and Validation](../../mfc/dialog-data-exchange-and-validation.md) and [Dialog Box Topics](../../mfc/dialog-boxes.md).  \n  \n##  <a name=\"cdataexchange__m_bsaveandvalidate\"></a>  CDataExchange::m_bSaveAndValidate  \n This flag indicates the direction of a dialog data exchange (DDX) operation.  \n  \n```  \nBOOL m_bSaveAndValidate;  \n```  \n  \n### Remarks  \n The flag is nonzero if the `CDataExchange` object is being used to move data from the dialog controls to dialog-class data members after the user edits the controls. The flag is zero if the object is being used to initialize dialog controls from dialog-class data members.  \n  \n The flag is also nonzero during dialog data validation (DDV).  \n  \n For more information on writing your own DDX and DDV routines, see [Technical Note 26](../../mfc/tn026-ddx-and-ddv-routines.md). For an overview of DDX and DDV, see [Dialog Data Exchange and Validation](../../mfc/dialog-data-exchange-and-validation.md) and [Dialog Box Topics](../../mfc/dialog-boxes.md).  \n  \n##  <a name=\"cdataexchange__m_pdlgwnd\"></a>  CDataExchange::m_pDlgWnd  \n Contains a pointer to the [CWnd](../../mfc/reference/cwnd-class.md) object for which dialog data exchange (DDX) or validation (DDV) is taking place.  \n  \n```  \nCWnd* m_pDlgWnd;  \n```  \n  \n### Remarks  \n This object is usually a [CDialog](../../mfc/reference/cdialog-class.md) object. Implementors of custom DDX or DDV routines can use this pointer to obtain access to the dialog window that contains the controls they are operating on.  \n  \n For more information on writing your own DDX and DDV routines, see [Technical Note 26](../../mfc/tn026-ddx-and-ddv-routines.md). For an overview of DDX and DDV, see [Dialog Data Exchange and Validation](../../mfc/dialog-data-exchange-and-validation.md) and [Dialog Box Topics](../../mfc/dialog-boxes.md).  \n  \n##  <a name=\"cdataexchange__preparectrl\"></a>  CDataExchange::PrepareCtrl  \n The framework calls this member function to prepare the specified control for dialog data exchange (DDX) and validation (DDV).  \n  \n```  \nHWND PrepareCtrl(int nIDC);\n```  \n  \n### Parameters  \n `nIDC`  \n The ID of the control to be prepared for DDX or DDV.  \n  \n### Return Value  \n The `HWND` of the control being prepared for DDX or DDV.  \n  \n### Remarks  \n Use [PrepareEditCtrl](#cdataexchange__prepareeditctrl) instead for edit controls; use this member function for all other controls.  \n  \n Preparation consists of storing the control's `HWND` in the `CDataExchange` class. The framework uses this handle to restore the focus to the previously focused control in the event of a DDX or DDV failure.  \n  \n Implementors of custom DDX or DDV routines should call `PrepareCtrl` for all non-edit controls for which they are exchanging data via DDX or validating data via DDV.  \n  \n For more information on writing your own DDX and DDV routines, see [Technical Note 26](../../mfc/tn026-ddx-and-ddv-routines.md). For an overview of DDX and DDV, see [Dialog Data Exchange and Validation](../../mfc/dialog-data-exchange-and-validation.md) and [Dialog Box Topics](../../mfc/dialog-boxes.md).  \n  \n##  <a name=\"cdataexchange__prepareeditctrl\"></a>  CDataExchange::PrepareEditCtrl  \n The framework calls this member function to prepare the specified edit control for dialog data exchange (DDX) and validation (DDV).  \n  \n```  \nHWND PrepareEditCtrl(int nIDC);\n```  \n  \n### Parameters  \n `nIDC`  \n The ID of the edit control to be prepared for DDX or DDV.  \n  \n### Return Value  \n The `HWND` of the edit control being prepared for DDX or DDV.  \n  \n### Remarks  \n Use [PrepareCtrl](#cdataexchange__preparectrl) instead for all non-edit controls.  \n  \n Preparation consists of two things. First, `PrepareEditCtrl` stores the control's `HWND` in the `CDataExchange` class. The framework uses this handle to restore the focus to the previously focused control in the event of a DDX or DDV failure. Second, `PrepareEditCtrl` sets a flag in the `CDataExchange` class to indicate that the control whose data is being exchanged or validated is an edit control.  \n  \n Implementors of custom DDX or DDV routines should call `PrepareEditCtrl` for all edit controls for which they are exchanging data via DDX or validating data via DDV.  \n  \n For more information on writing your own DDX and DDV routines, see [Technical Note 26](../../mfc/tn026-ddx-and-ddv-routines.md). For an overview of DDX and DDV, see [Dialog Data Exchange and Validation](../../mfc/dialog-data-exchange-and-validation.md) and [Dialog Box Topics](../../mfc/dialog-boxes.md).  \n  \n##  <a name=\"cdataexchange__prepareolectrl\"></a>  CDataExchange::PrepareOleCtrl  \n The framework calls this member function to prepare the specified OLE control for dialog data exchange (DDX) and validation (DDV).  \n  \n```  \nCOleControlSite* PrepareOleCtrl(int nIDC);\n```  \n  \n### Parameters  \n `nIDC`  \n The ID of the OLE control to be prepared for DDX or DDV.  \n  \n### Return Value  \n A pointer to the OLE control site.  \n  \n### Remarks  \n Use [PrepareEditCtrl](#cdataexchange__prepareeditctrl) instead for edit controls or [PrepareCtrl](#cdataexchange__preparectrl) for all other non-OLE controls.  \n  \n Implementors of custom DDX or DDV routines should call `PrepareOleCtrl` for all OLE controls for which they are exchanging data via DDX or validating data via DDV.  \n  \n For more information on writing your own DDX and DDV routines, see [Technical Note 26](../../mfc/tn026-ddx-and-ddv-routines.md). For an overview of DDX and DDV, see [Dialog Data Exchange and Validation](../../mfc/dialog-data-exchange-and-validation.md) and [Dialog Box Topics](../../mfc/dialog-boxes.md).  \n  \n## See Also  \n [MFC Sample VIEWEX](../../visual-cpp-samples.md)   \n [Hierarchy Chart](../../mfc/hierarchy-chart.md)   \n [CWnd::DoDataExchange](../../mfc/reference/cwnd-class.md#cwnd__dodataexchange)   \n [CWnd::UpdateData](../../mfc/reference/cwnd-class.md#cwnd__updatedata)\n\n"}