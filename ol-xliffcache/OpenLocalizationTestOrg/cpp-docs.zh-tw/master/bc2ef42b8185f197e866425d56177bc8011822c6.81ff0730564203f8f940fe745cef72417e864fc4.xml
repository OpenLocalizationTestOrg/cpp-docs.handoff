{"nodes":[{"pos":[12,67],"content":"Updating the Text of a Status-Bar Pane | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Updating the Text of a Status-Bar Pane | Microsoft Docs","pos":[0,55]}]},{"content":"Updating the Text of a Status-Bar Pane","pos":[809,847]},{"content":"This article explains how to change the text that appears in an MFC status bar pane.","pos":[848,932]},{"content":"A status bar — a window object of class <bpt id=\"p1\">[</bpt>CStatusBar<ept id=\"p1\">](../mfc/reference/cstatusbar-class.md)</ept> — contains several \"panes.\"","pos":[933,1051],"source":" A status bar — a window object of class [CStatusBar](../mfc/reference/cstatusbar-class.md) — contains several \"panes.\""},{"content":"Each pane is a rectangular area of the status bar that you can use to display information.","pos":[1052,1142]},{"content":"For example, many applications display the status of the CAPS LOCK, NUM LOCK, and other keys in the rightmost panes.","pos":[1143,1259]},{"content":"Applications also often display informative text in the leftmost pane (pane 0), sometimes called the \"message pane.\"","pos":[1260,1376]},{"content":"For example, the default MFC status bar uses the message pane to display a string explaining the currently selected menu item or toolbar button.","pos":[1377,1521]},{"content":"The figure in <bpt id=\"p1\">[</bpt>Status Bars<ept id=\"p1\">](../mfc/status-bar-implementation-in-mfc.md)</ept> shows a status bar from an Application Wizard-created MFC application.","pos":[1522,1664],"source":" The figure in [Status Bars](../mfc/status-bar-implementation-in-mfc.md) shows a status bar from an Application Wizard-created MFC application."},{"content":"By default, MFC does not enable a <ph id=\"ph1\">`CStatusBar`</ph> pane when it creates the pane.","pos":[1671,1748],"source":"By default, MFC does not enable a `CStatusBar` pane when it creates the pane."},{"content":"To activate a pane, you must use the <ph id=\"ph1\">`ON_UPDATE_COMMAND_UI`</ph> macro for each pane on the status bar and update the panes.","pos":[1749,1868],"source":" To activate a pane, you must use the `ON_UPDATE_COMMAND_UI` macro for each pane on the status bar and update the panes."},{"content":"Because panes do not send <bpt id=\"p1\">**</bpt>WM_COMMAND<ept id=\"p1\">**</ept> messages (they aren't like toolbar buttons), you must type the code manually.","pos":[1869,1987],"source":" Because panes do not send **WM_COMMAND** messages (they aren't like toolbar buttons), you must type the code manually."},{"content":"For example, suppose one pane has <ph id=\"ph1\">`ID_INDICATOR_PAGE`</ph> as its command identifier and that it contains the current page number in a document.","pos":[1994,2133],"source":"For example, suppose one pane has `ID_INDICATOR_PAGE` as its command identifier and that it contains the current page number in a document."},{"content":"The following procedure describes how to create a new pane in the status bar.","pos":[2134,2211]},{"content":"To make a new pane","pos":[2221,2239]},{"content":"Define the pane's command ID.","pos":[2249,2278]},{"content":"On the <bpt id=\"p1\">**</bpt>View<ept id=\"p1\">**</ept> menu, click <bpt id=\"p2\">**</bpt>Resource View<ept id=\"p2\">**</ept>.","pos":[2289,2335],"source":"On the **View** menu, click **Resource View**."},{"content":"Right-click the project resource and click <bpt id=\"p1\">**</bpt>Resource Symbols<ept id=\"p1\">**</ept>.","pos":[2336,2400],"source":" Right-click the project resource and click **Resource Symbols**."},{"content":"In the Resource Symbols dialog box, click <ph id=\"ph1\">`New`</ph>.","pos":[2401,2449],"source":" In the Resource Symbols dialog box, click `New`."},{"content":"Type a command ID name: for example, <ph id=\"ph1\">`ID_INDICATOR_PAGE`</ph>.","pos":[2450,2507],"source":" Type a command ID name: for example, `ID_INDICATOR_PAGE`."},{"content":"Specify a value for the ID, or accept the value suggested by the Resource Symbols dialog box.","pos":[2508,2601]},{"content":"For example, for <ph id=\"ph1\">`ID_INDICATOR_PAGE`</ph>, accept the default value.","pos":[2602,2665],"source":" For example, for `ID_INDICATOR_PAGE`, accept the default value."},{"content":"Close the Resource Symbols dialog box.","pos":[2666,2704]},{"content":"Define a default string to display in the pane.","pos":[2714,2761]},{"content":"With Resource View open, double-click <bpt id=\"p1\">**</bpt>String Table<ept id=\"p1\">**</ept> in the window that lists resource types for your application.","pos":[2772,2888],"source":"With Resource View open, double-click **String Table** in the window that lists resource types for your application."},{"content":"With the <bpt id=\"p1\">**</bpt>String Table<ept id=\"p1\">**</ept> editor open, choose <bpt id=\"p2\">**</bpt>New String<ept id=\"p2\">**</ept> from the <bpt id=\"p3\">**</bpt>Insert<ept id=\"p3\">**</ept> menu.","pos":[2889,2975],"source":" With the **String Table** editor open, choose **New String** from the **Insert** menu."},{"content":"In the String Properties window, select your pane's command ID (for example, <ph id=\"ph1\">`ID_INDICATOR_PAGE`</ph>) and type a default string value, such as \"Page   \".","pos":[2976,3125],"source":" In the String Properties window, select your pane's command ID (for example, `ID_INDICATOR_PAGE`) and type a default string value, such as \"Page   \"."},{"content":"Close the string editor.","pos":[3126,3150]},{"content":"(You need a default string to avoid a compiler error.)","pos":[3151,3205]},{"pos":[3215,3256],"content":"Add the pane to the <bpt id=\"p1\">**</bpt>indicators<ept id=\"p1\">**</ept> array.","source":"Add the pane to the **indicators** array."},{"content":"In file MAINFRM.CPP, locate the <bpt id=\"p1\">**</bpt>indicators<ept id=\"p1\">**</ept> array.","pos":[3267,3320],"source":"In file MAINFRM.CPP, locate the **indicators** array."},{"content":"This array lists command IDs for all of the status bar's indicators, in order from left to right.","pos":[3321,3418]},{"content":"At the appropriate point in the array, enter your pane's command ID, as shown here for <ph id=\"ph1\">`ID_INDICATOR_PAGE`</ph>:","pos":[3419,3526],"source":" At the appropriate point in the array, enter your pane's command ID, as shown here for `ID_INDICATOR_PAGE`:"},{"pos":[3548,3565],"content":"NVC_MFCDocView#10"},{"content":"The recommended way to display text in a pane is to call the <bpt id=\"p1\">**</bpt>SetText<ept id=\"p1\">**</ept> member function of class <ph id=\"ph1\">`CCmdUI`</ph> in an update handler function for the pane.","pos":[3643,3793],"source":"The recommended way to display text in a pane is to call the **SetText** member function of class `CCmdUI` in an update handler function for the pane."},{"content":"For example, you might want to set up an integer variable <ph id=\"ph1\">`m_nPage`</ph> that contains the current page number and use <bpt id=\"p1\">**</bpt>SetText<ept id=\"p1\">**</ept> to set the pane's text to a string version of that number.","pos":[3794,3978],"source":" For example, you might want to set up an integer variable `m_nPage` that contains the current page number and use **SetText** to set the pane's text to a string version of that number."},{"pos":[3986,4296],"content":"[!NOTE]\n The **SetText** approach is recommended. It is possible to perform this task at a slightly lower level by calling the `CStatusBar` member function `SetPaneText`. Even so, you still need an update handler. Without such a handler for the pane, MFC automatically disables the pane, erasing its content.","leadings":["","> "],"nodes":[{"content":" The **SetText** approach is recommended. It is possible to perform this task at a slightly lower level by calling the `CStatusBar` member function `SetPaneText`. Even so, you still need an update handler. Without such a handler for the pane, MFC automatically disables the pane, erasing its content.","pos":[8,308],"nodes":[{"content":"The <bpt id=\"p1\">**</bpt>SetText<ept id=\"p1\">**</ept> approach is recommended.","pos":[1,41],"source":" The **SetText** approach is recommended."},{"content":"It is possible to perform this task at a slightly lower level by calling the <ph id=\"ph1\">`CStatusBar`</ph> member function <ph id=\"ph2\">`SetPaneText`</ph>.","pos":[42,162],"source":" It is possible to perform this task at a slightly lower level by calling the `CStatusBar` member function `SetPaneText`."},{"content":"Even so, you still need an update handler.","pos":[163,205]},{"content":"Without such a handler for the pane, MFC automatically disables the pane, erasing its content.","pos":[206,300]}]}]},{"content":"The following procedure shows how to use an update handler function to display text in a pane.","pos":[4303,4397]},{"content":"To make a pane display text","pos":[4408,4435]},{"content":"Add a command update handler for the command.","pos":[4445,4490]},{"pos":[4501,4596],"content":"Manually add a prototype for the handler, as shown here for <ph id=\"ph1\">`ID_INDICATOR_PAGE`</ph> (in MAINFRM.H):","source":"Manually add a prototype for the handler, as shown here for `ID_INDICATOR_PAGE` (in MAINFRM.H):"},{"pos":[4618,4635],"content":"NVC_MFCDocView#11"},{"pos":[4714,4829],"content":"In the appropriate .CPP file, add the handler's definition, as shown here for <ph id=\"ph1\">`ID_INDICATOR_PAGE`</ph> (in MAINFRM.CPP):","source":"In the appropriate .CPP file, add the handler's definition, as shown here for `ID_INDICATOR_PAGE` (in MAINFRM.CPP):"},{"pos":[4851,4868],"content":"NVC_MFCDocView#12"},{"content":"The last three lines of this handler are the code that displays your text.","pos":[4950,5024]},{"pos":[5034,5159],"content":"In the appropriate message map, add the <ph id=\"ph1\">`ON_UPDATE_COMMAND_UI`</ph> macro, as shown here for <ph id=\"ph2\">`ID_INDICATOR_PAGE`</ph> (in MAINFRM.CPP):","source":"In the appropriate message map, add the `ON_UPDATE_COMMAND_UI` macro, as shown here for `ID_INDICATOR_PAGE` (in MAINFRM.CPP):"},{"pos":[5181,5198],"content":"NVC_MFCDocView#13"},{"content":"Once you define the value of the <ph id=\"ph1\">`m_nPage`</ph> member variable (of class <ph id=\"ph2\">`CMainFrame`</ph>), this technique causes the page number to appear in the pane during idle processing in the same manner that the application updates other indicators.","pos":[5276,5508],"source":"Once you define the value of the `m_nPage` member variable (of class `CMainFrame`), this technique causes the page number to appear in the pane during idle processing in the same manner that the application updates other indicators."},{"content":"If <ph id=\"ph1\">`m_nPage`</ph> changes, the display changes during the next idle loop.","pos":[5509,5577],"source":" If `m_nPage` changes, the display changes during the next idle loop."},{"content":"What do you want to know more about","pos":[5587,5622]},{"content":"Updating user-interface objects (how to update toolbar buttons and menu items as program conditions change)","pos":[5633,5740]},{"content":"See Also","pos":[5798,5806]},{"content":"Status Bar Implementation in MFC","pos":[5811,5843]},{"content":"CStatusBar Class","pos":[5894,5910]}],"content":"---\ntitle: \"Updating the Text of a Status-Bar Pane | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"updating user interface objects\"\n  - \"ON_UPDATE_COMMAND_UI macro\"\n  - \"user interface objects, updating\"\n  - \"text, status bar\"\n  - \"CStatusBar class, updating\"\n  - \"SetText method\"\n  - \"panes, status bar\"\n  - \"status bars, updating\"\nms.assetid: 4984a3f4-9905-4d8c-a927-dca19781053b\ncaps.latest.revision: 11\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Updating the Text of a Status-Bar Pane\nThis article explains how to change the text that appears in an MFC status bar pane. A status bar — a window object of class [CStatusBar](../mfc/reference/cstatusbar-class.md) — contains several \"panes.\" Each pane is a rectangular area of the status bar that you can use to display information. For example, many applications display the status of the CAPS LOCK, NUM LOCK, and other keys in the rightmost panes. Applications also often display informative text in the leftmost pane (pane 0), sometimes called the \"message pane.\" For example, the default MFC status bar uses the message pane to display a string explaining the currently selected menu item or toolbar button. The figure in [Status Bars](../mfc/status-bar-implementation-in-mfc.md) shows a status bar from an Application Wizard-created MFC application.  \n  \n By default, MFC does not enable a `CStatusBar` pane when it creates the pane. To activate a pane, you must use the `ON_UPDATE_COMMAND_UI` macro for each pane on the status bar and update the panes. Because panes do not send **WM_COMMAND** messages (they aren't like toolbar buttons), you must type the code manually.  \n  \n For example, suppose one pane has `ID_INDICATOR_PAGE` as its command identifier and that it contains the current page number in a document. The following procedure describes how to create a new pane in the status bar.  \n  \n### To make a new pane  \n  \n1.  Define the pane's command ID.  \n  \n     On the **View** menu, click **Resource View**. Right-click the project resource and click **Resource Symbols**. In the Resource Symbols dialog box, click `New`. Type a command ID name: for example, `ID_INDICATOR_PAGE`. Specify a value for the ID, or accept the value suggested by the Resource Symbols dialog box. For example, for `ID_INDICATOR_PAGE`, accept the default value. Close the Resource Symbols dialog box.  \n  \n2.  Define a default string to display in the pane.  \n  \n     With Resource View open, double-click **String Table** in the window that lists resource types for your application. With the **String Table** editor open, choose **New String** from the **Insert** menu. In the String Properties window, select your pane's command ID (for example, `ID_INDICATOR_PAGE`) and type a default string value, such as \"Page   \". Close the string editor. (You need a default string to avoid a compiler error.)  \n  \n3.  Add the pane to the **indicators** array.  \n  \n     In file MAINFRM.CPP, locate the **indicators** array. This array lists command IDs for all of the status bar's indicators, in order from left to right. At the appropriate point in the array, enter your pane's command ID, as shown here for `ID_INDICATOR_PAGE`:  \n  \n     [!code-cpp[NVC_MFCDocView#10](../mfc/codesnippet/cpp/updating-the-text-of-a-status-bar-pane_1.cpp)]  \n  \n The recommended way to display text in a pane is to call the **SetText** member function of class `CCmdUI` in an update handler function for the pane. For example, you might want to set up an integer variable `m_nPage` that contains the current page number and use **SetText** to set the pane's text to a string version of that number.  \n  \n> [!NOTE]\n>  The **SetText** approach is recommended. It is possible to perform this task at a slightly lower level by calling the `CStatusBar` member function `SetPaneText`. Even so, you still need an update handler. Without such a handler for the pane, MFC automatically disables the pane, erasing its content.  \n  \n The following procedure shows how to use an update handler function to display text in a pane.  \n  \n#### To make a pane display text  \n  \n1.  Add a command update handler for the command.  \n  \n     Manually add a prototype for the handler, as shown here for `ID_INDICATOR_PAGE` (in MAINFRM.H):  \n  \n     [!code-cpp[NVC_MFCDocView#11](../mfc/codesnippet/cpp/updating-the-text-of-a-status-bar-pane_2.h)]  \n  \n2.  In the appropriate .CPP file, add the handler's definition, as shown here for `ID_INDICATOR_PAGE` (in MAINFRM.CPP):  \n  \n     [!code-cpp[NVC_MFCDocView#12](../mfc/codesnippet/cpp/updating-the-text-of-a-status-bar-pane_3.cpp)]  \n  \n     The last three lines of this handler are the code that displays your text.  \n  \n3.  In the appropriate message map, add the `ON_UPDATE_COMMAND_UI` macro, as shown here for `ID_INDICATOR_PAGE` (in MAINFRM.CPP):  \n  \n     [!code-cpp[NVC_MFCDocView#13](../mfc/codesnippet/cpp/updating-the-text-of-a-status-bar-pane_4.cpp)]  \n  \n Once you define the value of the `m_nPage` member variable (of class `CMainFrame`), this technique causes the page number to appear in the pane during idle processing in the same manner that the application updates other indicators. If `m_nPage` changes, the display changes during the next idle loop.  \n  \n### What do you want to know more about  \n  \n-   [Updating user-interface objects (how to update toolbar buttons and menu items as program conditions change)](../mfc/how-to-update-user-interface-objects.md)  \n  \n## See Also  \n [Status Bar Implementation in MFC](../mfc/status-bar-implementation-in-mfc.md)   \n [CStatusBar Class](../mfc/reference/cstatusbar-class.md)\n"}