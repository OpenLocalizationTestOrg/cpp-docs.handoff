{"nodes":[{"pos":[12,39],"content":"__fastfail | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"__fastfail | Microsoft Docs","pos":[0,27]}]},{"content":"__fastfail","pos":[519,529]},{"content":"Microsoft Specific","pos":[532,550]},{"content":"Immediately terminates the calling process with minimum overhead.","pos":[559,624]},{"content":"Syntax","pos":[633,639]},{"content":"Parameters","pos":[703,713]},{"content":"[in]","pos":[717,721]},{"content":"A <ph id=\"ph1\">`FAST_FAIL_&lt;description&gt;`</ph> symbolic constant from winnt.h or wdm.h that indicates the reason for process termination.","pos":[732,850],"source":" A `FAST_FAIL_<description>` symbolic constant from winnt.h or wdm.h that indicates the reason for process termination."},{"content":"Return Value","pos":[859,871]},{"pos":[875,918],"content":"The <ph id=\"ph1\">`__fastfail`</ph> intrinsic does not return.","source":"The `__fastfail` intrinsic does not return."},{"content":"Remarks","pos":[927,934]},{"content":"The <ph id=\"ph1\">`__fastfail`</ph> intrinsic provides a mechanism for a <bpt id=\"p1\">*</bpt>fast fail<ept id=\"p1\">*</ept> request—a way for a potentially corrupted process to request immediate process termination.","pos":[938,1095],"source":"The `__fastfail` intrinsic provides a mechanism for a *fast fail* request—a way for a potentially corrupted process to request immediate process termination."},{"content":"Critical failures that may have corrupted program state and stack beyond recovery cannot be handled by the regular exception handling facility.","pos":[1096,1239]},{"content":"Use <ph id=\"ph1\">`__fastfail`</ph> to terminate the process using minimal overhead.","pos":[1240,1305],"source":" Use `__fastfail` to terminate the process using minimal overhead."},{"pos":[1312,1402],"content":"Internally, <ph id=\"ph1\">`__fastfail`</ph> is implemented by using several architecture-specific mechanisms:","source":"Internally, `__fastfail` is implemented by using several architecture-specific mechanisms:"},{"content":"Architecture","pos":[1409,1421]},{"content":"Instruction","pos":[1422,1433]},{"content":"Location of code argument","pos":[1434,1459]},{"content":"x86","pos":[1537,1540]},{"content":"int 0x29","pos":[1541,1549]},{"content":"ecx","pos":[1550,1553]},{"content":"int 0x29","pos":[1622,1630]},{"content":"rcx","pos":[1631,1634]},{"content":"ARM","pos":[1639,1642]},{"content":"Opcode 0xDEFB","pos":[1643,1656]},{"content":"r0","pos":[1657,1659]},{"content":"A fast fail request is self-contained and typically requires just two instructions to execute.","pos":[1667,1761]},{"content":"Once a fast fail request has been executed the kernel then takes the appropriate action.","pos":[1762,1850]},{"content":"In user-mode code, there are no memory dependencies beyond the instruction pointer itself when a fast fail event is raised.","pos":[1851,1974]},{"content":"This maximizes its reliability even if there is severe memory corruption.","pos":[1975,2048]},{"pos":[2055,2268],"content":"The <ph id=\"ph1\">`code`</ph> argument—one of the <ph id=\"ph2\">`FAST_FAIL_&lt;description&gt;`</ph> symbolic constants from winnt.h or wdm.h—describes the type of failure condition and is incorporated into failure reports in an environment-specific manner.","source":"The `code` argument—one of the `FAST_FAIL_<description>` symbolic constants from winnt.h or wdm.h—describes the type of failure condition and is incorporated into failure reports in an environment-specific manner."},{"content":"User-mode fast fail requests appear as a second chance non-continuable exception with exception code 0xC0000409 and with at least one exception parameter.","pos":[2275,2429]},{"content":"The first exception parameter is the <ph id=\"ph1\">`code`</ph> value.","pos":[2430,2480],"source":" The first exception parameter is the `code` value."},{"content":"This exception code indicates to the Windows Error Reporting (WER) and debugging infrastructure that the process is corrupted and that minimal in-process actions should be taken in response to the failure.","pos":[2481,2686]},{"content":"Kernel-mode fast fail requests are implemented by using a dedicated bugcheck code, <ph id=\"ph1\">`KERNEL_SECURITY_CHECK_FAILURE`</ph> (0x139).","pos":[2687,2810],"source":" Kernel-mode fast fail requests are implemented by using a dedicated bugcheck code, `KERNEL_SECURITY_CHECK_FAILURE` (0x139)."},{"content":"In both cases, no exception handlers are invoked because the program is expected to be in a corrupted state.","pos":[2811,2919]},{"content":"If a debugger is present, it is given an opportunity to examine the state of the program before termination.","pos":[2920,3028]},{"content":"Support for the native fast fail mechanism began in Windows 8.","pos":[3035,3097]},{"content":"Windows operating systems that do not support the fast fail instruction natively will typically treat a fast fail request as an access violation, or as an <ph id=\"ph1\">`UNEXPECTED_KERNEL_MODE_TRAP`</ph> bugcheck.","pos":[3098,3292],"source":" Windows operating systems that do not support the fast fail instruction natively will typically treat a fast fail request as an access violation, or as an `UNEXPECTED_KERNEL_MODE_TRAP` bugcheck."},{"content":"In these cases, the program is still terminated, but not necessarily as quickly.","pos":[3293,3373]},{"pos":[3393,3427],"content":"is only available as an intrinsic."},{"content":"Requirements","pos":[3436,3448]},{"content":"Intrinsic","pos":[3455,3464]},{"content":"Architecture","pos":[3465,3477]},{"pos":[3534,3607],"content":"x86, <ph id=\"ph1\">[!INCLUDE[vcprx64](../assembler/inline/includes/vcprx64_md.md)]</ph>, ARM","source":"x86, [!INCLUDE[vcprx64](../assembler/inline/includes/vcprx64_md.md)], ARM"},{"pos":[3615,3642],"content":"<bpt id=\"p1\">**</bpt>Header file<ept id=\"p1\">**</ept> <ph id=\"ph1\">\\&lt;</ph>intrin.h&gt;","source":"**Header file** \\<intrin.h>"},{"content":"END Microsoft Specific","pos":[3651,3673]},{"content":"See Also","pos":[3682,3690]},{"content":"Compiler Intrinsics","pos":[3695,3714]}],"content":"---\ntitle: \"__fastfail | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nms.assetid: 9cd32639-e395-4c75-9f3a-ac3ba7f49921\ncaps.latest.revision: 3\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# __fastfail\n**Microsoft Specific**  \n  \n Immediately terminates the calling process with minimum overhead.  \n  \n## Syntax  \n  \n```  \nvoid __fastfail(unsigned int code);  \n```  \n  \n#### Parameters  \n [in] `code`  \n A `FAST_FAIL_<description>` symbolic constant from winnt.h or wdm.h that indicates the reason for process termination.  \n  \n## Return Value  \n The `__fastfail` intrinsic does not return.  \n  \n## Remarks  \n The `__fastfail` intrinsic provides a mechanism for a *fast fail* request—a way for a potentially corrupted process to request immediate process termination. Critical failures that may have corrupted program state and stack beyond recovery cannot be handled by the regular exception handling facility. Use `__fastfail` to terminate the process using minimal overhead.  \n  \n Internally, `__fastfail` is implemented by using several architecture-specific mechanisms:  \n  \n|Architecture|Instruction|Location of code argument|  \n|------------------|-----------------|-------------------------------|  \n|x86|int 0x29|ecx|  \n|[!INCLUDE[vcprx64](../assembler/inline/includes/vcprx64_md.md)]|int 0x29|rcx|  \n|ARM|Opcode 0xDEFB|r0|  \n  \n A fast fail request is self-contained and typically requires just two instructions to execute. Once a fast fail request has been executed the kernel then takes the appropriate action. In user-mode code, there are no memory dependencies beyond the instruction pointer itself when a fast fail event is raised. This maximizes its reliability even if there is severe memory corruption.  \n  \n The `code` argument—one of the `FAST_FAIL_<description>` symbolic constants from winnt.h or wdm.h—describes the type of failure condition and is incorporated into failure reports in an environment-specific manner.  \n  \n User-mode fast fail requests appear as a second chance non-continuable exception with exception code 0xC0000409 and with at least one exception parameter. The first exception parameter is the `code` value. This exception code indicates to the Windows Error Reporting (WER) and debugging infrastructure that the process is corrupted and that minimal in-process actions should be taken in response to the failure. Kernel-mode fast fail requests are implemented by using a dedicated bugcheck code, `KERNEL_SECURITY_CHECK_FAILURE` (0x139). In both cases, no exception handlers are invoked because the program is expected to be in a corrupted state. If a debugger is present, it is given an opportunity to examine the state of the program before termination.  \n  \n Support for the native fast fail mechanism began in Windows 8. Windows operating systems that do not support the fast fail instruction natively will typically treat a fast fail request as an access violation, or as an `UNEXPECTED_KERNEL_MODE_TRAP` bugcheck. In these cases, the program is still terminated, but not necessarily as quickly.  \n  \n `__fastfail` is only available as an intrinsic.  \n  \n## Requirements  \n  \n|Intrinsic|Architecture|  \n|---------------|------------------|  \n|`__fastfail`|x86, [!INCLUDE[vcprx64](../assembler/inline/includes/vcprx64_md.md)], ARM|  \n  \n **Header file** \\<intrin.h>  \n  \n## END Microsoft Specific  \n  \n## See Also  \n [Compiler Intrinsics](../intrinsics/compiler-intrinsics.md)"}