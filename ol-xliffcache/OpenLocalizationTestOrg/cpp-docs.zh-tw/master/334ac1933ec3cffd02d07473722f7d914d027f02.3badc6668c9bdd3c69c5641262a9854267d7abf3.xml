{"nodes":[{"pos":[12,68],"content":"-Gd, -Gr, -Gv, -Gz (Calling Convention) | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"-Gd, -Gr, -Gv, -Gz (Calling Convention) | Microsoft Docs","pos":[0,56]}]},{"content":"/Gd, /Gr, /Gv, /Gz (Calling Convention)","pos":[1057,1096]},{"content":"These options determine the order in which function arguments are pushed onto the stack, whether the caller function or called function removes the arguments from the stack at the end of the call, and the name-decorating convention that the compiler uses to identify individual functions.","pos":[1097,1385]},{"content":"Syntax","pos":[1394,1400]},{"content":"Remarks","pos":[1448,1455]},{"pos":[1459,1743],"content":"<bpt id=\"p1\">**</bpt>/Gd<ept id=\"p1\">**</ept>, the default setting, specifies the <bpt id=\"p2\">[</bpt>__cdecl<ept id=\"p2\">](../../cpp/cdecl.md)</ept> calling convention for all functions except C++ member functions and functions that are marked <bpt id=\"p3\">[</bpt>__stdcall<ept id=\"p3\">](../../cpp/stdcall.md)</ept>, <bpt id=\"p4\">[</bpt>__fastcall<ept id=\"p4\">](../../cpp/fastcall.md)</ept>, or <bpt id=\"p5\">[</bpt>__vectorcall<ept id=\"p5\">](../../cpp/vectorcall.md)</ept>.","source":"**/Gd**, the default setting, specifies the [__cdecl](../../cpp/cdecl.md) calling convention for all functions except C++ member functions and functions that are marked [__stdcall](../../cpp/stdcall.md), [__fastcall](../../cpp/fastcall.md), or [__vectorcall](../../cpp/vectorcall.md)."},{"content":"<bpt id=\"p1\">**</bpt>/Gr<ept id=\"p1\">**</ept> specifies the <ph id=\"ph1\">`__fastcall`</ph> calling convention for all functions except C++ member functions, functions named <ph id=\"ph2\">`main`</ph>, and functions that are marked <ph id=\"ph3\">`__cdecl`</ph>, <ph id=\"ph4\">`__stdcall`</ph>, or <ph id=\"ph5\">`__vectorcall`</ph>.","pos":[1750,1947],"source":"**/Gr** specifies the `__fastcall` calling convention for all functions except C++ member functions, functions named `main`, and functions that are marked `__cdecl`, `__stdcall`, or `__vectorcall`."},{"content":"All <ph id=\"ph1\">`__fastcall`</ph> functions must have prototypes.","pos":[1948,1996],"source":" All `__fastcall` functions must have prototypes."},{"content":"This calling convention is only available in compilers that target x86, and is ignored by compilers that target other architectures.","pos":[1997,2129]},{"content":"<bpt id=\"p1\">**</bpt>/Gz<ept id=\"p1\">**</ept> specifies the <ph id=\"ph1\">`__stdcall`</ph> calling convention for all functions except C++ member functions, functions named <ph id=\"ph2\">`main`</ph>, and functions that are marked <ph id=\"ph3\">`__cdecl`</ph>, <ph id=\"ph4\">`__fastcall`</ph>, or <ph id=\"ph5\">`__vectorcall`</ph>.","pos":[2136,2333],"source":"**/Gz** specifies the `__stdcall` calling convention for all functions except C++ member functions, functions named `main`, and functions that are marked `__cdecl`, `__fastcall`, or `__vectorcall`."},{"content":"All <ph id=\"ph1\">`__stdcall`</ph> functions must have prototypes.","pos":[2334,2381],"source":" All `__stdcall` functions must have prototypes."},{"content":"This calling convention is only available in compilers that target x86, and is ignored by compilers that target other architectures.","pos":[2382,2514]},{"content":"<bpt id=\"p1\">**</bpt>/Gv<ept id=\"p1\">**</ept> specifies the <ph id=\"ph1\">`__vectorcall`</ph> calling convention for all functions except C++ member functions, functions named main, functions with a <ph id=\"ph2\">`vararg`</ph> variable argument list, or functions that are marked with a conflicting <ph id=\"ph3\">`__cdecl`</ph>, <ph id=\"ph4\">`__stdcall`</ph>, or <ph id=\"ph5\">`__fastcall`</ph> attribute.","pos":[2521,2794],"source":"**/Gv** specifies the `__vectorcall` calling convention for all functions except C++ member functions, functions named main, functions with a `vararg` variable argument list, or functions that are marked with a conflicting `__cdecl`, `__stdcall`, or `__fastcall` attribute."},{"content":"This calling convention is only available on x86 and x64 architectures that support /arch:SSE2 and above, and is ignored by compilers that target the ARM architecture.","pos":[2795,2962]},{"pos":[2969,3045],"content":"Functions that take a variable number of arguments must be marked <ph id=\"ph1\">`__cdecl`</ph>.","source":"Functions that take a variable number of arguments must be marked `__cdecl`."},{"pos":[3052,3209],"content":"<bpt id=\"p1\">**</bpt>/Gd<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>/Gr<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>/Gv<ept id=\"p3\">**</ept> and <bpt id=\"p4\">**</bpt>/Gz<ept id=\"p4\">**</ept> are not compatible with <bpt id=\"p5\">[</bpt>/clr:safe<ept id=\"p5\">](../../build/reference/clr-common-language-runtime-compilation.md)</ept> or <bpt id=\"p6\">**</bpt>/clr:pure<ept id=\"p6\">**</ept>.","source":"**/Gd**, **/Gr**, **/Gv** and **/Gz** are not compatible with [/clr:safe](../../build/reference/clr-common-language-runtime-compilation.md) or **/clr:pure**."},{"pos":[3217,3320],"content":"[!NOTE]\n By default for x86 processors, C++ member functions use [__thiscall](../../cpp/thiscall.md).","leadings":["","> "],"nodes":[{"content":"By default for x86 processors, C++ member functions use <bpt id=\"p1\">[</bpt>__thiscall<ept id=\"p1\">](../../cpp/thiscall.md)</ept>.","pos":[9,101],"source":" By default for x86 processors, C++ member functions use [__thiscall](../../cpp/thiscall.md)."}]},{"content":"For all processors, a member function that is explicitly marked as <ph id=\"ph1\">`__cdecl`</ph>, <ph id=\"ph2\">`__fastcall`</ph>, <ph id=\"ph3\">`__vectorcall`</ph>, or <ph id=\"ph4\">`__stdcall`</ph> uses the specified calling convention if it is not ignored on that architecture.","pos":[3327,3530],"source":"For all processors, a member function that is explicitly marked as `__cdecl`, `__fastcall`, `__vectorcall`, or `__stdcall` uses the specified calling convention if it is not ignored on that architecture."},{"content":"A member function that takes a variable number of arguments always uses the <ph id=\"ph1\">`__cdecl`</ph> calling convention.","pos":[3531,3636],"source":" A member function that takes a variable number of arguments always uses the `__cdecl` calling convention."},{"content":"These compiler options have no effect on the name decoration of C++ methods and functions.","pos":[3643,3733]},{"content":"Unless declared as <ph id=\"ph1\">`extern \"C\"`</ph>, C++ methods and functions use a different name-decorating scheme.","pos":[3734,3832],"source":" Unless declared as `extern \"C\"`, C++ methods and functions use a different name-decorating scheme."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Decorated Names<ept id=\"p1\">](../../build/reference/decorated-names.md)</ept>.","pos":[3833,3919],"source":" For more information, see [Decorated Names](../../build/reference/decorated-names.md)."},{"pos":[3926,4034],"content":"For more information about calling conventions, see <bpt id=\"p1\">[</bpt>Calling Conventions<ept id=\"p1\">](../../cpp/calling-conventions.md)</ept>.","source":"For more information about calling conventions, see [Calling Conventions](../../cpp/calling-conventions.md)."},{"content":"__cdecl Specifics","pos":[4043,4060]},{"content":"On x86 processors, all function arguments are passed on the stack from right to left.","pos":[4064,4149]},{"content":"On ARM and x64 architectures, some arguments are passed by register and the rest are passed on the stack from right to left.","pos":[4150,4274]},{"content":"The calling routine pops the arguments from the stack.","pos":[4275,4329]},{"content":"For C, the <ph id=\"ph1\">`__cdecl`</ph> naming convention uses the function name preceded by an underscore ( <ph id=\"ph2\">`_`</ph> ); no case translation is performed.","pos":[4336,4466],"source":"For C, the `__cdecl` naming convention uses the function name preceded by an underscore ( `_` ); no case translation is performed."},{"content":"Unless declared as <ph id=\"ph1\">`extern \"C\"`</ph>, C++ functions use a different name-decorating scheme.","pos":[4467,4553],"source":" Unless declared as `extern \"C\"`, C++ functions use a different name-decorating scheme."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Decorated Names<ept id=\"p1\">](../../build/reference/decorated-names.md)</ept>.","pos":[4554,4640],"source":" For more information, see [Decorated Names](../../build/reference/decorated-names.md)."},{"content":"__fastcall Specifics","pos":[4649,4669]},{"content":"Some of a <ph id=\"ph1\">`__fastcall`</ph> function's arguments are passed in registers (for x86 processors, ECX, and EDX), and the rest are pushed onto the stack from right to left.","pos":[4673,4835],"source":"Some of a `__fastcall` function's arguments are passed in registers (for x86 processors, ECX, and EDX), and the rest are pushed onto the stack from right to left."},{"content":"The called routine pops these arguments from the stack before it returns.","pos":[4836,4909]},{"content":"Typically, <bpt id=\"p1\">**</bpt>/Gr<ept id=\"p1\">**</ept> decreases execution time.","pos":[4910,4954],"source":" Typically, **/Gr** decreases execution time."},{"pos":[4962,5155],"content":"[!NOTE]\n Be careful when you use the `__fastcall` calling convention for any function that's written in inline assembly language. Your use of registers could conflict with the compiler's use.","leadings":["","> "],"nodes":[{"content":" Be careful when you use the `__fastcall` calling convention for any function that's written in inline assembly language. Your use of registers could conflict with the compiler's use.","pos":[8,191],"nodes":[{"content":"Be careful when you use the <ph id=\"ph1\">`__fastcall`</ph> calling convention for any function that's written in inline assembly language.","pos":[1,121],"source":" Be careful when you use the `__fastcall` calling convention for any function that's written in inline assembly language."},{"content":"Your use of registers could conflict with the compiler's use.","pos":[122,183]}]}]},{"content":"For C, the <ph id=\"ph1\">`__fastcall`</ph> naming convention uses the function name preceded by an at sign (<ph id=\"ph2\">`@`</ph>) followed by the size of the function's arguments in bytes.","pos":[5162,5314],"source":"For C, the `__fastcall` naming convention uses the function name preceded by an at sign (`@`) followed by the size of the function's arguments in bytes."},{"content":"No case translation is done.","pos":[5315,5343]},{"content":"The compiler uses this template for the naming convention:","pos":[5344,5402]},{"content":"When you use the <ph id=\"ph1\">`__fastcall`</ph> naming convention, use the standard include files.","pos":[5449,5529],"source":"When you use the `__fastcall` naming convention, use the standard include files."},{"content":"Otherwise, you will get unresolved external references.","pos":[5530,5585]},{"content":"__stdcall Specifics","pos":[5594,5613]},{"pos":[5617,5776],"content":"A <ph id=\"ph1\">`__stdcall`</ph> function's arguments are pushed onto the stack from right to left, and the called function pops these arguments from the stack before it returns.","source":"A `__stdcall` function's arguments are pushed onto the stack from right to left, and the called function pops these arguments from the stack before it returns."},{"content":"For C, the <ph id=\"ph1\">`__stdcall`</ph> naming convention uses the function name preceded by an underscore ( <ph id=\"ph2\">`_`</ph> ) and followed by an at sign (@) and the size of the function's arguments in bytes.","pos":[5783,5962],"source":"For C, the `__stdcall` naming convention uses the function name preceded by an underscore ( `_` ) and followed by an at sign (@) and the size of the function's arguments in bytes."},{"content":"No case translation is performed.","pos":[5963,5996]},{"content":"The compiler uses this template for the naming convention:","pos":[5997,6055]},{"content":"__vectorcall Specifics","pos":[6103,6125]},{"content":"A <ph id=\"ph1\">`__vectorcall`</ph> function’s integer arguments are passed by value, using up to two (on x86) or four (on x64) integer registers, and up to six XMM registers for floating-point and vector values, and the rest are passed on the stack from right to left.","pos":[6129,6379],"source":"A `__vectorcall` function’s integer arguments are passed by value, using up to two (on x86) or four (on x64) integer registers, and up to six XMM registers for floating-point and vector values, and the rest are passed on the stack from right to left."},{"content":"The called function cleans off the stack before it returns.","pos":[6380,6439]},{"content":"Vector and floating-point return values are returned in XMM0.","pos":[6440,6501]},{"content":"For C, the <ph id=\"ph1\">`__vectorcall`</ph> naming convention uses the function name followed by two at signs (@@) and the size of the function's arguments in bytes.","pos":[6508,6655],"source":"For C, the `__vectorcall` naming convention uses the function name followed by two at signs (@@) and the size of the function's arguments in bytes."},{"content":"No case translation is performed.","pos":[6656,6689]},{"content":"The compiler uses this template for the naming convention:","pos":[6690,6748]},{"content":"To set this compiler option in the Visual Studio development environment","pos":[6797,6869]},{"content":"Open the project's <bpt id=\"p1\">**</bpt>Property Pages<ept id=\"p1\">**</ept> dialog box.","pos":[6879,6928],"source":"Open the project's **Property Pages** dialog box."},{"content":"For details, see <bpt id=\"p1\">[</bpt>Working with Project Properties<ept id=\"p1\">](../../ide/working-with-project-properties.md)</ept>.","pos":[6929,7026],"source":" For details, see [Working with Project Properties](../../ide/working-with-project-properties.md)."},{"pos":[7036,7064],"content":"Select the <bpt id=\"p1\">**</bpt>C/C++<ept id=\"p1\">**</ept> folder.","source":"Select the **C/C++** folder."},{"pos":[7074,7112],"content":"Select the <bpt id=\"p1\">**</bpt>Advanced<ept id=\"p1\">**</ept> property page.","source":"Select the **Advanced** property page."},{"pos":[7122,7165],"content":"Modify the <bpt id=\"p1\">**</bpt>Calling Convention<ept id=\"p1\">**</ept> property.","source":"Modify the **Calling Convention** property."},{"content":"To set this compiler option programmatically","pos":[7175,7219]},{"content":"See &lt;xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.CallingConvention%2A&gt;.","pos":[7229,7317],"source":"See <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.CallingConvention%2A>."},{"content":"See Also","pos":[7326,7334]},{"content":"Compiler Options","pos":[7339,7355]},{"content":"Setting Compiler Options","pos":[7405,7429]}],"content":"---\ntitle: \"-Gd, -Gr, -Gv, -Gz (Calling Convention) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"/gr\"\n  - \"/Gv\"\n  - \"/gz\"\n  - \"/Gd\"\n  - \"VC.Project.VCCLCompilerTool.CallingConvention\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"-Gd compiler option [C++]\"\n  - \"-Gv compiler option [C++]\"\n  - \"/Gv compiler option [C++]\"\n  - \"-Gr compiler option [C++]\"\n  - \"Gd compiler option [C++]\"\n  - \"Gr compiler option [C++]\"\n  - \"/Gz compiler option [C++]\"\n  - \"-Gz compiler option [C++]\"\n  - \"/Gd compiler option [C++]\"\n  - \"Gz compiler option [C++]\"\n  - \"Gv compiler option [C++]\"\n  - \"/Gr compiler option [C++]\"\nms.assetid: fd3110cb-2d77-49f2-99cf-a03f9ead00a3\ncaps.latest.revision: 19\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# /Gd, /Gr, /Gv, /Gz (Calling Convention)\nThese options determine the order in which function arguments are pushed onto the stack, whether the caller function or called function removes the arguments from the stack at the end of the call, and the name-decorating convention that the compiler uses to identify individual functions.  \n  \n## Syntax  \n  \n```  \n/Gd  \n/Gr  \n/Gv  \n/Gz  \n```  \n  \n## Remarks  \n **/Gd**, the default setting, specifies the [__cdecl](../../cpp/cdecl.md) calling convention for all functions except C++ member functions and functions that are marked [__stdcall](../../cpp/stdcall.md), [__fastcall](../../cpp/fastcall.md), or [__vectorcall](../../cpp/vectorcall.md).  \n  \n **/Gr** specifies the `__fastcall` calling convention for all functions except C++ member functions, functions named `main`, and functions that are marked `__cdecl`, `__stdcall`, or `__vectorcall`. All `__fastcall` functions must have prototypes. This calling convention is only available in compilers that target x86, and is ignored by compilers that target other architectures.  \n  \n **/Gz** specifies the `__stdcall` calling convention for all functions except C++ member functions, functions named `main`, and functions that are marked `__cdecl`, `__fastcall`, or `__vectorcall`. All `__stdcall` functions must have prototypes. This calling convention is only available in compilers that target x86, and is ignored by compilers that target other architectures.  \n  \n **/Gv** specifies the `__vectorcall` calling convention for all functions except C++ member functions, functions named main, functions with a `vararg` variable argument list, or functions that are marked with a conflicting `__cdecl`, `__stdcall`, or `__fastcall` attribute. This calling convention is only available on x86 and x64 architectures that support /arch:SSE2 and above, and is ignored by compilers that target the ARM architecture.  \n  \n Functions that take a variable number of arguments must be marked `__cdecl`.  \n  \n **/Gd**, **/Gr**, **/Gv** and **/Gz** are not compatible with [/clr:safe](../../build/reference/clr-common-language-runtime-compilation.md) or **/clr:pure**.  \n  \n> [!NOTE]\n>  By default for x86 processors, C++ member functions use [__thiscall](../../cpp/thiscall.md).  \n  \n For all processors, a member function that is explicitly marked as `__cdecl`, `__fastcall`, `__vectorcall`, or `__stdcall` uses the specified calling convention if it is not ignored on that architecture. A member function that takes a variable number of arguments always uses the `__cdecl` calling convention.  \n  \n These compiler options have no effect on the name decoration of C++ methods and functions. Unless declared as `extern \"C\"`, C++ methods and functions use a different name-decorating scheme. For more information, see [Decorated Names](../../build/reference/decorated-names.md).  \n  \n For more information about calling conventions, see [Calling Conventions](../../cpp/calling-conventions.md).  \n  \n## __cdecl Specifics  \n On x86 processors, all function arguments are passed on the stack from right to left. On ARM and x64 architectures, some arguments are passed by register and the rest are passed on the stack from right to left. The calling routine pops the arguments from the stack.  \n  \n For C, the `__cdecl` naming convention uses the function name preceded by an underscore ( `_` ); no case translation is performed. Unless declared as `extern \"C\"`, C++ functions use a different name-decorating scheme. For more information, see [Decorated Names](../../build/reference/decorated-names.md).  \n  \n## __fastcall Specifics  \n Some of a `__fastcall` function's arguments are passed in registers (for x86 processors, ECX, and EDX), and the rest are pushed onto the stack from right to left. The called routine pops these arguments from the stack before it returns. Typically, **/Gr** decreases execution time.  \n  \n> [!NOTE]\n>  Be careful when you use the `__fastcall` calling convention for any function that's written in inline assembly language. Your use of registers could conflict with the compiler's use.  \n  \n For C, the `__fastcall` naming convention uses the function name preceded by an at sign (`@`) followed by the size of the function's arguments in bytes. No case translation is done. The compiler uses this template for the naming convention:  \n  \n```c  \n@function_name@number  \n```  \n  \n When you use the `__fastcall` naming convention, use the standard include files. Otherwise, you will get unresolved external references.  \n  \n## __stdcall Specifics  \n A `__stdcall` function's arguments are pushed onto the stack from right to left, and the called function pops these arguments from the stack before it returns.  \n  \n For C, the `__stdcall` naming convention uses the function name preceded by an underscore ( `_` ) and followed by an at sign (@) and the size of the function's arguments in bytes. No case translation is performed. The compiler uses this template for the naming convention:  \n  \n```c  \n_functionname@number  \n```  \n  \n## __vectorcall Specifics  \n A `__vectorcall` function’s integer arguments are passed by value, using up to two (on x86) or four (on x64) integer registers, and up to six XMM registers for floating-point and vector values, and the rest are passed on the stack from right to left. The called function cleans off the stack before it returns. Vector and floating-point return values are returned in XMM0.  \n  \n For C, the `__vectorcall` naming convention uses the function name followed by two at signs (@@) and the size of the function's arguments in bytes. No case translation is performed. The compiler uses this template for the naming convention:  \n  \n```c  \nfunctionname@@number  \n```  \n  \n### To set this compiler option in the Visual Studio development environment  \n  \n1.  Open the project's **Property Pages** dialog box. For details, see [Working with Project Properties](../../ide/working-with-project-properties.md).  \n  \n2.  Select the **C/C++** folder.  \n  \n3.  Select the **Advanced** property page.  \n  \n4.  Modify the **Calling Convention** property.  \n  \n### To set this compiler option programmatically  \n  \n-   See <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.CallingConvention%2A>.  \n  \n## See Also  \n [Compiler Options](../../build/reference/compiler-options.md)   \n [Setting Compiler Options](../../build/reference/setting-compiler-options.md)"}