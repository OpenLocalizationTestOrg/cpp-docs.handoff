{"nodes":[{"pos":[12,40],"content":"safebuffers | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"safebuffers | Microsoft Docs","pos":[0,28]}]},{"content":"safebuffers","pos":[689,700]},{"content":"Microsoft Specific","pos":[703,721]},{"content":"Tells the compiler not to insert buffer overrun security checks for a function.","pos":[730,809]},{"content":"Syntax","pos":[818,824]},{"content":"Remarks","pos":[876,883]},{"content":"The <bpt id=\"p1\">**</bpt>/GS<ept id=\"p1\">**</ept> compiler option causes the compiler to test for buffer overruns by inserting security checks on the stack.","pos":[887,1005],"source":"The **/GS** compiler option causes the compiler to test for buffer overruns by inserting security checks on the stack."},{"content":"The types of data structures that are eligible for security checks are described in <bpt id=\"p1\">[</bpt>/GS (Buffer Security Check)<ept id=\"p1\">](../build/reference/gs-buffer-security-check.md)</ept>.","pos":[1006,1168],"source":" The types of data structures that are eligible for security checks are described in [/GS (Buffer Security Check)](../build/reference/gs-buffer-security-check.md)."},{"content":"For more information about buffer overrun detection, see <bpt id=\"p1\">[</bpt>Compiler Security Checks In Depth<ept id=\"p1\">](http://go.microsoft.com/fwlink/?linkid=7260)</ept> on the MSDN Web site.","pos":[1169,1328],"source":" For more information about buffer overrun detection, see [Compiler Security Checks In Depth](http://go.microsoft.com/fwlink/?linkid=7260) on the MSDN Web site."},{"content":"An expert manual code review or external analysis might determine that a function is safe from a buffer overrun.","pos":[1335,1447]},{"content":"In that case, you can suppress security checks for a function by applying the __<ph id=\"ph1\">`declspec(safebuffers)`</ph> keyword to the function declaration.","pos":[1448,1588],"source":" In that case, you can suppress security checks for a function by applying the __`declspec(safebuffers)` keyword to the function declaration."},{"pos":[1596,1890],"content":"[!CAUTION]\n Buffer security checks provide important security protection and have a negligible affect on performance. Therefore, we recommend that you do not suppress them, except in the rare case where the performance of a function is a critical concern and the function is known to be safe.","leadings":["","> "],"nodes":[{"content":" Buffer security checks provide important security protection and have a negligible affect on performance. Therefore, we recommend that you do not suppress them, except in the rare case where the performance of a function is a critical concern and the function is known to be safe.","pos":[11,292],"nodes":[{"content":"Buffer security checks provide important security protection and have a negligible affect on performance.","pos":[1,106]},{"content":"Therefore, we recommend that you do not suppress them, except in the rare case where the performance of a function is a critical concern and the function is known to be safe.","pos":[107,281]}]}]},{"content":"Inline Functions","pos":[1899,1915]},{"content":"A <bpt id=\"p1\">*</bpt>primary function<ept id=\"p1\">*</ept> can use an <bpt id=\"p2\">[</bpt>inlining<ept id=\"p2\">](inline-functions-cpp.md)</ept> keyword to insert a copy of a <bpt id=\"p3\">*</bpt>secondary function<ept id=\"p3\">*</ept>.","pos":[1919,2038],"source":"A *primary function* can use an [inlining](inline-functions-cpp.md) keyword to insert a copy of a *secondary function*."},{"content":"If the __<ph id=\"ph1\">`declspec(safebuffers)`</ph> keyword is applied to a function, buffer overrun detection is suppressed for that function.","pos":[2039,2163],"source":" If the __`declspec(safebuffers)` keyword is applied to a function, buffer overrun detection is suppressed for that function."},{"content":"However, inlining affects the <ph id=\"ph1\">\\_\\_`declspec(safebuffers)`</ph> keyword in the following ways.","pos":[2164,2252],"source":" However, inlining affects the \\_\\_`declspec(safebuffers)` keyword in the following ways."},{"content":"Suppose the <bpt id=\"p1\">**</bpt>/GS<ept id=\"p1\">**</ept> compiler option is specified for both functions, but the primary function specifies the __<ph id=\"ph1\">`declspec(safebuffers)`</ph> keyword.","pos":[2259,2401],"source":"Suppose the **/GS** compiler option is specified for both functions, but the primary function specifies the __`declspec(safebuffers)` keyword."},{"content":"The data structures in the secondary function make it eligible for security checks, and the function does not suppress those checks.","pos":[2402,2534]},{"content":"In this case:","pos":[2535,2548]},{"pos":[2558,2728],"content":"Specify the <bpt id=\"p1\">[</bpt>__forceinline<ept id=\"p1\">](inline-functions-cpp.md)</ept> keyword on the secondary function to force the compiler to inline that function regardless of compiler optimizations.","source":"Specify the [__forceinline](inline-functions-cpp.md) keyword on the secondary function to force the compiler to inline that function regardless of compiler optimizations."},{"pos":[2738,2922],"content":"Because the secondary function is eligible for security checks, security checks are also applied to the primary function even though it specifies the __<ph id=\"ph1\">`declspec(safebuffers)`</ph> keyword.","source":"Because the secondary function is eligible for security checks, security checks are also applied to the primary function even though it specifies the __`declspec(safebuffers)` keyword."},{"content":"Example","pos":[2931,2938]},{"pos":[2942,3016],"content":"The following code shows how to use the __<ph id=\"ph1\">`declspec(safebuffers)`</ph> keyword.","source":"The following code shows how to use the __`declspec(safebuffers)` keyword."},{"content":"END Microsoft Specific","pos":[3419,3441]},{"content":"See Also","pos":[3452,3460]},{"content":"__declspec","pos":[3465,3475]},{"content":"Keywords","pos":[3502,3510]},{"content":"inline, __inline, <ph id=\"ph1\">\\_</ph>_forceinline","pos":[3541,3573],"source":"inline, __inline, \\__forceinline"},{"content":"strict_gs_check","pos":[3605,3620]}],"content":"---\ntitle: \"safebuffers | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"language-reference\"\nf1_keywords: \n  - \"safebuffers\"\n  - \"safebuffers_cpp\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"__declspec keyword (C++), safebuffers\"\n  - \"safebuffers __declspec keyword\"\nms.assetid: 0b0dce14-4523-44d2-8070-5dd0fdabc618\ncaps.latest.revision: 13\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# safebuffers\n**Microsoft Specific**  \n  \n Tells the compiler not to insert buffer overrun security checks for a function.  \n  \n## Syntax  \n  \n```  \n__declspec( safebuffers )  \n```  \n  \n## Remarks  \n The **/GS** compiler option causes the compiler to test for buffer overruns by inserting security checks on the stack. The types of data structures that are eligible for security checks are described in [/GS (Buffer Security Check)](../build/reference/gs-buffer-security-check.md). For more information about buffer overrun detection, see [Compiler Security Checks In Depth](http://go.microsoft.com/fwlink/?linkid=7260) on the MSDN Web site.  \n  \n An expert manual code review or external analysis might determine that a function is safe from a buffer overrun. In that case, you can suppress security checks for a function by applying the __`declspec(safebuffers)` keyword to the function declaration.  \n  \n> [!CAUTION]\n>  Buffer security checks provide important security protection and have a negligible affect on performance. Therefore, we recommend that you do not suppress them, except in the rare case where the performance of a function is a critical concern and the function is known to be safe.  \n  \n## Inline Functions  \n A *primary function* can use an [inlining](inline-functions-cpp.md) keyword to insert a copy of a *secondary function*. If the __`declspec(safebuffers)` keyword is applied to a function, buffer overrun detection is suppressed for that function. However, inlining affects the \\_\\_`declspec(safebuffers)` keyword in the following ways.  \n  \n Suppose the **/GS** compiler option is specified for both functions, but the primary function specifies the __`declspec(safebuffers)` keyword. The data structures in the secondary function make it eligible for security checks, and the function does not suppress those checks. In this case:  \n  \n-   Specify the [__forceinline](inline-functions-cpp.md) keyword on the secondary function to force the compiler to inline that function regardless of compiler optimizations.  \n  \n-   Because the secondary function is eligible for security checks, security checks are also applied to the primary function even though it specifies the __`declspec(safebuffers)` keyword.  \n  \n## Example  \n The following code shows how to use the __`declspec(safebuffers)` keyword.  \n  \n```  \n// compile with: /c /GS  \ntypedef struct {  \n    int x[20];  \n} BUFFER;  \nstatic int checkBuffers() {  \n    BUFFER cb;  \n    // Use the buffer...  \n    return 0;  \n};  \nstatic __declspec(safebuffers)   \n    int noCheckBuffers() {  \n    BUFFER ncb;  \n    // Use the buffer...  \n    return 0;  \n}  \nint wmain() {  \n    checkBuffers();  \n    noCheckBuffers();  \n    return 0;  \n}  \n```  \n  \n **END Microsoft Specific**  \n  \n## See Also  \n [__declspec](../cpp/declspec.md)   \n [Keywords](../cpp/keywords-cpp.md)   \n [inline, __inline, \\__forceinline](inline-functions-cpp.md)   \n [strict_gs_check](../preprocessor/strict-gs-check.md)"}