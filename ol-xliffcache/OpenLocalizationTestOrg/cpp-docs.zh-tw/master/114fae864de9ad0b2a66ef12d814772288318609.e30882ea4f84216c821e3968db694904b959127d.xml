{"nodes":[{"pos":[12,46],"content":"_CrtSetReportHook | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"_CrtSetReportHook | Microsoft Docs","pos":[0,34]}]},{"content":"_CrtSetReportHook","pos":[988,1005]},{"content":"Installs a client-defined reporting function by hooking it into the C run-time debug reporting process (debug version only).","pos":[1006,1130]},{"content":"Syntax","pos":[1139,1145]},{"content":"Parameters","pos":[1249,1259]},{"content":"New client-defined reporting function to hook into the C run-time debug reporting process.","pos":[1279,1369]},{"content":"Return Value","pos":[1378,1390]},{"content":"Returns the previous client-defined reporting function.","pos":[1394,1449]},{"content":"Remarks","pos":[1458,1465]},{"content":"allows an application to use its own reporting function into the C run-time debug library reporting process.","pos":[1489,1597]},{"content":"As a result, whenever <bpt id=\"p1\">[</bpt>_CrtDbgReport<ept id=\"p1\">](../../c-runtime-library/reference/crtdbgreport-crtdbgreportw.md)</ept> is called to generate a debug report, the application's reporting function is called first.","pos":[1598,1792],"source":" As a result, whenever [_CrtDbgReport](../../c-runtime-library/reference/crtdbgreport-crtdbgreportw.md) is called to generate a debug report, the application's reporting function is called first."},{"content":"This functionality enables an application to perform operations such as filtering debug reports so it can focus on specific allocation types or send a report to destinations not available by using <ph id=\"ph1\">`_CrtDbgReport`</ph>.","pos":[1793,2006],"source":" This functionality enables an application to perform operations such as filtering debug reports so it can focus on specific allocation types or send a report to destinations not available by using `_CrtDbgReport`."},{"content":"When <bpt id=\"p1\">[</bpt>_DEBUG<ept id=\"p1\">](../../c-runtime-library/debug.md)</ept> is not defined, calls to <ph id=\"ph1\">`_CrtSetReportHook`</ph> are removed during preprocessing.","pos":[2007,2133],"source":" When [_DEBUG](../../c-runtime-library/debug.md) is not defined, calls to `_CrtSetReportHook` are removed during preprocessing."},{"pos":[2140,2290],"content":"For a more robust version of <ph id=\"ph1\">`_CrtSetReportHook`</ph>, see <bpt id=\"p1\">[</bpt>_CrtSetReportHook2<ept id=\"p1\">](../../c-runtime-library/reference/crtsetreporthook2-crtsetreporthookw2.md)</ept>.","source":"For a more robust version of `_CrtSetReportHook`, see [_CrtSetReportHook2](../../c-runtime-library/reference/crtsetreporthook2-crtsetreporthookw2.md)."},{"content":"The <ph id=\"ph1\">`_CrtSetReportHook`</ph> function installs the new client-defined reporting function specified in <ph id=\"ph2\">`reportHook`</ph> and returns the previous client-defined hook.","pos":[2297,2452],"source":"The `_CrtSetReportHook` function installs the new client-defined reporting function specified in `reportHook` and returns the previous client-defined hook."},{"content":"The following example demonstrates how a client-defined report hook should be prototyped:","pos":[2453,2542]},{"content":"where <ph id=\"ph1\">`reportType`</ph> is the debug report type (<ph id=\"ph2\">`_CRT_WARN`</ph>, <ph id=\"ph3\">`_CRT_ERROR`</ph>, or <ph id=\"ph4\">`_CRT_ASSERT`</ph>), <ph id=\"ph5\">`message`</ph> is the fully assembled debug user message to be contained in the report, and <ph id=\"ph6\">`returnValue`</ph> is the value specified by the client-defined reporting function that should be returned by <ph id=\"ph7\">`_CrtDbgReport`</ph>.","pos":[2637,2936],"source":"where `reportType` is the debug report type (`_CRT_WARN`, `_CRT_ERROR`, or `_CRT_ASSERT`), `message` is the fully assembled debug user message to be contained in the report, and `returnValue` is the value specified by the client-defined reporting function that should be returned by `_CrtDbgReport`."},{"content":"For a complete description of the available report types, see the <bpt id=\"p1\">[</bpt>_CrtSetReportMode<ept id=\"p1\">](../../c-runtime-library/reference/crtsetreportmode.md)</ept> function.","pos":[2937,3087],"source":" For a complete description of the available report types, see the [_CrtSetReportMode](../../c-runtime-library/reference/crtsetreportmode.md) function."},{"content":"If the client-defined reporting function completely handles the debug message such that no further reporting is required, then the function should return <ph id=\"ph1\">`TRUE`</ph>.","pos":[3094,3255],"source":"If the client-defined reporting function completely handles the debug message such that no further reporting is required, then the function should return `TRUE`."},{"content":"When the function returns <ph id=\"ph1\">`FALSE`</ph>, <ph id=\"ph2\">`_CrtDbgReport`</ph> is called to generate the debug report using the current settings for the report type, mode, and file.","pos":[3256,3409],"source":" When the function returns `FALSE`, `_CrtDbgReport` is called to generate the debug report using the current settings for the report type, mode, and file."},{"content":"In addition, by specifying the <ph id=\"ph1\">`_CrtDbgReport`</ph> return value in <ph id=\"ph2\">`returnValue`</ph>, the application can also control whether a debug break occurs.","pos":[3410,3550],"source":" In addition, by specifying the `_CrtDbgReport` return value in `returnValue`, the application can also control whether a debug break occurs."},{"content":"For a complete description of how the debug report is configured and generated, see <ph id=\"ph1\">`_CrtSetReportMode`</ph>, <bpt id=\"p1\">[</bpt>_CrtSetReportFile<ept id=\"p1\">](../../c-runtime-library/reference/crtsetreportfile.md)</ept>, and <ph id=\"ph2\">`_CrtDbgReport`</ph>.","pos":[3551,3752],"source":" For a complete description of how the debug report is configured and generated, see `_CrtSetReportMode`, [_CrtSetReportFile](../../c-runtime-library/reference/crtsetreportfile.md), and `_CrtDbgReport`."},{"pos":[3759,3968],"content":"For more information about using other hook-capable run-time functions and writing your own client-defined hook functions, see <bpt id=\"p1\">[</bpt>Debug Hook Function Writing<ept id=\"p1\">](/visualstudio/debugger/debug-hook-function-writing)</ept>.","source":"For more information about using other hook-capable run-time functions and writing your own client-defined hook functions, see [Debug Hook Function Writing](/visualstudio/debugger/debug-hook-function-writing)."},{"pos":[3976,4189],"content":"[!NOTE]\n If your application is compiled with `/clr` and the reporting function is called after the application has exited main, the CLR will throw an exception if the reporting function calls any CRT functions.","leadings":["","> "],"nodes":[{"content":"If your application is compiled with <ph id=\"ph1\">`/clr`</ph> and the reporting function is called after the application has exited main, the CLR will throw an exception if the reporting function calls any CRT functions.","pos":[9,211],"source":" If your application is compiled with `/clr` and the reporting function is called after the application has exited main, the CLR will throw an exception if the reporting function calls any CRT functions."}]},{"content":"Requirements","pos":[4198,4210]},{"content":"Routine","pos":[4217,4224]},{"content":"Required header","pos":[4225,4240]},{"content":"crtdbg.h&gt;","pos":[4307,4316],"source":"crtdbg.h>"},{"pos":[4324,4442],"content":"For more compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept> in the Introduction.","source":"For more compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md) in the Introduction."},{"content":"Libraries","pos":[4451,4460]},{"pos":[4464,4559],"content":"Debug versions of <bpt id=\"p1\">[</bpt>C run-time libraries<ept id=\"p1\">](../../c-runtime-library/crt-library-features.md)</ept> only.","source":"Debug versions of [C run-time libraries](../../c-runtime-library/crt-library-features.md) only."},{"content":".NET Framework Equivalent","pos":[4568,4593]},{"content":"Not applicable.","pos":[4597,4612]},{"content":"To call the standard C function, use <ph id=\"ph1\">`PInvoke`</ph>.","pos":[4613,4660],"source":" To call the standard C function, use `PInvoke`."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Platform Invoke Examples<ept id=\"p1\">](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f)</ept>.","pos":[4661,4786],"source":" For more information, see [Platform Invoke Examples](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f)."},{"content":"See Also","pos":[4795,4803]},{"content":"Debug Routines","pos":[4808,4822]},{"content":"_CrtGetReportHook","pos":[4872,4889]}],"content":"---\ntitle: \"_CrtSetReportHook | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"_CrtSetReportHook\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"_CrtSetReportHook\"\n  - \"CrtSetReportHook\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"CrtSetReportHook function\"\n  - \"_CrtSetReportHook function\"\nms.assetid: 1ae7c64f-8c84-4797-9574-b59f00f7a509\ncaps.latest.revision: 13\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"ru-ru\"\n  - \"zh-cn\"\n  - \"zh-tw\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"tr-tr\"\n---\n# _CrtSetReportHook\nInstalls a client-defined reporting function by hooking it into the C run-time debug reporting process (debug version only).  \n  \n## Syntax  \n  \n```  \n_CRT_REPORT_HOOK _CrtSetReportHook(   \n   _CRT_REPORT_HOOK reportHook   \n);  \n```  \n  \n#### Parameters  \n `reportHook`  \n New client-defined reporting function to hook into the C run-time debug reporting process.  \n  \n## Return Value  \n Returns the previous client-defined reporting function.  \n  \n## Remarks  \n `_CrtSetReportHook` allows an application to use its own reporting function into the C run-time debug library reporting process. As a result, whenever [_CrtDbgReport](../../c-runtime-library/reference/crtdbgreport-crtdbgreportw.md) is called to generate a debug report, the application's reporting function is called first. This functionality enables an application to perform operations such as filtering debug reports so it can focus on specific allocation types or send a report to destinations not available by using `_CrtDbgReport`. When [_DEBUG](../../c-runtime-library/debug.md) is not defined, calls to `_CrtSetReportHook` are removed during preprocessing.  \n  \n For a more robust version of `_CrtSetReportHook`, see [_CrtSetReportHook2](../../c-runtime-library/reference/crtsetreporthook2-crtsetreporthookw2.md).  \n  \n The `_CrtSetReportHook` function installs the new client-defined reporting function specified in `reportHook` and returns the previous client-defined hook. The following example demonstrates how a client-defined report hook should be prototyped:  \n  \n```  \nint YourReportHook( int reportType, char *message, int *returnValue );  \n```  \n  \n where `reportType` is the debug report type (`_CRT_WARN`, `_CRT_ERROR`, or `_CRT_ASSERT`), `message` is the fully assembled debug user message to be contained in the report, and `returnValue` is the value specified by the client-defined reporting function that should be returned by `_CrtDbgReport`. For a complete description of the available report types, see the [_CrtSetReportMode](../../c-runtime-library/reference/crtsetreportmode.md) function.  \n  \n If the client-defined reporting function completely handles the debug message such that no further reporting is required, then the function should return `TRUE`. When the function returns `FALSE`, `_CrtDbgReport` is called to generate the debug report using the current settings for the report type, mode, and file. In addition, by specifying the `_CrtDbgReport` return value in `returnValue`, the application can also control whether a debug break occurs. For a complete description of how the debug report is configured and generated, see `_CrtSetReportMode`, [_CrtSetReportFile](../../c-runtime-library/reference/crtsetreportfile.md), and `_CrtDbgReport`.  \n  \n For more information about using other hook-capable run-time functions and writing your own client-defined hook functions, see [Debug Hook Function Writing](/visualstudio/debugger/debug-hook-function-writing).  \n  \n> [!NOTE]\n>  If your application is compiled with `/clr` and the reporting function is called after the application has exited main, the CLR will throw an exception if the reporting function calls any CRT functions.  \n  \n## Requirements  \n  \n|Routine|Required header|  \n|-------------|---------------------|  \n|`_CrtSetReportHook`|\\<crtdbg.h>|  \n  \n For more compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md) in the Introduction.  \n  \n## Libraries  \n Debug versions of [C run-time libraries](../../c-runtime-library/crt-library-features.md) only.  \n  \n## .NET Framework Equivalent  \n Not applicable. To call the standard C function, use `PInvoke`. For more information, see [Platform Invoke Examples](http://msdn.microsoft.com/Library/15926806-f0b7-487e-93a6-4e9367ec689f).  \n  \n## See Also  \n [Debug Routines](../../c-runtime-library/debug-routines.md)   \n [_CrtGetReportHook](../../c-runtime-library/reference/crtgetreporthook.md)"}