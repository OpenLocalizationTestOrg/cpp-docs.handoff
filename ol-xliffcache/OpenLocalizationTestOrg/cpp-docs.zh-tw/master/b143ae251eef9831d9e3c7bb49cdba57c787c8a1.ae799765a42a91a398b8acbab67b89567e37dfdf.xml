{"nodes":[{"pos":[12,42],"content":"ISource Class | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"ISource Class | Microsoft Docs","pos":[0,30]}]},{"content":"ISource Class","pos":[613,626]},{"content":"The <ph id=\"ph1\">`ISource`</ph> class is the interface for all source blocks.","pos":[627,686],"source":"The `ISource` class is the interface for all source blocks."},{"content":"Source blocks propagate messages to <ph id=\"ph1\">`ITarget`</ph> blocks.","pos":[687,740],"source":" Source blocks propagate messages to `ITarget` blocks."},{"content":"Syntax","pos":[749,755]},{"content":"Parameters","pos":[812,822]},{"content":"The data type of the payload within the messages produced by the source block.","pos":[833,911]},{"content":"Members","pos":[920,927]},{"content":"Public Typedefs","pos":[937,952]},{"content":"Name","pos":[959,963]},{"content":"Description","pos":[964,975]},{"pos":[1027,1048],"content":"A type alias for <ph id=\"ph1\">`T`</ph>.","source":"A type alias for `T`."},{"content":"Public Constructors","pos":[1059,1078]},{"content":"Name","pos":[1085,1089]},{"content":"Description","pos":[1090,1101]},{"content":"ISource::~ISource Destructor","pos":[1140,1168]},{"pos":[1177,1207],"content":"Destroys the <ph id=\"ph1\">`ISource`</ph> object.","source":"Destroys the `ISource` object."},{"content":"Public Methods","pos":[1218,1232]},{"content":"Name","pos":[1239,1243]},{"content":"Description","pos":[1244,1255]},{"content":"ISource::accept Method","pos":[1294,1316]},{"pos":[1327,1460],"content":"When overridden in a derived class, accepts a message that was offered by this <ph id=\"ph1\">`ISource`</ph> block, transferring ownership to the caller.","source":"When overridden in a derived class, accepts a message that was offered by this `ISource` block, transferring ownership to the caller."},{"content":"ISource::acquire_ref Method","pos":[1466,1493]},{"pos":[1509,1617],"content":"When overridden in a derived class, acquires a reference count on this <ph id=\"ph1\">`ISource`</ph> block, to prevent deletion.","source":"When overridden in a derived class, acquires a reference count on this `ISource` block, to prevent deletion."},{"content":"ISource::consume Method","pos":[1623,1646]},{"pos":[1658,1834],"content":"When overridden in a derived class, consumes a message previously offered by this <ph id=\"ph1\">`ISource`</ph> block and successfully reserved by the target, transferring ownership to the caller.","source":"When overridden in a derived class, consumes a message previously offered by this `ISource` block and successfully reserved by the target, transferring ownership to the caller."},{"content":"ISource::link_target Method","pos":[1840,1867]},{"pos":[1883,1964],"content":"When overridden in a derived class, links a target block to this <ph id=\"ph1\">`ISource`</ph> block.","source":"When overridden in a derived class, links a target block to this `ISource` block."},{"content":"ISource::release Method","pos":[1970,1993]},{"content":"When overridden in a derived class, releases a previous successful message reservation.","pos":[2005,2092]},{"content":"ISource::release_ref Method","pos":[2098,2125]},{"pos":[2141,2228],"content":"When overridden in a derived class, releases a reference count on this <ph id=\"ph1\">`ISource`</ph> block.","source":"When overridden in a derived class, releases a reference count on this `ISource` block."},{"content":"ISource::reserve Method","pos":[2234,2257]},{"pos":[2269,2367],"content":"When overridden in a derived class, reserves a message previously offered by this <ph id=\"ph1\">`ISource`</ph> block.","source":"When overridden in a derived class, reserves a message previously offered by this `ISource` block."},{"content":"ISource::unlink_target Method","pos":[2373,2402]},{"pos":[2420,2539],"content":"When overridden in a derived class, unlinks a target block from this <ph id=\"ph1\">`ISource`</ph> block, if found to be previously linked.","source":"When overridden in a derived class, unlinks a target block from this `ISource` block, if found to be previously linked."},{"content":"ISource::unlink_targets Method","pos":[2545,2575]},{"pos":[2594,2682],"content":"When overridden in a derived class, unlinks all target blocks from this <ph id=\"ph1\">`ISource`</ph> block.","source":"When overridden in a derived class, unlinks all target blocks from this `ISource` block."},{"content":"Remarks","pos":[2692,2699]},{"pos":[2703,2816],"content":"For more information, see <bpt id=\"p1\">[</bpt>Asynchronous Message Blocks<ept id=\"p1\">](../../../parallel/concrt/asynchronous-message-blocks.md)</ept>.","source":"For more information, see [Asynchronous Message Blocks](../../../parallel/concrt/asynchronous-message-blocks.md)."},{"content":"Inheritance Hierarchy","pos":[2825,2846]},{"content":"Requirements","pos":[2868,2880]},{"pos":[2884,2904],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> agents.h","source":"**Header:** agents.h"},{"pos":[2911,2937],"content":"<bpt id=\"p1\">**</bpt>Namespace:<ept id=\"p1\">**</ept> concurrency","source":"**Namespace:** concurrency"},{"pos":[2970,2992],"content":"ISource::accept Method"},{"pos":[2996,3129],"content":"When overridden in a derived class, accepts a message that was offered by this <ph id=\"ph1\">`ISource`</ph> block, transferring ownership to the caller.","source":"When overridden in a derived class, accepts a message that was offered by this `ISource` block, transferring ownership to the caller."},{"content":"Parameters","pos":[3255,3265]},{"content":"The <ph id=\"ph1\">`runtime_object_identity`</ph> of the offered <ph id=\"ph2\">`message`</ph> object.","pos":[3281,3343],"source":" The `runtime_object_identity` of the offered `message` object."},{"content":"A pointer to the target block that is calling the <ph id=\"ph1\">`accept`</ph> method.","pos":[3364,3430],"source":" A pointer to the target block that is calling the `accept` method."},{"content":"Return Value","pos":[3440,3452]},{"content":"A pointer to the message that the caller now has ownership of.","pos":[3456,3518]},{"content":"Remarks","pos":[3528,3535]},{"content":"The <ph id=\"ph1\">`accept`</ph> method is called by a target while a message is being offered by this <ph id=\"ph2\">`ISource`</ph> block.","pos":[3539,3638],"source":"The `accept` method is called by a target while a message is being offered by this `ISource` block."},{"content":"The message pointer returned may be different from the one passed into the <ph id=\"ph1\">`propagate`</ph> method of the <ph id=\"ph2\">`ITarget`</ph> block, if this source decides to make a copy of the message.","pos":[3639,3810],"source":" The message pointer returned may be different from the one passed into the `propagate` method of the `ITarget` block, if this source decides to make a copy of the message."},{"pos":[3848,3875],"content":"ISource::acquire_ref Method"},{"pos":[3879,3987],"content":"When overridden in a derived class, acquires a reference count on this <ph id=\"ph1\">`ISource`</ph> block, to prevent deletion.","source":"When overridden in a derived class, acquires a reference count on this `ISource` block, to prevent deletion."},{"content":"Parameters","pos":[4070,4080]},{"content":"A pointer to the target block that is calling this method.","pos":[4098,4156]},{"content":"Remarks","pos":[4166,4173]},{"pos":[4177,4290],"content":"This method is called by an <ph id=\"ph1\">`ITarget`</ph> object that is being linked to this source during the <ph id=\"ph2\">`link_target`</ph> method.","source":"This method is called by an `ITarget` object that is being linked to this source during the `link_target` method."},{"pos":[4324,4347],"content":"ISource::consume Method"},{"pos":[4351,4527],"content":"When overridden in a derived class, consumes a message previously offered by this <ph id=\"ph1\">`ISource`</ph> block and successfully reserved by the target, transferring ownership to the caller.","source":"When overridden in a derived class, consumes a message previously offered by this `ISource` block and successfully reserved by the target, transferring ownership to the caller."},{"content":"Parameters","pos":[4654,4664]},{"content":"The <ph id=\"ph1\">`runtime_object_identity`</ph> of the reserved <ph id=\"ph2\">`message`</ph> object.","pos":[4680,4743],"source":" The `runtime_object_identity` of the reserved `message` object."},{"content":"A pointer to the target block that is calling the <ph id=\"ph1\">`consume`</ph> method.","pos":[4764,4831],"source":" A pointer to the target block that is calling the `consume` method."},{"content":"Return Value","pos":[4841,4853]},{"pos":[4857,4928],"content":"A pointer to the <ph id=\"ph1\">`message`</ph> object that the caller now has ownership of.","source":"A pointer to the `message` object that the caller now has ownership of."},{"content":"Remarks","pos":[4938,4945]},{"pos":[4949,5066],"content":"The <ph id=\"ph1\">`consume`</ph> method is similar to <ph id=\"ph2\">`accept`</ph>, but must always be preceded by a call to <ph id=\"ph3\">`reserve`</ph> that returned <ph id=\"ph4\">`true`</ph>.","source":"The `consume` method is similar to `accept`, but must always be preceded by a call to `reserve` that returned `true`."},{"pos":[5097,5125],"content":"ISource::~ISource Destructor"},{"pos":[5129,5159],"content":"Destroys the <ph id=\"ph1\">`ISource`</ph> object.","source":"Destroys the `ISource` object."},{"pos":[5230,5257],"content":"ISource::link_target Method"},{"pos":[5261,5342],"content":"When overridden in a derived class, links a target block to this <ph id=\"ph1\">`ISource`</ph> block.","source":"When overridden in a derived class, links a target block to this `ISource` block."},{"content":"Parameters","pos":[5425,5435]},{"content":"A pointer to the target block being linked to this <ph id=\"ph1\">`ISource`</ph> block.","pos":[5453,5520],"source":" A pointer to the target block being linked to this `ISource` block."},{"pos":[5554,5577],"content":"ISource::release Method"},{"content":"When overridden in a derived class, releases a previous successful message reservation.","pos":[5581,5668]},{"content":"Parameters","pos":[5788,5798]},{"content":"The <ph id=\"ph1\">`runtime_object_identity`</ph> of the reserved <ph id=\"ph2\">`message`</ph> object.","pos":[5814,5877],"source":" The `runtime_object_identity` of the reserved `message` object."},{"content":"A pointer to the target block that is calling the <ph id=\"ph1\">`release`</ph> method.","pos":[5898,5965],"source":" A pointer to the target block that is calling the `release` method."},{"pos":[6003,6030],"content":"ISource::release_ref Method"},{"pos":[6034,6121],"content":"When overridden in a derived class, releases a reference count on this <ph id=\"ph1\">`ISource`</ph> block.","source":"When overridden in a derived class, releases a reference count on this `ISource` block."},{"content":"Parameters","pos":[6204,6214]},{"content":"A pointer to the target block that is calling this method.","pos":[6232,6290]},{"content":"Remarks","pos":[6300,6307]},{"content":"This method is called by an <ph id=\"ph1\">`ITarget`</ph> object that is being unlinked from this source.","pos":[6311,6396],"source":"This method is called by an `ITarget` object that is being unlinked from this source."},{"content":"The source block is allowed to release any resources reserved for the target block.","pos":[6397,6480]},{"pos":[6514,6537],"content":"ISource::reserve Method"},{"pos":[6541,6639],"content":"When overridden in a derived class, reserves a message previously offered by this <ph id=\"ph1\">`ISource`</ph> block.","source":"When overridden in a derived class, reserves a message previously offered by this `ISource` block."},{"content":"Parameters","pos":[6759,6769]},{"content":"The <ph id=\"ph1\">`runtime_object_identity`</ph> of the offered <ph id=\"ph2\">`message`</ph> object.","pos":[6785,6847],"source":" The `runtime_object_identity` of the offered `message` object."},{"content":"A pointer to the target block that is calling the <ph id=\"ph1\">`reserve`</ph> method.","pos":[6868,6935],"source":" A pointer to the target block that is calling the `reserve` method."},{"content":"Return Value","pos":[6945,6957]},{"content":"if the message was successfully reserved, <ph id=\"ph1\">`false`</ph> otherwise.","pos":[6968,7028],"source":" if the message was successfully reserved, `false` otherwise."},{"content":"Reservations can fail for many reasons, including: the message was already reserved or accepted by another target, the source could deny reservations, and so forth.","pos":[7029,7193]},{"content":"Remarks","pos":[7203,7210]},{"pos":[7214,7368],"content":"After you call <ph id=\"ph1\">`reserve`</ph>, if it succeeds, you must call either <ph id=\"ph2\">`consume`</ph> or <ph id=\"ph3\">`release`</ph> in order to take or give up possession of the message, respectively.","source":"After you call `reserve`, if it succeeds, you must call either `consume` or `release` in order to take or give up possession of the message, respectively."},{"pos":[7408,7437],"content":"ISource::unlink_target Method"},{"pos":[7441,7560],"content":"When overridden in a derived class, unlinks a target block from this <ph id=\"ph1\">`ISource`</ph> block, if found to be previously linked.","source":"When overridden in a derived class, unlinks a target block from this `ISource` block, if found to be previously linked."},{"content":"Parameters","pos":[7645,7655]},{"content":"A pointer to the target block being unlinked from this <ph id=\"ph1\">`ISource`</ph> block.","pos":[7673,7744],"source":" A pointer to the target block being unlinked from this `ISource` block."},{"pos":[7785,7815],"content":"ISource::unlink_targets Method"},{"pos":[7819,7907],"content":"When overridden in a derived class, unlinks all target blocks from this <ph id=\"ph1\">`ISource`</ph> block.","source":"When overridden in a derived class, unlinks all target blocks from this `ISource` block."},{"content":"See Also","pos":[7964,7972]},{"content":"concurrency Namespace","pos":[7977,7998]},{"content":"ITarget Class","pos":[8031,8044]}],"content":"---\ntitle: \"ISource Class | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"agents/concurrency::ISource\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"ISource class\"\nms.assetid: c7b73463-42f6-4dcc-801a-81379b12d35a\ncaps.latest.revision: 20\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# ISource Class\nThe `ISource` class is the interface for all source blocks. Source blocks propagate messages to `ITarget` blocks.  \n  \n## Syntax  \n  \n```\ntemplate<class T>\nclass ISource;\n```  \n  \n#### Parameters  \n `T`  \n The data type of the payload within the messages produced by the source block.  \n  \n## Members  \n  \n### Public Typedefs  \n  \n|Name|Description|  \n|----------|-----------------|  \n|`source_type`|A type alias for `T`.|  \n  \n### Public Constructors  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[ISource::~ISource Destructor](#dtor)|Destroys the `ISource` object.|  \n  \n### Public Methods  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[ISource::accept Method](#accept)|When overridden in a derived class, accepts a message that was offered by this `ISource` block, transferring ownership to the caller.|  \n|[ISource::acquire_ref Method](#acquire_ref)|When overridden in a derived class, acquires a reference count on this `ISource` block, to prevent deletion.|  \n|[ISource::consume Method](#consume)|When overridden in a derived class, consumes a message previously offered by this `ISource` block and successfully reserved by the target, transferring ownership to the caller.|  \n|[ISource::link_target Method](#link_target)|When overridden in a derived class, links a target block to this `ISource` block.|  \n|[ISource::release Method](#release)|When overridden in a derived class, releases a previous successful message reservation.|  \n|[ISource::release_ref Method](#release_ref)|When overridden in a derived class, releases a reference count on this `ISource` block.|  \n|[ISource::reserve Method](#reserve)|When overridden in a derived class, reserves a message previously offered by this `ISource` block.|  \n|[ISource::unlink_target Method](#unlink_target)|When overridden in a derived class, unlinks a target block from this `ISource` block, if found to be previously linked.|  \n|[ISource::unlink_targets Method](#unlink_targets)|When overridden in a derived class, unlinks all target blocks from this `ISource` block.|  \n  \n## Remarks  \n For more information, see [Asynchronous Message Blocks](../../../parallel/concrt/asynchronous-message-blocks.md).  \n  \n## Inheritance Hierarchy  \n `ISource`  \n  \n## Requirements  \n **Header:** agents.h  \n  \n **Namespace:** concurrency  \n  \n##  <a name=\"accept\"></a>  ISource::accept Method  \n When overridden in a derived class, accepts a message that was offered by this `ISource` block, transferring ownership to the caller.  \n  \n```\nvirtual message<T>* accept(\n    runtime_object_identity _MsgId,\n    _Inout_ ITarget<T>* _PTarget) = 0;\n```  \n  \n### Parameters  \n `_MsgId`  \n The `runtime_object_identity` of the offered `message` object.  \n  \n `_PTarget`  \n A pointer to the target block that is calling the `accept` method.  \n  \n### Return Value  \n A pointer to the message that the caller now has ownership of.  \n  \n### Remarks  \n The `accept` method is called by a target while a message is being offered by this `ISource` block. The message pointer returned may be different from the one passed into the `propagate` method of the `ITarget` block, if this source decides to make a copy of the message.  \n  \n##  <a name=\"acquire_ref\"></a>  ISource::acquire_ref Method  \n When overridden in a derived class, acquires a reference count on this `ISource` block, to prevent deletion.  \n  \n```\nvirtual void acquire_ref(_Inout_ ITarget<T>* _PTarget) = 0;\n```  \n  \n### Parameters  \n `_PTarget`  \n A pointer to the target block that is calling this method.  \n  \n### Remarks  \n This method is called by an `ITarget` object that is being linked to this source during the `link_target` method.  \n  \n##  <a name=\"consume\"></a>  ISource::consume Method  \n When overridden in a derived class, consumes a message previously offered by this `ISource` block and successfully reserved by the target, transferring ownership to the caller.  \n  \n```\nvirtual message<T>* consume(\n    runtime_object_identity _MsgId,\n    _Inout_ ITarget<T>* _PTarget) = 0;\n```  \n  \n### Parameters  \n `_MsgId`  \n The `runtime_object_identity` of the reserved `message` object.  \n  \n `_PTarget`  \n A pointer to the target block that is calling the `consume` method.  \n  \n### Return Value  \n A pointer to the `message` object that the caller now has ownership of.  \n  \n### Remarks  \n The `consume` method is similar to `accept`, but must always be preceded by a call to `reserve` that returned `true`.  \n  \n##  <a name=\"dtor\"></a>  ISource::~ISource Destructor  \n Destroys the `ISource` object.  \n  \n```\nvirtual ~ISource();\n```  \n  \n##  <a name=\"link_target\"></a>  ISource::link_target Method  \n When overridden in a derived class, links a target block to this `ISource` block.  \n  \n```\nvirtual void link_target(_Inout_ ITarget<T>* _PTarget) = 0;\n```  \n  \n### Parameters  \n `_PTarget`  \n A pointer to the target block being linked to this `ISource` block.  \n  \n##  <a name=\"release\"></a>  ISource::release Method  \n When overridden in a derived class, releases a previous successful message reservation.  \n  \n```\nvirtual void release(\n    runtime_object_identity _MsgId,\n    _Inout_ ITarget<T>* _PTarget) = 0;\n```  \n  \n### Parameters  \n `_MsgId`  \n The `runtime_object_identity` of the reserved `message` object.  \n  \n `_PTarget`  \n A pointer to the target block that is calling the `release` method.  \n  \n##  <a name=\"release_ref\"></a>  ISource::release_ref Method  \n When overridden in a derived class, releases a reference count on this `ISource` block.  \n  \n```\nvirtual void release_ref(_Inout_ ITarget<T>* _PTarget) = 0;\n```  \n  \n### Parameters  \n `_PTarget`  \n A pointer to the target block that is calling this method.  \n  \n### Remarks  \n This method is called by an `ITarget` object that is being unlinked from this source. The source block is allowed to release any resources reserved for the target block.  \n  \n##  <a name=\"reserve\"></a>  ISource::reserve Method  \n When overridden in a derived class, reserves a message previously offered by this `ISource` block.  \n  \n```\nvirtual bool reserve(\n    runtime_object_identity _MsgId,\n    _Inout_ ITarget<T>* _PTarget) = 0;\n```  \n  \n### Parameters  \n `_MsgId`  \n The `runtime_object_identity` of the offered `message` object.  \n  \n `_PTarget`  \n A pointer to the target block that is calling the `reserve` method.  \n  \n### Return Value  \n `true` if the message was successfully reserved, `false` otherwise. Reservations can fail for many reasons, including: the message was already reserved or accepted by another target, the source could deny reservations, and so forth.  \n  \n### Remarks  \n After you call `reserve`, if it succeeds, you must call either `consume` or `release` in order to take or give up possession of the message, respectively.  \n  \n##  <a name=\"unlink_target\"></a>  ISource::unlink_target Method  \n When overridden in a derived class, unlinks a target block from this `ISource` block, if found to be previously linked.  \n  \n```\nvirtual void unlink_target(_Inout_ ITarget<T>* _PTarget) = 0;\n```  \n  \n### Parameters  \n `_PTarget`  \n A pointer to the target block being unlinked from this `ISource` block.  \n  \n##  <a name=\"unlink_targets\"></a>  ISource::unlink_targets Method  \n When overridden in a derived class, unlinks all target blocks from this `ISource` block.  \n  \n```\nvirtual void unlink_targets() = 0;\n```  \n  \n## See Also  \n [concurrency Namespace](concurrency-namespace.md)   \n [ITarget Class](itarget-class.md)\n"}