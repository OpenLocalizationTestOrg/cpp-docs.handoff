{"nodes":[{"pos":[12,47],"content":"Union Declarations | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Union Declarations | Microsoft Docs","pos":[0,35]}]},{"content":"Union Declarations","pos":[630,648]},{"content":"A \"union declaration\" specifies a set of variable values and, optionally, a tag naming the union.","pos":[649,746]},{"content":"The variable values are called \"members\" of the union and can have different types.","pos":[747,830]},{"content":"Unions are similar to \"variant records\" in other languages.","pos":[831,890]},{"content":"Syntax","pos":[899,905]},{"content":"<bpt id=\"p1\">*</bpt>struct-or-union-specifier<ept id=\"p1\">*</ept>:","pos":[909,937],"source":"*struct-or-union-specifier*:"},{"content":"<bpt id=\"p1\"> *</bpt>struct-or-union identifier<ept id=\"p1\">*</ept> opt<bpt id=\"p2\">**</bpt>{<ept id=\"p2\">**</ept> <bpt id=\"p3\">*</bpt>struct-declaration-list<ept id=\"p3\">*</ept> <bpt id=\"p4\">**</bpt>}<ept id=\"p4\">**</ept>","pos":[940,1010],"source":" *struct-or-union identifier* opt**{** *struct-declaration-list* **}**"},{"content":"struct-or-union identifier","pos":[1018,1044]},{"content":"<bpt id=\"p1\">*</bpt>struct-or-union<ept id=\"p1\">*</ept>:","pos":[1052,1070],"source":"*struct-or-union*:"},{"content":"struct","pos":[1076,1082]},{"content":"union","pos":[1093,1098]},{"content":"<bpt id=\"p1\">*</bpt>struct-declaration-list<ept id=\"p1\">*</ept>:","pos":[1107,1133],"source":"*struct-declaration-list*:"},{"content":"struct-declaration","pos":[1138,1156]},{"content":"struct-declaration-list struct-declaration","pos":[1165,1207]},{"content":"The union content is defined to be","pos":[1215,1249]},{"content":"<bpt id=\"p1\">*</bpt>struct-declaration<ept id=\"p1\">*</ept>:","pos":[1256,1277],"source":"*struct-declaration*:"},{"content":"<bpt id=\"p1\"> *</bpt>specifier-qualifier-list struct-declarator-list<ept id=\"p1\">*</ept>  <bpt id=\"p2\">**</bpt>;<ept id=\"p2\">**</ept>","pos":[1280,1337],"source":" *specifier-qualifier-list struct-declarator-list*  **;**"},{"content":"<bpt id=\"p1\">*</bpt>specifier-qualifier-list<ept id=\"p1\">*</ept>:","pos":[1344,1371],"source":"*specifier-qualifier-list*:"},{"content":"<bpt id=\"p1\"> *</bpt>type-specifier specifier-qualifier-list<ept id=\"p1\">*</ept> opt","pos":[1374,1420],"source":" *type-specifier specifier-qualifier-list* opt"},{"pos":[1427,1472],"content":"<bpt id=\"p1\">*</bpt>type-qualifier specifier-qualifier-list<ept id=\"p1\">*</ept> opt","source":"*type-qualifier specifier-qualifier-list* opt"},{"content":"<bpt id=\"p1\">*</bpt>struct-declarator-list<ept id=\"p1\">*</ept>:","pos":[1479,1504],"source":"*struct-declarator-list*:"},{"content":"struct-declarator","pos":[1509,1526]},{"pos":[1534,1586],"content":"<bpt id=\"p1\">*</bpt>struct-declarator-list<ept id=\"p1\">*</ept>  <bpt id=\"p2\">**</bpt>,<ept id=\"p2\">**</ept>  <bpt id=\"p3\">*</bpt>struct-declarator<ept id=\"p3\">*</ept>","source":"*struct-declarator-list*  **,**  *struct-declarator*"},{"content":"A variable with <bpt id=\"p1\">**</bpt>union<ept id=\"p1\">**</ept> type stores one of the values defined by that type.","pos":[1593,1670],"source":"A variable with **union** type stores one of the values defined by that type."},{"content":"The same rules govern structure and union declarations.","pos":[1671,1726]},{"content":"Unions can also have bit fields.","pos":[1727,1759]},{"content":"Members of unions cannot have an incomplete type, type <ph id=\"ph1\">`void`</ph>, or function type.","pos":[1766,1846],"source":"Members of unions cannot have an incomplete type, type `void`, or function type."},{"content":"Therefore members cannot be an instance of the union but can be pointers to the union type being declared.","pos":[1847,1953]},{"content":"A union type declaration is a template only.","pos":[1960,2004]},{"content":"Memory is not reserved until the variable is declared.","pos":[2005,2059]},{"pos":[2067,2483],"content":"[!NOTE]\n If a union of two types is declared and one value is stored, but the union is accessed with the other type, the results are unreliable. For example, a union of **float** and `int` is declared. A **float** value is stored, but the program later accesses the value as an `int`. In such a situation, the value would depend on the internal storage of **float** values. The integer value would not be reliable.","leadings":["","> "],"nodes":[{"content":" If a union of two types is declared and one value is stored, but the union is accessed with the other type, the results are unreliable. For example, a union of **float** and `int` is declared. A **float** value is stored, but the program later accesses the value as an `int`. In such a situation, the value would depend on the internal storage of **float** values. The integer value would not be reliable.","pos":[8,414],"nodes":[{"content":"If a union of two types is declared and one value is stored, but the union is accessed with the other type, the results are unreliable.","pos":[1,136]},{"content":"For example, a union of <bpt id=\"p1\">**</bpt>float<ept id=\"p1\">**</ept> and <ph id=\"ph1\">`int`</ph> is declared.","pos":[137,193],"source":" For example, a union of **float** and `int` is declared."},{"content":"A <bpt id=\"p1\">**</bpt>float<ept id=\"p1\">**</ept> value is stored, but the program later accesses the value as an <ph id=\"ph1\">`int`</ph>.","pos":[194,276],"source":" A **float** value is stored, but the program later accesses the value as an `int`."},{"content":"In such a situation, the value would depend on the internal storage of <bpt id=\"p1\">**</bpt>float<ept id=\"p1\">**</ept> values.","pos":[277,365],"source":" In such a situation, the value would depend on the internal storage of **float** values."},{"content":"The integer value would not be reliable.","pos":[366,406]}]}]},{"content":"Examples","pos":[2492,2500]},{"content":"The following are examples of unions:","pos":[2504,2541]},{"content":"This example defines a union variable with <ph id=\"ph1\">`sign`</ph> type and declares a variable named <ph id=\"ph2\">`number`</ph> that has two members: <ph id=\"ph3\">`svar`</ph>, a signed integer, and <ph id=\"ph4\">`uvar`</ph>, an unsigned integer.","pos":[2668,2842],"source":"This example defines a union variable with `sign` type and declares a variable named `number` that has two members: `svar`, a signed integer, and `uvar`, an unsigned integer."},{"content":"This declaration allows the current value of <ph id=\"ph1\">`number`</ph> to be stored as either a signed or an unsigned value.","pos":[2843,2950],"source":" This declaration allows the current value of `number` to be stored as either a signed or an unsigned value."},{"content":"The tag associated with this union type is <ph id=\"ph1\">`sign`</ph>.","pos":[2951,3001],"source":" The tag associated with this union type is `sign`."},{"content":"The <ph id=\"ph1\">`screen`</ph> array contains 2,000 elements.","pos":[3270,3313],"source":"The `screen` array contains 2,000 elements."},{"content":"Each element of the array is an individual union with two members: <ph id=\"ph1\">`window1`</ph> and <ph id=\"ph2\">`screenval`</ph>.","pos":[3314,3407],"source":" Each element of the array is an individual union with two members: `window1` and `screenval`."},{"content":"The <ph id=\"ph1\">`window1`</ph> member is a structure with two bit-field members, <ph id=\"ph2\">`icon`</ph> and <ph id=\"ph3\">`color`</ph>.","pos":[3408,3491],"source":" The `window1` member is a structure with two bit-field members, `icon` and `color`."},{"content":"The <ph id=\"ph1\">`screenval`</ph> member is an <ph id=\"ph2\">`int`</ph>.","pos":[3492,3527],"source":" The `screenval` member is an `int`."},{"content":"At any given time, each union element holds either the <ph id=\"ph1\">`int`</ph> represented by <ph id=\"ph2\">`screenval`</ph> or the structure represented by <ph id=\"ph3\">`window1`</ph>.","pos":[3528,3658],"source":" At any given time, each union element holds either the `int` represented by `screenval` or the structure represented by `window1`."},{"content":"Microsoft Specific","pos":[3667,3685]},{"content":"Nested unions can be declared anonymously when they are members of another structure or union.","pos":[3694,3788]},{"content":"This is an example of a nameless union:","pos":[3789,3828]},{"content":"Unions are often nested within a structure that includes a field giving the type of data contained in the union at any particular time.","pos":[4110,4245]},{"content":"This is an example of a declaration for such a union:","pos":[4246,4299]},{"pos":[4420,4541],"content":"See <bpt id=\"p1\">[</bpt>Structure and Union Members<ept id=\"p1\">](../c-language/structure-and-union-members.md)</ept> for information about referencing unions.","source":"See [Structure and Union Members](../c-language/structure-and-union-members.md) for information about referencing unions."},{"content":"END Microsoft Specific","pos":[4550,4572]},{"content":"See Also","pos":[4583,4591]},{"content":"Declarators and Variable Declarations","pos":[4596,4633]}],"content":"---\ntitle: \"Union Declarations | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"unions\"\n  - \"union keyword [C], declarations\"\n  - \"variant records\"\nms.assetid: 978c6165-e0ae-4196-afa7-6d94e24f62f7\ncaps.latest.revision: 9\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Union Declarations\nA \"union declaration\" specifies a set of variable values and, optionally, a tag naming the union. The variable values are called \"members\" of the union and can have different types. Unions are similar to \"variant records\" in other languages.  \n  \n## Syntax  \n *struct-or-union-specifier*:  \n *struct-or-union identifier* opt**{** *struct-declaration-list* **}**  \n  \n *struct-or-union identifier*  \n  \n *struct-or-union*:  \n **struct**  \n  \n **union**  \n  \n *struct-declaration-list*:  \n *struct-declaration*  \n  \n *struct-declaration-list struct-declaration*  \n  \n The union content is defined to be  \n  \n *struct-declaration*:  \n *specifier-qualifier-list struct-declarator-list*  **;**  \n  \n *specifier-qualifier-list*:  \n *type-specifier specifier-qualifier-list* opt  \n  \n *type-qualifier specifier-qualifier-list* opt  \n  \n *struct-declarator-list*:  \n *struct-declarator*  \n  \n *struct-declarator-list*  **,**  *struct-declarator*  \n  \n A variable with **union** type stores one of the values defined by that type. The same rules govern structure and union declarations. Unions can also have bit fields.  \n  \n Members of unions cannot have an incomplete type, type `void`, or function type. Therefore members cannot be an instance of the union but can be pointers to the union type being declared.  \n  \n A union type declaration is a template only. Memory is not reserved until the variable is declared.  \n  \n> [!NOTE]\n>  If a union of two types is declared and one value is stored, but the union is accessed with the other type, the results are unreliable. For example, a union of **float** and `int` is declared. A **float** value is stored, but the program later accesses the value as an `int`. In such a situation, the value would depend on the internal storage of **float** values. The integer value would not be reliable.  \n  \n## Examples  \n The following are examples of unions:  \n  \n```  \nunion sign   /* A definition and a declaration */  \n{  \n    int svar;  \n    unsigned uvar;  \n} number;  \n```  \n  \n This example defines a union variable with `sign` type and declares a variable named `number` that has two members: `svar`, a signed integer, and `uvar`, an unsigned integer. This declaration allows the current value of `number` to be stored as either a signed or an unsigned value. The tag associated with this union type is `sign`.  \n  \n```  \nunion               /* Defines a two-dimensional */  \n{                   /*  array named screen */  \n    struct      \n    {   \n      unsigned int icon : 8;    \n      unsigned color : 4;  \n    } window1;  \n    int screenval;  \n} screen[25][80];  \n```  \n  \n The `screen` array contains 2,000 elements. Each element of the array is an individual union with two members: `window1` and `screenval`. The `window1` member is a structure with two bit-field members, `icon` and `color`. The `screenval` member is an `int`. At any given time, each union element holds either the `int` represented by `screenval` or the structure represented by `window1`.  \n  \n **Microsoft Specific**  \n  \n Nested unions can be declared anonymously when they are members of another structure or union. This is an example of a nameless union:  \n  \n```  \nstruct str  \n{  \n    int a, b;  \n    union            / * Unnamed union */  \n    {  \n      char c[4];  \n      long l;  \n      float f;  \n   };  \n   char c_array[10];  \n} my_str;  \n.  \n.  \n.  \nmy_str.l == 0L;  /* A reference to a field in the my_str union */  \n```  \n  \n Unions are often nested within a structure that includes a field giving the type of data contained in the union at any particular time. This is an example of a declaration for such a union:  \n  \n```  \nstruct x  \n{  \n    int type_tag;  \n    union  \n    {  \n      int x;  \n      float y;  \n    }  \n}  \n```  \n  \n See [Structure and Union Members](../c-language/structure-and-union-members.md) for information about referencing unions.  \n  \n **END Microsoft Specific**  \n  \n## See Also  \n [Declarators and Variable Declarations](../c-language/declarators-and-variable-declarations.md)"}