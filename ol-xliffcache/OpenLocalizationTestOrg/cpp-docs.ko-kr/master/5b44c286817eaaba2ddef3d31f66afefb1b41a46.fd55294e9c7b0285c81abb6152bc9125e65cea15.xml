{"nodes":[{"pos":[12,76],"content":"Parallel Diagnostic Tools (Concurrency Runtime) | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Parallel Diagnostic Tools (Concurrency Runtime) | Microsoft Docs","pos":[0,64]}]},{"content":"Parallel Diagnostic Tools (Concurrency Runtime)","pos":[633,680]},{"pos":[744,827],"content":"provides extensive support for debugging and profiling multi-threaded applications."},{"content":"Debugging","pos":[836,845]},{"content":"The Visual Studio debugger includes the <bpt id=\"p1\">**</bpt>Parallel Stacks<ept id=\"p1\">**</ept> window, <bpt id=\"p2\">**</bpt>Parallel Tasks<ept id=\"p2\">**</ept> window, and <bpt id=\"p3\">**</bpt>Parallel Watch<ept id=\"p3\">**</ept> window.","pos":[849,974],"source":"The Visual Studio debugger includes the **Parallel Stacks** window, **Parallel Tasks** window, and **Parallel Watch** window."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Walkthrough: Debugging a Parallel Application<ept id=\"p1\">](http://msdn.microsoft.com/library/2820ac4c-c893-4d87-8c62-83981d561493)</ept> and <bpt id=\"p2\">[</bpt>How to: Use the Parallel Watch Window<ept id=\"p2\">](http://msdn.microsoft.com/library/28004d9b-420c-48f7-b80e-ab1519802558)</ept>.","pos":[975,1237],"source":" For more information, see [Walkthrough: Debugging a Parallel Application](http://msdn.microsoft.com/library/2820ac4c-c893-4d87-8c62-83981d561493) and [How to: Use the Parallel Watch Window](http://msdn.microsoft.com/library/28004d9b-420c-48f7-b80e-ab1519802558)."},{"content":"Profiling","pos":[1246,1255]},{"content":"The profiling tools provide three data views that display graphical, tabular and numerical information about how a multi-threaded application interacts with itself and with other programs.","pos":[1259,1447]},{"content":"The views enable you to quickly identify areas of concern, and to navigate from points on the graphical displays to call stacks, call sites, and source code.","pos":[1448,1605]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Concurrency Visualizer<ept id=\"p1\">](/visualstudio/profiling/concurrency-visualizer)</ept>.","pos":[1606,1705],"source":" For more information, see [Concurrency Visualizer](/visualstudio/profiling/concurrency-visualizer)."},{"content":"Event Tracing","pos":[1714,1727]},{"content":"The Concurrency Runtime uses <bpt id=\"p1\">[</bpt>Event Tracing for Windows<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/bb968803)</ept> (ETW) to notify instrumentation tools, such as profilers, when various events occur.","pos":[1731,1932],"source":"The Concurrency Runtime uses [Event Tracing for Windows](http://msdn.microsoft.com/library/windows/desktop/bb968803) (ETW) to notify instrumentation tools, such as profilers, when various events occur."},{"content":"These events include when a scheduler is activated or deactivated, when a context begins, ends, blocks, unblocks, or yields, and when a parallel algorithm begins or ends.","pos":[1933,2103]},{"content":"Tools such as the <bpt id=\"p1\">[</bpt>Concurrency Visualizer<ept id=\"p1\">](/visualstudio/profiling/concurrency-visualizer)</ept> utilize this functionality; therefore, you typically do not have to work with these events directly.","pos":[2110,2301],"source":"Tools such as the [Concurrency Visualizer](/visualstudio/profiling/concurrency-visualizer) utilize this functionality; therefore, you typically do not have to work with these events directly."},{"content":"However, these events are useful when you are developing a custom profiler or when you use event tracing tools such as <bpt id=\"p1\">[</bpt>Xperf<ept id=\"p1\">](http://go.microsoft.com/fwlink/linkid=160628)</ept>.","pos":[2302,2475],"source":" However, these events are useful when you are developing a custom profiler or when you use event tracing tools such as [Xperf](http://go.microsoft.com/fwlink/linkid=160628)."},{"content":"The Concurrency Runtime raises these events only when tracing is enabled.","pos":[2482,2555]},{"content":"Call the <bpt id=\"p1\">[</bpt>concurrency::EnableTracing<ept id=\"p1\">](reference/concurrency-namespace-functions.md#enabletracing)</ept> function to enable event tracing and the <bpt id=\"p2\">[</bpt>concurrency::DisableTracing<ept id=\"p2\">](reference/concurrency-namespace-functions.md#disabletracing)</ept> function to disable tracing.","pos":[2556,2814],"source":" Call the [concurrency::EnableTracing](reference/concurrency-namespace-functions.md#enabletracing) function to enable event tracing and the [concurrency::DisableTracing](reference/concurrency-namespace-functions.md#disabletracing) function to disable tracing."},{"content":"The following table describes the events that the runtime raises when event tracing is enabled:","pos":[2821,2916]},{"content":"Event","pos":[2923,2928]},{"content":"Description","pos":[2929,2940]},{"content":"Value","pos":[2941,2946]},{"content":"<bpt id=\"p1\">[</bpt>concurrency::ConcRT_ProviderGuid<ept id=\"p1\">](reference/concurrency-namespace-constants1.md#concrt_providerguid)</ept>|The ETW provider identifier for the Concurrency Runtime.|","pos":[2998,3157],"source":"[concurrency::ConcRT_ProviderGuid](reference/concurrency-namespace-constants1.md#concrt_providerguid)|The ETW provider identifier for the Concurrency Runtime.|"},{"content":"<bpt id=\"p1\">[</bpt>concurrency::ContextEventGuid<ept id=\"p1\">](reference/concurrency-namespace-constants1.md#contexteventguid)</ept>|Marks events that are related to contexts.|","pos":[3200,3339],"source":"[concurrency::ContextEventGuid](reference/concurrency-namespace-constants1.md#contexteventguid)|Marks events that are related to contexts.|"},{"content":"<bpt id=\"p1\">[</bpt>concurrency::PPLParallelForEventGuid<ept id=\"p1\">](reference/concurrency-namespace-constants1.md#pplparallelforeventguid)</ept>|Marks the entrance and exit to calls to the <bpt id=\"p2\">[</bpt>concurrency::parallel_for<ept id=\"p2\">](reference/concurrency-namespace-functions.md#parallel_for)</ept> algorithm.|","pos":[3382,3634],"source":"[concurrency::PPLParallelForEventGuid](reference/concurrency-namespace-constants1.md#pplparallelforeventguid)|Marks the entrance and exit to calls to the [concurrency::parallel_for](reference/concurrency-namespace-functions.md#parallel_for) algorithm.|"},{"content":"<bpt id=\"p1\">[</bpt>concurrency::PPLParallelForeachEventGuid<ept id=\"p1\">](reference/concurrency-namespace-constants1.md#pplparallelforeacheventguid)</ept>|Marks the entrance and exit to calls to the <bpt id=\"p2\">[</bpt>concurrency::parallel_for_each<ept id=\"p2\">](reference/concurrency-namespace-functions.md#parallel_for_each)</ept> algorithm.|","pos":[3677,3947],"source":"[concurrency::PPLParallelForeachEventGuid](reference/concurrency-namespace-constants1.md#pplparallelforeacheventguid)|Marks the entrance and exit to calls to the [concurrency::parallel_for_each](reference/concurrency-namespace-functions.md#parallel_for_each) algorithm.|"},{"content":"<bpt id=\"p1\">[</bpt>concurrency::PPLParallelInvokeEventGuid<ept id=\"p1\">](reference/concurrency-namespace-constants1.md#pplparallelinvokeeventguid)</ept>|Marks the entrance and exit to calls to the <bpt id=\"p2\">[</bpt>concurrency::parallel_invoke<ept id=\"p2\">](reference/concurrency-namespace-functions.md#parallel_invoke)</ept> algorithm.|","pos":[3990,4254],"source":"[concurrency::PPLParallelInvokeEventGuid](reference/concurrency-namespace-constants1.md#pplparallelinvokeeventguid)|Marks the entrance and exit to calls to the [concurrency::parallel_invoke](reference/concurrency-namespace-functions.md#parallel_invoke) algorithm.|"},{"content":"<bpt id=\"p1\">[</bpt>concurrency::SchedulerEventGuid<ept id=\"p1\">](reference/concurrency-namespace-constants1.md#schedulereventguid)</ept>|Marks events that are related to the <bpt id=\"p2\">[</bpt>Task Scheduler<ept id=\"p2\">](../../parallel/concrt/task-scheduler-concurrency-runtime.md)</ept>.|","pos":[4297,4513],"source":"[concurrency::SchedulerEventGuid](reference/concurrency-namespace-constants1.md#schedulereventguid)|Marks events that are related to the [Task Scheduler](../../parallel/concrt/task-scheduler-concurrency-runtime.md).|"},{"content":"<bpt id=\"p1\">[</bpt>concurrency::VirtualProcessorEventGuid<ept id=\"p1\">](reference/concurrency-namespace-constants1.md#virtualprocessoreventguid)</ept>|Marks events that are related to virtual processors.|","pos":[4556,4723],"source":"[concurrency::VirtualProcessorEventGuid](reference/concurrency-namespace-constants1.md#virtualprocessoreventguid)|Marks events that are related to virtual processors.|"},{"content":"The Concurrency Runtime defines, but does not currently raise, the following events.","pos":[4769,4853]},{"content":"The runtime reserves these events for future use:","pos":[4854,4903]},{"content":"concurrency::ConcRTEventGuid","pos":[4914,4942]},{"content":"concurrency::ScheduleGroupEventGuid","pos":[5017,5052]},{"content":"concurrency::ChoreEventGuid","pos":[5130,5157]},{"content":"concurrency::LockEventGuid","pos":[5231,5257]},{"content":"concurrency::ResourceManagerEventGuid","pos":[5330,5367]},{"content":"The <bpt id=\"p1\">[</bpt>concurrency::ConcRT_EventType<ept id=\"p1\">](reference/concurrency-namespace-enums.md#concrt_eventtype)</ept> enumeration specifies the possible operations that an event tracks.","pos":[5447,5609],"source":"The [concurrency::ConcRT_EventType](reference/concurrency-namespace-enums.md#concrt_eventtype) enumeration specifies the possible operations that an event tracks."},{"content":"For example, at the entrance of the <ph id=\"ph1\">`parallel_for`</ph> algorithm, the runtime raises the <ph id=\"ph2\">`PPLParallelForEventGuid`</ph> event and provides <ph id=\"ph3\">`CONCRT_EVENT_START`</ph> as the operation.","pos":[5610,5778],"source":" For example, at the entrance of the `parallel_for` algorithm, the runtime raises the `PPLParallelForEventGuid` event and provides `CONCRT_EVENT_START` as the operation."},{"content":"Before the <ph id=\"ph1\">`parallel_for`</ph> algorithm returns, the runtime again raises the <ph id=\"ph2\">`PPLParallelForEventGuid`</ph> event and provides <ph id=\"ph3\">`CONCRT_EVENT_END`</ph> as the operation.","pos":[5779,5934],"source":" Before the `parallel_for` algorithm returns, the runtime again raises the `PPLParallelForEventGuid` event and provides `CONCRT_EVENT_END` as the operation."},{"content":"The following example illustrates how to enable tracing for a call to <ph id=\"ph1\">`parallel_for`</ph>.","pos":[5941,6026],"source":"The following example illustrates how to enable tracing for a call to `parallel_for`."},{"content":"The runtime does not trace the first call to <ph id=\"ph1\">`parallel_for`</ph> because tracing it not enabled.","pos":[6027,6118],"source":" The runtime does not trace the first call to `parallel_for` because tracing it not enabled."},{"content":"The call to <ph id=\"ph1\">`EnableTracing`</ph> enables the runtime to trace the second call to <ph id=\"ph2\">`parallel_for`</ph>.","pos":[6119,6210],"source":" The call to `EnableTracing` enables the runtime to trace the second call to `parallel_for`."},{"pos":[6228,6240],"content":"concrt-etw#1"},{"content":"The runtime tracks the number of times that you call <ph id=\"ph1\">`EnableTracing`</ph> and <ph id=\"ph2\">`DisableTracing`</ph>.","pos":[6340,6430],"source":"The runtime tracks the number of times that you call `EnableTracing` and `DisableTracing`."},{"content":"Therefore, if you call <ph id=\"ph1\">`EnableTracing`</ph> multiple times, you must call <ph id=\"ph2\">`DisableTracing`</ph> the same number of times in order to disable tracing.","pos":[6431,6570],"source":" Therefore, if you call `EnableTracing` multiple times, you must call `DisableTracing` the same number of times in order to disable tracing."},{"content":"See Also","pos":[6579,6587]},{"content":"Concurrency Runtime","pos":[6592,6611]}],"content":"---\ntitle: \"Parallel Diagnostic Tools (Concurrency Runtime) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"Parallel Diagnostic Tools [Concurrency Runtime]\"\nms.assetid: b1a3f1d2-f5df-4f29-852e-906b3d8341fc\ncaps.latest.revision: 15\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Parallel Diagnostic Tools (Concurrency Runtime)\n[!INCLUDE[vsprvs](../../assembler/masm/includes/vsprvs_md.md)] provides extensive support for debugging and profiling multi-threaded applications.  \n  \n## Debugging  \n The Visual Studio debugger includes the **Parallel Stacks** window, **Parallel Tasks** window, and **Parallel Watch** window. For more information, see [Walkthrough: Debugging a Parallel Application](http://msdn.microsoft.com/library/2820ac4c-c893-4d87-8c62-83981d561493) and [How to: Use the Parallel Watch Window](http://msdn.microsoft.com/library/28004d9b-420c-48f7-b80e-ab1519802558).  \n  \n## Profiling  \n The profiling tools provide three data views that display graphical, tabular and numerical information about how a multi-threaded application interacts with itself and with other programs. The views enable you to quickly identify areas of concern, and to navigate from points on the graphical displays to call stacks, call sites, and source code. For more information, see [Concurrency Visualizer](/visualstudio/profiling/concurrency-visualizer).  \n  \n## Event Tracing  \n The Concurrency Runtime uses [Event Tracing for Windows](http://msdn.microsoft.com/library/windows/desktop/bb968803) (ETW) to notify instrumentation tools, such as profilers, when various events occur. These events include when a scheduler is activated or deactivated, when a context begins, ends, blocks, unblocks, or yields, and when a parallel algorithm begins or ends.  \n  \n Tools such as the [Concurrency Visualizer](/visualstudio/profiling/concurrency-visualizer) utilize this functionality; therefore, you typically do not have to work with these events directly. However, these events are useful when you are developing a custom profiler or when you use event tracing tools such as [Xperf](http://go.microsoft.com/fwlink/linkid=160628).  \n  \n The Concurrency Runtime raises these events only when tracing is enabled. Call the [concurrency::EnableTracing](reference/concurrency-namespace-functions.md#enabletracing) function to enable event tracing and the [concurrency::DisableTracing](reference/concurrency-namespace-functions.md#disabletracing) function to disable tracing.  \n  \n The following table describes the events that the runtime raises when event tracing is enabled:  \n  \n|Event|Description|Value|  \n|-----------|-----------------|-----------|  \n\n|[concurrency::ConcRT_ProviderGuid](reference/concurrency-namespace-constants1.md#concrt_providerguid)|The ETW provider identifier for the Concurrency Runtime.|`f7b697a3-4db5-4d3b-be71-c4d284e6592f`|  \n|[concurrency::ContextEventGuid](reference/concurrency-namespace-constants1.md#contexteventguid)|Marks events that are related to contexts.|`5727a00f-50be-4519-8256-f7699871fecb`|  \n|[concurrency::PPLParallelForEventGuid](reference/concurrency-namespace-constants1.md#pplparallelforeventguid)|Marks the entrance and exit to calls to the [concurrency::parallel_for](reference/concurrency-namespace-functions.md#parallel_for) algorithm.|`31c8da6b-6165-4042-8b92-949e315f4d84`|  \n|[concurrency::PPLParallelForeachEventGuid](reference/concurrency-namespace-constants1.md#pplparallelforeacheventguid)|Marks the entrance and exit to calls to the [concurrency::parallel_for_each](reference/concurrency-namespace-functions.md#parallel_for_each) algorithm.|`5cb7d785-9d66-465d-bae1-4611061b5434`|  \n|[concurrency::PPLParallelInvokeEventGuid](reference/concurrency-namespace-constants1.md#pplparallelinvokeeventguid)|Marks the entrance and exit to calls to the [concurrency::parallel_invoke](reference/concurrency-namespace-functions.md#parallel_invoke) algorithm.|`d1b5b133-ec3d-49f4-98a3-464d1a9e4682`|  \n|[concurrency::SchedulerEventGuid](reference/concurrency-namespace-constants1.md#schedulereventguid)|Marks events that are related to the [Task Scheduler](../../parallel/concrt/task-scheduler-concurrency-runtime.md).|`e2091f8a-1e0a-4731-84a2-0dd57c8a5261`|  \n|[concurrency::VirtualProcessorEventGuid](reference/concurrency-namespace-constants1.md#virtualprocessoreventguid)|Marks events that are related to virtual processors.|`2f27805f-1676-4ecc-96fa-7eb09d44302f`|  \n  \n The Concurrency Runtime defines, but does not currently raise, the following events. The runtime reserves these events for future use:  \n  \n-   [concurrency::ConcRTEventGuid](reference/concurrency-namespace-constants1.md#concrteventguid)  \n  \n-   [concurrency::ScheduleGroupEventGuid](reference/concurrency-namespace-constants1.md#schedulereventguid)  \n  \n-   [concurrency::ChoreEventGuid](reference/concurrency-namespace-constants1.md#choreeventguid)  \n  \n-   [concurrency::LockEventGuid](reference/concurrency-namespace-constants1.md#lockeventguid)  \n  \n-   [concurrency::ResourceManagerEventGuid](reference/concurrency-namespace-constants1.md#resourcemanagereventguid)  \n  \n The [concurrency::ConcRT_EventType](reference/concurrency-namespace-enums.md#concrt_eventtype) enumeration specifies the possible operations that an event tracks. For example, at the entrance of the `parallel_for` algorithm, the runtime raises the `PPLParallelForEventGuid` event and provides `CONCRT_EVENT_START` as the operation. Before the `parallel_for` algorithm returns, the runtime again raises the `PPLParallelForEventGuid` event and provides `CONCRT_EVENT_END` as the operation.  \n  \n The following example illustrates how to enable tracing for a call to `parallel_for`. The runtime does not trace the first call to `parallel_for` because tracing it not enabled. The call to `EnableTracing` enables the runtime to trace the second call to `parallel_for`.  \n  \n [!code-cpp[concrt-etw#1](../../parallel/concrt/codesnippet/cpp/parallel-diagnostic-tools-concurrency-runtime_1.cpp)]  \n  \n The runtime tracks the number of times that you call `EnableTracing` and `DisableTracing`. Therefore, if you call `EnableTracing` multiple times, you must call `DisableTracing` the same number of times in order to disable tracing.  \n  \n## See Also  \n [Concurrency Runtime](../../parallel/concrt/concurrency-runtime.md)\n\n"}