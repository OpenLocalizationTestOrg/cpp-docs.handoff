{"nodes":[{"pos":[12,36],"content":"__event | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"__event | Microsoft Docs","pos":[0,24]}]},{"content":"__event","pos":[652,659]},{"content":"Declares an event.","pos":[660,678]},{"content":"Syntax","pos":[687,693]},{"content":"Remarks","pos":[845,852]},{"content":"The keyword <ph id=\"ph1\">`__event`</ph> can be applied to a method declaration, an interface declaration, or a data member declaration.","pos":[856,973],"source":"The keyword `__event` can be applied to a method declaration, an interface declaration, or a data member declaration."},{"content":"However, you cannot use the <ph id=\"ph1\">`__event`</ph> keyword to qualify a member of a nested class.","pos":[974,1058],"source":" However, you cannot use the `__event` keyword to qualify a member of a nested class."},{"content":"Depending on whether your event source and receiver are native C++, COM, or managed (.NET Framework), you can use the following constructs as events:","pos":[1065,1214]},{"content":"Native C++","pos":[1221,1231]},{"content":"COM","pos":[1232,1235]},{"content":"Managed (.NET Framework)","pos":[1236,1260]},{"content":"Method","pos":[1331,1337]},{"content":"—","pos":[1338,1339]},{"content":"method","pos":[1340,1346]},{"content":"—","pos":[1351,1352]},{"content":"interface","pos":[1353,1362]},{"content":"—","pos":[1363,1364]},{"content":"—","pos":[1369,1370]},{"content":"—","pos":[1371,1372]},{"content":"data member","pos":[1373,1384]},{"content":"Use <bpt id=\"p1\">[</bpt>__hook<ept id=\"p1\">](../cpp/hook.md)</ept> in an event receiver to associate a handler method with an event method.","pos":[1392,1493],"source":"Use [__hook](../cpp/hook.md) in an event receiver to associate a handler method with an event method."},{"content":"Note that after you create an event with the <ph id=\"ph1\">`__event`</ph> keyword, all event handlers subsequently hooked to that event will be called when the event is called.","pos":[1494,1651],"source":" Note that after you create an event with the `__event` keyword, all event handlers subsequently hooked to that event will be called when the event is called."},{"pos":[1658,1822],"content":"An <ph id=\"ph1\">`__event`</ph> method declaration cannot have a definition; a definition is implicitly generated, so the event method can be called as if it were any ordinary method.","source":"An `__event` method declaration cannot have a definition; a definition is implicitly generated, so the event method can be called as if it were any ordinary method."},{"pos":[1830,1891],"content":"[!NOTE]\n A templated class or struct cannot contain events.","leadings":["","> "],"nodes":[{"content":"A templated class or struct cannot contain events.","pos":[9,59]}]},{"content":"Native Events","pos":[1900,1913]},{"content":"Native events are methods.","pos":[1917,1943]},{"content":"The return type is typically <ph id=\"ph1\">`HRESULT`</ph> or <ph id=\"ph2\">`void`</ph>, but can be any integral type, including an <ph id=\"ph3\">`enum`</ph>.","pos":[1944,2044],"source":" The return type is typically `HRESULT` or `void`, but can be any integral type, including an `enum`."},{"content":"When an event uses an integral return type, an error condition is defined when an event handler returns a nonzero value, in which case the event being raised will call the other delegates.","pos":[2045,2233]},{"pos":[2364,2455],"content":"See <bpt id=\"p1\">[</bpt>Event Handling in Native C++<ept id=\"p1\">](../cpp/event-handling-in-native-cpp.md)</ept> for sample code.","source":"See [Event Handling in Native C++](../cpp/event-handling-in-native-cpp.md) for sample code."},{"content":"COM Events","pos":[2464,2474]},{"content":"COM events are interfaces.","pos":[2478,2504]},{"content":"The parameters of a method in an event source interface should be <bpt id=\"p1\">**</bpt>in<ept id=\"p1\">**</ept> parameters (but this is not rigorously enforced), because an <bpt id=\"p2\">**</bpt>out<ept id=\"p2\">**</ept> parameter is not useful when multicasting.","pos":[2505,2689],"source":" The parameters of a method in an event source interface should be **in** parameters (but this is not rigorously enforced), because an **out** parameter is not useful when multicasting."},{"content":"A level 1 warning will be issued if you use an <bpt id=\"p1\">**</bpt>out<ept id=\"p1\">**</ept> parameter.","pos":[2690,2755],"source":" A level 1 warning will be issued if you use an **out** parameter."},{"content":"The return type is typically <ph id=\"ph1\">`HRESULT`</ph> or <ph id=\"ph2\">`void`</ph>, but can be any integral type, including <ph id=\"ph3\">`enum`</ph>.","pos":[2762,2859],"source":"The return type is typically `HRESULT` or `void`, but can be any integral type, including `enum`."},{"content":"When an event uses an integral return type and an event handler returns a nonzero value, it is an error condition, in which case the event being raised aborts calls to the other delegates.","pos":[2860,3048]},{"content":"Note that the compiler will automatically mark an event source interface as a <bpt id=\"p1\">[</bpt>source<ept id=\"p1\">](../windows/source-cpp.md)</ept> in the generated IDL.","pos":[3049,3183],"source":" Note that the compiler will automatically mark an event source interface as a [source](../windows/source-cpp.md) in the generated IDL."},{"pos":[3190,3295],"content":"The <bpt id=\"p1\">[</bpt>__interface<ept id=\"p1\">](../cpp/interface.md)</ept> keyword is always required after <ph id=\"ph1\">`__event`</ph> for a COM event source.","source":"The [__interface](../cpp/interface.md) keyword is always required after `__event` for a COM event source."},{"pos":[3377,3454],"content":"See <bpt id=\"p1\">[</bpt>Event Handling in COM<ept id=\"p1\">](../cpp/event-handling-in-com.md)</ept> for sample code.","source":"See [Event Handling in COM](../cpp/event-handling-in-com.md) for sample code."},{"content":"Managed Events","pos":[3463,3477]},{"pos":[3481,3591],"content":"For information on coding events in the new syntax, see <bpt id=\"p1\">[</bpt>event<ept id=\"p1\">](../windows/event-cpp-component-extensions.md)</ept>.","source":"For information on coding events in the new syntax, see [event](../windows/event-cpp-component-extensions.md)."},{"content":"Managed events are data members or methods.","pos":[3598,3641]},{"content":"When used with an event, the return type of a delegate must be compliant with the <bpt id=\"p1\">[</bpt>Common Language Specification<ept id=\"p1\">](http://msdn.microsoft.com/Library/4f0b77d0-4844-464f-af73-6e06bedeafc6)</ept>.","pos":[3642,3828],"source":" When used with an event, the return type of a delegate must be compliant with the [Common Language Specification](http://msdn.microsoft.com/Library/4f0b77d0-4844-464f-af73-6e06bedeafc6)."},{"content":"The return type of the event handler must match the return type of the delegate.","pos":[3829,3909]},{"content":"For more information on delegates, see <bpt id=\"p1\">[</bpt>Delegates and Events<ept id=\"p1\">](../dotnet/delegates-and-events.md)</ept>.","pos":[3910,4007],"source":" For more information on delegates, see [Delegates and Events](../dotnet/delegates-and-events.md)."},{"content":"If a managed event is a data member, its type must be a pointer to a delegate.","pos":[4008,4086]},{"content":"In the .NET Framework, you can treat a data member as if it were a method itself (that is, the <ph id=\"ph1\">`Invoke`</ph> method of its corresponding delegate).","pos":[4093,4235],"source":"In the .NET Framework, you can treat a data member as if it were a method itself (that is, the `Invoke` method of its corresponding delegate)."},{"content":"You must predefine the delegate type for declaring a managed event data member.","pos":[4236,4315]},{"content":"In contrast, a managed event method implicitly defines the corresponding managed delegate if it is not already defined.","pos":[4316,4435]},{"content":"For example, you can declare an event value such as <ph id=\"ph1\">`OnClick`</ph> as an event as follows:","pos":[4436,4521],"source":" For example, you can declare an event value such as `OnClick` as an event as follows:"},{"content":"When implicitly declaring a managed event, you can specify add and remove accessors that will be called when event handlers are added or removed.","pos":[4694,4839]},{"content":"You can also define the method that calls (raises) the event from outside the class.","pos":[4840,4924]},{"content":"Example: Native Events","pos":[4933,4955]},{"content":"Example: COM Events","pos":[5134,5153]},{"content":"See Also","pos":[5775,5783]},{"content":"Keywords","pos":[5788,5796]},{"content":"Event Handling","pos":[5827,5841]},{"content":"event_source","pos":[5874,5886]},{"content":"event_receiver","pos":[5921,5935]},{"content":"__hook","pos":[5972,5978]},{"content":"__unhook","pos":[6001,6009]},{"content":"__raise","pos":[6034,6041]}],"content":"---\ntitle: \"__event | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"language-reference\"\nf1_keywords: \n  - \"__event_cpp\"\n  - \"__event\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"__event keyword [C++]\"\n  - \"events [C++], __event\"\nms.assetid: d3019b3e-722e-48df-8536-c05878461f9e\ncaps.latest.revision: 14\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# __event\nDeclares an event.  \n  \n## Syntax  \n  \n```  \n  \n      __event   \n      method-declarator  \n      ;  \n__event __interface interface-specifier;  \n__event member-declarator;  \n```  \n  \n## Remarks  \n The keyword `__event` can be applied to a method declaration, an interface declaration, or a data member declaration. However, you cannot use the `__event` keyword to qualify a member of a nested class.  \n  \n Depending on whether your event source and receiver are native C++, COM, or managed (.NET Framework), you can use the following constructs as events:  \n  \n|Native C++|COM|Managed (.NET Framework)|  \n|------------------|---------|--------------------------------|  \n|Method|—|method|  \n|—|interface|—|  \n|—|—|data member|  \n  \n Use [__hook](../cpp/hook.md) in an event receiver to associate a handler method with an event method. Note that after you create an event with the `__event` keyword, all event handlers subsequently hooked to that event will be called when the event is called.  \n  \n An `__event` method declaration cannot have a definition; a definition is implicitly generated, so the event method can be called as if it were any ordinary method.  \n  \n> [!NOTE]\n>  A templated class or struct cannot contain events.  \n  \n## Native Events  \n Native events are methods. The return type is typically `HRESULT` or `void`, but can be any integral type, including an `enum`. When an event uses an integral return type, an error condition is defined when an event handler returns a nonzero value, in which case the event being raised will call the other delegates.  \n  \n```  \n// Examples of native C++ events:  \n__event void OnDblClick();  \n__event HRESULT OnClick(int* b, char* s);  \n```  \n  \n See [Event Handling in Native C++](../cpp/event-handling-in-native-cpp.md) for sample code.  \n  \n## COM Events  \n COM events are interfaces. The parameters of a method in an event source interface should be **in** parameters (but this is not rigorously enforced), because an **out** parameter is not useful when multicasting. A level 1 warning will be issued if you use an **out** parameter.  \n  \n The return type is typically `HRESULT` or `void`, but can be any integral type, including `enum`. When an event uses an integral return type and an event handler returns a nonzero value, it is an error condition, in which case the event being raised aborts calls to the other delegates. Note that the compiler will automatically mark an event source interface as a [source](../windows/source-cpp.md) in the generated IDL.  \n  \n The [__interface](../cpp/interface.md) keyword is always required after `__event` for a COM event source.  \n  \n```  \n// Example of a COM event:  \n__event __interface IEvent1;  \n```  \n  \n See [Event Handling in COM](../cpp/event-handling-in-com.md) for sample code.  \n  \n## Managed Events  \n For information on coding events in the new syntax, see [event](../windows/event-cpp-component-extensions.md).  \n  \n Managed events are data members or methods. When used with an event, the return type of a delegate must be compliant with the [Common Language Specification](http://msdn.microsoft.com/Library/4f0b77d0-4844-464f-af73-6e06bedeafc6). The return type of the event handler must match the return type of the delegate. For more information on delegates, see [Delegates and Events](../dotnet/delegates-and-events.md). If a managed event is a data member, its type must be a pointer to a delegate.  \n  \n In the .NET Framework, you can treat a data member as if it were a method itself (that is, the `Invoke` method of its corresponding delegate). You must predefine the delegate type for declaring a managed event data member. In contrast, a managed event method implicitly defines the corresponding managed delegate if it is not already defined. For example, you can declare an event value such as `OnClick` as an event as follows:  \n  \n```  \n// Examples of managed events:  \n__event ClickEventHandler* OnClick;  // data member as event  \n__event void OnClick(String* s);  // method as event  \n```  \n  \n When implicitly declaring a managed event, you can specify add and remove accessors that will be called when event handlers are added or removed. You can also define the method that calls (raises) the event from outside the class.  \n  \n## Example: Native Events  \n  \n```  \n// EventHandling_Native_Event.cpp  \n// compile with: /c  \n[event_source(native)]  \nclass CSource {  \npublic:  \n   __event void MyEvent(int nValue);  \n};  \n```  \n  \n## Example: COM Events  \n  \n```  \n// EventHandling_COM_Event.cpp  \n// compile with: /c  \n#define _ATL_ATTRIBUTES 1  \n#include <atlbase.h>  \n#include <atlcom.h>  \n  \n[ module(dll, name=\"EventSource\", uuid=\"6E46B59E-89C3-4c15-A6D8-B8A1CEC98830\") ];  \n  \n[ dual, uuid(\"00000000-0000-0000-0000-000000000002\") ]  \n__interface IEventSource {  \n   [id(1)] HRESULT MyEvent();  \n};  \n [ coclass, uuid(\"00000000-0000-0000-0000-000000000003\"),  event_source(com) ]  \nclass CSource : public IEventSource {  \npublic:  \n   __event __interface IEventSource;  \n   HRESULT FireEvent() {  \n      __raise MyEvent();  \n      return S_OK;  \n   }  \n};  \n```  \n  \n## See Also  \n [Keywords](../cpp/keywords-cpp.md)   \n [Event Handling](../cpp/event-handling.md)   \n [event_source](../windows/event-source.md)   \n [event_receiver](../windows/event-receiver.md)   \n [__hook](../cpp/hook.md)   \n [__unhook](../cpp/unhook.md)   \n [__raise](../cpp/raise.md)"}