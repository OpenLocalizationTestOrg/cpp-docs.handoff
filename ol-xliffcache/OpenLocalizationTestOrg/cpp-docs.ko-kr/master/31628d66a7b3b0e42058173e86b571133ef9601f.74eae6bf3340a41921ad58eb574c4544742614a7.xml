{"nodes":[{"pos":[12,55],"content":"MBCS Support in Visual C++ | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"MBCS Support in Visual C++ | Microsoft Docs","pos":[0,43]}]},{"content":"MBCS Support in Visual C++","pos":[1134,1160]},{"content":"When run on an MBCS-enabled version of the Windows 2000 or Windows XP operating system, the Visual C++ development system (including the integrated source code editor, debugger, and command line tools) is MBCS-enabled, with the exception of the memory window.","pos":[1161,1420]},{"content":"The memory window does not interpret bytes of data as MBCS characters, even though it can interpret them as ANSI or Unicode characters.","pos":[1427,1562]},{"content":"ANSI characters are always 1 byte in size and Unicode characters are 2 bytes in size.","pos":[1563,1648]},{"content":"With MBCS, characters can be 1 or 2 bytes in size and their interpretation depends on which code page is in use.","pos":[1649,1761]},{"content":"Because of this, it is difficult for the memory window to reliably display MBCS characters.","pos":[1762,1853]},{"content":"The memory window cannot know which byte is the start of a character.","pos":[1854,1923]},{"content":"The developer can view the byte values in the memory window and look up the value in tables to determine the character representation.","pos":[1924,2058]},{"content":"This is possible because the developer knows the starting address of a string based on the source code.","pos":[2059,2162]},{"content":"Visual C++ accepts double-byte characters wherever it is appropriate to do so.","pos":[2169,2247]},{"content":"This includes path names and file names in dialog boxes and text entries in the Visual C++ resource editor (for example, static text in the dialog editor and static text entries in the icon editor).","pos":[2248,2446]},{"content":"In addition, the preprocessor recognizes some double-byte directives — for example, file names in <ph id=\"ph1\">`#include`</ph> statements, and as arguments to the <bpt id=\"p1\">**</bpt>code_seg<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>data_seg<ept id=\"p2\">**</ept> pragmas.","pos":[2447,2630],"source":" In addition, the preprocessor recognizes some double-byte directives — for example, file names in `#include` statements, and as arguments to the **code_seg** and **data_seg** pragmas."},{"content":"In the source code editor, double-byte characters in comments and string literals are accepted, although not in C/C++ language elements (such as variable names).","pos":[2631,2792]},{"pos":[2870,2911],"content":"Support for the Input Method Editor (IME)"},{"content":"Applications written for East Asian markets that use MBCS (for example, Japan) normally support the Windows IME for entering both single- and double-byte characters.","pos":[2915,3080]},{"content":"The Visual C++ development environment contains full support for the IME.","pos":[3081,3154]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>IME Sample: Demonstrates How to Control IME Mode and Implement IME Level 3<ept id=\"p1\">](http://msdn.microsoft.com/en-us/87ebdf65-cef0-451d-a6fc-d5fb64178b14)</ept>.","pos":[3155,3328],"source":" For more information, see [IME Sample: Demonstrates How to Control IME Mode and Implement IME Level 3](http://msdn.microsoft.com/en-us/87ebdf65-cef0-451d-a6fc-d5fb64178b14)."},{"content":"Japanese keyboards do not directly support Kanji characters.","pos":[3335,3395]},{"content":"The IME converts a phonetic string, entered in one of the other Japanese alphabets (Romaji, Katakana, or Hiragana) into its possible Kanji representations.","pos":[3396,3551]},{"content":"If there is ambiguity, you can select from several alternatives.","pos":[3552,3616]},{"content":"When you have selected the intended Kanji character, the IME passes two <ph id=\"ph1\">`WM_CHAR`</ph> messages to the controlling application.","pos":[3617,3739],"source":" When you have selected the intended Kanji character, the IME passes two `WM_CHAR` messages to the controlling application."},{"content":"The IME, activated by the ALT+<ph id=\"ph1\">\\`</ph> key combination, appears as a set of buttons (an indicator) and a conversion window.","pos":[3746,3863],"source":"The IME, activated by the ALT+\\` key combination, appears as a set of buttons (an indicator) and a conversion window."},{"content":"The application positions the window at the text insertion point.","pos":[3864,3929]},{"content":"The application must handle <ph id=\"ph1\">`WM_MOVE`</ph> and <ph id=\"ph2\">`WM_SIZE`</ph> messages by repositioning the conversion window to conform to the new location or size of the target window.","pos":[3930,4090],"source":" The application must handle `WM_MOVE` and `WM_SIZE` messages by repositioning the conversion window to conform to the new location or size of the target window."},{"content":"If you want users of your application to have the ability to enter Kanji characters, the application must handle Windows IME messages.","pos":[4097,4231]},{"content":"For more information about IME programming, see <bpt id=\"p1\">[</bpt>Input Method Editor<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/ms776145.aspx)</ept>.","pos":[4232,4358],"source":" For more information about IME programming, see [Input Method Editor](https://msdn.microsoft.com/en-us/library/ms776145.aspx)."},{"content":"Visual C++ Debugger","pos":[4367,4386]},{"content":"The Visual C++ debugger provides the ability to set breakpoints on IME messages.","pos":[4390,4470]},{"content":"In addition, the Memory window can display double-byte characters.","pos":[4471,4537]},{"content":"Command-Line Tools","pos":[4546,4564]},{"content":"The Visual C++ command-line tools, including the compiler, NMAKE, and the resource compiler (RC.EXE), are MBCS-enabled.","pos":[4568,4687]},{"content":"You can use the resource compiler's /c option to change the default code page when compiling your application's resources.","pos":[4688,4810]},{"pos":[4817,4929],"content":"To change the default locale at source code compile time, use <bpt id=\"p1\">[</bpt>#pragma setlocale<ept id=\"p1\">](../preprocessor/setlocale.md)</ept>.","source":"To change the default locale at source code compile time, use [#pragma setlocale](../preprocessor/setlocale.md)."},{"content":"Graphical Tools","pos":[4938,4953]},{"content":"The Visual C++ Windows-based tools, such as Spy++ and the resource editing tools, fully support IME strings.","pos":[4957,5065]},{"content":"See Also","pos":[5074,5082]},{"content":"Support for Multibyte Character Sets (MBCSs)","pos":[5087,5131]},{"content":"MBCS Programming Tips","pos":[5193,5214]}],"content":"---\ntitle: \"MBCS Support in Visual C++ | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"_mbcs\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"tools [C++], MBCS support\"\n  - \"Asian languages [C++]\"\n  - \"Code Editor [C++], MBCS support\"\n  - \"IME [C++]\"\n  - \"Chinese characters [C++]\"\n  - \"Input Method Editor [C++], MBCS\"\n  - \"resource editors [C++], MBCS support\"\n  - \"debugger [C++], MBCS support\"\n  - \"character sets [C++], multibyte\"\n  - \"Japanese characters [C++]\"\n  - \"multibyte characters [C++]\"\n  - \"Kanji character support [C++]\"\n  - \"NMAKE program, MBCS support\"\n  - \"double-byte character sets [C++]\"\n  - \"IME [C++], MBCS\"\n  - \"Input Method Editor [C++]\"\n  - \"MBCS [C++], enabling\"\nms.assetid: 6179f6b7-bc61-4a48-9267-fb7951223e38\ncaps.latest.revision: 7\nauthor: \"ghogen\"\nms.author: \"ghogen\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# MBCS Support in Visual C++\nWhen run on an MBCS-enabled version of the Windows 2000 or Windows XP operating system, the Visual C++ development system (including the integrated source code editor, debugger, and command line tools) is MBCS-enabled, with the exception of the memory window.  \n  \n The memory window does not interpret bytes of data as MBCS characters, even though it can interpret them as ANSI or Unicode characters. ANSI characters are always 1 byte in size and Unicode characters are 2 bytes in size. With MBCS, characters can be 1 or 2 bytes in size and their interpretation depends on which code page is in use. Because of this, it is difficult for the memory window to reliably display MBCS characters. The memory window cannot know which byte is the start of a character. The developer can view the byte values in the memory window and look up the value in tables to determine the character representation. This is possible because the developer knows the starting address of a string based on the source code.  \n  \n Visual C++ accepts double-byte characters wherever it is appropriate to do so. This includes path names and file names in dialog boxes and text entries in the Visual C++ resource editor (for example, static text in the dialog editor and static text entries in the icon editor). In addition, the preprocessor recognizes some double-byte directives — for example, file names in `#include` statements, and as arguments to the **code_seg** and **data_seg** pragmas. In the source code editor, double-byte characters in comments and string literals are accepted, although not in C/C++ language elements (such as variable names).  \n  \n##  <a name=\"_core_support_for_the_input_method_editor_.28.ime.29\"></a> Support for the Input Method Editor (IME)  \n Applications written for East Asian markets that use MBCS (for example, Japan) normally support the Windows IME for entering both single- and double-byte characters. The Visual C++ development environment contains full support for the IME. For more information, see [IME Sample: Demonstrates How to Control IME Mode and Implement IME Level 3](http://msdn.microsoft.com/en-us/87ebdf65-cef0-451d-a6fc-d5fb64178b14).  \n  \n Japanese keyboards do not directly support Kanji characters. The IME converts a phonetic string, entered in one of the other Japanese alphabets (Romaji, Katakana, or Hiragana) into its possible Kanji representations. If there is ambiguity, you can select from several alternatives. When you have selected the intended Kanji character, the IME passes two `WM_CHAR` messages to the controlling application.  \n  \n The IME, activated by the ALT+\\` key combination, appears as a set of buttons (an indicator) and a conversion window. The application positions the window at the text insertion point. The application must handle `WM_MOVE` and `WM_SIZE` messages by repositioning the conversion window to conform to the new location or size of the target window.  \n  \n If you want users of your application to have the ability to enter Kanji characters, the application must handle Windows IME messages. For more information about IME programming, see [Input Method Editor](https://msdn.microsoft.com/en-us/library/ms776145.aspx).  \n  \n## Visual C++ Debugger  \n The Visual C++ debugger provides the ability to set breakpoints on IME messages. In addition, the Memory window can display double-byte characters.  \n  \n## Command-Line Tools  \n The Visual C++ command-line tools, including the compiler, NMAKE, and the resource compiler (RC.EXE), are MBCS-enabled. You can use the resource compiler's /c option to change the default code page when compiling your application's resources.  \n  \n To change the default locale at source code compile time, use [#pragma setlocale](../preprocessor/setlocale.md).  \n  \n## Graphical Tools  \n The Visual C++ Windows-based tools, such as Spy++ and the resource editing tools, fully support IME strings.  \n  \n## See Also  \n [Support for Multibyte Character Sets (MBCSs)](../text/support-for-multibyte-character-sets-mbcss.md)   \n [MBCS Programming Tips](../text/mbcs-programming-tips.md)"}