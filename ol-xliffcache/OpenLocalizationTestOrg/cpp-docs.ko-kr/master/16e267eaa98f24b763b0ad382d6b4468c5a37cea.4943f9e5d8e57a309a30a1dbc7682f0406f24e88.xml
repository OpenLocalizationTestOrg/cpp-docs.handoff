{"nodes":[{"pos":[12,86],"content":"How to: Merge Multiple PGO Profiles into a Single Profile | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"How to: Merge Multiple PGO Profiles into a Single Profile | Microsoft Docs","pos":[0,74]}]},{"content":"How to: Merge Multiple PGO Profiles into a Single Profile","pos":[664,721]},{"content":"Profile-guided optimization (PGO) is a great tool for creating optimized binaries based on a scenario that is profiled.","pos":[722,841]},{"content":"But what if you have an application that has several important, yet distinct scenarios; how do you create a single profile that PGO can use from several different scenarios?","pos":[842,1015]},{"content":"In Visual Studio, the PGO Manager, Pgomgr.exe, does this job for you.","pos":[1016,1085]},{"content":"The syntax for merging profiles is:","pos":[1092,1127]},{"content":"where <ph id=\"ph1\">`num`</ph> is an optional weight that is being used for this merge.","pos":[1195,1263],"source":"where `num` is an optional weight that is being used for this merge."},{"content":"Weights are commonly used if there are some scenarios that are more important than others or if there are scenarios that are to be run multiple times.","pos":[1264,1414]},{"pos":[1422,1651],"content":"[!NOTE]\n The PGO Manager will not work with stale profile data. To merge a .pgc file into a .pgd file, the .pgc file must be generated by an executable which was created by the same link invocation that generated the .pgd file.","leadings":["","> "],"nodes":[{"content":" The PGO Manager will not work with stale profile data. To merge a .pgc file into a .pgd file, the .pgc file must be generated by an executable which was created by the same link invocation that generated the .pgd file.","pos":[8,227],"nodes":[{"content":"The PGO Manager will not work with stale profile data.","pos":[1,55]},{"content":"To merge a .pgc file into a .pgd file, the .pgc file must be generated by an executable which was created by the same link invocation that generated the .pgd file.","pos":[56,219]}]}]},{"content":"Example","pos":[1660,1667]},{"content":"In this example, the PGO Manager will add pgcFile.pgc to pgdFile.pgd six times.","pos":[1671,1750]},{"content":"Example","pos":[1816,1823]},{"content":"In this example, the PGO Manager will add pgcFile1.pgc and pgcFile2.pgc to pgdFile.pgd, two times for each .pgc file.","pos":[1827,1944]},{"content":"Example","pos":[2024,2031]},{"content":"If the PGO Manager is run without a .pgc file it will search the local directory for all .pgc files that have the same name as the .pgd file appended with an exclamation mark (!) followed by arbitrary characters.","pos":[2035,2247]},{"content":"If the local directory has files test.pgd, test!1.pgc, test2.pgc, and test!hello.pgc, and the following command is run from the local directory, then test!1.pgc and test!hello.pgc will be merged into test.pgd.","pos":[2248,2457]},{"content":"See Also","pos":[2506,2514]},{"content":"Profile-Guided Optimizations","pos":[2519,2547]}],"content":"---\ntitle: \"How to: Merge Multiple PGO Profiles into a Single Profile | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"merging profiles\"\n  - \"profile-guided optimizations, merging profiles\"\nms.assetid: aab686b5-59dd-40d1-a04b-5064690f65a6\ncaps.latest.revision: 5\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# How to: Merge Multiple PGO Profiles into a Single Profile\nProfile-guided optimization (PGO) is a great tool for creating optimized binaries based on a scenario that is profiled. But what if you have an application that has several important, yet distinct scenarios; how do you create a single profile that PGO can use from several different scenarios? In Visual Studio, the PGO Manager, Pgomgr.exe, does this job for you.  \n  \n The syntax for merging profiles is:  \n  \n```  \npgomgr /merge[:num] [.pgc_files] .pgd_files  \n```  \n  \n where `num` is an optional weight that is being used for this merge. Weights are commonly used if there are some scenarios that are more important than others or if there are scenarios that are to be run multiple times.  \n  \n> [!NOTE]\n>  The PGO Manager will not work with stale profile data. To merge a .pgc file into a .pgd file, the .pgc file must be generated by an executable which was created by the same link invocation that generated the .pgd file.  \n  \n## Example  \n In this example, the PGO Manager will add pgcFile.pgc to pgdFile.pgd six times.  \n  \n```  \npgomgr /merge:6 pgcFile.pgc pgdFile.pgd  \n```  \n  \n## Example  \n In this example, the PGO Manager will add pgcFile1.pgc and pgcFile2.pgc to pgdFile.pgd, two times for each .pgc file.  \n  \n```  \npgomgr /merge:2 pgcFile1.pgc pgcFile2.pgc pgdFile.pgd  \n```  \n  \n## Example  \n If the PGO Manager is run without a .pgc file it will search the local directory for all .pgc files that have the same name as the .pgd file appended with an exclamation mark (!) followed by arbitrary characters. If the local directory has files test.pgd, test!1.pgc, test2.pgc, and test!hello.pgc, and the following command is run from the local directory, then test!1.pgc and test!hello.pgc will be merged into test.pgd.  \n  \n```  \npgomgr /merge test.pgd  \n```  \n  \n## See Also  \n [Profile-Guided Optimizations](../../build/reference/profile-guided-optimizations.md)"}