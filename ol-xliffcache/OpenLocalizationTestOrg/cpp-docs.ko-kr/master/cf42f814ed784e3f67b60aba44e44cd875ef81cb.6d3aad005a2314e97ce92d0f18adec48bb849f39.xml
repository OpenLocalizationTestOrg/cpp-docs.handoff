{"nodes":[{"pos":[12,43],"content":"_ReturnAddress | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"_ReturnAddress | Microsoft Docs","pos":[0,31]}]},{"content":"_ReturnAddress","pos":[667,681]},{"content":"Microsoft Specific","pos":[685,703]},{"pos":[707,860],"content":"The <ph id=\"ph1\">`_ReturnAddress`</ph> intrinsic provides the address of the instruction in the calling function that will be executed after control returns to the caller.","source":"The `_ReturnAddress` intrinsic provides the address of the instruction in the calling function that will be executed after control returns to the caller."},{"content":"Build the following program and step through it in the debugger.","pos":[867,931]},{"content":"As you step through the program, note the address that is returned from <ph id=\"ph1\">`_ReturnAddress`</ph>.","pos":[932,1021],"source":" As you step through the program, note the address that is returned from `_ReturnAddress`."},{"content":"Then, immediately after returning from the function where <ph id=\"ph1\">`_ReturnAddress`</ph> was used, open the <bpt id=\"p1\">[</bpt>How to: Use the Disassembly Window<ept id=\"p1\">](http://msdn.microsoft.com/Library/eaf84dd0-c82d-481b-af51-690b74e7794c)</ept> and note that the address of the next instruction to be executed matches the address returned from <ph id=\"ph2\">`_ReturnAddress`</ph>.","pos":[1022,1341],"source":" Then, immediately after returning from the function where `_ReturnAddress` was used, open the [How to: Use the Disassembly Window](http://msdn.microsoft.com/Library/eaf84dd0-c82d-481b-af51-690b74e7794c) and note that the address of the next instruction to be executed matches the address returned from `_ReturnAddress`."},{"content":"Optimizations such as inlining may affect the return address.","pos":[1348,1409]},{"content":"For example, if the sample program below is compiled with <bpt id=\"p1\">[</bpt>/Ob1<ept id=\"p1\">](../build/reference/ob-inline-function-expansion.md)</ept>, <ph id=\"ph1\">`inline_func`</ph> will be inlined into the calling function, <ph id=\"ph2\">`main`</ph>.","pos":[1410,1592],"source":" For example, if the sample program below is compiled with [/Ob1](../build/reference/ob-inline-function-expansion.md), `inline_func` will be inlined into the calling function, `main`."},{"content":"Therefore, the calls to <ph id=\"ph1\">`_ReturnAddress`</ph> from <ph id=\"ph2\">`inline_func`</ph> and <ph id=\"ph3\">`main`</ph> will each produce the same value.","pos":[1593,1697],"source":" Therefore, the calls to `_ReturnAddress` from `inline_func` and `main` will each produce the same value."},{"content":"When <ph id=\"ph1\">`_ReturnAddress`</ph> is used in a program compiled with <bpt id=\"p1\">[</bpt>/clr<ept id=\"p1\">](../build/reference/clr-common-language-runtime-compilation.md)</ept>, the function containing the <ph id=\"ph2\">`_ReturnAddress`</ph> call will be compiled as a native function.","pos":[1704,1920],"source":"When `_ReturnAddress` is used in a program compiled with [/clr](../build/reference/clr-common-language-runtime-compilation.md), the function containing the `_ReturnAddress` call will be compiled as a native function."},{"content":"When a function compiled as managed calls into the function containing <ph id=\"ph1\">`_ReturnAddress`</ph>, <ph id=\"ph2\">`_ReturnAddress`</ph> may not behave as expected.","pos":[1921,2054],"source":" When a function compiled as managed calls into the function containing `_ReturnAddress`, `_ReturnAddress` may not behave as expected."},{"content":"Requirements","pos":[2063,2075]},{"pos":[2079,2106],"content":"<bpt id=\"p1\">**</bpt>Header file<ept id=\"p1\">**</ept> <ph id=\"ph1\">\\&lt;</ph>intrin.h&gt;","source":"**Header file** \\<intrin.h>"},{"content":"Example","pos":[2115,2122]},{"content":"END Microsoft Specific","pos":[2705,2727]},{"content":"See Also","pos":[2736,2744]},{"content":"_AddressOfReturnAddress","pos":[2749,2772]},{"content":"Compiler Intrinsics","pos":[2820,2839]},{"content":"Keywords","pos":[2884,2892]}],"content":"---\ntitle: \"_ReturnAddress | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"_ReturnAddress\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"_ReturnAddress intrinsic\"\n  - \"ReturnAddress intrinsic\"\nms.assetid: 7f4a5811-35e6-4f64-ba7c-21203380eeda\ncaps.latest.revision: 8\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"ru-ru\"\n  - \"zh-cn\"\n  - \"zh-tw\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"tr-tr\"\n---\n# _ReturnAddress\n## Microsoft Specific  \n The `_ReturnAddress` intrinsic provides the address of the instruction in the calling function that will be executed after control returns to the caller.  \n  \n Build the following program and step through it in the debugger. As you step through the program, note the address that is returned from `_ReturnAddress`. Then, immediately after returning from the function where `_ReturnAddress` was used, open the [How to: Use the Disassembly Window](http://msdn.microsoft.com/Library/eaf84dd0-c82d-481b-af51-690b74e7794c) and note that the address of the next instruction to be executed matches the address returned from `_ReturnAddress`.  \n  \n Optimizations such as inlining may affect the return address. For example, if the sample program below is compiled with [/Ob1](../build/reference/ob-inline-function-expansion.md), `inline_func` will be inlined into the calling function, `main`. Therefore, the calls to `_ReturnAddress` from `inline_func` and `main` will each produce the same value.  \n  \n When `_ReturnAddress` is used in a program compiled with [/clr](../build/reference/clr-common-language-runtime-compilation.md), the function containing the `_ReturnAddress` call will be compiled as a native function. When a function compiled as managed calls into the function containing `_ReturnAddress`, `_ReturnAddress` may not behave as expected.  \n  \n## Requirements  \n **Header file** \\<intrin.h>  \n  \n## Example  \n  \n```  \n// compiler_intrinsics__ReturnAddress.cpp  \n#include <stdio.h>  \n#include <intrin.h>  \n  \n#pragma intrinsic(_ReturnAddress)  \n  \n__declspec(noinline)  \nvoid noinline_func(void)  \n{  \n   printf(\"Return address from %s: %p\\n\", __FUNCTION__, _ReturnAddress());  \n}  \n  \n__forceinline  \nvoid inline_func(void)  \n{  \n   printf(\"Return address from %s: %p\\n\", __FUNCTION__, _ReturnAddress());  \n}  \n  \nint main(void)  \n{  \n   noinline_func();   \n   inline_func();  \n   printf(\"Return address from %s: %p\\n\", __FUNCTION__, _ReturnAddress());  \n  \n   return 0;  \n}  \n```  \n  \n## END Microsoft Specific  \n  \n## See Also  \n [_AddressOfReturnAddress](../intrinsics/addressofreturnaddress.md)   \n [Compiler Intrinsics](../intrinsics/compiler-intrinsics.md)   \n [Keywords](../cpp/keywords-cpp.md)"}