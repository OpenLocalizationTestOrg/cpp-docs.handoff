{"nodes":[{"pos":[12,54],"content":"_strdup, _wcsdup, _mbsdup | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"_strdup, _wcsdup, _mbsdup | Microsoft Docs","pos":[0,42]}]},{"pos":[1378,1403],"content":"_strdup, _wcsdup, _mbsdup","linkify":"_strdup, _wcsdup, _mbsdup","nodes":[{"content":"_strdup, _wcsdup, _mbsdup","pos":[0,25]}]},{"content":"Duplicates strings.","pos":[1404,1423]},{"pos":[1431,1726],"content":"[!IMPORTANT]\n `_mbsdup` cannot be used in applications that execute in the                  [!INCLUDE[wrt](../../atl/reference/includes/wrt_md.md)]. For more information, see                  [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx).","leadings":["","> "],"nodes":[{"content":" `_mbsdup` cannot be used in applications that execute in the                  [!INCLUDE[wrt](../../atl/reference/includes/wrt_md.md)]. For more information, see                  [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx).","pos":[13,293],"nodes":[{"content":"<ph id=\"ph1\"> `_mbsdup`</ph> cannot be used in applications that execute in the                  <ph id=\"ph2\">[!INCLUDE[wrt](../../atl/reference/includes/wrt_md.md)]</ph>.","pos":[0,135],"source":" `_mbsdup` cannot be used in applications that execute in the                  [!INCLUDE[wrt](../../atl/reference/includes/wrt_md.md)]."},{"content":"For more information, see                  <bpt id=\"p1\">[</bpt>CRT functions not supported with /ZW<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx)</ept>.","pos":[136,280],"source":" For more information, see                  [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx)."}]}]},{"pos":[1735,1741],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1941,1951],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"Null-terminated source string.","pos":[1970,2000]},{"pos":[2009,2021],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"pos":[2025,2154],"content":"Each of these functions returns a pointer to the storage location for the copied string or <ph id=\"ph1\">`NULL`</ph> if storage cannot be allocated.","source":"Each of these functions returns a pointer to the storage location for the copied string or `NULL` if storage cannot be allocated."},{"pos":[2163,2170],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[2174,2360],"content":"The <ph id=\"ph1\">`_strdup`</ph> function calls <bpt id=\"p1\">[</bpt>malloc<ept id=\"p1\">](../../c-runtime-library/reference/malloc.md)</ept> to allocate storage space for a copy of <ph id=\"ph2\">`strSource`</ph> and then copies <ph id=\"ph3\">`strSource`</ph> to the allocated space.","source":"The `_strdup` function calls [malloc](../../c-runtime-library/reference/malloc.md) to allocate storage space for a copy of `strSource` and then copies `strSource` to the allocated space."},{"content":"<ph id=\"ph1\">`_wcsdup`</ph> and <ph id=\"ph2\">`_mbsdup`</ph> are wide-character and multibyte-character versions of <ph id=\"ph3\">`_strdup`</ph>.","pos":[2367,2456],"source":"`_wcsdup` and `_mbsdup` are wide-character and multibyte-character versions of `_strdup`."},{"content":"The arguments and return value of <ph id=\"ph1\">`_wcsdup`</ph> are wide-character strings; those of <ph id=\"ph2\">`_mbsdup`</ph> are multibyte-character strings.","pos":[2457,2580],"source":" The arguments and return value of `_wcsdup` are wide-character strings; those of `_mbsdup` are multibyte-character strings."},{"content":"These three functions behave identically otherwise.","pos":[2581,2632]},{"pos":[2642,2671],"content":"Generic-Text Routine Mappings","linkify":"Generic-Text Routine Mappings","nodes":[{"content":"Generic-Text Routine Mappings","pos":[0,29]}]},{"content":"TCHAR.H routine","pos":[2678,2693]},{"content":"_UNICODE &amp; _MBCS not defined","pos":[2694,2722],"source":"_UNICODE & _MBCS not defined"},{"content":"_MBCS defined","pos":[2723,2736]},{"content":"_UNICODE defined","pos":[2737,2753]},{"pos":[2913,3180],"content":"Because <ph id=\"ph1\">`_strdup`</ph> calls <ph id=\"ph2\">`malloc`</ph> to allocate storage space for the copy of <ph id=\"ph3\">`strSource`</ph>, it is good practice always to release this memory by calling the <bpt id=\"p1\">[</bpt>free<ept id=\"p1\">](../../c-runtime-library/reference/free.md)</ept> routine on the pointer that's returned by the call to <ph id=\"ph4\">`_strdup`</ph>.","source":"Because `_strdup` calls `malloc` to allocate storage space for the copy of `strSource`, it is good practice always to release this memory by calling the [free](../../c-runtime-library/reference/free.md) routine on the pointer that's returned by the call to `_strdup`."},{"content":"If <ph id=\"ph1\">`_DEBUG`</ph> and <ph id=\"ph2\">`_CRTDBG_MAP_ALLOC`</ph> are defined, <ph id=\"ph3\">`_strdup`</ph> and <ph id=\"ph4\">`_wcsdup`</ph> are replaced by calls to <ph id=\"ph5\">`_strdup_dbg`</ph> and <ph id=\"ph6\">`_wcsdup_dbg`</ph> to allow for debugging memory allocations.","pos":[3187,3359],"source":"If `_DEBUG` and `_CRTDBG_MAP_ALLOC` are defined, `_strdup` and `_wcsdup` are replaced by calls to `_strdup_dbg` and `_wcsdup_dbg` to allow for debugging memory allocations."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>_strdup_dbg, _wcsdup_dbg<ept id=\"p1\">](../../c-runtime-library/reference/strdup-dbg-wcsdup-dbg.md)</ept>.","pos":[3360,3473],"source":" For more information, see [_strdup_dbg, _wcsdup_dbg](../../c-runtime-library/reference/strdup-dbg-wcsdup-dbg.md)."},{"pos":[3482,3494],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"content":"Routine","pos":[3501,3508]},{"content":"Required header","pos":[3509,3524]},{"content":"<ph id=\"ph1\">\\&lt;</ph>string.h&gt;","pos":[3579,3590],"source":"\\<string.h>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>string.h&gt; or <ph id=\"ph2\">\\&lt;</ph>wchar.h&gt;","pos":[3605,3630],"source":"\\<string.h> or \\<wchar.h>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>mbstring.h&gt;","pos":[3645,3658],"source":"\\<mbstring.h>"},{"pos":[3666,3770],"content":"For additional compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept>.","source":"For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md)."},{"pos":[3779,3786],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[4212,4237],"content":".NET Framework Equivalent","linkify":".NET Framework Equivalent","nodes":[{"content":".NET Framework Equivalent","pos":[0,25]}]},{"pos":[4241,4331],"content":"<bpt id=\"p1\">[</bpt>System::String::Clone<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/system.string.clone.aspx)</ept>","source":"[System::String::Clone](https://msdn.microsoft.com/en-us/library/system.string.clone.aspx)"},{"pos":[4340,4348],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>String Manipulation<ept id=\"p1\">](../../c-runtime-library/string-manipulation-crt.md)</ept><ph id=\"ph1\"> </ph>","pos":[4352,4426],"source":"[String Manipulation](../../c-runtime-library/string-manipulation-crt.md) "},{"content":"<bpt id=\"p1\"> [</bpt>memset, wmemset<ept id=\"p1\">](../../c-runtime-library/reference/memset-wmemset.md)</ept><ph id=\"ph1\"> </ph>","pos":[4429,4501],"source":" [memset, wmemset](../../c-runtime-library/reference/memset-wmemset.md) "},{"content":"<bpt id=\"p1\"> [</bpt>strcat, wcscat, _mbscat<ept id=\"p1\">](../../c-runtime-library/reference/strcat-wcscat-mbscat.md)</ept><ph id=\"ph1\"> </ph>","pos":[4504,4590],"source":" [strcat, wcscat, _mbscat](../../c-runtime-library/reference/strcat-wcscat-mbscat.md) "},{"content":"<bpt id=\"p1\"> [</bpt>strcmp, wcscmp, _mbscmp<ept id=\"p1\">](../../c-runtime-library/reference/strcmp-wcscmp-mbscmp.md)</ept><ph id=\"ph1\"> </ph>","pos":[4593,4679],"source":" [strcmp, wcscmp, _mbscmp](../../c-runtime-library/reference/strcmp-wcscmp-mbscmp.md) "},{"content":"<bpt id=\"p1\"> [</bpt>strncat, _strncat_l, wcsncat, _wcsncat_l, _mbsncat, _mbsncat_l<ept id=\"p1\">](../../c-runtime-library/reference/strncat-strncat-l-wcsncat-wcsncat-l-mbsncat-mbsncat-l.md)</ept><ph id=\"ph1\"> </ph>","pos":[4682,4840],"source":" [strncat, _strncat_l, wcsncat, _wcsncat_l, _mbsncat, _mbsncat_l](../../c-runtime-library/reference/strncat-strncat-l-wcsncat-wcsncat-l-mbsncat-mbsncat-l.md) "},{"content":"<bpt id=\"p1\"> [</bpt>strncmp, wcsncmp, _mbsncmp, _mbsncmp_l<ept id=\"p1\">](../../c-runtime-library/reference/strncmp-wcsncmp-mbsncmp-mbsncmp-l.md)</ept><ph id=\"ph1\"> </ph>","pos":[4843,4957],"source":" [strncmp, wcsncmp, _mbsncmp, _mbsncmp_l](../../c-runtime-library/reference/strncmp-wcsncmp-mbsncmp-mbsncmp-l.md) "},{"content":"<bpt id=\"p1\"> [</bpt>strncpy, _strncpy_l, wcsncpy, _wcsncpy_l, _mbsncpy, _mbsncpy_l<ept id=\"p1\">](../../c-runtime-library/reference/strncpy-strncpy-l-wcsncpy-wcsncpy-l-mbsncpy-mbsncpy-l.md)</ept><ph id=\"ph1\"> </ph>","pos":[4960,5118],"source":" [strncpy, _strncpy_l, wcsncpy, _wcsncpy_l, _mbsncpy, _mbsncpy_l](../../c-runtime-library/reference/strncpy-strncpy-l-wcsncpy-wcsncpy-l-mbsncpy-mbsncpy-l.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_strnicmp, _wcsnicmp, _mbsnicmp, _strnicmp_l, _wcsnicmp_l, _mbsnicmp_l<ept id=\"p1\">](../../c-runtime-library/reference/strnicmp-wcsnicmp-mbsnicmp-strnicmp-l-wcsnicmp-l-mbsnicmp-l.md)</ept><ph id=\"ph1\"> </ph>","pos":[5121,5293],"source":" [_strnicmp, _wcsnicmp, _mbsnicmp, _strnicmp_l, _wcsnicmp_l, _mbsnicmp_l](../../c-runtime-library/reference/strnicmp-wcsnicmp-mbsnicmp-strnicmp-l-wcsnicmp-l-mbsnicmp-l.md) "},{"content":"<bpt id=\"p1\"> [</bpt>strrchr, wcsrchr, _mbsrchr, _mbsrchr_l<ept id=\"p1\">](../../c-runtime-library/reference/strrchr-wcsrchr-mbsrchr-mbsrchr-l.md)</ept><ph id=\"ph1\"> </ph>","pos":[5296,5410],"source":" [strrchr, wcsrchr, _mbsrchr, _mbsrchr_l](../../c-runtime-library/reference/strrchr-wcsrchr-mbsrchr-mbsrchr-l.md) "},{"content":"<bpt id=\"p1\"> [</bpt>strspn, wcsspn, _mbsspn, _mbsspn_l<ept id=\"p1\">](../../c-runtime-library/reference/strspn-wcsspn-mbsspn-mbsspn-l.md)</ept>","pos":[5413,5518],"source":" [strspn, wcsspn, _mbsspn, _mbsspn_l](../../c-runtime-library/reference/strspn-wcsspn-mbsspn-mbsspn-l.md)"}],"content":"---\ntitle: \"_strdup, _wcsdup, _mbsdup | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"_strdup\"\n  - \"_mbsdup\"\n  - \"_wcsdup\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\n  - \"api-ms-win-crt-multibyte-l1-1-0.dll\"\n  - \"api-ms-win-crt-string-l1-1-0.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"_tcsdup\"\n  - \"mbsdup\"\n  - \"_mbsdup\"\n  - \"_strdup\"\n  - \"_ftcsdup\"\n  - \"_wcsdup\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"wcsdup function\"\n  - \"ftcsdup function\"\n  - \"_ftcsdup function\"\n  - \"mbsdup function\"\n  - \"strdup function\"\n  - \"_strdup function\"\n  - \"_wcsdup function\"\n  - \"copying strings\"\n  - \"duplicating strings\"\n  - \"strings [C++], copying\"\n  - \"_mbsdup function\"\n  - \"strings [C++], duplicating\"\n  - \"tcsdup function\"\n  - \"_tcsdup function\"\nms.assetid: 8604f8bb-95e9-45d3-93ef-20397ebf247a\ncaps.latest.revision: 21\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# _strdup, _wcsdup, _mbsdup\nDuplicates strings.  \n  \n> [!IMPORTANT]\n>  `_mbsdup` cannot be used in applications that execute in the                  [!INCLUDE[wrt](../../atl/reference/includes/wrt_md.md)]. For more information, see                  [CRT functions not supported with /ZW](http://msdn.microsoft.com/library/windows/apps/jj606124.aspx).  \n  \n## Syntax  \n  \n```  \nchar *_strdup(  \n   const char *strSource   \n);  \nwchar_t *_wcsdup(  \n   const wchar_t *strSource   \n);  \nunsigned char *_mbsdup(  \n   const unsigned char *strSource   \n);  \n```  \n  \n#### Parameters  \n `strSource`  \n Null-terminated source string.  \n  \n## Return Value  \n Each of these functions returns a pointer to the storage location for the copied string or `NULL` if storage cannot be allocated.  \n  \n## Remarks  \n The `_strdup` function calls [malloc](../../c-runtime-library/reference/malloc.md) to allocate storage space for a copy of `strSource` and then copies `strSource` to the allocated space.  \n  \n `_wcsdup` and `_mbsdup` are wide-character and multibyte-character versions of `_strdup`. The arguments and return value of `_wcsdup` are wide-character strings; those of `_mbsdup` are multibyte-character strings. These three functions behave identically otherwise.  \n  \n### Generic-Text Routine Mappings  \n  \n|TCHAR.H routine|_UNICODE & _MBCS not defined|_MBCS defined|_UNICODE defined|  \n|---------------------|------------------------------------|--------------------|-----------------------|  \n|`_tcsdup`|`_strdup`|`_mbsdup`|`_wcsdup`|  \n  \n Because `_strdup` calls `malloc` to allocate storage space for the copy of `strSource`, it is good practice always to release this memory by calling the [free](../../c-runtime-library/reference/free.md) routine on the pointer that's returned by the call to `_strdup`.  \n  \n If `_DEBUG` and `_CRTDBG_MAP_ALLOC` are defined, `_strdup` and `_wcsdup` are replaced by calls to `_strdup_dbg` and `_wcsdup_dbg` to allow for debugging memory allocations. For more information, see [_strdup_dbg, _wcsdup_dbg](../../c-runtime-library/reference/strdup-dbg-wcsdup-dbg.md).  \n  \n## Requirements  \n  \n|Routine|Required header|  \n|-------------|---------------------|  \n|`_strdup`|\\<string.h>|  \n|`_wcsdup`|\\<string.h> or \\<wchar.h>|  \n|`_mbsdup`|\\<mbstring.h>|  \n  \n For additional compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md).  \n  \n## Example  \n  \n```  \n// crt_strdup.c  \n  \n#include <string.h>  \n#include <stdio.h>  \n  \nint main( void )  \n{  \n   char buffer[] = \"This is the buffer text\";  \n   char *newstring;  \n   printf( \"Original: %s\\n\", buffer );  \n   newstring = _strdup( buffer );  \n   printf( \"Copy:     %s\\n\", newstring );  \n   free( newstring );  \n}  \n```  \n  \n```Output  \nOriginal: This is the buffer text  \nCopy:     This is the buffer text  \n```  \n  \n## .NET Framework Equivalent  \n [System::String::Clone](https://msdn.microsoft.com/en-us/library/system.string.clone.aspx)  \n  \n## See Also  \n [String Manipulation](../../c-runtime-library/string-manipulation-crt.md)   \n [memset, wmemset](../../c-runtime-library/reference/memset-wmemset.md)   \n [strcat, wcscat, _mbscat](../../c-runtime-library/reference/strcat-wcscat-mbscat.md)   \n [strcmp, wcscmp, _mbscmp](../../c-runtime-library/reference/strcmp-wcscmp-mbscmp.md)   \n [strncat, _strncat_l, wcsncat, _wcsncat_l, _mbsncat, _mbsncat_l](../../c-runtime-library/reference/strncat-strncat-l-wcsncat-wcsncat-l-mbsncat-mbsncat-l.md)   \n [strncmp, wcsncmp, _mbsncmp, _mbsncmp_l](../../c-runtime-library/reference/strncmp-wcsncmp-mbsncmp-mbsncmp-l.md)   \n [strncpy, _strncpy_l, wcsncpy, _wcsncpy_l, _mbsncpy, _mbsncpy_l](../../c-runtime-library/reference/strncpy-strncpy-l-wcsncpy-wcsncpy-l-mbsncpy-mbsncpy-l.md)   \n [_strnicmp, _wcsnicmp, _mbsnicmp, _strnicmp_l, _wcsnicmp_l, _mbsnicmp_l](../../c-runtime-library/reference/strnicmp-wcsnicmp-mbsnicmp-strnicmp-l-wcsnicmp-l-mbsnicmp-l.md)   \n [strrchr, wcsrchr, _mbsrchr, _mbsrchr_l](../../c-runtime-library/reference/strrchr-wcsrchr-mbsrchr-mbsrchr-l.md)   \n [strspn, wcsspn, _mbsspn, _mbsspn_l](../../c-runtime-library/reference/strspn-wcsspn-mbsspn-mbsspn-l.md)"}