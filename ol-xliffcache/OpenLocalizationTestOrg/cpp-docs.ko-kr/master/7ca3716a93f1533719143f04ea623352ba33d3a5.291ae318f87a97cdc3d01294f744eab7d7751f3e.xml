{"nodes":[{"pos":[12,71],"content":"How to: Use transformer in a Data Pipeline | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"How to: Use transformer in a Data Pipeline | Microsoft Docs","pos":[0,59]}]},{"content":"How to: Use transformer in a Data Pipeline","pos":[759,801]},{"content":"This topic contains a basic example that shows how to use the <bpt id=\"p1\">[</bpt>concurrency::transformer<ept id=\"p1\">](../../parallel/concrt/reference/transformer-class.md)</ept> class in a data pipeline.","pos":[802,970],"source":"This topic contains a basic example that shows how to use the [concurrency::transformer](../../parallel/concrt/reference/transformer-class.md) class in a data pipeline."},{"content":"For a more complete example that uses a data pipeline to perform image processing, see <bpt id=\"p1\">[</bpt>Walkthrough: Creating an Image-Processing Network<ept id=\"p1\">](../../parallel/concrt/walkthrough-creating-an-image-processing-network.md)</ept>.","pos":[971,1185],"source":" For a more complete example that uses a data pipeline to perform image processing, see [Walkthrough: Creating an Image-Processing Network](../../parallel/concrt/walkthrough-creating-an-image-processing-network.md)."},{"content":"<bpt id=\"p1\">*</bpt>Data pipelining<ept id=\"p1\">*</ept> is a common pattern in concurrent programming.","pos":[1192,1256],"source":"*Data pipelining* is a common pattern in concurrent programming."},{"content":"A data pipeline consists of a series of stages, where each stage performs work and then passes the result of that work to the next stage.","pos":[1257,1394]},{"content":"The <ph id=\"ph1\">`transformer`</ph> class a key component in data pipelines because it receives an input value, performs work on that value, and then produces a result for another component to use.","pos":[1395,1574],"source":" The `transformer` class a key component in data pipelines because it receives an input value, performs work on that value, and then produces a result for another component to use."},{"content":"Example","pos":[1583,1590]},{"content":"This example uses the following data pipeline to perform a series of transformations given an initial input value:","pos":[1594,1708]},{"content":"The first stage calculates the absolute value of its input.","pos":[1718,1777]},{"content":"The second stage calculates the square root of its input.","pos":[1787,1844]},{"content":"The third stage computes the square of its input.","pos":[1854,1903]},{"content":"The forth stage negates its input.","pos":[1913,1947]},{"content":"The fifth stage writes the final result to a message buffer.","pos":[1957,2017]},{"content":"Finally, the example prints the result of the pipeline to the console.","pos":[2024,2094]},{"pos":[2112,2134],"content":"concrt-data-pipeline#1"},{"content":"This example produces the following output:","pos":[2230,2273]},{"content":"It is common for a stage in a data pipeline to output a value whose type differs from its input value.","pos":[2322,2424]},{"content":"In this example, the second stage takes a value of type <ph id=\"ph1\">`int`</ph> as its input and produces the square root of that value (a <ph id=\"ph2\">`double`</ph>) as its output.","pos":[2425,2570],"source":" In this example, the second stage takes a value of type `int` as its input and produces the square root of that value (a `double`) as its output."},{"pos":[2578,2812],"content":"[!NOTE]\n The data pipeline in this example is for illustration. Because each transformation operation performs little work, the overhead that is required to perform message-passing can outweigh the benefits of using a data pipeline.","leadings":["","> "],"nodes":[{"content":" The data pipeline in this example is for illustration. Because each transformation operation performs little work, the overhead that is required to perform message-passing can outweigh the benefits of using a data pipeline.","pos":[8,232],"nodes":[{"content":"The data pipeline in this example is for illustration.","pos":[1,55]},{"content":"Because each transformation operation performs little work, the overhead that is required to perform message-passing can outweigh the benefits of using a data pipeline.","pos":[56,224]}]}]},{"content":"Compiling the Code","pos":[2821,2839]},{"pos":[2843,3038],"content":"Copy the example code and paste it in a Visual Studio project, or paste it in a file that is named <ph id=\"ph1\">`data-pipeline.cpp`</ph> and then run the following command in a Visual Studio Command Prompt window.","source":"Copy the example code and paste it in a Visual Studio project, or paste it in a file that is named `data-pipeline.cpp` and then run the following command in a Visual Studio Command Prompt window."},{"content":"cl.exe /EHsc data-pipeline.cpp","pos":[3047,3077]},{"content":"See Also","pos":[3088,3096]},{"content":"Asynchronous Agents Library","pos":[3101,3128]},{"content":"Asynchronous Message Blocks","pos":[3189,3216]},{"content":"Walkthrough: Creating an Image-Processing Network","pos":[3277,3326]}],"content":"---\ntitle: \"How to: Use transformer in a Data Pipeline | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"transformer class, example\"\n  - \"data pipelines, using transformer [Concurrency Runtime]\"\n  - \"using transformer in data pipelines [Concurrency Runtime]\"\nms.assetid: ca49cb3f-4dab-4b09-a9c9-d3a109ae4c29\ncaps.latest.revision: 16\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"ru-ru\"\n  - \"zh-cn\"\n  - \"zh-tw\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"tr-tr\"\n---\n# How to: Use transformer in a Data Pipeline\nThis topic contains a basic example that shows how to use the [concurrency::transformer](../../parallel/concrt/reference/transformer-class.md) class in a data pipeline. For a more complete example that uses a data pipeline to perform image processing, see [Walkthrough: Creating an Image-Processing Network](../../parallel/concrt/walkthrough-creating-an-image-processing-network.md).  \n  \n *Data pipelining* is a common pattern in concurrent programming. A data pipeline consists of a series of stages, where each stage performs work and then passes the result of that work to the next stage. The `transformer` class a key component in data pipelines because it receives an input value, performs work on that value, and then produces a result for another component to use.  \n  \n## Example  \n This example uses the following data pipeline to perform a series of transformations given an initial input value:  \n  \n1.  The first stage calculates the absolute value of its input.  \n  \n2.  The second stage calculates the square root of its input.  \n  \n3.  The third stage computes the square of its input.  \n  \n4.  The forth stage negates its input.  \n  \n5.  The fifth stage writes the final result to a message buffer.  \n  \n Finally, the example prints the result of the pipeline to the console.  \n  \n [!code-cpp[concrt-data-pipeline#1](../../parallel/concrt/codesnippet/cpp/how-to-use-transformer-in-a-data-pipeline_1.cpp)]  \n  \n This example produces the following output:  \n  \n```Output  \nThe result is -42.  \n```  \n  \n It is common for a stage in a data pipeline to output a value whose type differs from its input value. In this example, the second stage takes a value of type `int` as its input and produces the square root of that value (a `double`) as its output.  \n  \n> [!NOTE]\n>  The data pipeline in this example is for illustration. Because each transformation operation performs little work, the overhead that is required to perform message-passing can outweigh the benefits of using a data pipeline.  \n  \n## Compiling the Code  \n Copy the example code and paste it in a Visual Studio project, or paste it in a file that is named `data-pipeline.cpp` and then run the following command in a Visual Studio Command Prompt window.  \n  \n **cl.exe /EHsc data-pipeline.cpp**  \n  \n## See Also  \n [Asynchronous Agents Library](../../parallel/concrt/asynchronous-agents-library.md)   \n [Asynchronous Message Blocks](../../parallel/concrt/asynchronous-message-blocks.md)   \n [Walkthrough: Creating an Image-Processing Network](../../parallel/concrt/walkthrough-creating-an-image-processing-network.md)\n\n"}