{"nodes":[{"pos":[12,49],"content":"Compiler Error C3899 | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Compiler Error C3899 | Microsoft Docs","pos":[0,37]}]},{"content":"Compiler Error C3899","pos":[597,617]},{"content":"'var' : l-value use of initonly data member is not allowed directly within a parallel region in class 'class'","pos":[618,727]},{"content":"An <bpt id=\"p1\">[</bpt>initonly (C++/CLI)<ept id=\"p1\">](../../dotnet/initonly-cpp-cli.md)</ept> data member cannot be initialized inside that part of a constructor that is in a <bpt id=\"p2\">[</bpt>parallel<ept id=\"p2\">](../../parallel/openmp/reference/parallel.md)</ept> region.","pos":[734,936],"source":"An [initonly (C++/CLI)](../../dotnet/initonly-cpp-cli.md) data member cannot be initialized inside that part of a constructor that is in a [parallel](../../parallel/openmp/reference/parallel.md) region."},{"content":"This is because the compiler does an internal relocation of that code, such that, it is effectively no longer part of the constructor.","pos":[938,1072]},{"content":"To resolve, initialize the initonly data member in the constructor, but outside the parallel region.","pos":[1079,1179]},{"content":"Example","pos":[1188,1195]},{"content":"The following sample generates C3899.","pos":[1199,1236]}],"content":"---\ntitle: \"Compiler Error C3899 | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"error-reference\"\nf1_keywords: \n  - \"C3899\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"C3899\"\nms.assetid: 14e07e4a-f7a7-4309-baaa-649d69e12e23\ncaps.latest.revision: 5\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Compiler Error C3899\n'var' : l-value use of initonly data member is not allowed directly within a parallel region in class 'class'  \n  \n An [initonly (C++/CLI)](../../dotnet/initonly-cpp-cli.md) data member cannot be initialized inside that part of a constructor that is in a [parallel](../../parallel/openmp/reference/parallel.md) region.  This is because the compiler does an internal relocation of that code, such that, it is effectively no longer part of the constructor.  \n  \n To resolve, initialize the initonly data member in the constructor, but outside the parallel region.  \n  \n## Example  \n The following sample generates C3899.  \n  \n```  \n// C3899.cpp  \n// compile with: /clr /openmp  \n#include <omp.h>   \n  \npublic ref struct R {  \n   initonly int x;  \n   R() {  \n      x = omp_get_thread_num() + 1000;   // OK  \n      #pragma omp parallel num_threads(5)  \n      {  \n         // cannot assign to 'x' here  \n         x = omp_get_thread_num() + 1000;   // C3899  \n         System::Console::WriteLine(\"thread {0}\", omp_get_thread_num());  \n      }  \n      x = omp_get_thread_num() + 1000;   // OK  \n   }  \n};  \n  \nint main() {  \n   R^ r = gcnew R;  \n   System::Console::WriteLine(r->x);  \n}  \n```"}