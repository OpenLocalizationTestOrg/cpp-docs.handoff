{"nodes":[{"pos":[12,40],"content":"CSacl Class | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"CSacl Class | Microsoft Docs","pos":[0,28]}]},{"content":"CSacl Class","pos":[622,633]},{"content":"This class is a wrapper for a SACL (system access-control list) structure.","pos":[634,708]},{"pos":[716,826],"content":"[!IMPORTANT]\n This class and its members cannot be used in applications that execute in the Windows Runtime.","leadings":["","> "],"nodes":[{"content":"This class and its members cannot be used in applications that execute in the Windows Runtime.","pos":[14,108]}]},{"content":"Syntax","pos":[835,841]},{"content":"Members","pos":[889,896]},{"content":"Public Constructors","pos":[906,925]},{"content":"Name","pos":[932,936]},{"content":"Description","pos":[937,948]},{"content":"CSacl::CSacl","pos":[987,999]},{"content":"The constructor.","pos":[1016,1032]},{"content":"CSacl::~CSacl","pos":[1038,1051]},{"content":"The destructor.","pos":[1073,1088]},{"content":"Public Methods","pos":[1099,1113]},{"content":"Name","pos":[1120,1124]},{"content":"Description","pos":[1125,1136]},{"content":"CSacl::AddAuditAce","pos":[1175,1193]},{"pos":[1216,1279],"content":"Adds an audit access-control entry (ACE) to the <ph id=\"ph1\">`CSacl`</ph> object.","source":"Adds an audit access-control entry (ACE) to the `CSacl` object."},{"content":"CSacl::GetAceCount","pos":[1285,1303]},{"pos":[1326,1400],"content":"Returns the number of access-control entries (ACEs) in the <ph id=\"ph1\">`CSacl`</ph> object.","source":"Returns the number of access-control entries (ACEs) in the `CSacl` object."},{"content":"CSacl::RemoveAce","pos":[1406,1422]},{"pos":[1443,1515],"content":"Removes a specific ACE (access-control entry) from the <bpt id=\"p1\">**</bpt>CSacl<ept id=\"p1\">**</ept> object.","source":"Removes a specific ACE (access-control entry) from the **CSacl** object."},{"content":"CSacl::RemoveAllAces","pos":[1521,1541]},{"pos":[1566,1622],"content":"Removes all of the ACEs contained in the <ph id=\"ph1\">`CSacl`</ph> object.","source":"Removes all of the ACEs contained in the `CSacl` object."},{"content":"Public Operators","pos":[1633,1649]},{"content":"Name","pos":[1656,1660]},{"content":"Description","pos":[1661,1672]},{"content":"CSacl::operator =","pos":[1711,1728]},{"content":"Assignment operator.","pos":[1751,1771]},{"content":"Remarks","pos":[1781,1788]},{"content":"A SACL contains access-control entries (ACEs) that specify the types of access attempts that generate audit records in the security event log of a domain controller.","pos":[1792,1957]},{"content":"Note that a SACL generates log entries only on the domain controller where the access attempt occurred, not on every domain controller that contains a replica of the object.","pos":[1958,2131]},{"content":"To set or retrieve the SACL in an object's security descriptor, the SE_SECURITY_NAME privilege must be enabled in the access token of the requesting thread.","pos":[2138,2294]},{"content":"The administrators group has this privilege granted by default, and it can be granted to other users or groups.","pos":[2295,2406]},{"content":"Having the privilege granted is not all that is required: before the operation defined by the privilege can be performed, the privilege must be enabled in the security access token in order to take effect.","pos":[2407,2612]},{"content":"The model allows privileges to be enabled only for specific system operations, and then disabled when they are no longer needed.","pos":[2613,2741]},{"content":"See <bpt id=\"p1\">[</bpt>AtlGetSacl<ept id=\"p1\">](http://msdn.microsoft.com/library/1d69611f-d8a7-467b-9d57-cbe2f1610bf8)</ept> and <bpt id=\"p2\">[</bpt>AtlSetSacl<ept id=\"p2\">](http://msdn.microsoft.com/library/54daab9a-8c69-45fd-86c4-18eb30d59547)</ept> for examples of enabling SE_SECURITY_NAME.","pos":[2742,2962],"source":" See [AtlGetSacl](http://msdn.microsoft.com/library/1d69611f-d8a7-467b-9d57-cbe2f1610bf8) and [AtlSetSacl](http://msdn.microsoft.com/library/54daab9a-8c69-45fd-86c4-18eb30d59547) for examples of enabling SE_SECURITY_NAME."},{"content":"Use the class methods provided to add, remove, create, and delete ACEs from the <bpt id=\"p1\">**</bpt>SACL<ept id=\"p1\">**</ept> object.","pos":[2969,3065],"source":"Use the class methods provided to add, remove, create, and delete ACEs from the **SACL** object."},{"content":"See also <bpt id=\"p1\">[</bpt>AtlGetSacl<ept id=\"p1\">](http://msdn.microsoft.com/library/1d69611f-d8a7-467b-9d57-cbe2f1610bf8)</ept> and <bpt id=\"p2\">[</bpt>AtlSetSacl<ept id=\"p2\">](http://msdn.microsoft.com/library/54daab9a-8c69-45fd-86c4-18eb30d59547)</ept>.","pos":[3066,3249],"source":" See also [AtlGetSacl](http://msdn.microsoft.com/library/1d69611f-d8a7-467b-9d57-cbe2f1610bf8) and [AtlSetSacl](http://msdn.microsoft.com/library/54daab9a-8c69-45fd-86c4-18eb30d59547)."},{"pos":[3256,3456],"content":"For an introduction to the access control model in Windows, see <bpt id=\"p1\">[</bpt>Access Control<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa374860)</ept> in the <ph id=\"ph1\">[!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)]</ph>.","source":"For an introduction to the access control model in Windows, see [Access Control](http://msdn.microsoft.com/library/windows/desktop/aa374860) in the [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)]."},{"content":"Inheritance Hierarchy","pos":[3465,3486]},{"content":"CAcl","pos":[3491,3495]},{"content":"Requirements","pos":[3554,3566]},{"pos":[3570,3595],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> atlsecurity.h","source":"**Header:** atlsecurity.h"},{"pos":[3640,3658],"content":"CSacl::AddAuditAce"},{"pos":[3662,3725],"content":"Adds an audit access-control entry (ACE) to the <ph id=\"ph1\">`CSacl`</ph> object.","source":"Adds an audit access-control entry (ACE) to the `CSacl` object."},{"content":"Parameters","pos":[4098,4108]},{"content":"The <bpt id=\"p1\">[</bpt>CSid<ept id=\"p1\">](../../atl/reference/csid-class.md)</ept> object.","pos":[4122,4175],"source":" The [CSid](../../atl/reference/csid-class.md) object."},{"content":"Specifies the mask of access rights to be audited for the specified <ph id=\"ph1\">`CSid`</ph> object.","pos":[4198,4280],"source":" Specifies the mask of access rights to be audited for the specified `CSid` object."},{"content":"Specifies whether allowed access attempts are to be audited.","pos":[4301,4361]},{"content":"Set this flag to true to enable auditing; otherwise, set it to false.","pos":[4362,4431]},{"content":"bFailure","pos":[4439,4447]},{"content":"Specifies whether denied access attempts are to be audited.","pos":[4452,4511]},{"content":"Set this flag to true to enable auditing; otherwise, set it to false.","pos":[4512,4581]},{"content":"A set of bit flags that control ACE inheritance.","pos":[4602,4650]},{"content":"The object type.","pos":[4674,4690]},{"content":"The inherited object type.","pos":[4723,4749]},{"content":"Return Value","pos":[4759,4771]},{"pos":[4775,4856],"content":"Returns <bpt id=\"p1\">**</bpt>true<ept id=\"p1\">**</ept> if the ACE is added to the <ph id=\"ph1\">`CSacl`</ph> object, <bpt id=\"p2\">**</bpt>false<ept id=\"p2\">**</ept> on failure.","source":"Returns **true** if the ACE is added to the `CSacl` object, **false** on failure."},{"content":"Remarks","pos":[4866,4873]},{"content":"A <ph id=\"ph1\">`CSacl`</ph> object contains access-control entries (ACEs) that specify the types of access attempts that generate audit records in the security event log.","pos":[4877,5029],"source":"A `CSacl` object contains access-control entries (ACEs) that specify the types of access attempts that generate audit records in the security event log."},{"content":"This method adds such an ACE to the <ph id=\"ph1\">`CSacl`</ph> object.","pos":[5030,5081],"source":" This method adds such an ACE to the `CSacl` object."},{"content":"The second form of <ph id=\"ph1\">`AddAuditAce`</ph> is only available on Windows 2000 and later.","pos":[5082,5159],"source":" The second form of `AddAuditAce` is only available on Windows 2000 and later."},{"pos":[5166,5327],"content":"See <bpt id=\"p1\">[</bpt>ACE_HEADER<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/desktop/aa374919)</ept> for a description of the various flags which can be set in the <ph id=\"ph1\">`AceFlags`</ph> parameter.","source":"See [ACE_HEADER](http://msdn.microsoft.com/library/windows/desktop/aa374919) for a description of the various flags which can be set in the `AceFlags` parameter."},{"pos":[5366,5378],"content":"CSacl::CSacl"},{"content":"The constructor.","pos":[5382,5398]},{"content":"Parameters","pos":[5472,5482]},{"content":"An existing <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept> (access-control list) structure.","pos":[5495,5547],"source":" An existing **ACL** (access-control list) structure."},{"content":"Remarks","pos":[5557,5564]},{"content":"The <ph id=\"ph1\">`CSacl`</ph> object can be optionally created using an existing <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept> structure.","pos":[5568,5649],"source":"The `CSacl` object can be optionally created using an existing **ACL** structure."},{"content":"Ensure that this parameter is a system access-control list (SACL) and not a discretionary access-control list (DACL).","pos":[5650,5767]},{"content":"In debug builds, if a DACL is supplied an assertion will occur.","pos":[5768,5831]},{"content":"In release builds any entries from a DACL are ignored.","pos":[5832,5886]},{"pos":[5930,5943],"content":"CSacl::~CSacl"},{"content":"The destructor.","pos":[5947,5962]},{"content":"Remarks","pos":[6003,6010]},{"content":"The destructor frees any resources acquired by the object, including all access-control entries (ACEs).","pos":[6014,6117]},{"pos":[6162,6180],"content":"CSacl::GetAceCount"},{"pos":[6184,6258],"content":"Returns the number of access-control entries (ACEs) in the <ph id=\"ph1\">`CSacl`</ph> object.","source":"Returns the number of access-control entries (ACEs) in the `CSacl` object."},{"content":"Return Value","pos":[6315,6327]},{"pos":[6331,6390],"content":"Returns the number of ACEs contained in the <ph id=\"ph1\">`CSacl`</ph> object.","source":"Returns the number of ACEs contained in the `CSacl` object."},{"pos":[6435,6452],"content":"CSacl::operator ="},{"content":"Assignment operator.","pos":[6456,6476]},{"content":"Parameters","pos":[6544,6554]},{"content":"The <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept> (access-control list) to assign to the existing object.","pos":[6567,6634],"source":" The **ACL** (access-control list) to assign to the existing object."},{"content":"Return Value","pos":[6644,6656]},{"content":"Returns a reference to the updated <ph id=\"ph1\">`CSacl`</ph> object.","pos":[6660,6710],"source":"Returns a reference to the updated `CSacl` object."},{"content":"Ensure that the <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept> parameter is actually a system access-control list (SACL) and not a discretionary access-control list (DACL).","pos":[6711,6844],"source":" Ensure that the **ACL** parameter is actually a system access-control list (SACL) and not a discretionary access-control list (DACL)."},{"content":"In debug builds an assertion will occur, and in release builds the <bpt id=\"p1\">**</bpt>ACL<ept id=\"p1\">**</ept> parameter will be ignored.","pos":[6845,6946],"source":" In debug builds an assertion will occur, and in release builds the **ACL** parameter will be ignored."},{"pos":[6989,7005],"content":"CSacl::RemoveAce"},{"pos":[7009,7081],"content":"Removes a specific ACE (access-control entry) from the <bpt id=\"p1\">**</bpt>CSacl<ept id=\"p1\">**</ept> object.","source":"Removes a specific ACE (access-control entry) from the **CSacl** object."},{"content":"Parameters","pos":[7143,7153]},{"content":"Index to the ACE entry to remove.","pos":[7169,7202]},{"content":"Remarks","pos":[7212,7219]},{"pos":[7223,7333],"content":"This method is derived from <bpt id=\"p1\">[</bpt>CAtlArray::RemoveAt<ept id=\"p1\">](../../atl/reference/catlarray-class.md#catlarray__removeat)</ept>.","source":"This method is derived from [CAtlArray::RemoveAt](../../atl/reference/catlarray-class.md#catlarray__removeat)."},{"pos":[7380,7400],"content":"CSacl::RemoveAllAces"},{"pos":[7404,7485],"content":"Removes all of the access-control entries (ACEs) contained in the <ph id=\"ph1\">`CSacl`</ph> object.","source":"Removes all of the access-control entries (ACEs) contained in the `CSacl` object."},{"content":"Remarks","pos":[7538,7545]},{"pos":[7549,7612],"content":"Removes every <bpt id=\"p1\">**</bpt>ACE<ept id=\"p1\">**</ept> structure (if any) in the <ph id=\"ph1\">`CSacl`</ph> object.","source":"Removes every **ACE** structure (if any) in the `CSacl` object."},{"content":"See Also","pos":[7621,7629]},{"content":"CAcl Class","pos":[7634,7644]},{"content":"ACLs","pos":[7686,7690]},{"content":"ACEs","pos":[7757,7761]},{"content":"Class Overview","pos":[7828,7842]},{"content":"Security Global Functions","pos":[7882,7907]}],"content":"---\ntitle: \"CSacl Class | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"reference\"\nf1_keywords: \n  - \"ATL.CSacl\"\n  - \"ATL::CSacl\"\n  - \"CSacl\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"CSacl class\"\nms.assetid: 8624889b-aebc-4183-9d29-a20f07837f05\ncaps.latest.revision: 22\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# CSacl Class\nThis class is a wrapper for a SACL (system access-control list) structure.  \n  \n> [!IMPORTANT]\n>  This class and its members cannot be used in applications that execute in the Windows Runtime.  \n  \n## Syntax  \n  \n```\nclass CSacl : public CAcl\n```  \n  \n## Members  \n  \n### Public Constructors  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CSacl::CSacl](#csacl__csacl)|The constructor.|  \n|[CSacl::~CSacl](#csacl___dtorcsacl)|The destructor.|  \n  \n### Public Methods  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CSacl::AddAuditAce](#csacl__addauditace)|Adds an audit access-control entry (ACE) to the `CSacl` object.|  \n|[CSacl::GetAceCount](#csacl__getacecount)|Returns the number of access-control entries (ACEs) in the `CSacl` object.|  \n|[CSacl::RemoveAce](#csacl__removeace)|Removes a specific ACE (access-control entry) from the **CSacl** object.|  \n|[CSacl::RemoveAllAces](#csacl__removeallaces)|Removes all of the ACEs contained in the `CSacl` object.|  \n  \n### Public Operators  \n  \n|Name|Description|  \n|----------|-----------------|  \n|[CSacl::operator =](#csacl__operator_eq)|Assignment operator.|  \n  \n## Remarks  \n A SACL contains access-control entries (ACEs) that specify the types of access attempts that generate audit records in the security event log of a domain controller. Note that a SACL generates log entries only on the domain controller where the access attempt occurred, not on every domain controller that contains a replica of the object.  \n  \n To set or retrieve the SACL in an object's security descriptor, the SE_SECURITY_NAME privilege must be enabled in the access token of the requesting thread. The administrators group has this privilege granted by default, and it can be granted to other users or groups. Having the privilege granted is not all that is required: before the operation defined by the privilege can be performed, the privilege must be enabled in the security access token in order to take effect. The model allows privileges to be enabled only for specific system operations, and then disabled when they are no longer needed. See [AtlGetSacl](http://msdn.microsoft.com/library/1d69611f-d8a7-467b-9d57-cbe2f1610bf8) and [AtlSetSacl](http://msdn.microsoft.com/library/54daab9a-8c69-45fd-86c4-18eb30d59547) for examples of enabling SE_SECURITY_NAME.  \n  \n Use the class methods provided to add, remove, create, and delete ACEs from the **SACL** object. See also [AtlGetSacl](http://msdn.microsoft.com/library/1d69611f-d8a7-467b-9d57-cbe2f1610bf8) and [AtlSetSacl](http://msdn.microsoft.com/library/54daab9a-8c69-45fd-86c4-18eb30d59547).  \n  \n For an introduction to the access control model in Windows, see [Access Control](http://msdn.microsoft.com/library/windows/desktop/aa374860) in the [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  \n  \n## Inheritance Hierarchy  \n [CAcl](../../atl/reference/cacl-class.md)  \n  \n `CSacl`  \n  \n## Requirements  \n **Header:** atlsecurity.h  \n  \n##  <a name=\"csacl__addauditace\"></a>  CSacl::AddAuditAce  \n Adds an audit access-control entry (ACE) to the `CSacl` object.  \n  \n```\nbool AddAuditAce(\n    const CSid& rSid,\n    ACCESS_MASK AccessMask,\n    bool bSuccess,\n    bool bFailure,\n    BYTE AceFlags = 0) throw(...);\n\n    bool AddAuditAce(\n    const CSid& rSid,\n    ACCESS_MASK AccessMask,\n    bool bSuccess,\n    bool bFailure,\n    BYTE AceFlags,\n    const GUID* pObjectType,\n    const GUID* pInheritedObjectType) throw(...);\n```  \n  \n### Parameters  \n `rSid`  \n The [CSid](../../atl/reference/csid-class.md) object.  \n  \n `AccessMask`  \n Specifies the mask of access rights to be audited for the specified `CSid` object.  \n  \n `bSuccess`  \n Specifies whether allowed access attempts are to be audited. Set this flag to true to enable auditing; otherwise, set it to false.  \n  \n *bFailure*  \n Specifies whether denied access attempts are to be audited. Set this flag to true to enable auditing; otherwise, set it to false.  \n  \n `AceFlags`  \n A set of bit flags that control ACE inheritance.  \n  \n `pObjectType`  \n The object type.  \n  \n `pInheritedObjectType`  \n The inherited object type.  \n  \n### Return Value  \n Returns **true** if the ACE is added to the `CSacl` object, **false** on failure.  \n  \n### Remarks  \n A `CSacl` object contains access-control entries (ACEs) that specify the types of access attempts that generate audit records in the security event log. This method adds such an ACE to the `CSacl` object. The second form of `AddAuditAce` is only available on Windows 2000 and later.  \n  \n See [ACE_HEADER](http://msdn.microsoft.com/library/windows/desktop/aa374919) for a description of the various flags which can be set in the `AceFlags` parameter.  \n  \n##  <a name=\"csacl__csacl\"></a>  CSacl::CSacl  \n The constructor.  \n  \n```\nCSacl() throw();\nCSacl(const ACL& rhs) throw(...);\n```  \n  \n### Parameters  \n `rhs`  \n An existing **ACL** (access-control list) structure.  \n  \n### Remarks  \n The `CSacl` object can be optionally created using an existing **ACL** structure. Ensure that this parameter is a system access-control list (SACL) and not a discretionary access-control list (DACL). In debug builds, if a DACL is supplied an assertion will occur. In release builds any entries from a DACL are ignored.  \n  \n##  <a name=\"csacl___dtorcsacl\"></a>  CSacl::~CSacl  \n The destructor.  \n  \n```\n~CSacl() throw();\n```  \n  \n### Remarks  \n The destructor frees any resources acquired by the object, including all access-control entries (ACEs).  \n  \n##  <a name=\"csacl__getacecount\"></a>  CSacl::GetAceCount  \n Returns the number of access-control entries (ACEs) in the `CSacl` object.  \n  \n```\nUINT GetAceCount() const throw();\n```  \n  \n### Return Value  \n Returns the number of ACEs contained in the `CSacl` object.  \n  \n##  <a name=\"csacl__operator_eq\"></a>  CSacl::operator =  \n Assignment operator.  \n  \n```\nCSacl& operator=(const ACL& rhs) throw(...);\n```  \n  \n### Parameters  \n `rhs`  \n The **ACL** (access-control list) to assign to the existing object.  \n  \n### Return Value  \n Returns a reference to the updated `CSacl` object. Ensure that the **ACL** parameter is actually a system access-control list (SACL) and not a discretionary access-control list (DACL). In debug builds an assertion will occur, and in release builds the **ACL** parameter will be ignored.  \n  \n##  <a name=\"csacl__removeace\"></a>  CSacl::RemoveAce  \n Removes a specific ACE (access-control entry) from the **CSacl** object.  \n  \n```\nvoid RemoveAce(UINT   nIndex) throw();\n```  \n  \n### Parameters  \n `nIndex`  \n Index to the ACE entry to remove.  \n  \n### Remarks  \n This method is derived from [CAtlArray::RemoveAt](../../atl/reference/catlarray-class.md#catlarray__removeat).  \n  \n##  <a name=\"csacl__removeallaces\"></a>  CSacl::RemoveAllAces  \n Removes all of the access-control entries (ACEs) contained in the `CSacl` object.  \n  \n```\nvoid RemoveAllAces() throw();\n```  \n  \n### Remarks  \n Removes every **ACE** structure (if any) in the `CSacl` object.  \n  \n## See Also  \n [CAcl Class](../../atl/reference/cacl-class.md)   \n [ACLs](http://msdn.microsoft.com/library/windows/desktop/aa374872)   \n [ACEs](http://msdn.microsoft.com/library/windows/desktop/aa374868)   \n [Class Overview](../../atl/atl-class-overview.md)   \n [Security Global Functions](../../atl/reference/security-global-functions.md)\n"}