{"nodes":[{"pos":[12,42],"content":"_open, _wopen | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"_open, _wopen | Microsoft Docs","pos":[0,30]}]},{"pos":[1111,1124],"content":"_open, _wopen","linkify":"_open, _wopen","nodes":[{"content":"_open, _wopen","pos":[0,13]}]},{"content":"Opens a file.","pos":[1125,1138]},{"content":"These functions are deprecated because more-secure versions are available; see <bpt id=\"p1\">[</bpt>_sopen_s, _wsopen_s<ept id=\"p1\">](../../c-runtime-library/reference/sopen-s-wsopen-s.md)</ept>.","pos":[1139,1295],"source":" These functions are deprecated because more-secure versions are available; see [_sopen_s, _wsopen_s](../../c-runtime-library/reference/sopen-s-wsopen-s.md)."},{"pos":[1304,1310],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1500,1510],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"File name.","pos":[1528,1538]},{"content":"The kind of operations allowed.","pos":[1556,1587]},{"content":"Permission mode.","pos":[1605,1621]},{"pos":[1630,1642],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"Each of these functions returns a file descriptor for the opened file.","pos":[1646,1716]},{"content":"A return value of -1 indicates an error; in that case <ph id=\"ph1\">`errno`</ph> is set to one of the following values.","pos":[1717,1817],"source":" A return value of -1 indicates an error; in that case `errno` is set to one of the following values."},{"content":"Tried to open a read-only file for writing, file's sharing mode does not allow the specified operations, or the given path is a directory.","pos":[1836,1974]},{"content":"<ph id=\"ph1\"> `_O_CREAT`</ph> and <ph id=\"ph2\">`_O_EXCL`</ph> flags specified, but <ph id=\"ph3\">`filename`</ph> already exists.","pos":[1992,2065],"source":" `_O_CREAT` and `_O_EXCL` flags specified, but `filename` already exists."},{"content":"Invalid <ph id=\"ph1\">`oflag`</ph> or <ph id=\"ph2\">`pmode`</ph> argument.","pos":[2084,2120],"source":" Invalid `oflag` or `pmode` argument."},{"content":"No more file descriptors are available (too many files are open).","pos":[2139,2204]},{"content":"File or path not found.","pos":[2223,2246]},{"pos":[2253,2430],"content":"For more information about these and other return codes, see <bpt id=\"p1\">[</bpt>errno, _doserrno, _sys_errlist, and _sys_nerr<ept id=\"p1\">](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md)</ept>.","source":"For more information about these and other return codes, see [errno, _doserrno, _sys_errlist, and _sys_nerr](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md)."},{"pos":[2439,2446],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">`_open`</ph> function opens the file specified by <ph id=\"ph2\">`filename`</ph> and prepares it for reading or writing, as specified by <ph id=\"ph3\">`oflag`</ph>.","pos":[2450,2574],"source":"The `_open` function opens the file specified by `filename` and prepares it for reading or writing, as specified by `oflag`."},{"content":"<ph id=\"ph1\">`_wopen`</ph> is a wide-character version of <ph id=\"ph2\">`_open`</ph>; the <ph id=\"ph3\">`filename`</ph> argument to <ph id=\"ph4\">`_wopen`</ph> is a wide-character string.","pos":[2575,2687],"source":"`_wopen` is a wide-character version of `_open`; the `filename` argument to `_wopen` is a wide-character string."},{"content":"<ph id=\"ph1\">`_wopen`</ph> and <ph id=\"ph2\">`_open`</ph> behave identically otherwise.","pos":[2688,2738],"source":"`_wopen` and `_open` behave identically otherwise."},{"pos":[2748,2777],"content":"Generic-Text Routine Mappings","linkify":"Generic-Text Routine Mappings","nodes":[{"content":"Generic-Text Routine Mappings","pos":[0,29]}]},{"content":"Tchar.h routine","pos":[2784,2799]},{"content":"_UNICODE and _MBCS not defined","pos":[2800,2830]},{"content":"_MBCS defined","pos":[2831,2844]},{"content":"_UNICODE defined","pos":[2845,2861]},{"pos":[3017,3168],"content":"<ph id=\"ph1\">`oflag`</ph> is an integer expression formed from one or more of the following manifest constants or constant combinations, which are defined in <ph id=\"ph2\">\\&lt;</ph>fcntl.h&gt;.","source":"`oflag` is an integer expression formed from one or more of the following manifest constants or constant combinations, which are defined in \\<fcntl.h>."},{"content":"Moves the file pointer to the end of the file before every write operation.","pos":[3190,3265]},{"content":"Opens the file in binary (untranslated) mode.","pos":[3287,3332]},{"content":"(See <bpt id=\"p1\">[</bpt>fopen<ept id=\"p1\">](../../c-runtime-library/reference/fopen-wfopen.md)</ept> for a description of binary mode.)","pos":[3333,3431],"source":" (See [fopen](../../c-runtime-library/reference/fopen-wfopen.md) for a description of binary mode.)"},{"content":"Creates a file and opens it for writing.","pos":[3452,3492]},{"content":"Has no effect if the file specified by <ph id=\"ph1\">`filename`</ph> exists.","pos":[3493,3550],"source":" Has no effect if the file specified by `filename` exists."},{"content":"The <ph id=\"ph1\">`pmode`</ph> argument is required when <ph id=\"ph2\">`_O_CREAT`</ph> is specified.","pos":[3551,3613],"source":" The `pmode` argument is required when `_O_CREAT` is specified."},{"content":"<ph id=\"ph1\">`_O_CREAT`</ph> &amp;#124; <ph id=\"ph2\">`_O_SHORT_LIVED`</ph>","pos":[3620,3654],"source":"`_O_CREAT` &#124; `_O_SHORT_LIVED`"},{"content":"Creates a file as temporary and if possible does not flush to disk.","pos":[3658,3725]},{"content":"The <ph id=\"ph1\">`pmode`</ph> argument is required when <ph id=\"ph2\">`_O_CREAT`</ph> is specified.","pos":[3726,3788],"source":" The `pmode` argument is required when `_O_CREAT` is specified."},{"content":"<ph id=\"ph1\">`_O_CREAT`</ph> &amp;#124; <ph id=\"ph2\">`_O_TEMPORARY`</ph>","pos":[3795,3827],"source":"`_O_CREAT` &#124; `_O_TEMPORARY`"},{"content":"Creates a file as temporary; the file is deleted when the last file descriptor is closed.","pos":[3831,3920]},{"content":"The <ph id=\"ph1\">`pmode`</ph> argument is required when <ph id=\"ph2\">`_O_CREAT`</ph> is specified.","pos":[3921,3983],"source":" The `pmode` argument is required when `_O_CREAT` is specified."},{"content":"<ph id=\"ph1\">`_O_CREAT`</ph> &amp;#124; <ph id=\"ph2\">`_O_EXCL`</ph>","pos":[3990,4017],"source":"`_O_CREAT` &#124; `_O_EXCL`"},{"content":"Returns an error value if the file specified by <ph id=\"ph1\">`filename`</ph> exists.","pos":[4021,4087],"source":" Returns an error value if the file specified by `filename` exists."},{"content":"Applies only when used with <ph id=\"ph1\">`_O_CREAT`</ph>.","pos":[4088,4127],"source":" Applies only when used with `_O_CREAT`."},{"content":"Prevents creation of a shared file descriptor.","pos":[4152,4198]},{"content":"Specifies that caching is optimized for, but not restricted to, random access from disk.","pos":[4220,4308]},{"content":"Opens a file for reading only.","pos":[4330,4360]},{"content":"Cannot be specified with <ph id=\"ph1\">`_O_RDWR`</ph> or <ph id=\"ph2\">`_O_WRONLY`</ph>.","pos":[4361,4411],"source":" Cannot be specified with `_O_RDWR` or `_O_WRONLY`."},{"content":"Opens file for both reading and writing.","pos":[4431,4471]},{"content":"Cannot be specified with <ph id=\"ph1\">`_O_RDONLY`</ph> or <ph id=\"ph2\">`_O_WRONLY`</ph>.","pos":[4472,4524],"source":" Cannot be specified with `_O_RDONLY` or `_O_WRONLY`."},{"content":"Specifies that caching is optimized for, but not restricted to, sequential access from disk.","pos":[4550,4642]},{"content":"Opens a file in text (translated) mode.","pos":[4662,4701]},{"content":"(For more information, see <bpt id=\"p1\">[</bpt>Text and Binary Mode File I/O<ept id=\"p1\">](../../c-runtime-library/text-and-binary-mode-file-i-o.md)</ept> and <bpt id=\"p2\">[</bpt>fopen<ept id=\"p2\">](../../c-runtime-library/reference/fopen-wfopen.md)</ept>.)","pos":[4702,4883],"source":" (For more information, see [Text and Binary Mode File I/O](../../c-runtime-library/text-and-binary-mode-file-i-o.md) and [fopen](../../c-runtime-library/reference/fopen-wfopen.md).)"},{"content":"Opens a file and truncates it to zero length; the file must have write permission.","pos":[4904,4986]},{"content":"Cannot be specified with <ph id=\"ph1\">`_O_RDONLY`</ph>.","pos":[4987,5024],"source":" Cannot be specified with `_O_RDONLY`."},{"content":"<ph id=\"ph1\">`_O_TRUNC`</ph> used with <ph id=\"ph2\">`_O_CREAT`</ph> opens an existing file or creates a file.","pos":[5025,5098],"source":"`_O_TRUNC` used with `_O_CREAT` opens an existing file or creates a file."},{"pos":[5106,5181],"content":"[!NOTE]\n The `_O_TRUNC` flag destroys the contents of the specified file.","leadings":["","> "],"nodes":[{"content":"The <ph id=\"ph1\">`_O_TRUNC`</ph> flag destroys the contents of the specified file.","pos":[9,73],"source":" The `_O_TRUNC` flag destroys the contents of the specified file."}]},{"content":"Opens the file for writing only.","pos":[5203,5235]},{"content":"Cannot be specified with <ph id=\"ph1\">`_O_RDONLY`</ph> or <ph id=\"ph2\">`_O_RDWR`</ph>.","pos":[5236,5286],"source":" Cannot be specified with `_O_RDONLY` or `_O_RDWR`."},{"content":"Opens the file in Unicode UTF-16 mode.","pos":[5309,5347]},{"content":"Opens the file in Unicode UTF-8 mode.","pos":[5369,5406]},{"content":"Opens the file in Unicode mode.","pos":[5427,5458]},{"content":"To specify the file access mode, you must specify either <ph id=\"ph1\">`_O_RDONLY`</ph>, <ph id=\"ph2\">`_O_RDWR`</ph>, or <ph id=\"ph3\">`_O_WRONLY`</ph>.","pos":[5465,5561],"source":"To specify the file access mode, you must specify either `_O_RDONLY`, `_O_RDWR`, or `_O_WRONLY`."},{"content":"There is no default value for the access mode.","pos":[5562,5608]},{"content":"If <ph id=\"ph1\">`_O_WTEXT`</ph> is used to open a file for reading, <ph id=\"ph2\">`_open`</ph> reads the beginning of the file and checks for a byte order mark (BOM).","pos":[5615,5744],"source":"If `_O_WTEXT` is used to open a file for reading, `_open` reads the beginning of the file and checks for a byte order mark (BOM)."},{"content":"If there is a BOM, the file is treated as UTF-8 or UTF-16LE, depending on the BOM.","pos":[5745,5827]},{"content":"If no BOM is present, the file is treated as ANSI.","pos":[5828,5878]},{"content":"When a file is opened for writing by using <ph id=\"ph1\">`_O_WTEXT`</ph>, UTF-16 is used.","pos":[5879,5949],"source":" When a file is opened for writing by using `_O_WTEXT`, UTF-16 is used."},{"content":"Regardless of any previous setting or byte order mark, if <ph id=\"ph1\">`_O_U8TEXT`</ph> is used, the file is always opened as UTF-8; if <ph id=\"ph2\">`_O_U16TEXT`</ph> is used, the file is always opened as UTF-16.","pos":[5950,6126],"source":" Regardless of any previous setting or byte order mark, if `_O_U8TEXT` is used, the file is always opened as UTF-8; if `_O_U16TEXT` is used, the file is always opened as UTF-16."},{"content":"When a file is opened in Unicode mode by using <ph id=\"ph1\">`_O_WTEXT`</ph>, <ph id=\"ph2\">`_O_U8TEXT`</ph>, or <ph id=\"ph3\">`_O_U16TEXT`</ph>, input functions translate the data that's read from the file into UTF-16 data stored as type <ph id=\"ph4\">`wchar_t`</ph>.","pos":[6133,6325],"source":"When a file is opened in Unicode mode by using `_O_WTEXT`, `_O_U8TEXT`, or `_O_U16TEXT`, input functions translate the data that's read from the file into UTF-16 data stored as type `wchar_t`."},{"content":"Functions that write to a file opened in Unicode mode expect buffers that contain UTF-16 data stored as type <ph id=\"ph1\">`wchar_t`</ph>.","pos":[6326,6445],"source":" Functions that write to a file opened in Unicode mode expect buffers that contain UTF-16 data stored as type `wchar_t`."},{"content":"If the file is encoded as UTF-8, then UTF-16 data is translated into UTF-8 when it is written, and the file's UTF-8-encoded content is translated into UTF-16 when it is read.","pos":[6446,6620]},{"content":"An attempt to read or write an odd number of bytes in Unicode mode causes a parameter validation error.","pos":[6621,6724]},{"content":"To read or write data that's stored in your program as UTF-8, use a text or binary file mode instead of a Unicode mode.","pos":[6725,6844]},{"content":"You are responsible for any required encoding translation.","pos":[6845,6903]},{"content":"If <ph id=\"ph1\">`_open`</ph> is called with <ph id=\"ph2\">`_O_WRONLY|_O_APPEND`</ph> (append mode) and <ph id=\"ph3\">`_O_WTEXT`</ph>, <ph id=\"ph4\">`_O_U16TEXT`</ph>, or <ph id=\"ph5\">`_O_U8TEXT`</ph>, it first tries to open the file for reading and writing, read the BOM, then reopen it for writing only.","pos":[6910,7121],"source":"If `_open` is called with `_O_WRONLY|_O_APPEND` (append mode) and `_O_WTEXT`, `_O_U16TEXT`, or `_O_U8TEXT`, it first tries to open the file for reading and writing, read the BOM, then reopen it for writing only."},{"content":"If opening the file for reading and writing fails, it opens the file for writing only and uses the default value for the Unicode mode setting.","pos":[7122,7264]},{"content":"When two or more manifest constants are used to form the <ph id=\"ph1\">`oflag`</ph> argument, the constants are combined with the bitwise-OR operator ( <ph id=\"ph2\">`|`</ph> ).","pos":[7271,7410],"source":"When two or more manifest constants are used to form the `oflag` argument, the constants are combined with the bitwise-OR operator ( `|` )."},{"content":"For a discussion of binary and text modes, see <bpt id=\"p1\">[</bpt>Text and Binary Mode File I/O<ept id=\"p1\">](../../c-runtime-library/text-and-binary-mode-file-i-o.md)</ept>.","pos":[7411,7548],"source":" For a discussion of binary and text modes, see [Text and Binary Mode File I/O](../../c-runtime-library/text-and-binary-mode-file-i-o.md)."},{"content":"The <ph id=\"ph1\">`pmode`</ph> argument is required only when <ph id=\"ph2\">`_O_CREAT`</ph> is specified.","pos":[7555,7622],"source":"The `pmode` argument is required only when `_O_CREAT` is specified."},{"content":"If the file already exists, <ph id=\"ph1\">`pmode`</ph> is ignored.","pos":[7623,7670],"source":" If the file already exists, `pmode` is ignored."},{"content":"Otherwise, <ph id=\"ph1\">`pmode`</ph> specifies the file permission settings, which are set when the new file is closed the first time.","pos":[7671,7787],"source":" Otherwise, `pmode` specifies the file permission settings, which are set when the new file is closed the first time."},{"content":"<ph id=\"ph1\">`_open`</ph> applies the current file-permission mask to <ph id=\"ph2\">`pmode`</ph> before the permissions are set.","pos":[7788,7879],"source":"`_open` applies the current file-permission mask to `pmode` before the permissions are set."},{"content":"(For more information, see <bpt id=\"p1\">[</bpt>_umask<ept id=\"p1\">](../../c-runtime-library/reference/umask.md)</ept>.) <ph id=\"ph1\">`pmode`</ph> is an integer expression that contains one or both of the following manifest constants, which are defined in <ph id=\"ph2\">\\&lt;</ph>sys\\stat.h&gt;.","pos":[7880,8093],"source":" (For more information, see [_umask](../../c-runtime-library/reference/umask.md).) `pmode` is an integer expression that contains one or both of the following manifest constants, which are defined in \\<sys\\stat.h>."},{"content":"Only reading permitted.","pos":[8114,8137]},{"content":"Writing permitted.","pos":[8159,8177]},{"content":"(In effect, permits reading and writing.)","pos":[8178,8219]},{"content":"<ph id=\"ph1\">`_S_IREAD`</ph>  <ph id=\"ph2\">`|`</ph>  <ph id=\"ph3\">`_S_IWRITE`</ph>","pos":[8226,8254],"source":"`_S_IREAD`  `|`  `_S_IWRITE`"},{"content":"Reading and writing permitted.","pos":[8258,8288]},{"content":"When both constants are given, they are joined with the bitwise-OR operator ( <ph id=\"ph1\">`|`</ph> ).","pos":[8295,8379],"source":"When both constants are given, they are joined with the bitwise-OR operator ( `|` )."},{"content":"In Windows, all files are readable; write-only permission is not available.","pos":[8380,8455]},{"content":"Therefore, the modes <ph id=\"ph1\">`_S_IWRITE`</ph> and <ph id=\"ph2\">`_S_IREAD`</ph> <ph id=\"ph3\">`|`</ph> <ph id=\"ph4\">`_S_IWRITE`</ph> are equivalent.","pos":[8456,8535],"source":" Therefore, the modes `_S_IWRITE` and `_S_IREAD` `|` `_S_IWRITE` are equivalent."},{"content":"If a value other than some combination of <ph id=\"ph1\">`_S_IREAD`</ph> and <ph id=\"ph2\">`_S_IWRITE`</ph> is specified for <ph id=\"ph3\">`pmode`</ph>—even if it would specify a valid <ph id=\"ph4\">`pmode`</ph> in another operating system—or if any value other than the allowed <ph id=\"ph5\">`oflag`</ph> values is specified, the function generates an assertion in Debug mode and invokes the invalid parameter handler, as described in <bpt id=\"p1\">[</bpt>Parameter Validation<ept id=\"p1\">](../../c-runtime-library/parameter-validation.md)</ept>.","pos":[8542,8954],"source":"If a value other than some combination of `_S_IREAD` and `_S_IWRITE` is specified for `pmode`—even if it would specify a valid `pmode` in another operating system—or if any value other than the allowed `oflag` values is specified, the function generates an assertion in Debug mode and invokes the invalid parameter handler, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md)."},{"content":"If execution is allowed to continue, the function returns -1 and sets <ph id=\"ph1\">`errno`</ph> to <ph id=\"ph2\">`EINVAL`</ph>.","pos":[8955,9045],"source":" If execution is allowed to continue, the function returns -1 and sets `errno` to `EINVAL`."},{"pos":[9054,9066],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"content":"Routine","pos":[9073,9080]},{"content":"Required header","pos":[9081,9096]},{"content":"Optional header","pos":[9097,9112]},{"content":"<ph id=\"ph1\">\\&lt;</ph>io.h&gt;","pos":[9187,9194],"source":"\\<io.h>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>fcntl.h&gt;, <ph id=\"ph2\">\\&lt;</ph>sys\\types.h&gt;, <ph id=\"ph3\">\\&lt;</ph>sys\\stat.h&gt;","pos":[9195,9236],"source":"\\<fcntl.h>, \\<sys\\types.h>, \\<sys\\stat.h>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>io.h&gt; or <ph id=\"ph2\">\\&lt;</ph>wchar.h&gt;","pos":[9250,9271],"source":"\\<io.h> or \\<wchar.h>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>fcntl.h&gt;, <ph id=\"ph2\">\\&lt;</ph>sys\\types.h&gt;, <ph id=\"ph3\">\\&lt;</ph>sys\\stat.h&gt;","pos":[9272,9313],"source":"\\<fcntl.h>, \\<sys\\types.h>, \\<sys\\stat.h>"},{"content":"<ph id=\"ph1\">`_open`</ph> and <ph id=\"ph2\">`_wopen`</ph> are Microsoft extensions.","pos":[9321,9367],"source":"`_open` and `_wopen` are Microsoft extensions."},{"content":"For more compatibility information, see <bpt id=\"p1\">[</bpt>Compatibility<ept id=\"p1\">](../../c-runtime-library/compatibility.md)</ept>.","pos":[9368,9466],"source":" For more compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md)."},{"pos":[9475,9484],"content":"Libraries","linkify":"Libraries","nodes":[{"content":"Libraries","pos":[0,9]}]},{"pos":[9488,9580],"content":"All versions of the <bpt id=\"p1\">[</bpt>C run-time libraries<ept id=\"p1\">](../../c-runtime-library/crt-library-features.md)</ept>.","source":"All versions of the [C run-time libraries](../../c-runtime-library/crt-library-features.md)."},{"pos":[9589,9596],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[10556,10562],"content":"Output","linkify":"Output","nodes":[{"content":"Output","pos":[0,6]}]},{"pos":[10649,10674],"content":".NET Framework Equivalent","linkify":".NET Framework Equivalent","nodes":[{"content":".NET Framework Equivalent","pos":[0,25]}]},{"pos":[10684,10775],"content":"<bpt id=\"p1\">[</bpt>System::IO::File::Open<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/system.io.file.open.aspx)</ept>","source":"[System::IO::File::Open](https://msdn.microsoft.com/en-us/library/system.io.file.open.aspx)"},{"content":"&lt;xref:System.IO.FileStream.%23ctor%2A&gt;","pos":[10785,10823],"source":"<xref:System.IO.FileStream.%23ctor%2A>"},{"pos":[10832,10840],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Low-Level I/O<ept id=\"p1\">](../../c-runtime-library/low-level-i-o.md)</ept><ph id=\"ph1\"> </ph>","pos":[10844,10902],"source":"[Low-Level I/O](../../c-runtime-library/low-level-i-o.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_chmod, _wchmod<ept id=\"p1\">](../../c-runtime-library/reference/chmod-wchmod.md)</ept><ph id=\"ph1\"> </ph>","pos":[10905,10975],"source":" [_chmod, _wchmod](../../c-runtime-library/reference/chmod-wchmod.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_close<ept id=\"p1\">](../../c-runtime-library/reference/close.md)</ept><ph id=\"ph1\"> </ph>","pos":[10978,11032],"source":" [_close](../../c-runtime-library/reference/close.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_creat, _wcreat<ept id=\"p1\">](../../c-runtime-library/reference/creat-wcreat.md)</ept><ph id=\"ph1\"> </ph>","pos":[11035,11105],"source":" [_creat, _wcreat](../../c-runtime-library/reference/creat-wcreat.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_dup, _dup2<ept id=\"p1\">](../../c-runtime-library/reference/dup-dup2.md)</ept><ph id=\"ph1\"> </ph>","pos":[11108,11170],"source":" [_dup, _dup2](../../c-runtime-library/reference/dup-dup2.md) "},{"content":"<bpt id=\"p1\"> [</bpt>fopen, _wfopen<ept id=\"p1\">](../../c-runtime-library/reference/fopen-wfopen.md)</ept><ph id=\"ph1\"> </ph>","pos":[11173,11242],"source":" [fopen, _wfopen](../../c-runtime-library/reference/fopen-wfopen.md) "},{"content":"<bpt id=\"p1\"> [</bpt>_sopen, _wsopen<ept id=\"p1\">](../../c-runtime-library/reference/sopen-wsopen.md)</ept>","pos":[11245,11314],"source":" [_sopen, _wsopen](../../c-runtime-library/reference/sopen-wsopen.md)"}],"content":"---\ntitle: \"_open, _wopen | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\napiname: \n  - \"_open\"\n  - \"_wopen\"\napilocation: \n  - \"msvcrt.dll\"\n  - \"msvcr80.dll\"\n  - \"msvcr90.dll\"\n  - \"msvcr100.dll\"\n  - \"msvcr100_clr0400.dll\"\n  - \"msvcr110.dll\"\n  - \"msvcr110_clr0400.dll\"\n  - \"msvcr120.dll\"\n  - \"msvcr120_clr0400.dll\"\n  - \"ucrtbase.dll\"\n  - \"api-ms-win-crt-stdio-l1-1-0.dll\"\napitype: \"DLLExport\"\nf1_keywords: \n  - \"_wopen\"\n  - \"_topen\"\n  - \"_open\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"opening files, for file I/O\"\n  - \"topen function\"\n  - \"_open function\"\n  - \"_topen function\"\n  - \"_wopen function\"\n  - \"files [C++], opening\"\n  - \"wopen function\"\n  - \"open function\"\nms.assetid: 13f6a0c3-d1aa-450d-a7aa-74abc91b163e\ncaps.latest.revision: 31\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# _open, _wopen\nOpens a file. These functions are deprecated because more-secure versions are available; see [_sopen_s, _wsopen_s](../../c-runtime-library/reference/sopen-s-wsopen-s.md).  \n  \n## Syntax  \n  \n```  \nint _open(  \n   const char *filename,  \n   int oflag [,  \n   int pmode]   \n);  \nint _wopen(  \n   const wchar_t *filename,  \n   int oflag [,  \n   int pmode]   \n);  \n```  \n  \n#### Parameters  \n `filename`  \n File name.  \n  \n `oflag`  \n The kind of operations allowed.  \n  \n `pmode`  \n Permission mode.  \n  \n## Return Value  \n Each of these functions returns a file descriptor for the opened file. A return value of -1 indicates an error; in that case `errno` is set to one of the following values.  \n  \n `EACCES`  \n Tried to open a read-only file for writing, file's sharing mode does not allow the specified operations, or the given path is a directory.  \n  \n `EEXIST`  \n `_O_CREAT` and `_O_EXCL` flags specified, but `filename` already exists.  \n  \n `EINVAL`  \n Invalid `oflag` or `pmode` argument.  \n  \n `EMFILE`  \n No more file descriptors are available (too many files are open).  \n  \n `ENOENT`  \n File or path not found.  \n  \n For more information about these and other return codes, see [errno, _doserrno, _sys_errlist, and _sys_nerr](../../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md).  \n  \n## Remarks  \n The `_open` function opens the file specified by `filename` and prepares it for reading or writing, as specified by `oflag`. `_wopen` is a wide-character version of `_open`; the `filename` argument to `_wopen` is a wide-character string. `_wopen` and `_open` behave identically otherwise.  \n  \n### Generic-Text Routine Mappings  \n  \n|Tchar.h routine|_UNICODE and _MBCS not defined|_MBCS defined|_UNICODE defined|  \n|---------------------|--------------------------------------|--------------------|-----------------------|  \n|`_topen`|`_open`|`_open`|`_wopen`|  \n  \n `oflag` is an integer expression formed from one or more of the following manifest constants or constant combinations, which are defined in \\<fcntl.h>.  \n  \n `_O_APPEND`  \n Moves the file pointer to the end of the file before every write operation.  \n  \n `_O_BINARY`  \n Opens the file in binary (untranslated) mode. (See [fopen](../../c-runtime-library/reference/fopen-wfopen.md) for a description of binary mode.)  \n  \n `_O_CREAT`  \n Creates a file and opens it for writing. Has no effect if the file specified by `filename` exists. The `pmode` argument is required when `_O_CREAT` is specified.  \n  \n `_O_CREAT` &#124; `_O_SHORT_LIVED`  \n Creates a file as temporary and if possible does not flush to disk. The `pmode` argument is required when `_O_CREAT` is specified.  \n  \n `_O_CREAT` &#124; `_O_TEMPORARY`  \n Creates a file as temporary; the file is deleted when the last file descriptor is closed. The `pmode` argument is required when `_O_CREAT` is specified.  \n  \n `_O_CREAT` &#124; `_O_EXCL`  \n Returns an error value if the file specified by `filename` exists. Applies only when used with `_O_CREAT`.  \n  \n `_O_NOINHERIT`  \n Prevents creation of a shared file descriptor.  \n  \n `_O_RANDOM`  \n Specifies that caching is optimized for, but not restricted to, random access from disk.  \n  \n `_O_RDONLY`  \n Opens a file for reading only. Cannot be specified with `_O_RDWR` or `_O_WRONLY`.  \n  \n `_O_RDWR`  \n Opens file for both reading and writing. Cannot be specified with `_O_RDONLY` or `_O_WRONLY`.  \n  \n `_O_SEQUENTIAL`  \n Specifies that caching is optimized for, but not restricted to, sequential access from disk.  \n  \n `_O_TEXT`  \n Opens a file in text (translated) mode. (For more information, see [Text and Binary Mode File I/O](../../c-runtime-library/text-and-binary-mode-file-i-o.md) and [fopen](../../c-runtime-library/reference/fopen-wfopen.md).)  \n  \n `_O_TRUNC`  \n Opens a file and truncates it to zero length; the file must have write permission. Cannot be specified with `_O_RDONLY`. `_O_TRUNC` used with `_O_CREAT` opens an existing file or creates a file.  \n  \n> [!NOTE]\n>  The `_O_TRUNC` flag destroys the contents of the specified file.  \n  \n `_O_WRONLY`  \n Opens the file for writing only. Cannot be specified with `_O_RDONLY` or `_O_RDWR`.  \n  \n `_O_U16TEXT`  \n Opens the file in Unicode UTF-16 mode.  \n  \n `_O_U8TEXT`  \n Opens the file in Unicode UTF-8 mode.  \n  \n `_O_WTEXT`  \n Opens the file in Unicode mode.  \n  \n To specify the file access mode, you must specify either `_O_RDONLY`, `_O_RDWR`, or `_O_WRONLY`. There is no default value for the access mode.  \n  \n If `_O_WTEXT` is used to open a file for reading, `_open` reads the beginning of the file and checks for a byte order mark (BOM). If there is a BOM, the file is treated as UTF-8 or UTF-16LE, depending on the BOM. If no BOM is present, the file is treated as ANSI. When a file is opened for writing by using `_O_WTEXT`, UTF-16 is used. Regardless of any previous setting or byte order mark, if `_O_U8TEXT` is used, the file is always opened as UTF-8; if `_O_U16TEXT` is used, the file is always opened as UTF-16.  \n  \n When a file is opened in Unicode mode by using `_O_WTEXT`, `_O_U8TEXT`, or `_O_U16TEXT`, input functions translate the data that's read from the file into UTF-16 data stored as type `wchar_t`. Functions that write to a file opened in Unicode mode expect buffers that contain UTF-16 data stored as type `wchar_t`. If the file is encoded as UTF-8, then UTF-16 data is translated into UTF-8 when it is written, and the file's UTF-8-encoded content is translated into UTF-16 when it is read. An attempt to read or write an odd number of bytes in Unicode mode causes a parameter validation error. To read or write data that's stored in your program as UTF-8, use a text or binary file mode instead of a Unicode mode. You are responsible for any required encoding translation.  \n  \n If `_open` is called with `_O_WRONLY|_O_APPEND` (append mode) and `_O_WTEXT`, `_O_U16TEXT`, or `_O_U8TEXT`, it first tries to open the file for reading and writing, read the BOM, then reopen it for writing only. If opening the file for reading and writing fails, it opens the file for writing only and uses the default value for the Unicode mode setting.  \n  \n When two or more manifest constants are used to form the `oflag` argument, the constants are combined with the bitwise-OR operator ( `|` ). For a discussion of binary and text modes, see [Text and Binary Mode File I/O](../../c-runtime-library/text-and-binary-mode-file-i-o.md).  \n  \n The `pmode` argument is required only when `_O_CREAT` is specified. If the file already exists, `pmode` is ignored. Otherwise, `pmode` specifies the file permission settings, which are set when the new file is closed the first time. `_open` applies the current file-permission mask to `pmode` before the permissions are set. (For more information, see [_umask](../../c-runtime-library/reference/umask.md).) `pmode` is an integer expression that contains one or both of the following manifest constants, which are defined in \\<sys\\stat.h>.  \n  \n `_S_IREAD`  \n Only reading permitted.  \n  \n `_S_IWRITE`  \n Writing permitted. (In effect, permits reading and writing.)  \n  \n `_S_IREAD`  `|`  `_S_IWRITE`  \n Reading and writing permitted.  \n  \n When both constants are given, they are joined with the bitwise-OR operator ( `|` ). In Windows, all files are readable; write-only permission is not available. Therefore, the modes `_S_IWRITE` and `_S_IREAD` `|` `_S_IWRITE` are equivalent.  \n  \n If a value other than some combination of `_S_IREAD` and `_S_IWRITE` is specified for `pmode`—even if it would specify a valid `pmode` in another operating system—or if any value other than the allowed `oflag` values is specified, the function generates an assertion in Debug mode and invokes the invalid parameter handler, as described in [Parameter Validation](../../c-runtime-library/parameter-validation.md). If execution is allowed to continue, the function returns -1 and sets `errno` to `EINVAL`.  \n  \n## Requirements  \n  \n|Routine|Required header|Optional header|  \n|-------------|---------------------|---------------------|  \n|`_open`|\\<io.h>|\\<fcntl.h>, \\<sys\\types.h>, \\<sys\\stat.h>|  \n|`_wopen`|\\<io.h> or \\<wchar.h>|\\<fcntl.h>, \\<sys\\types.h>, \\<sys\\stat.h>|  \n  \n `_open` and `_wopen` are Microsoft extensions. For more compatibility information, see [Compatibility](../../c-runtime-library/compatibility.md).  \n  \n## Libraries  \n All versions of the [C run-time libraries](../../c-runtime-library/crt-library-features.md).  \n  \n## Example  \n  \n```  \n// crt_open.c  \n// compile with: /W3  \n/* This program uses _open to open a file  \n * named CRT_OPEN.C for input and a file named CRT_OPEN.OUT  \n * for output. The files are then closed.  \n */  \n#include <fcntl.h>  \n#include <sys/types.h>  \n#include <sys/stat.h>  \n#include <io.h>  \n#include <stdio.h>  \n  \nint main( void )  \n{  \n   int fh1, fh2;  \n  \n   fh1 = _open( \"CRT_OPEN.C\", _O_RDONLY ); // C4996  \n   // Note: _open is deprecated; consider using _sopen_s instead  \n   if( fh1 == -1 )  \n      perror( \"Open failed on input file\" );  \n   else  \n   {  \n      printf( \"Open succeeded on input file\\n\" );  \n      _close( fh1 );  \n   }  \n  \n   fh2 = _open( \"CRT_OPEN.OUT\", _O_WRONLY | _O_CREAT, _S_IREAD |   \n                            _S_IWRITE ); // C4996  \n   if( fh2 == -1 )  \n      perror( \"Open failed on output file\" );  \n   else  \n   {  \n      printf( \"Open succeeded on output file\\n\" );  \n      _close( fh2 );  \n   }  \n}  \n```  \n  \n## Output  \n  \n```  \nOpen succeeded on input file  \nOpen succeeded on output file  \n```  \n  \n## .NET Framework Equivalent  \n  \n-   [System::IO::File::Open](https://msdn.microsoft.com/en-us/library/system.io.file.open.aspx)  \n  \n-   <xref:System.IO.FileStream.%23ctor%2A>  \n  \n## See Also  \n [Low-Level I/O](../../c-runtime-library/low-level-i-o.md)   \n [_chmod, _wchmod](../../c-runtime-library/reference/chmod-wchmod.md)   \n [_close](../../c-runtime-library/reference/close.md)   \n [_creat, _wcreat](../../c-runtime-library/reference/creat-wcreat.md)   \n [_dup, _dup2](../../c-runtime-library/reference/dup-dup2.md)   \n [fopen, _wfopen](../../c-runtime-library/reference/fopen-wfopen.md)   \n [_sopen, _wsopen](../../c-runtime-library/reference/sopen-wsopen.md)"}