{"nodes":[{"pos":[12,49],"content":"Parameter Validation | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Parameter Validation | Microsoft Docs","pos":[0,37]}]},{"content":"Parameter Validation","pos":[588,608]},{"content":"Most of the security-enhanced CRT functions and many of the preexisting functions validate their parameters.","pos":[609,717]},{"content":"This could include checking pointers for NULL, checking that integers fall into a valid range, or checking that enumeration values are valid.","pos":[718,859]},{"content":"When an invalid parameter is found, the invalid parameter handler is executed.","pos":[860,938]},{"content":"Invalid Parameter Handler Routine","pos":[947,980]},{"content":"When a C Runtime Library function detects an invalid parameter, it captures some information about the error, and then calls a macro that wraps an invalid parameter handler dispatch function, one of <bpt id=\"p1\">[</bpt>_invalid_parameter<ept id=\"p1\">](../c-runtime-library/reference/invalid-parameter-functions.md)</ept>, <bpt id=\"p2\">[</bpt>_invalid_parameter_noinfo<ept id=\"p2\">](../c-runtime-library/reference/invalid-parameter-functions.md)</ept>, or <bpt id=\"p3\">[</bpt>_invalid_parameter_noinfo_noreturn<ept id=\"p3\">](../c-runtime-library/reference/invalid-parameter-functions.md)</ept>.","pos":[984,1463],"source":"When a C Runtime Library function detects an invalid parameter, it captures some information about the error, and then calls a macro that wraps an invalid parameter handler dispatch function, one of [_invalid_parameter](../c-runtime-library/reference/invalid-parameter-functions.md), [_invalid_parameter_noinfo](../c-runtime-library/reference/invalid-parameter-functions.md), or [_invalid_parameter_noinfo_noreturn](../c-runtime-library/reference/invalid-parameter-functions.md)."},{"content":"The dispatch function called depends on whether your code is, respectively, a debug build, a retail build, or the error is not considered recoverable.","pos":[1464,1614]},{"content":"In Debug builds, the invalid parameter macro usually raises a failed assertion and a debugger breakpoint before the dispatch function is called.","pos":[1619,1763]},{"content":"When the code is executed, the assertion may be reported to the user in a dialog box that has \"Abort\", \"Retry\", and \"Continue\" or similar choices, depending on the operating system and runtime library version.","pos":[1764,1973]},{"content":"These options allow the user to immediately terminate the program, to attach a debugger, or to let the existing code continue to run, which calls the dispatch function.","pos":[1974,2142]},{"content":"The invalid parameter handler dispatch function in turn calls the currently assigned invalid parameter handler.","pos":[2147,2258]},{"content":"By default, the invalid parameter calls <ph id=\"ph1\">`_invoke_watson`</ph> which causes the application to \"crash,\" that is, terminate and generate a mini-dump.","pos":[2259,2401],"source":" By default, the invalid parameter calls `_invoke_watson` which causes the application to \"crash,\" that is, terminate and generate a mini-dump."},{"content":"If enabled by the operating system, a dialog box asks the user if they want to load the crash dump to Microsoft for analysis.","pos":[2402,2527]},{"content":"This behavior can be changed by using the functions <bpt id=\"p1\">[</bpt>_set_invalid_parameter_handler<ept id=\"p1\">](../c-runtime-library/reference/set-invalid-parameter-handler-set-thread-local-invalid-parameter-handler.md)</ept> or <bpt id=\"p2\">[</bpt>_set_thread_local_invalid_parameter_handler<ept id=\"p2\">](../c-runtime-library/reference/set-invalid-parameter-handler-set-thread-local-invalid-parameter-handler.md)</ept> to set the invalid parameter handler to your own function.","pos":[2535,2943],"source":"This behavior can be changed by using the functions [_set_invalid_parameter_handler](../c-runtime-library/reference/set-invalid-parameter-handler-set-thread-local-invalid-parameter-handler.md) or [_set_thread_local_invalid_parameter_handler](../c-runtime-library/reference/set-invalid-parameter-handler-set-thread-local-invalid-parameter-handler.md) to set the invalid parameter handler to your own function."},{"content":"If the function you specify does not terminate the application, control is returned to the function that received the invalid parameters.","pos":[2944,3081]},{"content":"In the CRT, these functions will normally cease function execution, set <ph id=\"ph1\">`errno`</ph> to an error code, and return an error code.","pos":[3082,3205],"source":" In the CRT, these functions will normally cease function execution, set `errno` to an error code, and return an error code."},{"content":"In many cases, the <ph id=\"ph1\">`errno`</ph> value and the return value are both <ph id=\"ph2\">`EINVAL`</ph>, indicating an invalid parameter.","pos":[3206,3311],"source":" In many cases, the `errno` value and the return value are both `EINVAL`, indicating an invalid parameter."},{"content":"In some cases, a more specific error code is returned, such as <ph id=\"ph1\">`EBADF`</ph> for a bad file pointer passed in as a parameter.","pos":[3312,3431],"source":" In some cases, a more specific error code is returned, such as `EBADF` for a bad file pointer passed in as a parameter."},{"content":"For more information on <ph id=\"ph1\">`errno`</ph>, see <bpt id=\"p1\">[</bpt>errno, _doserrno, _sys_errlist, and _sys_nerr<ept id=\"p1\">](../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md)</ept>.","pos":[3432,3582],"source":" For more information on `errno`, see [errno, _doserrno, _sys_errlist, and _sys_nerr](../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md)."},{"content":"See Also","pos":[3591,3599]},{"content":"Security Features in the CRT","pos":[3604,3632]},{"content":"CRT Library Features","pos":[3693,3713]}],"content":"---\ntitle: \"Parameter Validation | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\n  - \"C\"\nhelpviewer_keywords: \n  - \"parameters, validation\"\nms.assetid: 019dd5f0-dc61-4d2e-b4e9-b66409ddf1f2\ncaps.latest.revision: 9\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Parameter Validation\nMost of the security-enhanced CRT functions and many of the preexisting functions validate their parameters. This could include checking pointers for NULL, checking that integers fall into a valid range, or checking that enumeration values are valid. When an invalid parameter is found, the invalid parameter handler is executed.  \n  \n## Invalid Parameter Handler Routine  \n When a C Runtime Library function detects an invalid parameter, it captures some information about the error, and then calls a macro that wraps an invalid parameter handler dispatch function, one of [_invalid_parameter](../c-runtime-library/reference/invalid-parameter-functions.md), [_invalid_parameter_noinfo](../c-runtime-library/reference/invalid-parameter-functions.md), or [_invalid_parameter_noinfo_noreturn](../c-runtime-library/reference/invalid-parameter-functions.md). The dispatch function called depends on whether your code is, respectively, a debug build, a retail build, or the error is not considered recoverable. \n \n In Debug builds, the invalid parameter macro usually raises a failed assertion and a debugger breakpoint before the dispatch function is called. When the code is executed, the assertion may be reported to the user in a dialog box that has \"Abort\", \"Retry\", and \"Continue\" or similar choices, depending on the operating system and runtime library version. These options allow the user to immediately terminate the program, to attach a debugger, or to let the existing code continue to run, which calls the dispatch function. \n \n The invalid parameter handler dispatch function in turn calls the currently assigned invalid parameter handler. By default, the invalid parameter calls `_invoke_watson` which causes the application to \"crash,\" that is, terminate and generate a mini-dump. If enabled by the operating system, a dialog box asks the user if they want to load the crash dump to Microsoft for analysis.   \n  \n This behavior can be changed by using the functions [_set_invalid_parameter_handler](../c-runtime-library/reference/set-invalid-parameter-handler-set-thread-local-invalid-parameter-handler.md) or [_set_thread_local_invalid_parameter_handler](../c-runtime-library/reference/set-invalid-parameter-handler-set-thread-local-invalid-parameter-handler.md) to set the invalid parameter handler to your own function. If the function you specify does not terminate the application, control is returned to the function that received the invalid parameters. In the CRT, these functions will normally cease function execution, set `errno` to an error code, and return an error code. In many cases, the `errno` value and the return value are both `EINVAL`, indicating an invalid parameter. In some cases, a more specific error code is returned, such as `EBADF` for a bad file pointer passed in as a parameter. For more information on `errno`, see [errno, _doserrno, _sys_errlist, and _sys_nerr](../c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr.md).  \n  \n## See Also  \n [Security Features in the CRT](../c-runtime-library/security-features-in-the-crt.md)   \n [CRT Library Features](../c-runtime-library/crt-library-features.md)"}