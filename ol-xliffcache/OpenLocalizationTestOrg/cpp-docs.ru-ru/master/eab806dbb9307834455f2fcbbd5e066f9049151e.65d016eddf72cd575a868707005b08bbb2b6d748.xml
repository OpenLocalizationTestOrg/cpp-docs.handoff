{"nodes":[{"pos":[12,72],"content":"A.11   Specifying a Fixed Number of Threads | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"A.11   Specifying a Fixed Number of Threads | Microsoft Docs","pos":[0,60]}]},{"content":"A.11   Specifying a Fixed Number of Threads","pos":[552,595]},{"content":"Some programs rely on a fixed, prespecified number of threads to execute correctly.","pos":[596,679]},{"content":"Because the default setting for the dynamic adjustment of the number of threads is implementation-defined, such programs can choose to turn off the dynamic threads capability and set the number of threads explicitly to ensure portability.","pos":[681,919]},{"content":"The following example shows how to do this using <ph id=\"ph1\">`omp_set_dynamic`</ph> (<bpt id=\"p1\">[</bpt>Section 3.1.7<ept id=\"p1\">](../../parallel/openmp/3-1-7-omp-set-dynamic-function.md)</ept> on page 39), and <ph id=\"ph2\">`omp_set_num_threads`</ph> (<bpt id=\"p2\">[</bpt>Section 3.1.1<ept id=\"p2\">](../../parallel/openmp/3-1-1-omp-set-num-threads-function.md)</ept> on page 36):","pos":[920,1190],"source":" The following example shows how to do this using `omp_set_dynamic` ([Section 3.1.7](../../parallel/openmp/3-1-7-omp-set-dynamic-function.md) on page 39), and `omp_set_num_threads` ([Section 3.1.1](../../parallel/openmp/3-1-1-omp-set-num-threads-function.md) on page 36):"},{"content":"In this example, the program executes correctly only if it is executed by 16 threads.","pos":[1485,1570]},{"content":"If the implementation is not capable of supporting 16 threads, the behavior of this example is implementation-defined.","pos":[1571,1689]},{"content":"Note that the number of threads executing a parallel region remains constant during a parallel region, regardless of the dynamic threads setting.","pos":[1696,1841]},{"content":"The dynamic threads mechanism determines the number of threads to use at the start of the parallel region and keeps it constant for the duration of the region.","pos":[1842,2001]}],"content":"---\ntitle: \"A.11   Specifying a Fixed Number of Threads | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nms.assetid: 1d06b142-4c35-44b8-994b-20f2aed5462b\ncaps.latest.revision: 8\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# A.11   Specifying a Fixed Number of Threads\nSome programs rely on a fixed, prespecified number of threads to execute correctly.  Because the default setting for the dynamic adjustment of the number of threads is implementation-defined, such programs can choose to turn off the dynamic threads capability and set the number of threads explicitly to ensure portability. The following example shows how to do this using `omp_set_dynamic` ([Section 3.1.7](../../parallel/openmp/3-1-7-omp-set-dynamic-function.md) on page 39), and `omp_set_num_threads` ([Section 3.1.1](../../parallel/openmp/3-1-1-omp-set-num-threads-function.md) on page 36):  \n  \n```  \nomp_set_dynamic(0);  \nomp_set_num_threads(16);  \n#pragma omp parallel shared(x, npoints) private(iam, ipoints)  \n{  \n    if (omp_get_num_threads() != 16)   \n      abort();  \n    iam = omp_get_thread_num();  \n    ipoints = npoints/16;  \n    do_by_16(x, iam, ipoints);  \n}  \n```  \n  \n In this example, the program executes correctly only if it is executed by 16 threads. If the implementation is not capable of supporting 16 threads, the behavior of this example is implementation-defined.  \n  \n Note that the number of threads executing a parallel region remains constant during a parallel region, regardless of the dynamic threads setting. The dynamic threads mechanism determines the number of threads to use at the start of the parallel region and keeps it constant for the duration of the region."}