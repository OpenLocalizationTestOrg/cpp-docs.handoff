{"nodes":[{"pos":[12,70],"content":"Thread Safety in the C++ Standard Library | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Thread Safety in the C++ Standard Library | Microsoft Docs","pos":[0,58]}]},{"pos":[682,723],"content":"Thread Safety in the C++ Standard Library","linkify":"Thread Safety in the C++ Standard Library","nodes":[{"content":"Thread Safety in the C++ Standard Library","pos":[0,41]}]},{"content":"The following thread safety rules apply to all classes in the Standard C++ Library—this includes <ph id=\"ph1\">`shared_ptr`</ph>, as described below.","pos":[724,854],"source":"The following thread safety rules apply to all classes in the Standard C++ Library—this includes `shared_ptr`, as described below."},{"content":"Stronger guarantees are sometimes provided—for example, the standard iostream objects, as described below, and types specifically intended for multithreading, like those in <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>atomic&gt;<ept id=\"p1\">](../standard-library/atomic.md)</ept>.","pos":[856,1072],"source":"  Stronger guarantees are sometimes provided—for example, the standard iostream objects, as described below, and types specifically intended for multithreading, like those in [\\<atomic>](../standard-library/atomic.md)."},{"content":"An object is thread-safe for reading from multiple threads.","pos":[1079,1138]},{"content":"For example, given an object A, it is safe to read A from thread 1 and from thread 2 simultaneously.","pos":[1139,1239]},{"content":"If an object is being written to by one thread, then all reads and writes to that object on the same or other threads must be protected.","pos":[1246,1382]},{"content":"For example, given an object A, if thread 1 is writing to A, then thread 2 must be prevented from reading from or writing to A.","pos":[1383,1510]},{"content":"It is safe to read and write to one instance of a type even if another thread is reading or writing to a different instance of the same type.","pos":[1517,1658]},{"content":"For example, given objects A and B of the same type, it is safe when A is being written in thread 1 and B is being read in thread 2.","pos":[1659,1791]},{"pos":[1800,1810],"content":"shared_ptr","linkify":"shared_ptr","nodes":[{"content":"shared_ptr","pos":[0,10]}]},{"pos":[1814,1992],"content":"Multiple threads can simultaneously read and write different <bpt id=\"p1\">[</bpt>shared_ptr<ept id=\"p1\">](../standard-library/shared-ptr-class.md)</ept> objects, even when the objects are copies that share ownership.","source":"Multiple threads can simultaneously read and write different [shared_ptr](../standard-library/shared-ptr-class.md) objects, even when the objects are copies that share ownership."},{"pos":[2001,2009],"content":"iostream","linkify":"iostream","nodes":[{"content":"iostream","pos":[0,8]}]},{"content":"The standard iostream objects <ph id=\"ph1\">`cin`</ph>, <ph id=\"ph2\">`cout`</ph>, <ph id=\"ph3\">`cerr`</ph>, <ph id=\"ph4\">`clog`</ph>, <ph id=\"ph5\">`wcin`</ph>, <ph id=\"ph6\">`wcout`</ph>, <ph id=\"ph7\">`wcerr`</ph>, and <ph id=\"ph8\">`wclog`</ph> follow the same rules as the other classes, with this exception: it is safe to write to an object from multiple threads.","pos":[2013,2232],"source":"The standard iostream objects `cin`, `cout`, `cerr`, `clog`, `wcin`, `wcout`, `wcerr`, and `wclog` follow the same rules as the other classes, with this exception: it is safe to write to an object from multiple threads."},{"content":"For example, thread 1 can write to <bpt id=\"p1\">[</bpt>cout<ept id=\"p1\">](../standard-library/iostream.md#cout)</ept> at the same time as thread 2.","pos":[2233,2342],"source":" For example, thread 1 can write to [cout](../standard-library/iostream.md#cout) at the same time as thread 2."},{"content":"However, this can cause the output from the two threads to be intermixed.","pos":[2343,2416]},{"pos":[2424,2597],"content":"[!NOTE]\n Reading from a stream buffer is not considered to be a read operation. Instead it is considered to be a write operation because the state of the class is changed.","leadings":["","> "],"nodes":[{"content":" Reading from a stream buffer is not considered to be a read operation. Instead it is considered to be a write operation because the state of the class is changed.","pos":[8,171],"nodes":[{"content":"Reading from a stream buffer is not considered to be a read operation.","pos":[1,71]},{"content":"Instead it is considered to be a write operation because the state of the class is changed.","pos":[72,163]}]}]},{"pos":[2606,2614],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[2618,2686],"content":"<bpt id=\"p1\">[</bpt>STL Overview<ept id=\"p1\">](../standard-library/cpp-standard-library-overview.md)</ept>","source":"[STL Overview](../standard-library/cpp-standard-library-overview.md)"}],"content":"---\ntitle: \"Thread Safety in the C++ Standard Library | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"thread safety\"\n  - \"Standard C++ Library, thread safety\"\n  - \"thread safety, Standard Template Library\"\nms.assetid: 9351c8fb-4539-4728-b0e9-226e2ac4284b\ncaps.latest.revision: 21\nauthor: \"corob-msft\"\nms.author: \"corob\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# Thread Safety in the C++ Standard Library\nThe following thread safety rules apply to all classes in the Standard C++ Library—this includes `shared_ptr`, as described below.  Stronger guarantees are sometimes provided—for example, the standard iostream objects, as described below, and types specifically intended for multithreading, like those in [\\<atomic>](../standard-library/atomic.md).  \n  \n An object is thread-safe for reading from multiple threads. For example, given an object A, it is safe to read A from thread 1 and from thread 2 simultaneously.  \n  \n If an object is being written to by one thread, then all reads and writes to that object on the same or other threads must be protected. For example, given an object A, if thread 1 is writing to A, then thread 2 must be prevented from reading from or writing to A.  \n  \n It is safe to read and write to one instance of a type even if another thread is reading or writing to a different instance of the same type. For example, given objects A and B of the same type, it is safe when A is being written in thread 1 and B is being read in thread 2.  \n  \n## shared_ptr  \n Multiple threads can simultaneously read and write different [shared_ptr](../standard-library/shared-ptr-class.md) objects, even when the objects are copies that share ownership.  \n  \n## iostream  \n The standard iostream objects `cin`, `cout`, `cerr`, `clog`, `wcin`, `wcout`, `wcerr`, and `wclog` follow the same rules as the other classes, with this exception: it is safe to write to an object from multiple threads. For example, thread 1 can write to [cout](../standard-library/iostream.md#cout) at the same time as thread 2. However, this can cause the output from the two threads to be intermixed.  \n  \n> [!NOTE]\n>  Reading from a stream buffer is not considered to be a read operation. Instead it is considered to be a write operation because the state of the class is changed.  \n  \n## See Also  \n [STL Overview](../standard-library/cpp-standard-library-overview.md)\n\n\n\n"}