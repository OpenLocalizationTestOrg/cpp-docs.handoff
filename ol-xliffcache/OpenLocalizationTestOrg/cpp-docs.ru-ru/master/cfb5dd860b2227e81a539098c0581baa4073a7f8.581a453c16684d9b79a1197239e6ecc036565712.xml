{"nodes":[{"pos":[12,83],"content":"How to: Use Parallel Containers to Increase Efficiency | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"How to: Use Parallel Containers to Increase Efficiency | Microsoft Docs","pos":[0,71]}]},{"content":"How to: Use Parallel Containers to Increase Efficiency","pos":[766,820]},{"content":"This topic shows how to use parallel containers to efficiently store and access data in parallel.","pos":[821,918]},{"content":"The example code computes the set of prime and Carmichael numbers in parallel.","pos":[925,1003]},{"content":"Then, for each Carmichael number, the code computes the prime factors of that number.","pos":[1004,1089]},{"content":"Example","pos":[1098,1105]},{"pos":[1109,1319],"content":"The following example shows the <ph id=\"ph1\">`is_prime`</ph> function, which determines whether an input value is a prime number, and the <ph id=\"ph2\">`is_carmichael`</ph> function, which determines whether the input value is a Carmichael number.","source":"The following example shows the `is_prime` function, which determines whether an input value is a prime number, and the `is_carmichael` function, which determines whether the input value is a Carmichael number."},{"pos":[1337,1363],"content":"concrt-carmichael-primes#1"},{"content":"Example","pos":[1473,1480]},{"content":"The following example uses the <ph id=\"ph1\">`is_prime`</ph> and <ph id=\"ph2\">`is_carmichael`</ph> functions to compute the sets of prime and Carmichael numbers.","pos":[1484,1608],"source":"The following example uses the `is_prime` and `is_carmichael` functions to compute the sets of prime and Carmichael numbers."},{"content":"The example uses the <bpt id=\"p1\">[</bpt>concurrency::parallel_invoke<ept id=\"p1\">](reference/concurrency-namespace-functions.md#parallel_invoke)</ept> and <bpt id=\"p2\">[</bpt>concurrency::parallel_for<ept id=\"p2\">](reference/concurrency-namespace-functions.md#parallel_for)</ept> algorithms to compute each set in parallel.","pos":[1609,1857],"source":" The example uses the [concurrency::parallel_invoke](reference/concurrency-namespace-functions.md#parallel_invoke) and [concurrency::parallel_for](reference/concurrency-namespace-functions.md#parallel_for) algorithms to compute each set in parallel."},{"content":"For more information about parallel algorithms, see <bpt id=\"p1\">[</bpt>Parallel Algorithms<ept id=\"p1\">](../../parallel/concrt/parallel-algorithms.md)</ept>.","pos":[1858,1978],"source":" For more information about parallel algorithms, see [Parallel Algorithms](../../parallel/concrt/parallel-algorithms.md)."},{"content":"This example uses a <bpt id=\"p1\">[</bpt>concurrency::concurrent_queue<ept id=\"p1\">](../../parallel/concrt/reference/concurrent-queue-class.md)</ept> object to hold the set of Carmichael numbers because it will later use that object as a work queue.","pos":[1985,2195],"source":"This example uses a [concurrency::concurrent_queue](../../parallel/concrt/reference/concurrent-queue-class.md) object to hold the set of Carmichael numbers because it will later use that object as a work queue."},{"content":"It uses a <bpt id=\"p1\">[</bpt>concurrency::concurrent_vector<ept id=\"p1\">](../../parallel/concrt/reference/concurrent-vector-class.md)</ept> object to hold the set of prime numbers because it will later iterate through this set to find prime factors.","pos":[2196,2408],"source":" It uses a [concurrency::concurrent_vector](../../parallel/concrt/reference/concurrent-vector-class.md) object to hold the set of prime numbers because it will later iterate through this set to find prime factors."},{"pos":[2426,2452],"content":"concrt-carmichael-primes#2"},{"content":"Example","pos":[2562,2569]},{"pos":[2573,2705],"content":"The following example shows the <ph id=\"ph1\">`prime_factors_of`</ph> function, which uses trial division to find all prime factors of the given value.","source":"The following example shows the `prime_factors_of` function, which uses trial division to find all prime factors of the given value."},{"content":"This function uses the <bpt id=\"p1\">[</bpt>concurrency::parallel_for_each<ept id=\"p1\">](reference/concurrency-namespace-functions.md#parallel_for_each)</ept> algorithm to iterate through the collection of prime numbers.","pos":[2712,2893],"source":"This function uses the [concurrency::parallel_for_each](reference/concurrency-namespace-functions.md#parallel_for_each) algorithm to iterate through the collection of prime numbers."},{"content":"The <ph id=\"ph1\">`concurrent_vector`</ph> object enables the parallel loop to concurrently add prime factors to the result.","pos":[2894,2999],"source":" The `concurrent_vector` object enables the parallel loop to concurrently add prime factors to the result."},{"pos":[3017,3043],"content":"concrt-carmichael-primes#3"},{"content":"Example","pos":[3153,3160]},{"content":"This example processes each element in the queue of Carmichael numbers by calling the <ph id=\"ph1\">`prime_factors_of`</ph> function to compute its prime factors.","pos":[3164,3307],"source":"This example processes each element in the queue of Carmichael numbers by calling the `prime_factors_of` function to compute its prime factors."},{"content":"It uses a task group to perform this work in parallel.","pos":[3308,3362]},{"content":"For more information about task groups, see <bpt id=\"p1\">[</bpt>Task Parallelism<ept id=\"p1\">](../../parallel/concrt/task-parallelism-concurrency-runtime.md)</ept>.","pos":[3363,3489],"source":" For more information about task groups, see [Task Parallelism](../../parallel/concrt/task-parallelism-concurrency-runtime.md)."},{"content":"This example prints the prime factors for each Carmichael number if that number has more than four prime factors.","pos":[3496,3609]},{"pos":[3627,3653],"content":"concrt-carmichael-primes#4"},{"content":"Example","pos":[3763,3770]},{"content":"The following code shows the complete example, which uses parallel containers to compute the prime factors of the Carmichael numbers.","pos":[3774,3907]},{"pos":[3925,3951],"content":"concrt-carmichael-primes#5"},{"content":"This example produces the following sample output.","pos":[4059,4109]},{"content":"Compiling the Code","pos":[4279,4297]},{"pos":[4301,4500],"content":"Copy the example code and paste it in a Visual Studio project, or paste it in a file that is named <ph id=\"ph1\">`carmichael-primes.cpp`</ph> and then run the following command in a Visual Studio Command Prompt window.","source":"Copy the example code and paste it in a Visual Studio project, or paste it in a file that is named `carmichael-primes.cpp` and then run the following command in a Visual Studio Command Prompt window."},{"content":"cl.exe /EHsc carmichael-primes.cpp","pos":[4509,4543]},{"content":"See Also","pos":[4554,4562]},{"content":"Parallel Containers and Objects","pos":[4567,4598]},{"content":"Task Parallelism","pos":[4663,4679]},{"content":"concurrent_vector Class","pos":[4749,4772]},{"content":"concurrent_queue Class","pos":[4839,4861]},{"content":"parallel_invoke Function","pos":[4927,4951]},{"content":"parallel_for Function","pos":[5020,5041]},{"content":"task_group Class","pos":[5107,5123]}],"content":"---\ntitle: \"How to: Use Parallel Containers to Increase Efficiency | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"increasing efficiency with parallel containers [Concurrency Runtime]\"\n  - \"concurrent_queue class, examples\"\n  - \"concurrent_vector class, examples\"\nms.assetid: bd00046d-e9b6-4ae1-b661-3995f671b867\ncaps.latest.revision: 13\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"ru-ru\"\n  - \"zh-cn\"\n  - \"zh-tw\"\ntranslation.priority.mt: \n  - \"cs-cz\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"tr-tr\"\n---\n# How to: Use Parallel Containers to Increase Efficiency\nThis topic shows how to use parallel containers to efficiently store and access data in parallel.  \n  \n The example code computes the set of prime and Carmichael numbers in parallel. Then, for each Carmichael number, the code computes the prime factors of that number.  \n  \n## Example  \n The following example shows the `is_prime` function, which determines whether an input value is a prime number, and the `is_carmichael` function, which determines whether the input value is a Carmichael number.  \n  \n [!code-cpp[concrt-carmichael-primes#1](../../parallel/concrt/codesnippet/cpp/how-to-use-parallel-containers-to-increase-efficiency_1.cpp)]  \n  \n## Example  \n The following example uses the `is_prime` and `is_carmichael` functions to compute the sets of prime and Carmichael numbers. The example uses the [concurrency::parallel_invoke](reference/concurrency-namespace-functions.md#parallel_invoke) and [concurrency::parallel_for](reference/concurrency-namespace-functions.md#parallel_for) algorithms to compute each set in parallel. For more information about parallel algorithms, see [Parallel Algorithms](../../parallel/concrt/parallel-algorithms.md).  \n  \n This example uses a [concurrency::concurrent_queue](../../parallel/concrt/reference/concurrent-queue-class.md) object to hold the set of Carmichael numbers because it will later use that object as a work queue. It uses a [concurrency::concurrent_vector](../../parallel/concrt/reference/concurrent-vector-class.md) object to hold the set of prime numbers because it will later iterate through this set to find prime factors.  \n  \n [!code-cpp[concrt-carmichael-primes#2](../../parallel/concrt/codesnippet/cpp/how-to-use-parallel-containers-to-increase-efficiency_2.cpp)]  \n  \n## Example  \n The following example shows the `prime_factors_of` function, which uses trial division to find all prime factors of the given value.  \n  \n This function uses the [concurrency::parallel_for_each](reference/concurrency-namespace-functions.md#parallel_for_each) algorithm to iterate through the collection of prime numbers. The `concurrent_vector` object enables the parallel loop to concurrently add prime factors to the result.  \n  \n [!code-cpp[concrt-carmichael-primes#3](../../parallel/concrt/codesnippet/cpp/how-to-use-parallel-containers-to-increase-efficiency_3.cpp)]  \n  \n## Example  \n This example processes each element in the queue of Carmichael numbers by calling the `prime_factors_of` function to compute its prime factors. It uses a task group to perform this work in parallel. For more information about task groups, see [Task Parallelism](../../parallel/concrt/task-parallelism-concurrency-runtime.md).  \n  \n This example prints the prime factors for each Carmichael number if that number has more than four prime factors.  \n  \n [!code-cpp[concrt-carmichael-primes#4](../../parallel/concrt/codesnippet/cpp/how-to-use-parallel-containers-to-increase-efficiency_4.cpp)]  \n  \n## Example  \n The following code shows the complete example, which uses parallel containers to compute the prime factors of the Carmichael numbers.  \n  \n [!code-cpp[concrt-carmichael-primes#5](../../parallel/concrt/codesnippet/cpp/how-to-use-parallel-containers-to-increase-efficiency_5.cpp)]  \n  \n This example produces the following sample output.  \n  \n```Output  \nPrime factors of 9890881 are: 7 11 13 41 241.  \nPrime factors of 825265 are: 5 7 17 19 73.  \nPrime factors of 1050985 are: 5 13 19 23 37.  \n```  \n  \n## Compiling the Code  \n Copy the example code and paste it in a Visual Studio project, or paste it in a file that is named `carmichael-primes.cpp` and then run the following command in a Visual Studio Command Prompt window.  \n  \n **cl.exe /EHsc carmichael-primes.cpp**  \n  \n## See Also  \n [Parallel Containers and Objects](../../parallel/concrt/parallel-containers-and-objects.md)   \n [Task Parallelism](../../parallel/concrt/task-parallelism-concurrency-runtime.md)   \n [concurrent_vector Class](../../parallel/concrt/reference/concurrent-vector-class.md)   \n [concurrent_queue Class](../../parallel/concrt/reference/concurrent-queue-class.md)   \n [parallel_invoke Function](reference/concurrency-namespace-functions.md#parallel_invoke)   \n [parallel_for Function](reference/concurrency-namespace-functions.md#parallel_for)   \n [task_group Class](reference/task-group-class.md)\n"}