{"nodes":[{"pos":[12,54],"content":"What Is a CArchive Object | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"What Is a CArchive Object | Microsoft Docs","pos":[0,42]}]},{"content":"What Is a CArchive Object","pos":[770,795]},{"content":"A <ph id=\"ph1\">`CArchive`</ph> object provides a type-safe buffering mechanism for writing or reading serializable objects to or from a <ph id=\"ph2\">`CFile`</ph> object.","pos":[796,929],"source":"A `CArchive` object provides a type-safe buffering mechanism for writing or reading serializable objects to or from a `CFile` object."},{"content":"Usually the <ph id=\"ph1\">`CFile`</ph> object represents a disk file; however, it can also be a memory file (<ph id=\"ph2\">`CSharedFile`</ph> object), perhaps representing the Clipboard.","pos":[930,1078],"source":" Usually the `CFile` object represents a disk file; however, it can also be a memory file (`CSharedFile` object), perhaps representing the Clipboard."},{"content":"A given <ph id=\"ph1\">`CArchive`</ph> object either stores (writes, serializes) data or loads (reads, deserializes) data, but never both.","pos":[1085,1203],"source":"A given `CArchive` object either stores (writes, serializes) data or loads (reads, deserializes) data, but never both."},{"content":"The life of a <ph id=\"ph1\">`CArchive`</ph> object is limited to one pass through writing objects to a file or reading objects from a file.","pos":[1204,1324],"source":" The life of a `CArchive` object is limited to one pass through writing objects to a file or reading objects from a file."},{"content":"Thus, two successively created <ph id=\"ph1\">`CArchive`</ph> objects are required to serialize data to a file and then deserialize it back from the file.","pos":[1325,1459],"source":" Thus, two successively created `CArchive` objects are required to serialize data to a file and then deserialize it back from the file."},{"content":"When an archive stores objects to a file, the archive attaches the <ph id=\"ph1\">`CRuntimeClass`</ph> name to the objects.","pos":[1466,1569],"source":"When an archive stores objects to a file, the archive attaches the `CRuntimeClass` name to the objects."},{"content":"Then, when another archive loads objects from a file to memory, the <ph id=\"ph1\">`CObject`</ph>-derived objects are dynamically reconstructed based on the <ph id=\"ph2\">`CRuntimeClass`</ph> of the objects.","pos":[1570,1738],"source":" Then, when another archive loads objects from a file to memory, the `CObject`-derived objects are dynamically reconstructed based on the `CRuntimeClass` of the objects."},{"content":"A given object may be referenced more than once as it is written to the file by the storing archive.","pos":[1739,1839]},{"content":"The loading archive, however, will reconstruct the object only once.","pos":[1840,1908]},{"content":"The details about how an archive attaches <ph id=\"ph1\">`CRuntimeClass`</ph> information to objects and reconstructs objects, taking into account possible multiple references, are described in <bpt id=\"p1\">[</bpt>Technical Note 2<ept id=\"p1\">](../mfc/tn002-persistent-object-data-format.md)</ept>.","pos":[1909,2149],"source":" The details about how an archive attaches `CRuntimeClass` information to objects and reconstructs objects, taking into account possible multiple references, are described in [Technical Note 2](../mfc/tn002-persistent-object-data-format.md)."},{"content":"As data is serialized to an archive, the archive accumulates the data until its buffer is full.","pos":[2156,2251]},{"content":"Then the archive writes its buffer to the <ph id=\"ph1\">`CFile`</ph> object pointed to by the <ph id=\"ph2\">`CArchive`</ph> object.","pos":[2252,2345],"source":" Then the archive writes its buffer to the `CFile` object pointed to by the `CArchive` object."},{"content":"Similarly, as you read data from an archive, it reads data from the file to its buffer and then from the buffer to your deserialized object.","pos":[2346,2486]},{"content":"This buffering reduces the number of times a hard disk is physically read, thus improving your application's performance.","pos":[2487,2608]},{"content":"See Also","pos":[2617,2625]},{"content":"Serialization: Serializing an Object","pos":[2630,2666]}],"content":"---\ntitle: \"What Is a CArchive Object | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"11/04/2016\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"devlang-cpp\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nf1_keywords: \n  - \"CArchive\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"archive objects [C++]\"\n  - \"archives [C++], for serialization\"\n  - \"buffers, serializable objects\"\n  - \"CArchive class, about CArchive class\"\n  - \"buffering, serializable objects\"\nms.assetid: 843f1825-288d-4d89-a1fa-70e1f92d9b8b\ncaps.latest.revision: 9\nauthor: \"mikeblome\"\nms.author: \"mblome\"\nmanager: \"ghogen\"\ntranslation.priority.ht: \n  - \"cs-cz\"\n  - \"de-de\"\n  - \"es-es\"\n  - \"fr-fr\"\n  - \"it-it\"\n  - \"ja-jp\"\n  - \"ko-kr\"\n  - \"pl-pl\"\n  - \"pt-br\"\n  - \"ru-ru\"\n  - \"tr-tr\"\n  - \"zh-cn\"\n  - \"zh-tw\"\n---\n# What Is a CArchive Object\nA `CArchive` object provides a type-safe buffering mechanism for writing or reading serializable objects to or from a `CFile` object. Usually the `CFile` object represents a disk file; however, it can also be a memory file (`CSharedFile` object), perhaps representing the Clipboard.  \n  \n A given `CArchive` object either stores (writes, serializes) data or loads (reads, deserializes) data, but never both. The life of a `CArchive` object is limited to one pass through writing objects to a file or reading objects from a file. Thus, two successively created `CArchive` objects are required to serialize data to a file and then deserialize it back from the file.  \n  \n When an archive stores objects to a file, the archive attaches the `CRuntimeClass` name to the objects. Then, when another archive loads objects from a file to memory, the `CObject`-derived objects are dynamically reconstructed based on the `CRuntimeClass` of the objects. A given object may be referenced more than once as it is written to the file by the storing archive. The loading archive, however, will reconstruct the object only once. The details about how an archive attaches `CRuntimeClass` information to objects and reconstructs objects, taking into account possible multiple references, are described in [Technical Note 2](../mfc/tn002-persistent-object-data-format.md).  \n  \n As data is serialized to an archive, the archive accumulates the data until its buffer is full. Then the archive writes its buffer to the `CFile` object pointed to by the `CArchive` object. Similarly, as you read data from an archive, it reads data from the file to its buffer and then from the buffer to your deserialized object. This buffering reduces the number of times a hard disk is physically read, thus improving your application's performance.  \n  \n## See Also  \n [Serialization: Serializing an Object](../mfc/serialization-serializing-an-object.md)\n\n"}